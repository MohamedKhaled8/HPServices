(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function RT(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var uv={exports:{}},Fc={},dv={exports:{}},ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var go=Symbol.for("react.element"),jT=Symbol.for("react.portal"),bT=Symbol.for("react.fragment"),DT=Symbol.for("react.strict_mode"),VT=Symbol.for("react.profiler"),OT=Symbol.for("react.provider"),LT=Symbol.for("react.context"),MT=Symbol.for("react.forward_ref"),FT=Symbol.for("react.suspense"),UT=Symbol.for("react.memo"),zT=Symbol.for("react.lazy"),_m=Symbol.iterator;function BT(t){return t===null||typeof t!="object"?null:(t=_m&&t[_m]||t["@@iterator"],typeof t=="function"?t:null)}var hv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},fv=Object.assign,pv={};function Di(t,e,n){this.props=t,this.context=e,this.refs=pv,this.updater=n||hv}Di.prototype.isReactComponent={};Di.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Di.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function mv(){}mv.prototype=Di.prototype;function Hh(t,e,n){this.props=t,this.context=e,this.refs=pv,this.updater=n||hv}var Gh=Hh.prototype=new mv;Gh.constructor=Hh;fv(Gh,Di.prototype);Gh.isPureReactComponent=!0;var wm=Array.isArray,gv=Object.prototype.hasOwnProperty,Kh={current:null},yv={key:!0,ref:!0,__self:!0,__source:!0};function vv(t,e,n){var r,s={},i=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)gv.call(e,r)&&!yv.hasOwnProperty(r)&&(s[r]=e[r]);var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){for(var u=Array(c),d=0;d<c;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)s[r]===void 0&&(s[r]=c[r]);return{$$typeof:go,type:t,key:i,ref:a,props:s,_owner:Kh.current}}function $T(t,e){return{$$typeof:go,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Qh(t){return typeof t=="object"&&t!==null&&t.$$typeof===go}function qT(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Em=/\/+/g;function Fu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?qT(""+t.key):e.toString(36)}function Sl(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case go:case jT:a=!0}}if(a)return a=t,s=s(a),t=r===""?"."+Fu(a,0):r,wm(s)?(n="",t!=null&&(n=t.replace(Em,"$&/")+"/"),Sl(s,e,n,"",function(d){return d})):s!=null&&(Qh(s)&&(s=$T(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Em,"$&/")+"/")+t)),e.push(s)),1;if(a=0,r=r===""?".":r+":",wm(t))for(var c=0;c<t.length;c++){i=t[c];var u=r+Fu(i,c);a+=Sl(i,e,n,u,s)}else if(u=BT(t),typeof u=="function")for(t=u.call(t),c=0;!(i=t.next()).done;)i=i.value,u=r+Fu(i,c++),a+=Sl(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function nl(t,e,n){if(t==null)return t;var r=[],s=0;return Sl(t,r,"","",function(i){return e.call(n,i,s++)}),r}function WT(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Nt={current:null},Nl={transition:null},HT={ReactCurrentDispatcher:Nt,ReactCurrentBatchConfig:Nl,ReactCurrentOwner:Kh};function _v(){throw Error("act(...) is not supported in production builds of React.")}ce.Children={map:nl,forEach:function(t,e,n){nl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return nl(t,function(){e++}),e},toArray:function(t){return nl(t,function(e){return e})||[]},only:function(t){if(!Qh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ce.Component=Di;ce.Fragment=bT;ce.Profiler=VT;ce.PureComponent=Hh;ce.StrictMode=DT;ce.Suspense=FT;ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=HT;ce.act=_v;ce.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=fv({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=Kh.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in e)gv.call(e,u)&&!yv.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&c!==void 0?c[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){c=Array(u);for(var d=0;d<u;d++)c[d]=arguments[d+2];r.children=c}return{$$typeof:go,type:t.type,key:s,ref:i,props:r,_owner:a}};ce.createContext=function(t){return t={$$typeof:LT,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:OT,_context:t},t.Consumer=t};ce.createElement=vv;ce.createFactory=function(t){var e=vv.bind(null,t);return e.type=t,e};ce.createRef=function(){return{current:null}};ce.forwardRef=function(t){return{$$typeof:MT,render:t}};ce.isValidElement=Qh;ce.lazy=function(t){return{$$typeof:zT,_payload:{_status:-1,_result:t},_init:WT}};ce.memo=function(t,e){return{$$typeof:UT,type:t,compare:e===void 0?null:e}};ce.startTransition=function(t){var e=Nl.transition;Nl.transition={};try{t()}finally{Nl.transition=e}};ce.unstable_act=_v;ce.useCallback=function(t,e){return Nt.current.useCallback(t,e)};ce.useContext=function(t){return Nt.current.useContext(t)};ce.useDebugValue=function(){};ce.useDeferredValue=function(t){return Nt.current.useDeferredValue(t)};ce.useEffect=function(t,e){return Nt.current.useEffect(t,e)};ce.useId=function(){return Nt.current.useId()};ce.useImperativeHandle=function(t,e,n){return Nt.current.useImperativeHandle(t,e,n)};ce.useInsertionEffect=function(t,e){return Nt.current.useInsertionEffect(t,e)};ce.useLayoutEffect=function(t,e){return Nt.current.useLayoutEffect(t,e)};ce.useMemo=function(t,e){return Nt.current.useMemo(t,e)};ce.useReducer=function(t,e,n){return Nt.current.useReducer(t,e,n)};ce.useRef=function(t){return Nt.current.useRef(t)};ce.useState=function(t){return Nt.current.useState(t)};ce.useSyncExternalStore=function(t,e,n){return Nt.current.useSyncExternalStore(t,e,n)};ce.useTransition=function(){return Nt.current.useTransition()};ce.version="18.3.1";dv.exports=ce;var $=dv.exports;const GT=RT($);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KT=$,QT=Symbol.for("react.element"),YT=Symbol.for("react.fragment"),JT=Object.prototype.hasOwnProperty,XT=KT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ZT={key:!0,ref:!0,__self:!0,__source:!0};function wv(t,e,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)JT.call(e,r)&&!ZT.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:QT,type:t,key:i,ref:a,props:s,_owner:XT.current}}Fc.Fragment=YT;Fc.jsx=wv;Fc.jsxs=wv;uv.exports=Fc;var l=uv.exports,Id={},Ev={exports:{}},Bt={},Tv={exports:{}},Iv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(G,B){var ee=G.length;G.push(B);e:for(;0<ee;){var _e=ee-1>>>1,k=G[_e];if(0<s(k,B))G[_e]=B,G[ee]=k,ee=_e;else break e}}function n(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var B=G[0],ee=G.pop();if(ee!==B){G[0]=ee;e:for(var _e=0,k=G.length,q=k>>>1;_e<q;){var Z=2*(_e+1)-1,se=G[Z],me=Z+1,K=G[me];if(0>s(se,ee))me<k&&0>s(K,se)?(G[_e]=K,G[me]=ee,_e=me):(G[_e]=se,G[Z]=ee,_e=Z);else if(me<k&&0>s(K,ee))G[_e]=K,G[me]=ee,_e=me;else break e}}return B}function s(G,B){var ee=G.sortIndex-B.sortIndex;return ee!==0?ee:G.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,c=a.now();t.unstable_now=function(){return a.now()-c}}var u=[],d=[],p=1,m=null,g=3,_=!1,P=!1,R=!1,L=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(G){for(var B=n(d);B!==null;){if(B.callback===null)r(d);else if(B.startTime<=G)r(d),B.sortIndex=B.expirationTime,e(u,B);else break;B=n(d)}}function O(G){if(R=!1,E(G),!P)if(n(u)!==null)P=!0,Be(b);else{var B=n(d);B!==null&&qt(O,B.startTime-G)}}function b(G,B){P=!1,R&&(R=!1,N(y),y=-1),_=!0;var ee=g;try{for(E(B),m=n(u);m!==null&&(!(m.expirationTime>B)||G&&!A());){var _e=m.callback;if(typeof _e=="function"){m.callback=null,g=m.priorityLevel;var k=_e(m.expirationTime<=B);B=t.unstable_now(),typeof k=="function"?m.callback=k:m===n(u)&&r(u),E(B)}else r(u);m=n(u)}if(m!==null)var q=!0;else{var Z=n(d);Z!==null&&qt(O,Z.startTime-B),q=!1}return q}finally{m=null,g=ee,_=!1}}var U=!1,w=null,y=-1,I=5,S=-1;function A(){return!(t.unstable_now()-S<I)}function j(){if(w!==null){var G=t.unstable_now();S=G;var B=!0;try{B=w(!0,G)}finally{B?C():(U=!1,w=null)}}else U=!1}var C;if(typeof x=="function")C=function(){x(j)};else if(typeof MessageChannel<"u"){var ae=new MessageChannel,Xe=ae.port2;ae.port1.onmessage=j,C=function(){Xe.postMessage(null)}}else C=function(){L(j,0)};function Be(G){w=G,U||(U=!0,C())}function qt(G,B){y=L(function(){G(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_continueExecution=function(){P||_||(P=!0,Be(b))},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(G){switch(g){case 1:case 2:case 3:var B=3;break;default:B=g}var ee=g;g=B;try{return G()}finally{g=ee}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(G,B){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var ee=g;g=G;try{return B()}finally{g=ee}},t.unstable_scheduleCallback=function(G,B,ee){var _e=t.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?_e+ee:_e):ee=_e,G){case 1:var k=-1;break;case 2:k=250;break;case 5:k=1073741823;break;case 4:k=1e4;break;default:k=5e3}return k=ee+k,G={id:p++,callback:B,priorityLevel:G,startTime:ee,expirationTime:k,sortIndex:-1},ee>_e?(G.sortIndex=ee,e(d,G),n(u)===null&&G===n(d)&&(R?(N(y),y=-1):R=!0,qt(O,ee-_e))):(G.sortIndex=k,e(u,G),P||_||(P=!0,Be(b))),G},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(G){var B=g;return function(){var ee=g;g=B;try{return G.apply(this,arguments)}finally{g=ee}}}})(Iv);Tv.exports=Iv;var e1=Tv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t1=$,zt=e1;function z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var xv=new Set,Ba={};function ks(t,e){vi(t,e),vi(t+"Capture",e)}function vi(t,e){for(Ba[t]=e,t=0;t<e.length;t++)xv.add(e[t])}var Wn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xd=Object.prototype.hasOwnProperty,n1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Tm={},Im={};function r1(t){return xd.call(Im,t)?!0:xd.call(Tm,t)?!1:n1.test(t)?Im[t]=!0:(Tm[t]=!0,!1)}function s1(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function i1(t,e,n,r){if(e===null||typeof e>"u"||s1(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ct(t,e,n,r,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var ct={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ct[t]=new Ct(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ct[e]=new Ct(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ct[t]=new Ct(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ct[t]=new Ct(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ct[t]=new Ct(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ct[t]=new Ct(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ct[t]=new Ct(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ct[t]=new Ct(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ct[t]=new Ct(t,5,!1,t.toLowerCase(),null,!1,!1)});var Yh=/[\-:]([a-z])/g;function Jh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Yh,Jh);ct[e]=new Ct(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Yh,Jh);ct[e]=new Ct(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Yh,Jh);ct[e]=new Ct(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ct[t]=new Ct(t,1,!1,t.toLowerCase(),null,!1,!1)});ct.xlinkHref=new Ct("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ct[t]=new Ct(t,1,!1,t.toLowerCase(),null,!0,!0)});function Xh(t,e,n,r){var s=ct.hasOwnProperty(e)?ct[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(i1(e,n,s,r)&&(n=null),r||s===null?r1(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Zn=t1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,rl=Symbol.for("react.element"),Gs=Symbol.for("react.portal"),Ks=Symbol.for("react.fragment"),Zh=Symbol.for("react.strict_mode"),Sd=Symbol.for("react.profiler"),Sv=Symbol.for("react.provider"),Nv=Symbol.for("react.context"),ef=Symbol.for("react.forward_ref"),Nd=Symbol.for("react.suspense"),Cd=Symbol.for("react.suspense_list"),tf=Symbol.for("react.memo"),dr=Symbol.for("react.lazy"),Cv=Symbol.for("react.offscreen"),xm=Symbol.iterator;function oa(t){return t===null||typeof t!="object"?null:(t=xm&&t[xm]||t["@@iterator"],typeof t=="function"?t:null)}var De=Object.assign,Uu;function ga(t){if(Uu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Uu=e&&e[1]||""}return`
`+Uu+t}var zu=!1;function Bu(t,e){if(!t||zu)return"";zu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,c=i.length-1;1<=a&&0<=c&&s[a]!==i[c];)c--;for(;1<=a&&0<=c;a--,c--)if(s[a]!==i[c]){if(a!==1||c!==1)do if(a--,c--,0>c||s[a]!==i[c]){var u=`
`+s[a].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=a&&0<=c);break}}}finally{zu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ga(t):""}function a1(t){switch(t.tag){case 5:return ga(t.type);case 16:return ga("Lazy");case 13:return ga("Suspense");case 19:return ga("SuspenseList");case 0:case 2:case 15:return t=Bu(t.type,!1),t;case 11:return t=Bu(t.type.render,!1),t;case 1:return t=Bu(t.type,!0),t;default:return""}}function Ad(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ks:return"Fragment";case Gs:return"Portal";case Sd:return"Profiler";case Zh:return"StrictMode";case Nd:return"Suspense";case Cd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Nv:return(t.displayName||"Context")+".Consumer";case Sv:return(t._context.displayName||"Context")+".Provider";case ef:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case tf:return e=t.displayName||null,e!==null?e:Ad(t.type)||"Memo";case dr:e=t._payload,t=t._init;try{return Ad(t(e))}catch{}}return null}function o1(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ad(e);case 8:return e===Zh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Vr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Av(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function l1(t){var e=Av(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function sl(t){t._valueTracker||(t._valueTracker=l1(t))}function kv(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Av(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Gl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function kd(t,e){var n=e.checked;return De({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Sm(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Vr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Pv(t,e){e=e.checked,e!=null&&Xh(t,"checked",e,!1)}function Pd(t,e){Pv(t,e);var n=Vr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Rd(t,e.type,n):e.hasOwnProperty("defaultValue")&&Rd(t,e.type,Vr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Nm(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Rd(t,e,n){(e!=="number"||Gl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ya=Array.isArray;function ai(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Vr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function jd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(z(91));return De({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Cm(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(z(92));if(ya(n)){if(1<n.length)throw Error(z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Vr(n)}}function Rv(t,e){var n=Vr(e.value),r=Vr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Am(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function jv(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function bd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?jv(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var il,bv=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(il=il||document.createElement("div"),il.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=il.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function $a(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ca={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},c1=["Webkit","ms","Moz","O"];Object.keys(Ca).forEach(function(t){c1.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ca[e]=Ca[t]})});function Dv(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ca.hasOwnProperty(t)&&Ca[t]?(""+e).trim():e+"px"}function Vv(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Dv(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var u1=De({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Dd(t,e){if(e){if(u1[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(z(62))}}function Vd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Od=null;function nf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ld=null,oi=null,li=null;function km(t){if(t=_o(t)){if(typeof Ld!="function")throw Error(z(280));var e=t.stateNode;e&&(e=qc(e),Ld(t.stateNode,t.type,e))}}function Ov(t){oi?li?li.push(t):li=[t]:oi=t}function Lv(){if(oi){var t=oi,e=li;if(li=oi=null,km(t),e)for(t=0;t<e.length;t++)km(e[t])}}function Mv(t,e){return t(e)}function Fv(){}var $u=!1;function Uv(t,e,n){if($u)return t(e,n);$u=!0;try{return Mv(t,e,n)}finally{$u=!1,(oi!==null||li!==null)&&(Fv(),Lv())}}function qa(t,e){var n=t.stateNode;if(n===null)return null;var r=qc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(z(231,e,typeof n));return n}var Md=!1;if(Wn)try{var la={};Object.defineProperty(la,"passive",{get:function(){Md=!0}}),window.addEventListener("test",la,la),window.removeEventListener("test",la,la)}catch{Md=!1}function d1(t,e,n,r,s,i,a,c,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(p){this.onError(p)}}var Aa=!1,Kl=null,Ql=!1,Fd=null,h1={onError:function(t){Aa=!0,Kl=t}};function f1(t,e,n,r,s,i,a,c,u){Aa=!1,Kl=null,d1.apply(h1,arguments)}function p1(t,e,n,r,s,i,a,c,u){if(f1.apply(this,arguments),Aa){if(Aa){var d=Kl;Aa=!1,Kl=null}else throw Error(z(198));Ql||(Ql=!0,Fd=d)}}function Ps(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function zv(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Pm(t){if(Ps(t)!==t)throw Error(z(188))}function m1(t){var e=t.alternate;if(!e){if(e=Ps(t),e===null)throw Error(z(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Pm(s),t;if(i===r)return Pm(s),e;i=i.sibling}throw Error(z(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,c=s.child;c;){if(c===n){a=!0,n=s,r=i;break}if(c===r){a=!0,r=s,n=i;break}c=c.sibling}if(!a){for(c=i.child;c;){if(c===n){a=!0,n=i,r=s;break}if(c===r){a=!0,r=i,n=s;break}c=c.sibling}if(!a)throw Error(z(189))}}if(n.alternate!==r)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?t:e}function Bv(t){return t=m1(t),t!==null?$v(t):null}function $v(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=$v(t);if(e!==null)return e;t=t.sibling}return null}var qv=zt.unstable_scheduleCallback,Rm=zt.unstable_cancelCallback,g1=zt.unstable_shouldYield,y1=zt.unstable_requestPaint,Fe=zt.unstable_now,v1=zt.unstable_getCurrentPriorityLevel,rf=zt.unstable_ImmediatePriority,Wv=zt.unstable_UserBlockingPriority,Yl=zt.unstable_NormalPriority,_1=zt.unstable_LowPriority,Hv=zt.unstable_IdlePriority,Uc=null,In=null;function w1(t){if(In&&typeof In.onCommitFiberRoot=="function")try{In.onCommitFiberRoot(Uc,t,void 0,(t.current.flags&128)===128)}catch{}}var un=Math.clz32?Math.clz32:I1,E1=Math.log,T1=Math.LN2;function I1(t){return t>>>=0,t===0?32:31-(E1(t)/T1|0)|0}var al=64,ol=4194304;function va(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Jl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,a=n&268435455;if(a!==0){var c=a&~s;c!==0?r=va(c):(i&=a,i!==0&&(r=va(i)))}else a=n&~s,a!==0?r=va(a):i!==0&&(r=va(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-un(e),s=1<<n,r|=t[n],e&=~s;return r}function x1(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function S1(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-un(i),c=1<<a,u=s[a];u===-1?(!(c&n)||c&r)&&(s[a]=x1(c,e)):u<=e&&(t.expiredLanes|=c),i&=~c}}function Ud(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Gv(){var t=al;return al<<=1,!(al&4194240)&&(al=64),t}function qu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function yo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-un(e),t[e]=n}function N1(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-un(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function sf(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-un(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Ie=0;function Kv(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Qv,af,Yv,Jv,Xv,zd=!1,ll=[],Tr=null,Ir=null,xr=null,Wa=new Map,Ha=new Map,fr=[],C1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function jm(t,e){switch(t){case"focusin":case"focusout":Tr=null;break;case"dragenter":case"dragleave":Ir=null;break;case"mouseover":case"mouseout":xr=null;break;case"pointerover":case"pointerout":Wa.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ha.delete(e.pointerId)}}function ca(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=_o(e),e!==null&&af(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function A1(t,e,n,r,s){switch(e){case"focusin":return Tr=ca(Tr,t,e,n,r,s),!0;case"dragenter":return Ir=ca(Ir,t,e,n,r,s),!0;case"mouseover":return xr=ca(xr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Wa.set(i,ca(Wa.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Ha.set(i,ca(Ha.get(i)||null,t,e,n,r,s)),!0}return!1}function Zv(t){var e=cs(t.target);if(e!==null){var n=Ps(e);if(n!==null){if(e=n.tag,e===13){if(e=zv(n),e!==null){t.blockedOn=e,Xv(t.priority,function(){Yv(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Cl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Bd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Od=r,n.target.dispatchEvent(r),Od=null}else return e=_o(n),e!==null&&af(e),t.blockedOn=n,!1;e.shift()}return!0}function bm(t,e,n){Cl(t)&&n.delete(e)}function k1(){zd=!1,Tr!==null&&Cl(Tr)&&(Tr=null),Ir!==null&&Cl(Ir)&&(Ir=null),xr!==null&&Cl(xr)&&(xr=null),Wa.forEach(bm),Ha.forEach(bm)}function ua(t,e){t.blockedOn===e&&(t.blockedOn=null,zd||(zd=!0,zt.unstable_scheduleCallback(zt.unstable_NormalPriority,k1)))}function Ga(t){function e(s){return ua(s,t)}if(0<ll.length){ua(ll[0],t);for(var n=1;n<ll.length;n++){var r=ll[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Tr!==null&&ua(Tr,t),Ir!==null&&ua(Ir,t),xr!==null&&ua(xr,t),Wa.forEach(e),Ha.forEach(e),n=0;n<fr.length;n++)r=fr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<fr.length&&(n=fr[0],n.blockedOn===null);)Zv(n),n.blockedOn===null&&fr.shift()}var ci=Zn.ReactCurrentBatchConfig,Xl=!0;function P1(t,e,n,r){var s=Ie,i=ci.transition;ci.transition=null;try{Ie=1,of(t,e,n,r)}finally{Ie=s,ci.transition=i}}function R1(t,e,n,r){var s=Ie,i=ci.transition;ci.transition=null;try{Ie=4,of(t,e,n,r)}finally{Ie=s,ci.transition=i}}function of(t,e,n,r){if(Xl){var s=Bd(t,e,n,r);if(s===null)ed(t,e,r,Zl,n),jm(t,r);else if(A1(s,t,e,n,r))r.stopPropagation();else if(jm(t,r),e&4&&-1<C1.indexOf(t)){for(;s!==null;){var i=_o(s);if(i!==null&&Qv(i),i=Bd(t,e,n,r),i===null&&ed(t,e,r,Zl,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else ed(t,e,r,null,n)}}var Zl=null;function Bd(t,e,n,r){if(Zl=null,t=nf(r),t=cs(t),t!==null)if(e=Ps(t),e===null)t=null;else if(n=e.tag,n===13){if(t=zv(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Zl=t,null}function e_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(v1()){case rf:return 1;case Wv:return 4;case Yl:case _1:return 16;case Hv:return 536870912;default:return 16}default:return 16}}var _r=null,lf=null,Al=null;function t_(){if(Al)return Al;var t,e=lf,n=e.length,r,s="value"in _r?_r.value:_r.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===s[i-r];r++);return Al=s.slice(t,1<r?1-r:void 0)}function kl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function cl(){return!0}function Dm(){return!1}function $t(t){function e(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(i):i[c]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?cl:Dm,this.isPropagationStopped=Dm,this}return De(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=cl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=cl)},persist:function(){},isPersistent:cl}),e}var Vi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cf=$t(Vi),vo=De({},Vi,{view:0,detail:0}),j1=$t(vo),Wu,Hu,da,zc=De({},vo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:uf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==da&&(da&&t.type==="mousemove"?(Wu=t.screenX-da.screenX,Hu=t.screenY-da.screenY):Hu=Wu=0,da=t),Wu)},movementY:function(t){return"movementY"in t?t.movementY:Hu}}),Vm=$t(zc),b1=De({},zc,{dataTransfer:0}),D1=$t(b1),V1=De({},vo,{relatedTarget:0}),Gu=$t(V1),O1=De({},Vi,{animationName:0,elapsedTime:0,pseudoElement:0}),L1=$t(O1),M1=De({},Vi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),F1=$t(M1),U1=De({},Vi,{data:0}),Om=$t(U1),z1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},B1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function q1(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=$1[t])?!!e[t]:!1}function uf(){return q1}var W1=De({},vo,{key:function(t){if(t.key){var e=z1[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=kl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?B1[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:uf,charCode:function(t){return t.type==="keypress"?kl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?kl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),H1=$t(W1),G1=De({},zc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Lm=$t(G1),K1=De({},vo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:uf}),Q1=$t(K1),Y1=De({},Vi,{propertyName:0,elapsedTime:0,pseudoElement:0}),J1=$t(Y1),X1=De({},zc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Z1=$t(X1),eI=[9,13,27,32],df=Wn&&"CompositionEvent"in window,ka=null;Wn&&"documentMode"in document&&(ka=document.documentMode);var tI=Wn&&"TextEvent"in window&&!ka,n_=Wn&&(!df||ka&&8<ka&&11>=ka),Mm=" ",Fm=!1;function r_(t,e){switch(t){case"keyup":return eI.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function s_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Qs=!1;function nI(t,e){switch(t){case"compositionend":return s_(e);case"keypress":return e.which!==32?null:(Fm=!0,Mm);case"textInput":return t=e.data,t===Mm&&Fm?null:t;default:return null}}function rI(t,e){if(Qs)return t==="compositionend"||!df&&r_(t,e)?(t=t_(),Al=lf=_r=null,Qs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return n_&&e.locale!=="ko"?null:e.data;default:return null}}var sI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Um(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!sI[t.type]:e==="textarea"}function i_(t,e,n,r){Ov(r),e=ec(e,"onChange"),0<e.length&&(n=new cf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Pa=null,Ka=null;function iI(t){g_(t,0)}function Bc(t){var e=Xs(t);if(kv(e))return t}function aI(t,e){if(t==="change")return e}var a_=!1;if(Wn){var Ku;if(Wn){var Qu="oninput"in document;if(!Qu){var zm=document.createElement("div");zm.setAttribute("oninput","return;"),Qu=typeof zm.oninput=="function"}Ku=Qu}else Ku=!1;a_=Ku&&(!document.documentMode||9<document.documentMode)}function Bm(){Pa&&(Pa.detachEvent("onpropertychange",o_),Ka=Pa=null)}function o_(t){if(t.propertyName==="value"&&Bc(Ka)){var e=[];i_(e,Ka,t,nf(t)),Uv(iI,e)}}function oI(t,e,n){t==="focusin"?(Bm(),Pa=e,Ka=n,Pa.attachEvent("onpropertychange",o_)):t==="focusout"&&Bm()}function lI(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Bc(Ka)}function cI(t,e){if(t==="click")return Bc(e)}function uI(t,e){if(t==="input"||t==="change")return Bc(e)}function dI(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var fn=typeof Object.is=="function"?Object.is:dI;function Qa(t,e){if(fn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!xd.call(e,s)||!fn(t[s],e[s]))return!1}return!0}function $m(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function qm(t,e){var n=$m(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=$m(n)}}function l_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?l_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function c_(){for(var t=window,e=Gl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Gl(t.document)}return e}function hf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function hI(t){var e=c_(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&l_(n.ownerDocument.documentElement,n)){if(r!==null&&hf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=qm(n,i);var a=qm(n,r);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var fI=Wn&&"documentMode"in document&&11>=document.documentMode,Ys=null,$d=null,Ra=null,qd=!1;function Wm(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;qd||Ys==null||Ys!==Gl(r)||(r=Ys,"selectionStart"in r&&hf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ra&&Qa(Ra,r)||(Ra=r,r=ec($d,"onSelect"),0<r.length&&(e=new cf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ys)))}function ul(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Js={animationend:ul("Animation","AnimationEnd"),animationiteration:ul("Animation","AnimationIteration"),animationstart:ul("Animation","AnimationStart"),transitionend:ul("Transition","TransitionEnd")},Yu={},u_={};Wn&&(u_=document.createElement("div").style,"AnimationEvent"in window||(delete Js.animationend.animation,delete Js.animationiteration.animation,delete Js.animationstart.animation),"TransitionEvent"in window||delete Js.transitionend.transition);function $c(t){if(Yu[t])return Yu[t];if(!Js[t])return t;var e=Js[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in u_)return Yu[t]=e[n];return t}var d_=$c("animationend"),h_=$c("animationiteration"),f_=$c("animationstart"),p_=$c("transitionend"),m_=new Map,Hm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function $r(t,e){m_.set(t,e),ks(e,[t])}for(var Ju=0;Ju<Hm.length;Ju++){var Xu=Hm[Ju],pI=Xu.toLowerCase(),mI=Xu[0].toUpperCase()+Xu.slice(1);$r(pI,"on"+mI)}$r(d_,"onAnimationEnd");$r(h_,"onAnimationIteration");$r(f_,"onAnimationStart");$r("dblclick","onDoubleClick");$r("focusin","onFocus");$r("focusout","onBlur");$r(p_,"onTransitionEnd");vi("onMouseEnter",["mouseout","mouseover"]);vi("onMouseLeave",["mouseout","mouseover"]);vi("onPointerEnter",["pointerout","pointerover"]);vi("onPointerLeave",["pointerout","pointerover"]);ks("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ks("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ks("onBeforeInput",["compositionend","keypress","textInput","paste"]);ks("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ks("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ks("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _a="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gI=new Set("cancel close invalid load scroll toggle".split(" ").concat(_a));function Gm(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,p1(r,e,void 0,t),t.currentTarget=null}function g_(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var c=r[a],u=c.instance,d=c.currentTarget;if(c=c.listener,u!==i&&s.isPropagationStopped())break e;Gm(s,c,d),i=u}else for(a=0;a<r.length;a++){if(c=r[a],u=c.instance,d=c.currentTarget,c=c.listener,u!==i&&s.isPropagationStopped())break e;Gm(s,c,d),i=u}}}if(Ql)throw t=Fd,Ql=!1,Fd=null,t}function Ae(t,e){var n=e[Qd];n===void 0&&(n=e[Qd]=new Set);var r=t+"__bubble";n.has(r)||(y_(e,t,2,!1),n.add(r))}function Zu(t,e,n){var r=0;e&&(r|=4),y_(n,t,r,e)}var dl="_reactListening"+Math.random().toString(36).slice(2);function Ya(t){if(!t[dl]){t[dl]=!0,xv.forEach(function(n){n!=="selectionchange"&&(gI.has(n)||Zu(n,!1,t),Zu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[dl]||(e[dl]=!0,Zu("selectionchange",!1,e))}}function y_(t,e,n,r){switch(e_(e)){case 1:var s=P1;break;case 4:s=R1;break;default:s=of}n=s.bind(null,e,n,t),s=void 0,!Md||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function ed(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var c=r.stateNode.containerInfo;if(c===s||c.nodeType===8&&c.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;a=a.return}for(;c!==null;){if(a=cs(c),a===null)return;if(u=a.tag,u===5||u===6){r=i=a;continue e}c=c.parentNode}}r=r.return}Uv(function(){var d=i,p=nf(n),m=[];e:{var g=m_.get(t);if(g!==void 0){var _=cf,P=t;switch(t){case"keypress":if(kl(n)===0)break e;case"keydown":case"keyup":_=H1;break;case"focusin":P="focus",_=Gu;break;case"focusout":P="blur",_=Gu;break;case"beforeblur":case"afterblur":_=Gu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=Vm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=D1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=Q1;break;case d_:case h_:case f_:_=L1;break;case p_:_=J1;break;case"scroll":_=j1;break;case"wheel":_=Z1;break;case"copy":case"cut":case"paste":_=F1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=Lm}var R=(e&4)!==0,L=!R&&t==="scroll",N=R?g!==null?g+"Capture":null:g;R=[];for(var x=d,E;x!==null;){E=x;var O=E.stateNode;if(E.tag===5&&O!==null&&(E=O,N!==null&&(O=qa(x,N),O!=null&&R.push(Ja(x,O,E)))),L)break;x=x.return}0<R.length&&(g=new _(g,P,null,n,p),m.push({event:g,listeners:R}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",_=t==="mouseout"||t==="pointerout",g&&n!==Od&&(P=n.relatedTarget||n.fromElement)&&(cs(P)||P[Hn]))break e;if((_||g)&&(g=p.window===p?p:(g=p.ownerDocument)?g.defaultView||g.parentWindow:window,_?(P=n.relatedTarget||n.toElement,_=d,P=P?cs(P):null,P!==null&&(L=Ps(P),P!==L||P.tag!==5&&P.tag!==6)&&(P=null)):(_=null,P=d),_!==P)){if(R=Vm,O="onMouseLeave",N="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(R=Lm,O="onPointerLeave",N="onPointerEnter",x="pointer"),L=_==null?g:Xs(_),E=P==null?g:Xs(P),g=new R(O,x+"leave",_,n,p),g.target=L,g.relatedTarget=E,O=null,cs(p)===d&&(R=new R(N,x+"enter",P,n,p),R.target=E,R.relatedTarget=L,O=R),L=O,_&&P)t:{for(R=_,N=P,x=0,E=R;E;E=Bs(E))x++;for(E=0,O=N;O;O=Bs(O))E++;for(;0<x-E;)R=Bs(R),x--;for(;0<E-x;)N=Bs(N),E--;for(;x--;){if(R===N||N!==null&&R===N.alternate)break t;R=Bs(R),N=Bs(N)}R=null}else R=null;_!==null&&Km(m,g,_,R,!1),P!==null&&L!==null&&Km(m,L,P,R,!0)}}e:{if(g=d?Xs(d):window,_=g.nodeName&&g.nodeName.toLowerCase(),_==="select"||_==="input"&&g.type==="file")var b=aI;else if(Um(g))if(a_)b=uI;else{b=lI;var U=oI}else(_=g.nodeName)&&_.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(b=cI);if(b&&(b=b(t,d))){i_(m,b,n,p);break e}U&&U(t,g,d),t==="focusout"&&(U=g._wrapperState)&&U.controlled&&g.type==="number"&&Rd(g,"number",g.value)}switch(U=d?Xs(d):window,t){case"focusin":(Um(U)||U.contentEditable==="true")&&(Ys=U,$d=d,Ra=null);break;case"focusout":Ra=$d=Ys=null;break;case"mousedown":qd=!0;break;case"contextmenu":case"mouseup":case"dragend":qd=!1,Wm(m,n,p);break;case"selectionchange":if(fI)break;case"keydown":case"keyup":Wm(m,n,p)}var w;if(df)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Qs?r_(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(n_&&n.locale!=="ko"&&(Qs||y!=="onCompositionStart"?y==="onCompositionEnd"&&Qs&&(w=t_()):(_r=p,lf="value"in _r?_r.value:_r.textContent,Qs=!0)),U=ec(d,y),0<U.length&&(y=new Om(y,t,null,n,p),m.push({event:y,listeners:U}),w?y.data=w:(w=s_(n),w!==null&&(y.data=w)))),(w=tI?nI(t,n):rI(t,n))&&(d=ec(d,"onBeforeInput"),0<d.length&&(p=new Om("onBeforeInput","beforeinput",null,n,p),m.push({event:p,listeners:d}),p.data=w))}g_(m,e)})}function Ja(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ec(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=qa(t,n),i!=null&&r.unshift(Ja(t,i,s)),i=qa(t,e),i!=null&&r.push(Ja(t,i,s))),t=t.return}return r}function Bs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Km(t,e,n,r,s){for(var i=e._reactName,a=[];n!==null&&n!==r;){var c=n,u=c.alternate,d=c.stateNode;if(u!==null&&u===r)break;c.tag===5&&d!==null&&(c=d,s?(u=qa(n,i),u!=null&&a.unshift(Ja(n,u,c))):s||(u=qa(n,i),u!=null&&a.push(Ja(n,u,c)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var yI=/\r\n?/g,vI=/\u0000|\uFFFD/g;function Qm(t){return(typeof t=="string"?t:""+t).replace(yI,`
`).replace(vI,"")}function hl(t,e,n){if(e=Qm(e),Qm(t)!==e&&n)throw Error(z(425))}function tc(){}var Wd=null,Hd=null;function Gd(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Kd=typeof setTimeout=="function"?setTimeout:void 0,_I=typeof clearTimeout=="function"?clearTimeout:void 0,Ym=typeof Promise=="function"?Promise:void 0,wI=typeof queueMicrotask=="function"?queueMicrotask:typeof Ym<"u"?function(t){return Ym.resolve(null).then(t).catch(EI)}:Kd;function EI(t){setTimeout(function(){throw t})}function td(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Ga(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ga(e)}function Sr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Jm(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Oi=Math.random().toString(36).slice(2),Tn="__reactFiber$"+Oi,Xa="__reactProps$"+Oi,Hn="__reactContainer$"+Oi,Qd="__reactEvents$"+Oi,TI="__reactListeners$"+Oi,II="__reactHandles$"+Oi;function cs(t){var e=t[Tn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Hn]||n[Tn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Jm(t);t!==null;){if(n=t[Tn])return n;t=Jm(t)}return e}t=n,n=t.parentNode}return null}function _o(t){return t=t[Tn]||t[Hn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Xs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(z(33))}function qc(t){return t[Xa]||null}var Yd=[],Zs=-1;function qr(t){return{current:t}}function Pe(t){0>Zs||(t.current=Yd[Zs],Yd[Zs]=null,Zs--)}function Ne(t,e){Zs++,Yd[Zs]=t.current,t.current=e}var Or={},_t=qr(Or),Dt=qr(!1),ys=Or;function _i(t,e){var n=t.type.contextTypes;if(!n)return Or;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Vt(t){return t=t.childContextTypes,t!=null}function nc(){Pe(Dt),Pe(_t)}function Xm(t,e,n){if(_t.current!==Or)throw Error(z(168));Ne(_t,e),Ne(Dt,n)}function v_(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(z(108,o1(t)||"Unknown",s));return De({},n,r)}function rc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Or,ys=_t.current,Ne(_t,t),Ne(Dt,Dt.current),!0}function Zm(t,e,n){var r=t.stateNode;if(!r)throw Error(z(169));n?(t=v_(t,e,ys),r.__reactInternalMemoizedMergedChildContext=t,Pe(Dt),Pe(_t),Ne(_t,t)):Pe(Dt),Ne(Dt,n)}var On=null,Wc=!1,nd=!1;function __(t){On===null?On=[t]:On.push(t)}function xI(t){Wc=!0,__(t)}function Wr(){if(!nd&&On!==null){nd=!0;var t=0,e=Ie;try{var n=On;for(Ie=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}On=null,Wc=!1}catch(s){throw On!==null&&(On=On.slice(t+1)),qv(rf,Wr),s}finally{Ie=e,nd=!1}}return null}var ei=[],ti=0,sc=null,ic=0,Gt=[],Kt=0,vs=null,Ln=1,Mn="";function as(t,e){ei[ti++]=ic,ei[ti++]=sc,sc=t,ic=e}function w_(t,e,n){Gt[Kt++]=Ln,Gt[Kt++]=Mn,Gt[Kt++]=vs,vs=t;var r=Ln;t=Mn;var s=32-un(r)-1;r&=~(1<<s),n+=1;var i=32-un(e)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,Ln=1<<32-un(e)+s|n<<s|r,Mn=i+t}else Ln=1<<i|n<<s|r,Mn=t}function ff(t){t.return!==null&&(as(t,1),w_(t,1,0))}function pf(t){for(;t===sc;)sc=ei[--ti],ei[ti]=null,ic=ei[--ti],ei[ti]=null;for(;t===vs;)vs=Gt[--Kt],Gt[Kt]=null,Mn=Gt[--Kt],Gt[Kt]=null,Ln=Gt[--Kt],Gt[Kt]=null}var Ut=null,Ft=null,Re=!1,on=null;function E_(t,e){var n=Xt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function eg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ut=t,Ft=Sr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ut=t,Ft=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=vs!==null?{id:Ln,overflow:Mn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Xt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ut=t,Ft=null,!0):!1;default:return!1}}function Jd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Xd(t){if(Re){var e=Ft;if(e){var n=e;if(!eg(t,e)){if(Jd(t))throw Error(z(418));e=Sr(n.nextSibling);var r=Ut;e&&eg(t,e)?E_(r,n):(t.flags=t.flags&-4097|2,Re=!1,Ut=t)}}else{if(Jd(t))throw Error(z(418));t.flags=t.flags&-4097|2,Re=!1,Ut=t}}}function tg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ut=t}function fl(t){if(t!==Ut)return!1;if(!Re)return tg(t),Re=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Gd(t.type,t.memoizedProps)),e&&(e=Ft)){if(Jd(t))throw T_(),Error(z(418));for(;e;)E_(t,e),e=Sr(e.nextSibling)}if(tg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ft=Sr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ft=null}}else Ft=Ut?Sr(t.stateNode.nextSibling):null;return!0}function T_(){for(var t=Ft;t;)t=Sr(t.nextSibling)}function wi(){Ft=Ut=null,Re=!1}function mf(t){on===null?on=[t]:on.push(t)}var SI=Zn.ReactCurrentBatchConfig;function ha(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var r=n.stateNode}if(!r)throw Error(z(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var c=s.refs;a===null?delete c[i]:c[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,t))}return t}function pl(t,e){throw t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ng(t){var e=t._init;return e(t._payload)}function I_(t){function e(N,x){if(t){var E=N.deletions;E===null?(N.deletions=[x],N.flags|=16):E.push(x)}}function n(N,x){if(!t)return null;for(;x!==null;)e(N,x),x=x.sibling;return null}function r(N,x){for(N=new Map;x!==null;)x.key!==null?N.set(x.key,x):N.set(x.index,x),x=x.sibling;return N}function s(N,x){return N=kr(N,x),N.index=0,N.sibling=null,N}function i(N,x,E){return N.index=E,t?(E=N.alternate,E!==null?(E=E.index,E<x?(N.flags|=2,x):E):(N.flags|=2,x)):(N.flags|=1048576,x)}function a(N){return t&&N.alternate===null&&(N.flags|=2),N}function c(N,x,E,O){return x===null||x.tag!==6?(x=cd(E,N.mode,O),x.return=N,x):(x=s(x,E),x.return=N,x)}function u(N,x,E,O){var b=E.type;return b===Ks?p(N,x,E.props.children,O,E.key):x!==null&&(x.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===dr&&ng(b)===x.type)?(O=s(x,E.props),O.ref=ha(N,x,E),O.return=N,O):(O=Ol(E.type,E.key,E.props,null,N.mode,O),O.ref=ha(N,x,E),O.return=N,O)}function d(N,x,E,O){return x===null||x.tag!==4||x.stateNode.containerInfo!==E.containerInfo||x.stateNode.implementation!==E.implementation?(x=ud(E,N.mode,O),x.return=N,x):(x=s(x,E.children||[]),x.return=N,x)}function p(N,x,E,O,b){return x===null||x.tag!==7?(x=ps(E,N.mode,O,b),x.return=N,x):(x=s(x,E),x.return=N,x)}function m(N,x,E){if(typeof x=="string"&&x!==""||typeof x=="number")return x=cd(""+x,N.mode,E),x.return=N,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case rl:return E=Ol(x.type,x.key,x.props,null,N.mode,E),E.ref=ha(N,null,x),E.return=N,E;case Gs:return x=ud(x,N.mode,E),x.return=N,x;case dr:var O=x._init;return m(N,O(x._payload),E)}if(ya(x)||oa(x))return x=ps(x,N.mode,E,null),x.return=N,x;pl(N,x)}return null}function g(N,x,E,O){var b=x!==null?x.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return b!==null?null:c(N,x,""+E,O);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case rl:return E.key===b?u(N,x,E,O):null;case Gs:return E.key===b?d(N,x,E,O):null;case dr:return b=E._init,g(N,x,b(E._payload),O)}if(ya(E)||oa(E))return b!==null?null:p(N,x,E,O,null);pl(N,E)}return null}function _(N,x,E,O,b){if(typeof O=="string"&&O!==""||typeof O=="number")return N=N.get(E)||null,c(x,N,""+O,b);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case rl:return N=N.get(O.key===null?E:O.key)||null,u(x,N,O,b);case Gs:return N=N.get(O.key===null?E:O.key)||null,d(x,N,O,b);case dr:var U=O._init;return _(N,x,E,U(O._payload),b)}if(ya(O)||oa(O))return N=N.get(E)||null,p(x,N,O,b,null);pl(x,O)}return null}function P(N,x,E,O){for(var b=null,U=null,w=x,y=x=0,I=null;w!==null&&y<E.length;y++){w.index>y?(I=w,w=null):I=w.sibling;var S=g(N,w,E[y],O);if(S===null){w===null&&(w=I);break}t&&w&&S.alternate===null&&e(N,w),x=i(S,x,y),U===null?b=S:U.sibling=S,U=S,w=I}if(y===E.length)return n(N,w),Re&&as(N,y),b;if(w===null){for(;y<E.length;y++)w=m(N,E[y],O),w!==null&&(x=i(w,x,y),U===null?b=w:U.sibling=w,U=w);return Re&&as(N,y),b}for(w=r(N,w);y<E.length;y++)I=_(w,N,y,E[y],O),I!==null&&(t&&I.alternate!==null&&w.delete(I.key===null?y:I.key),x=i(I,x,y),U===null?b=I:U.sibling=I,U=I);return t&&w.forEach(function(A){return e(N,A)}),Re&&as(N,y),b}function R(N,x,E,O){var b=oa(E);if(typeof b!="function")throw Error(z(150));if(E=b.call(E),E==null)throw Error(z(151));for(var U=b=null,w=x,y=x=0,I=null,S=E.next();w!==null&&!S.done;y++,S=E.next()){w.index>y?(I=w,w=null):I=w.sibling;var A=g(N,w,S.value,O);if(A===null){w===null&&(w=I);break}t&&w&&A.alternate===null&&e(N,w),x=i(A,x,y),U===null?b=A:U.sibling=A,U=A,w=I}if(S.done)return n(N,w),Re&&as(N,y),b;if(w===null){for(;!S.done;y++,S=E.next())S=m(N,S.value,O),S!==null&&(x=i(S,x,y),U===null?b=S:U.sibling=S,U=S);return Re&&as(N,y),b}for(w=r(N,w);!S.done;y++,S=E.next())S=_(w,N,y,S.value,O),S!==null&&(t&&S.alternate!==null&&w.delete(S.key===null?y:S.key),x=i(S,x,y),U===null?b=S:U.sibling=S,U=S);return t&&w.forEach(function(j){return e(N,j)}),Re&&as(N,y),b}function L(N,x,E,O){if(typeof E=="object"&&E!==null&&E.type===Ks&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case rl:e:{for(var b=E.key,U=x;U!==null;){if(U.key===b){if(b=E.type,b===Ks){if(U.tag===7){n(N,U.sibling),x=s(U,E.props.children),x.return=N,N=x;break e}}else if(U.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===dr&&ng(b)===U.type){n(N,U.sibling),x=s(U,E.props),x.ref=ha(N,U,E),x.return=N,N=x;break e}n(N,U);break}else e(N,U);U=U.sibling}E.type===Ks?(x=ps(E.props.children,N.mode,O,E.key),x.return=N,N=x):(O=Ol(E.type,E.key,E.props,null,N.mode,O),O.ref=ha(N,x,E),O.return=N,N=O)}return a(N);case Gs:e:{for(U=E.key;x!==null;){if(x.key===U)if(x.tag===4&&x.stateNode.containerInfo===E.containerInfo&&x.stateNode.implementation===E.implementation){n(N,x.sibling),x=s(x,E.children||[]),x.return=N,N=x;break e}else{n(N,x);break}else e(N,x);x=x.sibling}x=ud(E,N.mode,O),x.return=N,N=x}return a(N);case dr:return U=E._init,L(N,x,U(E._payload),O)}if(ya(E))return P(N,x,E,O);if(oa(E))return R(N,x,E,O);pl(N,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,x!==null&&x.tag===6?(n(N,x.sibling),x=s(x,E),x.return=N,N=x):(n(N,x),x=cd(E,N.mode,O),x.return=N,N=x),a(N)):n(N,x)}return L}var Ei=I_(!0),x_=I_(!1),ac=qr(null),oc=null,ni=null,gf=null;function yf(){gf=ni=oc=null}function vf(t){var e=ac.current;Pe(ac),t._currentValue=e}function Zd(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ui(t,e){oc=t,gf=ni=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(bt=!0),t.firstContext=null)}function en(t){var e=t._currentValue;if(gf!==t)if(t={context:t,memoizedValue:e,next:null},ni===null){if(oc===null)throw Error(z(308));ni=t,oc.dependencies={lanes:0,firstContext:t}}else ni=ni.next=t;return e}var us=null;function _f(t){us===null?us=[t]:us.push(t)}function S_(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,_f(e)):(n.next=s.next,s.next=n),e.interleaved=n,Gn(t,r)}function Gn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var hr=!1;function wf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function N_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function zn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Nr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ge&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Gn(t,n)}return s=r.interleaved,s===null?(e.next=e,_f(r)):(e.next=s.next,s.next=e),r.interleaved=e,Gn(t,n)}function Pl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,sf(t,n)}}function rg(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function lc(t,e,n,r){var s=t.updateQueue;hr=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,c=s.shared.pending;if(c!==null){s.shared.pending=null;var u=c,d=u.next;u.next=null,a===null?i=d:a.next=d,a=u;var p=t.alternate;p!==null&&(p=p.updateQueue,c=p.lastBaseUpdate,c!==a&&(c===null?p.firstBaseUpdate=d:c.next=d,p.lastBaseUpdate=u))}if(i!==null){var m=s.baseState;a=0,p=d=u=null,c=i;do{var g=c.lane,_=c.eventTime;if((r&g)===g){p!==null&&(p=p.next={eventTime:_,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var P=t,R=c;switch(g=e,_=n,R.tag){case 1:if(P=R.payload,typeof P=="function"){m=P.call(_,m,g);break e}m=P;break e;case 3:P.flags=P.flags&-65537|128;case 0:if(P=R.payload,g=typeof P=="function"?P.call(_,m,g):P,g==null)break e;m=De({},m,g);break e;case 2:hr=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[c]:g.push(c))}else _={eventTime:_,lane:g,tag:c.tag,payload:c.payload,callback:c.callback,next:null},p===null?(d=p=_,u=m):p=p.next=_,a|=g;if(c=c.next,c===null){if(c=s.shared.pending,c===null)break;g=c,c=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(p===null&&(u=m),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=p,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);ws|=a,t.lanes=a,t.memoizedState=m}}function sg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(z(191,s));s.call(r)}}}var wo={},xn=qr(wo),Za=qr(wo),eo=qr(wo);function ds(t){if(t===wo)throw Error(z(174));return t}function Ef(t,e){switch(Ne(eo,e),Ne(Za,t),Ne(xn,wo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:bd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=bd(e,t)}Pe(xn),Ne(xn,e)}function Ti(){Pe(xn),Pe(Za),Pe(eo)}function C_(t){ds(eo.current);var e=ds(xn.current),n=bd(e,t.type);e!==n&&(Ne(Za,t),Ne(xn,n))}function Tf(t){Za.current===t&&(Pe(xn),Pe(Za))}var je=qr(0);function cc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var rd=[];function If(){for(var t=0;t<rd.length;t++)rd[t]._workInProgressVersionPrimary=null;rd.length=0}var Rl=Zn.ReactCurrentDispatcher,sd=Zn.ReactCurrentBatchConfig,_s=0,be=null,Qe=null,nt=null,uc=!1,ja=!1,to=0,NI=0;function ft(){throw Error(z(321))}function xf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!fn(t[n],e[n]))return!1;return!0}function Sf(t,e,n,r,s,i){if(_s=i,be=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Rl.current=t===null||t.memoizedState===null?PI:RI,t=n(r,s),ja){i=0;do{if(ja=!1,to=0,25<=i)throw Error(z(301));i+=1,nt=Qe=null,e.updateQueue=null,Rl.current=jI,t=n(r,s)}while(ja)}if(Rl.current=dc,e=Qe!==null&&Qe.next!==null,_s=0,nt=Qe=be=null,uc=!1,e)throw Error(z(300));return t}function Nf(){var t=to!==0;return to=0,t}function wn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nt===null?be.memoizedState=nt=t:nt=nt.next=t,nt}function tn(){if(Qe===null){var t=be.alternate;t=t!==null?t.memoizedState:null}else t=Qe.next;var e=nt===null?be.memoizedState:nt.next;if(e!==null)nt=e,Qe=t;else{if(t===null)throw Error(z(310));Qe=t,t={memoizedState:Qe.memoizedState,baseState:Qe.baseState,baseQueue:Qe.baseQueue,queue:Qe.queue,next:null},nt===null?be.memoizedState=nt=t:nt=nt.next=t}return nt}function no(t,e){return typeof e=="function"?e(t):e}function id(t){var e=tn(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=Qe,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var c=a=null,u=null,d=i;do{var p=d.lane;if((_s&p)===p)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var m={lane:p,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(c=u=m,a=r):u=u.next=m,be.lanes|=p,ws|=p}d=d.next}while(d!==null&&d!==i);u===null?a=r:u.next=c,fn(r,e.memoizedState)||(bt=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,be.lanes|=i,ws|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ad(t){var e=tn(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);fn(i,e.memoizedState)||(bt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function A_(){}function k_(t,e){var n=be,r=tn(),s=e(),i=!fn(r.memoizedState,s);if(i&&(r.memoizedState=s,bt=!0),r=r.queue,Cf(j_.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||nt!==null&&nt.memoizedState.tag&1){if(n.flags|=2048,ro(9,R_.bind(null,n,r,s,e),void 0,null),rt===null)throw Error(z(349));_s&30||P_(n,e,s)}return s}function P_(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=be.updateQueue,e===null?(e={lastEffect:null,stores:null},be.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function R_(t,e,n,r){e.value=n,e.getSnapshot=r,b_(e)&&D_(t)}function j_(t,e,n){return n(function(){b_(e)&&D_(t)})}function b_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!fn(t,n)}catch{return!0}}function D_(t){var e=Gn(t,1);e!==null&&dn(e,t,1,-1)}function ig(t){var e=wn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:no,lastRenderedState:t},e.queue=t,t=t.dispatch=kI.bind(null,be,t),[e.memoizedState,t]}function ro(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=be.updateQueue,e===null?(e={lastEffect:null,stores:null},be.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function V_(){return tn().memoizedState}function jl(t,e,n,r){var s=wn();be.flags|=t,s.memoizedState=ro(1|e,n,void 0,r===void 0?null:r)}function Hc(t,e,n,r){var s=tn();r=r===void 0?null:r;var i=void 0;if(Qe!==null){var a=Qe.memoizedState;if(i=a.destroy,r!==null&&xf(r,a.deps)){s.memoizedState=ro(e,n,i,r);return}}be.flags|=t,s.memoizedState=ro(1|e,n,i,r)}function ag(t,e){return jl(8390656,8,t,e)}function Cf(t,e){return Hc(2048,8,t,e)}function O_(t,e){return Hc(4,2,t,e)}function L_(t,e){return Hc(4,4,t,e)}function M_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function F_(t,e,n){return n=n!=null?n.concat([t]):null,Hc(4,4,M_.bind(null,e,t),n)}function Af(){}function U_(t,e){var n=tn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&xf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function z_(t,e){var n=tn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&xf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function B_(t,e,n){return _s&21?(fn(n,e)||(n=Gv(),be.lanes|=n,ws|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,bt=!0),t.memoizedState=n)}function CI(t,e){var n=Ie;Ie=n!==0&&4>n?n:4,t(!0);var r=sd.transition;sd.transition={};try{t(!1),e()}finally{Ie=n,sd.transition=r}}function $_(){return tn().memoizedState}function AI(t,e,n){var r=Ar(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},q_(t))W_(e,n);else if(n=S_(t,e,n,r),n!==null){var s=St();dn(n,t,r,s),H_(n,e,r)}}function kI(t,e,n){var r=Ar(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(q_(t))W_(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,c=i(a,n);if(s.hasEagerState=!0,s.eagerState=c,fn(c,a)){var u=e.interleaved;u===null?(s.next=s,_f(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=S_(t,e,s,r),n!==null&&(s=St(),dn(n,t,r,s),H_(n,e,r))}}function q_(t){var e=t.alternate;return t===be||e!==null&&e===be}function W_(t,e){ja=uc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function H_(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,sf(t,n)}}var dc={readContext:en,useCallback:ft,useContext:ft,useEffect:ft,useImperativeHandle:ft,useInsertionEffect:ft,useLayoutEffect:ft,useMemo:ft,useReducer:ft,useRef:ft,useState:ft,useDebugValue:ft,useDeferredValue:ft,useTransition:ft,useMutableSource:ft,useSyncExternalStore:ft,useId:ft,unstable_isNewReconciler:!1},PI={readContext:en,useCallback:function(t,e){return wn().memoizedState=[t,e===void 0?null:e],t},useContext:en,useEffect:ag,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,jl(4194308,4,M_.bind(null,e,t),n)},useLayoutEffect:function(t,e){return jl(4194308,4,t,e)},useInsertionEffect:function(t,e){return jl(4,2,t,e)},useMemo:function(t,e){var n=wn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=wn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=AI.bind(null,be,t),[r.memoizedState,t]},useRef:function(t){var e=wn();return t={current:t},e.memoizedState=t},useState:ig,useDebugValue:Af,useDeferredValue:function(t){return wn().memoizedState=t},useTransition:function(){var t=ig(!1),e=t[0];return t=CI.bind(null,t[1]),wn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=be,s=wn();if(Re){if(n===void 0)throw Error(z(407));n=n()}else{if(n=e(),rt===null)throw Error(z(349));_s&30||P_(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,ag(j_.bind(null,r,i,t),[t]),r.flags|=2048,ro(9,R_.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=wn(),e=rt.identifierPrefix;if(Re){var n=Mn,r=Ln;n=(r&~(1<<32-un(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=to++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=NI++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},RI={readContext:en,useCallback:U_,useContext:en,useEffect:Cf,useImperativeHandle:F_,useInsertionEffect:O_,useLayoutEffect:L_,useMemo:z_,useReducer:id,useRef:V_,useState:function(){return id(no)},useDebugValue:Af,useDeferredValue:function(t){var e=tn();return B_(e,Qe.memoizedState,t)},useTransition:function(){var t=id(no)[0],e=tn().memoizedState;return[t,e]},useMutableSource:A_,useSyncExternalStore:k_,useId:$_,unstable_isNewReconciler:!1},jI={readContext:en,useCallback:U_,useContext:en,useEffect:Cf,useImperativeHandle:F_,useInsertionEffect:O_,useLayoutEffect:L_,useMemo:z_,useReducer:ad,useRef:V_,useState:function(){return ad(no)},useDebugValue:Af,useDeferredValue:function(t){var e=tn();return Qe===null?e.memoizedState=t:B_(e,Qe.memoizedState,t)},useTransition:function(){var t=ad(no)[0],e=tn().memoizedState;return[t,e]},useMutableSource:A_,useSyncExternalStore:k_,useId:$_,unstable_isNewReconciler:!1};function sn(t,e){if(t&&t.defaultProps){e=De({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function eh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:De({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Gc={isMounted:function(t){return(t=t._reactInternals)?Ps(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=St(),s=Ar(t),i=zn(r,s);i.payload=e,n!=null&&(i.callback=n),e=Nr(t,i,s),e!==null&&(dn(e,t,s,r),Pl(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=St(),s=Ar(t),i=zn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Nr(t,i,s),e!==null&&(dn(e,t,s,r),Pl(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=St(),r=Ar(t),s=zn(n,r);s.tag=2,e!=null&&(s.callback=e),e=Nr(t,s,r),e!==null&&(dn(e,t,r,n),Pl(e,t,r))}};function og(t,e,n,r,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,a):e.prototype&&e.prototype.isPureReactComponent?!Qa(n,r)||!Qa(s,i):!0}function G_(t,e,n){var r=!1,s=Or,i=e.contextType;return typeof i=="object"&&i!==null?i=en(i):(s=Vt(e)?ys:_t.current,r=e.contextTypes,i=(r=r!=null)?_i(t,s):Or),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Gc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function lg(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Gc.enqueueReplaceState(e,e.state,null)}function th(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},wf(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=en(i):(i=Vt(e)?ys:_t.current,s.context=_i(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(eh(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Gc.enqueueReplaceState(s,s.state,null),lc(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ii(t,e){try{var n="",r=e;do n+=a1(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function od(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function nh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var bI=typeof WeakMap=="function"?WeakMap:Map;function K_(t,e,n){n=zn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){fc||(fc=!0,hh=r),nh(t,e)},n}function Q_(t,e,n){n=zn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){nh(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){nh(t,e),typeof r!="function"&&(Cr===null?Cr=new Set([this]):Cr.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function cg(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new bI;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=GI.bind(null,t,e,n),e.then(t,t))}function ug(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function dg(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=zn(-1,1),e.tag=2,Nr(n,e,1))),n.lanes|=1),t)}var DI=Zn.ReactCurrentOwner,bt=!1;function xt(t,e,n,r){e.child=t===null?x_(e,null,n,r):Ei(e,t.child,n,r)}function hg(t,e,n,r,s){n=n.render;var i=e.ref;return ui(e,s),r=Sf(t,e,n,r,i,s),n=Nf(),t!==null&&!bt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Kn(t,e,s)):(Re&&n&&ff(e),e.flags|=1,xt(t,e,r,s),e.child)}function fg(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Of(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Y_(t,e,i,r,s)):(t=Ol(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:Qa,n(a,r)&&t.ref===e.ref)return Kn(t,e,s)}return e.flags|=1,t=kr(i,r),t.ref=e.ref,t.return=e,e.child=t}function Y_(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Qa(i,r)&&t.ref===e.ref)if(bt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(bt=!0);else return e.lanes=t.lanes,Kn(t,e,s)}return rh(t,e,n,r,s)}function J_(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ne(si,Mt),Mt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ne(si,Mt),Mt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ne(si,Mt),Mt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Ne(si,Mt),Mt|=r;return xt(t,e,s,n),e.child}function X_(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function rh(t,e,n,r,s){var i=Vt(n)?ys:_t.current;return i=_i(e,i),ui(e,s),n=Sf(t,e,n,r,i,s),r=Nf(),t!==null&&!bt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Kn(t,e,s)):(Re&&r&&ff(e),e.flags|=1,xt(t,e,n,s),e.child)}function pg(t,e,n,r,s){if(Vt(n)){var i=!0;rc(e)}else i=!1;if(ui(e,s),e.stateNode===null)bl(t,e),G_(e,n,r),th(e,n,r,s),r=!0;else if(t===null){var a=e.stateNode,c=e.memoizedProps;a.props=c;var u=a.context,d=n.contextType;typeof d=="object"&&d!==null?d=en(d):(d=Vt(n)?ys:_t.current,d=_i(e,d));var p=n.getDerivedStateFromProps,m=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function";m||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(c!==r||u!==d)&&lg(e,a,r,d),hr=!1;var g=e.memoizedState;a.state=g,lc(e,r,a,s),u=e.memoizedState,c!==r||g!==u||Dt.current||hr?(typeof p=="function"&&(eh(e,n,p,r),u=e.memoizedState),(c=hr||og(e,n,c,r,g,u,d))?(m||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),a.props=r,a.state=u,a.context=d,r=c):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,N_(t,e),c=e.memoizedProps,d=e.type===e.elementType?c:sn(e.type,c),a.props=d,m=e.pendingProps,g=a.context,u=n.contextType,typeof u=="object"&&u!==null?u=en(u):(u=Vt(n)?ys:_t.current,u=_i(e,u));var _=n.getDerivedStateFromProps;(p=typeof _=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(c!==m||g!==u)&&lg(e,a,r,u),hr=!1,g=e.memoizedState,a.state=g,lc(e,r,a,s);var P=e.memoizedState;c!==m||g!==P||Dt.current||hr?(typeof _=="function"&&(eh(e,n,_,r),P=e.memoizedState),(d=hr||og(e,n,d,r,g,P,u)||!1)?(p||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,P,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,P,u)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=P),a.props=r,a.state=P,a.context=u,r=d):(typeof a.componentDidUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return sh(t,e,n,r,i,s)}function sh(t,e,n,r,s,i){X_(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&Zm(e,n,!1),Kn(t,e,i);r=e.stateNode,DI.current=e;var c=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=Ei(e,t.child,null,i),e.child=Ei(e,null,c,i)):xt(t,e,c,i),e.memoizedState=r.state,s&&Zm(e,n,!0),e.child}function Z_(t){var e=t.stateNode;e.pendingContext?Xm(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Xm(t,e.context,!1),Ef(t,e.containerInfo)}function mg(t,e,n,r,s){return wi(),mf(s),e.flags|=256,xt(t,e,n,r),e.child}var ih={dehydrated:null,treeContext:null,retryLane:0};function ah(t){return{baseLanes:t,cachePool:null,transitions:null}}function ew(t,e,n){var r=e.pendingProps,s=je.current,i=!1,a=(e.flags&128)!==0,c;if((c=a)||(c=t!==null&&t.memoizedState===null?!1:(s&2)!==0),c?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ne(je,s&1),t===null)return Xd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,i?(r=e.mode,i=e.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=Yc(a,r,0,null),t=ps(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=ah(n),e.memoizedState=ih,t):kf(e,a));if(s=t.memoizedState,s!==null&&(c=s.dehydrated,c!==null))return VI(t,e,a,r,c,s,n);if(i){i=r.fallback,a=e.mode,s=t.child,c=s.sibling;var u={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=kr(s,u),r.subtreeFlags=s.subtreeFlags&14680064),c!==null?i=kr(c,i):(i=ps(i,a,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,a=t.child.memoizedState,a=a===null?ah(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~n,e.memoizedState=ih,r}return i=t.child,t=i.sibling,r=kr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function kf(t,e){return e=Yc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ml(t,e,n,r){return r!==null&&mf(r),Ei(e,t.child,null,n),t=kf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function VI(t,e,n,r,s,i,a){if(n)return e.flags&256?(e.flags&=-257,r=od(Error(z(422))),ml(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Yc({mode:"visible",children:r.children},s,0,null),i=ps(i,s,a,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Ei(e,t.child,null,a),e.child.memoizedState=ah(a),e.memoizedState=ih,i);if(!(e.mode&1))return ml(t,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var c=r.dgst;return r=c,i=Error(z(419)),r=od(i,r,void 0),ml(t,e,a,r)}if(c=(a&t.childLanes)!==0,bt||c){if(r=rt,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Gn(t,s),dn(r,t,s,-1))}return Vf(),r=od(Error(z(421))),ml(t,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=KI.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Ft=Sr(s.nextSibling),Ut=e,Re=!0,on=null,t!==null&&(Gt[Kt++]=Ln,Gt[Kt++]=Mn,Gt[Kt++]=vs,Ln=t.id,Mn=t.overflow,vs=e),e=kf(e,r.children),e.flags|=4096,e)}function gg(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Zd(t.return,e,n)}function ld(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function tw(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(xt(t,e,r.children,n),r=je.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&gg(t,n,e);else if(t.tag===19)gg(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ne(je,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&cc(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),ld(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&cc(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}ld(e,!0,n,null,i);break;case"together":ld(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function bl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Kn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ws|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,n=kr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=kr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function OI(t,e,n){switch(e.tag){case 3:Z_(e),wi();break;case 5:C_(e);break;case 1:Vt(e.type)&&rc(e);break;case 4:Ef(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ne(ac,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ne(je,je.current&1),e.flags|=128,null):n&e.child.childLanes?ew(t,e,n):(Ne(je,je.current&1),t=Kn(t,e,n),t!==null?t.sibling:null);Ne(je,je.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return tw(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ne(je,je.current),r)break;return null;case 22:case 23:return e.lanes=0,J_(t,e,n)}return Kn(t,e,n)}var nw,oh,rw,sw;nw=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};oh=function(){};rw=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,ds(xn.current);var i=null;switch(n){case"input":s=kd(t,s),r=kd(t,r),i=[];break;case"select":s=De({},s,{value:void 0}),r=De({},r,{value:void 0}),i=[];break;case"textarea":s=jd(t,s),r=jd(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=tc)}Dd(n,r);var a;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var c=s[d];for(a in c)c.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Ba.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(c=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==c&&(u!=null||c!=null))if(d==="style")if(c){for(a in c)!c.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&c[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Ba.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&Ae("scroll",t),i||c===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};sw=function(t,e,n,r){n!==r&&(e.flags|=4)};function fa(t,e){if(!Re)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function pt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function LI(t,e,n){var r=e.pendingProps;switch(pf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pt(e),null;case 1:return Vt(e.type)&&nc(),pt(e),null;case 3:return r=e.stateNode,Ti(),Pe(Dt),Pe(_t),If(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(fl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,on!==null&&(mh(on),on=null))),oh(t,e),pt(e),null;case 5:Tf(e);var s=ds(eo.current);if(n=e.type,t!==null&&e.stateNode!=null)rw(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(z(166));return pt(e),null}if(t=ds(xn.current),fl(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Tn]=e,r[Xa]=i,t=(e.mode&1)!==0,n){case"dialog":Ae("cancel",r),Ae("close",r);break;case"iframe":case"object":case"embed":Ae("load",r);break;case"video":case"audio":for(s=0;s<_a.length;s++)Ae(_a[s],r);break;case"source":Ae("error",r);break;case"img":case"image":case"link":Ae("error",r),Ae("load",r);break;case"details":Ae("toggle",r);break;case"input":Sm(r,i),Ae("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ae("invalid",r);break;case"textarea":Cm(r,i),Ae("invalid",r)}Dd(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var c=i[a];a==="children"?typeof c=="string"?r.textContent!==c&&(i.suppressHydrationWarning!==!0&&hl(r.textContent,c,t),s=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(i.suppressHydrationWarning!==!0&&hl(r.textContent,c,t),s=["children",""+c]):Ba.hasOwnProperty(a)&&c!=null&&a==="onScroll"&&Ae("scroll",r)}switch(n){case"input":sl(r),Nm(r,i,!0);break;case"textarea":sl(r),Am(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=tc)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=jv(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[Tn]=e,t[Xa]=r,nw(t,e,!1,!1),e.stateNode=t;e:{switch(a=Vd(n,r),n){case"dialog":Ae("cancel",t),Ae("close",t),s=r;break;case"iframe":case"object":case"embed":Ae("load",t),s=r;break;case"video":case"audio":for(s=0;s<_a.length;s++)Ae(_a[s],t);s=r;break;case"source":Ae("error",t),s=r;break;case"img":case"image":case"link":Ae("error",t),Ae("load",t),s=r;break;case"details":Ae("toggle",t),s=r;break;case"input":Sm(t,r),s=kd(t,r),Ae("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=De({},r,{value:void 0}),Ae("invalid",t);break;case"textarea":Cm(t,r),s=jd(t,r),Ae("invalid",t);break;default:s=r}Dd(n,s),c=s;for(i in c)if(c.hasOwnProperty(i)){var u=c[i];i==="style"?Vv(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&bv(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&$a(t,u):typeof u=="number"&&$a(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ba.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Ae("scroll",t):u!=null&&Xh(t,i,u,a))}switch(n){case"input":sl(t),Nm(t,r,!1);break;case"textarea":sl(t),Am(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Vr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?ai(t,!!r.multiple,i,!1):r.defaultValue!=null&&ai(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=tc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return pt(e),null;case 6:if(t&&e.stateNode!=null)sw(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(z(166));if(n=ds(eo.current),ds(xn.current),fl(e)){if(r=e.stateNode,n=e.memoizedProps,r[Tn]=e,(i=r.nodeValue!==n)&&(t=Ut,t!==null))switch(t.tag){case 3:hl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&hl(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Tn]=e,e.stateNode=r}return pt(e),null;case 13:if(Pe(je),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Re&&Ft!==null&&e.mode&1&&!(e.flags&128))T_(),wi(),e.flags|=98560,i=!1;else if(i=fl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(z(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(z(317));i[Tn]=e}else wi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;pt(e),i=!1}else on!==null&&(mh(on),on=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||je.current&1?Ye===0&&(Ye=3):Vf())),e.updateQueue!==null&&(e.flags|=4),pt(e),null);case 4:return Ti(),oh(t,e),t===null&&Ya(e.stateNode.containerInfo),pt(e),null;case 10:return vf(e.type._context),pt(e),null;case 17:return Vt(e.type)&&nc(),pt(e),null;case 19:if(Pe(je),i=e.memoizedState,i===null)return pt(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)fa(i,!1);else{if(Ye!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=cc(t),a!==null){for(e.flags|=128,fa(i,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ne(je,je.current&1|2),e.child}t=t.sibling}i.tail!==null&&Fe()>xi&&(e.flags|=128,r=!0,fa(i,!1),e.lanes=4194304)}else{if(!r)if(t=cc(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),fa(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Re)return pt(e),null}else 2*Fe()-i.renderingStartTime>xi&&n!==1073741824&&(e.flags|=128,r=!0,fa(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(n=i.last,n!==null?n.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Fe(),e.sibling=null,n=je.current,Ne(je,r?n&1|2:n&1),e):(pt(e),null);case 22:case 23:return Df(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Mt&1073741824&&(pt(e),e.subtreeFlags&6&&(e.flags|=8192)):pt(e),null;case 24:return null;case 25:return null}throw Error(z(156,e.tag))}function MI(t,e){switch(pf(e),e.tag){case 1:return Vt(e.type)&&nc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ti(),Pe(Dt),Pe(_t),If(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Tf(e),null;case 13:if(Pe(je),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));wi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Pe(je),null;case 4:return Ti(),null;case 10:return vf(e.type._context),null;case 22:case 23:return Df(),null;case 24:return null;default:return null}}var gl=!1,yt=!1,FI=typeof WeakSet=="function"?WeakSet:Set,J=null;function ri(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Le(t,e,r)}else n.current=null}function lh(t,e,n){try{n()}catch(r){Le(t,e,r)}}var yg=!1;function UI(t,e){if(Wd=Xl,t=c_(),hf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,c=-1,u=-1,d=0,p=0,m=t,g=null;t:for(;;){for(var _;m!==n||s!==0&&m.nodeType!==3||(c=a+s),m!==i||r!==0&&m.nodeType!==3||(u=a+r),m.nodeType===3&&(a+=m.nodeValue.length),(_=m.firstChild)!==null;)g=m,m=_;for(;;){if(m===t)break t;if(g===n&&++d===s&&(c=a),g===i&&++p===r&&(u=a),(_=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=_}n=c===-1||u===-1?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Hd={focusedElem:t,selectionRange:n},Xl=!1,J=e;J!==null;)if(e=J,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,J=t;else for(;J!==null;){e=J;try{var P=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(P!==null){var R=P.memoizedProps,L=P.memoizedState,N=e.stateNode,x=N.getSnapshotBeforeUpdate(e.elementType===e.type?R:sn(e.type,R),L);N.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(O){Le(e,e.return,O)}if(t=e.sibling,t!==null){t.return=e.return,J=t;break}J=e.return}return P=yg,yg=!1,P}function ba(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&lh(e,n,i)}s=s.next}while(s!==r)}}function Kc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function ch(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function iw(t){var e=t.alternate;e!==null&&(t.alternate=null,iw(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Tn],delete e[Xa],delete e[Qd],delete e[TI],delete e[II])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function aw(t){return t.tag===5||t.tag===3||t.tag===4}function vg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||aw(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function uh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=tc));else if(r!==4&&(t=t.child,t!==null))for(uh(t,e,n),t=t.sibling;t!==null;)uh(t,e,n),t=t.sibling}function dh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(dh(t,e,n),t=t.sibling;t!==null;)dh(t,e,n),t=t.sibling}var it=null,an=!1;function cr(t,e,n){for(n=n.child;n!==null;)ow(t,e,n),n=n.sibling}function ow(t,e,n){if(In&&typeof In.onCommitFiberUnmount=="function")try{In.onCommitFiberUnmount(Uc,n)}catch{}switch(n.tag){case 5:yt||ri(n,e);case 6:var r=it,s=an;it=null,cr(t,e,n),it=r,an=s,it!==null&&(an?(t=it,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):it.removeChild(n.stateNode));break;case 18:it!==null&&(an?(t=it,n=n.stateNode,t.nodeType===8?td(t.parentNode,n):t.nodeType===1&&td(t,n),Ga(t)):td(it,n.stateNode));break;case 4:r=it,s=an,it=n.stateNode.containerInfo,an=!0,cr(t,e,n),it=r,an=s;break;case 0:case 11:case 14:case 15:if(!yt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&lh(n,e,a),s=s.next}while(s!==r)}cr(t,e,n);break;case 1:if(!yt&&(ri(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){Le(n,e,c)}cr(t,e,n);break;case 21:cr(t,e,n);break;case 22:n.mode&1?(yt=(r=yt)||n.memoizedState!==null,cr(t,e,n),yt=r):cr(t,e,n);break;default:cr(t,e,n)}}function _g(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new FI),e.forEach(function(r){var s=QI.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function rn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,a=e,c=a;e:for(;c!==null;){switch(c.tag){case 5:it=c.stateNode,an=!1;break e;case 3:it=c.stateNode.containerInfo,an=!0;break e;case 4:it=c.stateNode.containerInfo,an=!0;break e}c=c.return}if(it===null)throw Error(z(160));ow(i,a,s),it=null,an=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){Le(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)lw(e,t),e=e.sibling}function lw(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(rn(e,t),_n(t),r&4){try{ba(3,t,t.return),Kc(3,t)}catch(R){Le(t,t.return,R)}try{ba(5,t,t.return)}catch(R){Le(t,t.return,R)}}break;case 1:rn(e,t),_n(t),r&512&&n!==null&&ri(n,n.return);break;case 5:if(rn(e,t),_n(t),r&512&&n!==null&&ri(n,n.return),t.flags&32){var s=t.stateNode;try{$a(s,"")}catch(R){Le(t,t.return,R)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=n!==null?n.memoizedProps:i,c=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{c==="input"&&i.type==="radio"&&i.name!=null&&Pv(s,i),Vd(c,a);var d=Vd(c,i);for(a=0;a<u.length;a+=2){var p=u[a],m=u[a+1];p==="style"?Vv(s,m):p==="dangerouslySetInnerHTML"?bv(s,m):p==="children"?$a(s,m):Xh(s,p,m,d)}switch(c){case"input":Pd(s,i);break;case"textarea":Rv(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var _=i.value;_!=null?ai(s,!!i.multiple,_,!1):g!==!!i.multiple&&(i.defaultValue!=null?ai(s,!!i.multiple,i.defaultValue,!0):ai(s,!!i.multiple,i.multiple?[]:"",!1))}s[Xa]=i}catch(R){Le(t,t.return,R)}}break;case 6:if(rn(e,t),_n(t),r&4){if(t.stateNode===null)throw Error(z(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(R){Le(t,t.return,R)}}break;case 3:if(rn(e,t),_n(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ga(e.containerInfo)}catch(R){Le(t,t.return,R)}break;case 4:rn(e,t),_n(t);break;case 13:rn(e,t),_n(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(jf=Fe())),r&4&&_g(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(yt=(d=yt)||p,rn(e,t),yt=d):rn(e,t),_n(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!p&&t.mode&1)for(J=t,p=t.child;p!==null;){for(m=J=p;J!==null;){switch(g=J,_=g.child,g.tag){case 0:case 11:case 14:case 15:ba(4,g,g.return);break;case 1:ri(g,g.return);var P=g.stateNode;if(typeof P.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,P.props=e.memoizedProps,P.state=e.memoizedState,P.componentWillUnmount()}catch(R){Le(r,n,R)}}break;case 5:ri(g,g.return);break;case 22:if(g.memoizedState!==null){Eg(m);continue}}_!==null?(_.return=g,J=_):Eg(m)}p=p.sibling}e:for(p=null,m=t;;){if(m.tag===5){if(p===null){p=m;try{s=m.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(c=m.stateNode,u=m.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=Dv("display",a))}catch(R){Le(t,t.return,R)}}}else if(m.tag===6){if(p===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(R){Le(t,t.return,R)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;p===m&&(p=null),m=m.return}p===m&&(p=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:rn(e,t),_n(t),r&4&&_g(t);break;case 21:break;default:rn(e,t),_n(t)}}function _n(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(aw(n)){var r=n;break e}n=n.return}throw Error(z(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&($a(s,""),r.flags&=-33);var i=vg(t);dh(t,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,c=vg(t);uh(t,c,a);break;default:throw Error(z(161))}}catch(u){Le(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function zI(t,e,n){J=t,cw(t)}function cw(t,e,n){for(var r=(t.mode&1)!==0;J!==null;){var s=J,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||gl;if(!a){var c=s.alternate,u=c!==null&&c.memoizedState!==null||yt;c=gl;var d=yt;if(gl=a,(yt=u)&&!d)for(J=s;J!==null;)a=J,u=a.child,a.tag===22&&a.memoizedState!==null?Tg(s):u!==null?(u.return=a,J=u):Tg(s);for(;i!==null;)J=i,cw(i),i=i.sibling;J=s,gl=c,yt=d}wg(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,J=i):wg(t)}}function wg(t){for(;J!==null;){var e=J;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:yt||Kc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!yt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:sn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&sg(e,i,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}sg(e,a,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var p=d.memoizedState;if(p!==null){var m=p.dehydrated;m!==null&&Ga(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}yt||e.flags&512&&ch(e)}catch(g){Le(e,e.return,g)}}if(e===t){J=null;break}if(n=e.sibling,n!==null){n.return=e.return,J=n;break}J=e.return}}function Eg(t){for(;J!==null;){var e=J;if(e===t){J=null;break}var n=e.sibling;if(n!==null){n.return=e.return,J=n;break}J=e.return}}function Tg(t){for(;J!==null;){var e=J;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Kc(4,e)}catch(u){Le(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Le(e,s,u)}}var i=e.return;try{ch(e)}catch(u){Le(e,i,u)}break;case 5:var a=e.return;try{ch(e)}catch(u){Le(e,a,u)}}}catch(u){Le(e,e.return,u)}if(e===t){J=null;break}var c=e.sibling;if(c!==null){c.return=e.return,J=c;break}J=e.return}}var BI=Math.ceil,hc=Zn.ReactCurrentDispatcher,Pf=Zn.ReactCurrentOwner,Zt=Zn.ReactCurrentBatchConfig,ge=0,rt=null,We=null,lt=0,Mt=0,si=qr(0),Ye=0,so=null,ws=0,Qc=0,Rf=0,Da=null,jt=null,jf=0,xi=1/0,Vn=null,fc=!1,hh=null,Cr=null,yl=!1,wr=null,pc=0,Va=0,fh=null,Dl=-1,Vl=0;function St(){return ge&6?Fe():Dl!==-1?Dl:Dl=Fe()}function Ar(t){return t.mode&1?ge&2&&lt!==0?lt&-lt:SI.transition!==null?(Vl===0&&(Vl=Gv()),Vl):(t=Ie,t!==0||(t=window.event,t=t===void 0?16:e_(t.type)),t):1}function dn(t,e,n,r){if(50<Va)throw Va=0,fh=null,Error(z(185));yo(t,n,r),(!(ge&2)||t!==rt)&&(t===rt&&(!(ge&2)&&(Qc|=n),Ye===4&&pr(t,lt)),Ot(t,r),n===1&&ge===0&&!(e.mode&1)&&(xi=Fe()+500,Wc&&Wr()))}function Ot(t,e){var n=t.callbackNode;S1(t,e);var r=Jl(t,t===rt?lt:0);if(r===0)n!==null&&Rm(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Rm(n),e===1)t.tag===0?xI(Ig.bind(null,t)):__(Ig.bind(null,t)),wI(function(){!(ge&6)&&Wr()}),n=null;else{switch(Kv(r)){case 1:n=rf;break;case 4:n=Wv;break;case 16:n=Yl;break;case 536870912:n=Hv;break;default:n=Yl}n=yw(n,uw.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function uw(t,e){if(Dl=-1,Vl=0,ge&6)throw Error(z(327));var n=t.callbackNode;if(di()&&t.callbackNode!==n)return null;var r=Jl(t,t===rt?lt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=mc(t,r);else{e=r;var s=ge;ge|=2;var i=hw();(rt!==t||lt!==e)&&(Vn=null,xi=Fe()+500,fs(t,e));do try{WI();break}catch(c){dw(t,c)}while(!0);yf(),hc.current=i,ge=s,We!==null?e=0:(rt=null,lt=0,e=Ye)}if(e!==0){if(e===2&&(s=Ud(t),s!==0&&(r=s,e=ph(t,s))),e===1)throw n=so,fs(t,0),pr(t,r),Ot(t,Fe()),n;if(e===6)pr(t,r);else{if(s=t.current.alternate,!(r&30)&&!$I(s)&&(e=mc(t,r),e===2&&(i=Ud(t),i!==0&&(r=i,e=ph(t,i))),e===1))throw n=so,fs(t,0),pr(t,r),Ot(t,Fe()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(z(345));case 2:os(t,jt,Vn);break;case 3:if(pr(t,r),(r&130023424)===r&&(e=jf+500-Fe(),10<e)){if(Jl(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){St(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Kd(os.bind(null,t,jt,Vn),e);break}os(t,jt,Vn);break;case 4:if(pr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-un(r);i=1<<a,a=e[a],a>s&&(s=a),r&=~i}if(r=s,r=Fe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*BI(r/1960))-r,10<r){t.timeoutHandle=Kd(os.bind(null,t,jt,Vn),r);break}os(t,jt,Vn);break;case 5:os(t,jt,Vn);break;default:throw Error(z(329))}}}return Ot(t,Fe()),t.callbackNode===n?uw.bind(null,t):null}function ph(t,e){var n=Da;return t.current.memoizedState.isDehydrated&&(fs(t,e).flags|=256),t=mc(t,e),t!==2&&(e=jt,jt=n,e!==null&&mh(e)),t}function mh(t){jt===null?jt=t:jt.push.apply(jt,t)}function $I(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!fn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function pr(t,e){for(e&=~Rf,e&=~Qc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-un(e),r=1<<n;t[n]=-1,e&=~r}}function Ig(t){if(ge&6)throw Error(z(327));di();var e=Jl(t,0);if(!(e&1))return Ot(t,Fe()),null;var n=mc(t,e);if(t.tag!==0&&n===2){var r=Ud(t);r!==0&&(e=r,n=ph(t,r))}if(n===1)throw n=so,fs(t,0),pr(t,e),Ot(t,Fe()),n;if(n===6)throw Error(z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,os(t,jt,Vn),Ot(t,Fe()),null}function bf(t,e){var n=ge;ge|=1;try{return t(e)}finally{ge=n,ge===0&&(xi=Fe()+500,Wc&&Wr())}}function Es(t){wr!==null&&wr.tag===0&&!(ge&6)&&di();var e=ge;ge|=1;var n=Zt.transition,r=Ie;try{if(Zt.transition=null,Ie=1,t)return t()}finally{Ie=r,Zt.transition=n,ge=e,!(ge&6)&&Wr()}}function Df(){Mt=si.current,Pe(si)}function fs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,_I(n)),We!==null)for(n=We.return;n!==null;){var r=n;switch(pf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&nc();break;case 3:Ti(),Pe(Dt),Pe(_t),If();break;case 5:Tf(r);break;case 4:Ti();break;case 13:Pe(je);break;case 19:Pe(je);break;case 10:vf(r.type._context);break;case 22:case 23:Df()}n=n.return}if(rt=t,We=t=kr(t.current,null),lt=Mt=e,Ye=0,so=null,Rf=Qc=ws=0,jt=Da=null,us!==null){for(e=0;e<us.length;e++)if(n=us[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}us=null}return t}function dw(t,e){do{var n=We;try{if(yf(),Rl.current=dc,uc){for(var r=be.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}uc=!1}if(_s=0,nt=Qe=be=null,ja=!1,to=0,Pf.current=null,n===null||n.return===null){Ye=1,so=e,We=null;break}e:{var i=t,a=n.return,c=n,u=e;if(e=lt,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,p=c,m=p.tag;if(!(p.mode&1)&&(m===0||m===11||m===15)){var g=p.alternate;g?(p.updateQueue=g.updateQueue,p.memoizedState=g.memoizedState,p.lanes=g.lanes):(p.updateQueue=null,p.memoizedState=null)}var _=ug(a);if(_!==null){_.flags&=-257,dg(_,a,c,i,e),_.mode&1&&cg(i,d,e),e=_,u=d;var P=e.updateQueue;if(P===null){var R=new Set;R.add(u),e.updateQueue=R}else P.add(u);break e}else{if(!(e&1)){cg(i,d,e),Vf();break e}u=Error(z(426))}}else if(Re&&c.mode&1){var L=ug(a);if(L!==null){!(L.flags&65536)&&(L.flags|=256),dg(L,a,c,i,e),mf(Ii(u,c));break e}}i=u=Ii(u,c),Ye!==4&&(Ye=2),Da===null?Da=[i]:Da.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var N=K_(i,u,e);rg(i,N);break e;case 1:c=u;var x=i.type,E=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Cr===null||!Cr.has(E)))){i.flags|=65536,e&=-e,i.lanes|=e;var O=Q_(i,c,e);rg(i,O);break e}}i=i.return}while(i!==null)}pw(n)}catch(b){e=b,We===n&&n!==null&&(We=n=n.return);continue}break}while(!0)}function hw(){var t=hc.current;return hc.current=dc,t===null?dc:t}function Vf(){(Ye===0||Ye===3||Ye===2)&&(Ye=4),rt===null||!(ws&268435455)&&!(Qc&268435455)||pr(rt,lt)}function mc(t,e){var n=ge;ge|=2;var r=hw();(rt!==t||lt!==e)&&(Vn=null,fs(t,e));do try{qI();break}catch(s){dw(t,s)}while(!0);if(yf(),ge=n,hc.current=r,We!==null)throw Error(z(261));return rt=null,lt=0,Ye}function qI(){for(;We!==null;)fw(We)}function WI(){for(;We!==null&&!g1();)fw(We)}function fw(t){var e=gw(t.alternate,t,Mt);t.memoizedProps=t.pendingProps,e===null?pw(t):We=e,Pf.current=null}function pw(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=MI(n,e),n!==null){n.flags&=32767,We=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ye=6,We=null;return}}else if(n=LI(n,e,Mt),n!==null){We=n;return}if(e=e.sibling,e!==null){We=e;return}We=e=t}while(e!==null);Ye===0&&(Ye=5)}function os(t,e,n){var r=Ie,s=Zt.transition;try{Zt.transition=null,Ie=1,HI(t,e,n,r)}finally{Zt.transition=s,Ie=r}return null}function HI(t,e,n,r){do di();while(wr!==null);if(ge&6)throw Error(z(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(z(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(N1(t,i),t===rt&&(We=rt=null,lt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||yl||(yl=!0,yw(Yl,function(){return di(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Zt.transition,Zt.transition=null;var a=Ie;Ie=1;var c=ge;ge|=4,Pf.current=null,UI(t,n),lw(n,t),hI(Hd),Xl=!!Wd,Hd=Wd=null,t.current=n,zI(n),y1(),ge=c,Ie=a,Zt.transition=i}else t.current=n;if(yl&&(yl=!1,wr=t,pc=s),i=t.pendingLanes,i===0&&(Cr=null),w1(n.stateNode),Ot(t,Fe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(fc)throw fc=!1,t=hh,hh=null,t;return pc&1&&t.tag!==0&&di(),i=t.pendingLanes,i&1?t===fh?Va++:(Va=0,fh=t):Va=0,Wr(),null}function di(){if(wr!==null){var t=Kv(pc),e=Zt.transition,n=Ie;try{if(Zt.transition=null,Ie=16>t?16:t,wr===null)var r=!1;else{if(t=wr,wr=null,pc=0,ge&6)throw Error(z(331));var s=ge;for(ge|=4,J=t.current;J!==null;){var i=J,a=i.child;if(J.flags&16){var c=i.deletions;if(c!==null){for(var u=0;u<c.length;u++){var d=c[u];for(J=d;J!==null;){var p=J;switch(p.tag){case 0:case 11:case 15:ba(8,p,i)}var m=p.child;if(m!==null)m.return=p,J=m;else for(;J!==null;){p=J;var g=p.sibling,_=p.return;if(iw(p),p===d){J=null;break}if(g!==null){g.return=_,J=g;break}J=_}}}var P=i.alternate;if(P!==null){var R=P.child;if(R!==null){P.child=null;do{var L=R.sibling;R.sibling=null,R=L}while(R!==null)}}J=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,J=a;else e:for(;J!==null;){if(i=J,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ba(9,i,i.return)}var N=i.sibling;if(N!==null){N.return=i.return,J=N;break e}J=i.return}}var x=t.current;for(J=x;J!==null;){a=J;var E=a.child;if(a.subtreeFlags&2064&&E!==null)E.return=a,J=E;else e:for(a=x;J!==null;){if(c=J,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Kc(9,c)}}catch(b){Le(c,c.return,b)}if(c===a){J=null;break e}var O=c.sibling;if(O!==null){O.return=c.return,J=O;break e}J=c.return}}if(ge=s,Wr(),In&&typeof In.onPostCommitFiberRoot=="function")try{In.onPostCommitFiberRoot(Uc,t)}catch{}r=!0}return r}finally{Ie=n,Zt.transition=e}}return!1}function xg(t,e,n){e=Ii(n,e),e=K_(t,e,1),t=Nr(t,e,1),e=St(),t!==null&&(yo(t,1,e),Ot(t,e))}function Le(t,e,n){if(t.tag===3)xg(t,t,n);else for(;e!==null;){if(e.tag===3){xg(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Cr===null||!Cr.has(r))){t=Ii(n,t),t=Q_(e,t,1),e=Nr(e,t,1),t=St(),e!==null&&(yo(e,1,t),Ot(e,t));break}}e=e.return}}function GI(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=St(),t.pingedLanes|=t.suspendedLanes&n,rt===t&&(lt&n)===n&&(Ye===4||Ye===3&&(lt&130023424)===lt&&500>Fe()-jf?fs(t,0):Rf|=n),Ot(t,e)}function mw(t,e){e===0&&(t.mode&1?(e=ol,ol<<=1,!(ol&130023424)&&(ol=4194304)):e=1);var n=St();t=Gn(t,e),t!==null&&(yo(t,e,n),Ot(t,n))}function KI(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),mw(t,n)}function QI(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(z(314))}r!==null&&r.delete(e),mw(t,n)}var gw;gw=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Dt.current)bt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return bt=!1,OI(t,e,n);bt=!!(t.flags&131072)}else bt=!1,Re&&e.flags&1048576&&w_(e,ic,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;bl(t,e),t=e.pendingProps;var s=_i(e,_t.current);ui(e,n),s=Sf(null,e,r,t,s,n);var i=Nf();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Vt(r)?(i=!0,rc(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,wf(e),s.updater=Gc,e.stateNode=s,s._reactInternals=e,th(e,r,t,n),e=sh(null,e,r,!0,i,n)):(e.tag=0,Re&&i&&ff(e),xt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(bl(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=JI(r),t=sn(r,t),s){case 0:e=rh(null,e,r,t,n);break e;case 1:e=pg(null,e,r,t,n);break e;case 11:e=hg(null,e,r,t,n);break e;case 14:e=fg(null,e,r,sn(r.type,t),n);break e}throw Error(z(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:sn(r,s),rh(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:sn(r,s),pg(t,e,r,s,n);case 3:e:{if(Z_(e),t===null)throw Error(z(387));r=e.pendingProps,i=e.memoizedState,s=i.element,N_(t,e),lc(e,r,null,n);var a=e.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Ii(Error(z(423)),e),e=mg(t,e,r,n,s);break e}else if(r!==s){s=Ii(Error(z(424)),e),e=mg(t,e,r,n,s);break e}else for(Ft=Sr(e.stateNode.containerInfo.firstChild),Ut=e,Re=!0,on=null,n=x_(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(wi(),r===s){e=Kn(t,e,n);break e}xt(t,e,r,n)}e=e.child}return e;case 5:return C_(e),t===null&&Xd(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,Gd(r,s)?a=null:i!==null&&Gd(r,i)&&(e.flags|=32),X_(t,e),xt(t,e,a,n),e.child;case 6:return t===null&&Xd(e),null;case 13:return ew(t,e,n);case 4:return Ef(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ei(e,null,r,n):xt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:sn(r,s),hg(t,e,r,s,n);case 7:return xt(t,e,e.pendingProps,n),e.child;case 8:return xt(t,e,e.pendingProps.children,n),e.child;case 12:return xt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,Ne(ac,r._currentValue),r._currentValue=a,i!==null)if(fn(i.value,a)){if(i.children===s.children&&!Dt.current){e=Kn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var c=i.dependencies;if(c!==null){a=i.child;for(var u=c.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=zn(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var p=d.pending;p===null?u.next=u:(u.next=p.next,p.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Zd(i.return,n,e),c.lanes|=n;break}u=u.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(z(341));a.lanes|=n,c=a.alternate,c!==null&&(c.lanes|=n),Zd(a,n,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}xt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ui(e,n),s=en(s),r=r(s),e.flags|=1,xt(t,e,r,n),e.child;case 14:return r=e.type,s=sn(r,e.pendingProps),s=sn(r.type,s),fg(t,e,r,s,n);case 15:return Y_(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:sn(r,s),bl(t,e),e.tag=1,Vt(r)?(t=!0,rc(e)):t=!1,ui(e,n),G_(e,r,s),th(e,r,s,n),sh(null,e,r,!0,t,n);case 19:return tw(t,e,n);case 22:return J_(t,e,n)}throw Error(z(156,e.tag))};function yw(t,e){return qv(t,e)}function YI(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xt(t,e,n,r){return new YI(t,e,n,r)}function Of(t){return t=t.prototype,!(!t||!t.isReactComponent)}function JI(t){if(typeof t=="function")return Of(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ef)return 11;if(t===tf)return 14}return 2}function kr(t,e){var n=t.alternate;return n===null?(n=Xt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ol(t,e,n,r,s,i){var a=2;if(r=t,typeof t=="function")Of(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Ks:return ps(n.children,s,i,e);case Zh:a=8,s|=8;break;case Sd:return t=Xt(12,n,e,s|2),t.elementType=Sd,t.lanes=i,t;case Nd:return t=Xt(13,n,e,s),t.elementType=Nd,t.lanes=i,t;case Cd:return t=Xt(19,n,e,s),t.elementType=Cd,t.lanes=i,t;case Cv:return Yc(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Sv:a=10;break e;case Nv:a=9;break e;case ef:a=11;break e;case tf:a=14;break e;case dr:a=16,r=null;break e}throw Error(z(130,t==null?t:typeof t,""))}return e=Xt(a,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function ps(t,e,n,r){return t=Xt(7,t,r,e),t.lanes=n,t}function Yc(t,e,n,r){return t=Xt(22,t,r,e),t.elementType=Cv,t.lanes=n,t.stateNode={isHidden:!1},t}function cd(t,e,n){return t=Xt(6,t,null,e),t.lanes=n,t}function ud(t,e,n){return e=Xt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function XI(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=qu(0),this.expirationTimes=qu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qu(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Lf(t,e,n,r,s,i,a,c,u){return t=new XI(t,e,n,c,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Xt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},wf(i),t}function ZI(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Gs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function vw(t){if(!t)return Or;t=t._reactInternals;e:{if(Ps(t)!==t||t.tag!==1)throw Error(z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Vt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(z(171))}if(t.tag===1){var n=t.type;if(Vt(n))return v_(t,n,e)}return e}function _w(t,e,n,r,s,i,a,c,u){return t=Lf(n,r,!0,t,s,i,a,c,u),t.context=vw(null),n=t.current,r=St(),s=Ar(n),i=zn(r,s),i.callback=e??null,Nr(n,i,s),t.current.lanes=s,yo(t,s,r),Ot(t,r),t}function Jc(t,e,n,r){var s=e.current,i=St(),a=Ar(s);return n=vw(n),e.context===null?e.context=n:e.pendingContext=n,e=zn(i,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Nr(s,e,a),t!==null&&(dn(t,s,a,i),Pl(t,s,a)),a}function gc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Sg(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Mf(t,e){Sg(t,e),(t=t.alternate)&&Sg(t,e)}function ex(){return null}var ww=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ff(t){this._internalRoot=t}Xc.prototype.render=Ff.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));Jc(t,e,null,null)};Xc.prototype.unmount=Ff.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Es(function(){Jc(null,t,null,null)}),e[Hn]=null}};function Xc(t){this._internalRoot=t}Xc.prototype.unstable_scheduleHydration=function(t){if(t){var e=Jv();t={blockedOn:null,target:t,priority:e};for(var n=0;n<fr.length&&e!==0&&e<fr[n].priority;n++);fr.splice(n,0,t),n===0&&Zv(t)}};function Uf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Zc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Ng(){}function tx(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=gc(a);i.call(d)}}var a=_w(e,r,t,0,null,!1,!1,"",Ng);return t._reactRootContainer=a,t[Hn]=a.current,Ya(t.nodeType===8?t.parentNode:t),Es(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var c=r;r=function(){var d=gc(u);c.call(d)}}var u=Lf(t,0,!1,null,null,!1,!1,"",Ng);return t._reactRootContainer=u,t[Hn]=u.current,Ya(t.nodeType===8?t.parentNode:t),Es(function(){Jc(e,u,n,r)}),u}function eu(t,e,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var c=s;s=function(){var u=gc(a);c.call(u)}}Jc(e,a,t,s)}else a=tx(n,e,t,s,r);return gc(a)}Qv=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=va(e.pendingLanes);n!==0&&(sf(e,n|1),Ot(e,Fe()),!(ge&6)&&(xi=Fe()+500,Wr()))}break;case 13:Es(function(){var r=Gn(t,1);if(r!==null){var s=St();dn(r,t,1,s)}}),Mf(t,1)}};af=function(t){if(t.tag===13){var e=Gn(t,134217728);if(e!==null){var n=St();dn(e,t,134217728,n)}Mf(t,134217728)}};Yv=function(t){if(t.tag===13){var e=Ar(t),n=Gn(t,e);if(n!==null){var r=St();dn(n,t,e,r)}Mf(t,e)}};Jv=function(){return Ie};Xv=function(t,e){var n=Ie;try{return Ie=t,e()}finally{Ie=n}};Ld=function(t,e,n){switch(e){case"input":if(Pd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=qc(r);if(!s)throw Error(z(90));kv(r),Pd(r,s)}}}break;case"textarea":Rv(t,n);break;case"select":e=n.value,e!=null&&ai(t,!!n.multiple,e,!1)}};Mv=bf;Fv=Es;var nx={usingClientEntryPoint:!1,Events:[_o,Xs,qc,Ov,Lv,bf]},pa={findFiberByHostInstance:cs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},rx={bundleType:pa.bundleType,version:pa.version,rendererPackageName:pa.rendererPackageName,rendererConfig:pa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Zn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Bv(t),t===null?null:t.stateNode},findFiberByHostInstance:pa.findFiberByHostInstance||ex,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl.isDisabled&&vl.supportsFiber)try{Uc=vl.inject(rx),In=vl}catch{}}Bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nx;Bt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Uf(e))throw Error(z(200));return ZI(t,e,null,n)};Bt.createRoot=function(t,e){if(!Uf(t))throw Error(z(299));var n=!1,r="",s=ww;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Lf(t,1,!1,null,null,n,!1,r,s),t[Hn]=e.current,Ya(t.nodeType===8?t.parentNode:t),new Ff(e)};Bt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=Bv(e),t=t===null?null:t.stateNode,t};Bt.flushSync=function(t){return Es(t)};Bt.hydrate=function(t,e,n){if(!Zc(e))throw Error(z(200));return eu(null,t,e,!0,n)};Bt.hydrateRoot=function(t,e,n){if(!Uf(t))throw Error(z(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=ww;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=_w(e,null,t,1,n??null,s,!1,i,a),t[Hn]=e.current,Ya(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Xc(e)};Bt.render=function(t,e,n){if(!Zc(e))throw Error(z(200));return eu(null,t,e,!1,n)};Bt.unmountComponentAtNode=function(t){if(!Zc(t))throw Error(z(40));return t._reactRootContainer?(Es(function(){eu(null,null,t,!1,function(){t._reactRootContainer=null,t[Hn]=null})}),!0):!1};Bt.unstable_batchedUpdates=bf;Bt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Zc(n))throw Error(z(200));if(t==null||t._reactInternals===void 0)throw Error(z(38));return eu(t,e,n,!1,r)};Bt.version="18.3.1-next-f1338f8080-20240426";function Ew(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ew)}catch(t){console.error(t)}}Ew(),Ev.exports=Bt;var sx=Ev.exports,Cg=sx;Id.createRoot=Cg.createRoot,Id.hydrateRoot=Cg.hydrateRoot;const ix=()=>{};var Ag={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tw=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},ax=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],a=t[n++],c=t[n++],u=((s&7)<<18|(i&63)<<12|(a&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],a=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},Iw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,c=a?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,p=i>>2,m=(i&3)<<4|c>>4;let g=(c&15)<<2|d>>6,_=d&63;u||(_=64,a||(g=64)),r.push(n[p],n[m],n[g],n[_])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Tw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):ax(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||c==null||d==null||m==null)throw new ox;const g=i<<2|c>>4;if(r.push(g),d!==64){const _=c<<4&240|d>>2;if(r.push(_),m!==64){const P=d<<6&192|m;r.push(P)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class ox extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const lx=function(t){const e=Tw(t);return Iw.encodeByteArray(e,!0)},yc=function(t){return lx(t).replace(/\./g,"")},xw=function(t){try{return Iw.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ux=()=>cx().__FIREBASE_DEFAULTS__,dx=()=>{if(typeof process>"u"||typeof Ag>"u")return;const t=Ag.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},hx=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&xw(t[1]);return e&&JSON.parse(e)},tu=()=>{try{return ix()||ux()||dx()||hx()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Sw=t=>{var e,n;return(n=(e=tu())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},fx=t=>{const e=Sw(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Nw=()=>{var t;return(t=tu())==null?void 0:t.config},Cw=t=>{var e;return(e=tu())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Li(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Aw(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mx(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[yc(JSON.stringify(n)),yc(JSON.stringify(a)),""].join(".")}const Oa={};function gx(){const t={prod:[],emulator:[]};for(const e of Object.keys(Oa))Oa[e]?t.emulator.push(e):t.prod.push(e);return t}function yx(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let kg=!1;function kw(t,e){if(typeof window>"u"||typeof document>"u"||!Li(window.location.host)||Oa[t]===e||Oa[t]||kg)return;Oa[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",i=gx().prod.length>0;function a(){const g=document.getElementById(r);g&&g.remove()}function c(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,_){g.setAttribute("width","24"),g.setAttribute("id",_),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function d(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{kg=!0,a()},g}function p(g,_){g.setAttribute("id",_),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function m(){const g=yx(r),_=n("text"),P=document.getElementById(_)||document.createElement("span"),R=n("learnmore"),L=document.getElementById(R)||document.createElement("a"),N=n("preprendIcon"),x=document.getElementById(N)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const E=g.element;c(E),p(L,R);const O=d();u(x,N),E.append(x,P,L,O),document.body.appendChild(E)}i?(P.innerText="Preview backend disconnected.",x.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(x.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,P.innerText="Preview backend running in this workspace."),P.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function vx(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(wt())}function _x(){var e;const t=(e=tu())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function wx(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Ex(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Tx(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Ix(){const t=wt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function xx(){return!_x()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Sx(){try{return typeof indexedDB=="object"}catch{return!1}}function Nx(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cx="FirebaseError";class er extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Cx,Object.setPrototypeOf(this,er.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Eo.prototype.create)}}class Eo{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?Ax(i,r):"Error",c=`${this.serviceName}: ${a} (${s}).`;return new er(s,c,r)}}function Ax(t,e){return t.replace(kx,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const kx=/\{\$([^}]+)}/g;function Px(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ts(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],a=e[s];if(Pg(i)&&Pg(a)){if(!Ts(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Pg(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function To(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function wa(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Ea(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function Rx(t,e){const n=new jx(t,e);return n.subscribe.bind(n)}class jx{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");bx(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=dd),s.error===void 0&&(s.error=dd),s.complete===void 0&&(s.complete=dd);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function bx(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function dd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Et(t){return t&&t._delegate?t._delegate:t}class Is{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ls="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dx{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new px;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Ox(e))try{this.getOrInitializeService({instanceIdentifier:ls})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=ls){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ls){return this.instances.has(e)}getOptions(e=ls){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);r===c&&a.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Vx(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ls){return this.component?this.component.multipleInstances?e:ls:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Vx(t){return t===ls?void 0:t}function Ox(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Dx(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var de;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(de||(de={}));const Mx={debug:de.DEBUG,verbose:de.VERBOSE,info:de.INFO,warn:de.WARN,error:de.ERROR,silent:de.SILENT},Fx=de.INFO,Ux={[de.DEBUG]:"log",[de.VERBOSE]:"log",[de.INFO]:"info",[de.WARN]:"warn",[de.ERROR]:"error"},zx=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=Ux[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class zf{constructor(e){this.name=e,this._logLevel=Fx,this._logHandler=zx,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in de))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Mx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,de.DEBUG,...e),this._logHandler(this,de.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,de.VERBOSE,...e),this._logHandler(this,de.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,de.INFO,...e),this._logHandler(this,de.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,de.WARN,...e),this._logHandler(this,de.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,de.ERROR,...e),this._logHandler(this,de.ERROR,...e)}}const Bx=(t,e)=>e.some(n=>t instanceof n);let Rg,jg;function $x(){return Rg||(Rg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function qx(){return jg||(jg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Pw=new WeakMap,gh=new WeakMap,Rw=new WeakMap,hd=new WeakMap,Bf=new WeakMap;function Wx(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n(Pr(t.result)),s()},a=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&Pw.set(n,t)}).catch(()=>{}),Bf.set(e,t),e}function Hx(t){if(gh.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});gh.set(t,e)}let yh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return gh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Rw.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Pr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Gx(t){yh=t(yh)}function Kx(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(fd(this),e,...n);return Rw.set(r,e.sort?e.sort():[e]),Pr(r)}:qx().includes(t)?function(...e){return t.apply(fd(this),e),Pr(Pw.get(this))}:function(...e){return Pr(t.apply(fd(this),e))}}function Qx(t){return typeof t=="function"?Kx(t):(t instanceof IDBTransaction&&Hx(t),Bx(t,$x())?new Proxy(t,yh):t)}function Pr(t){if(t instanceof IDBRequest)return Wx(t);if(hd.has(t))return hd.get(t);const e=Qx(t);return e!==t&&(hd.set(t,e),Bf.set(e,t)),e}const fd=t=>Bf.get(t);function Yx(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),c=Pr(a);return r&&a.addEventListener("upgradeneeded",u=>{r(Pr(a.result),u.oldVersion,u.newVersion,Pr(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const Jx=["get","getKey","getAll","getAllKeys","count"],Xx=["put","add","delete","clear"],pd=new Map;function bg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(pd.get(e))return pd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=Xx.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Jx.includes(n)))return;const i=async function(a,...c){const u=this.transaction(a,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),s&&u.done]))[0]};return pd.set(e,i),i}Gx(t=>({...t,get:(e,n,r)=>bg(e,n)||t.get(e,n,r),has:(e,n)=>!!bg(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(eS(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function eS(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const vh="@firebase/app",Dg="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qn=new zf("@firebase/app"),tS="@firebase/app-compat",nS="@firebase/analytics-compat",rS="@firebase/analytics",sS="@firebase/app-check-compat",iS="@firebase/app-check",aS="@firebase/auth",oS="@firebase/auth-compat",lS="@firebase/database",cS="@firebase/data-connect",uS="@firebase/database-compat",dS="@firebase/functions",hS="@firebase/functions-compat",fS="@firebase/installations",pS="@firebase/installations-compat",mS="@firebase/messaging",gS="@firebase/messaging-compat",yS="@firebase/performance",vS="@firebase/performance-compat",_S="@firebase/remote-config",wS="@firebase/remote-config-compat",ES="@firebase/storage",TS="@firebase/storage-compat",IS="@firebase/firestore",xS="@firebase/ai",SS="@firebase/firestore-compat",NS="firebase",CS="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _h="[DEFAULT]",AS={[vh]:"fire-core",[tS]:"fire-core-compat",[rS]:"fire-analytics",[nS]:"fire-analytics-compat",[iS]:"fire-app-check",[sS]:"fire-app-check-compat",[aS]:"fire-auth",[oS]:"fire-auth-compat",[lS]:"fire-rtdb",[cS]:"fire-data-connect",[uS]:"fire-rtdb-compat",[dS]:"fire-fn",[hS]:"fire-fn-compat",[fS]:"fire-iid",[pS]:"fire-iid-compat",[mS]:"fire-fcm",[gS]:"fire-fcm-compat",[yS]:"fire-perf",[vS]:"fire-perf-compat",[_S]:"fire-rc",[wS]:"fire-rc-compat",[ES]:"fire-gcs",[TS]:"fire-gcs-compat",[IS]:"fire-fst",[SS]:"fire-fst-compat",[xS]:"fire-vertex","fire-js":"fire-js",[NS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vc=new Map,kS=new Map,wh=new Map;function Vg(t,e){try{t.container.addComponent(e)}catch(n){Qn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Si(t){const e=t.name;if(wh.has(e))return Qn.debug(`There were multiple attempts to register component ${e}.`),!1;wh.set(e,t);for(const n of vc.values())Vg(n,t);for(const n of kS.values())Vg(n,t);return!0}function $f(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Qt(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Rr=new Eo("app","Firebase",PS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Is("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Rr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mi=CS;function jw(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:_h,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Rr.create("bad-app-name",{appName:String(s)});if(n||(n=Nw()),!n)throw Rr.create("no-options");const i=vc.get(s);if(i){if(Ts(n,i.options)&&Ts(r,i.config))return i;throw Rr.create("duplicate-app",{appName:s})}const a=new Lx(s);for(const u of wh.values())a.addComponent(u);const c=new RS(n,r,a);return vc.set(s,c),c}function bw(t=_h){const e=vc.get(t);if(!e&&t===_h&&Nw())return jw();if(!e)throw Rr.create("no-app",{appName:t});return e}function jr(t,e,n){let r=AS[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&a.push("and"),i&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Qn.warn(a.join(" "));return}Si(new Is(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jS="firebase-heartbeat-database",bS=1,io="firebase-heartbeat-store";let md=null;function Dw(){return md||(md=Yx(jS,bS,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(io)}catch(n){console.warn(n)}}}}).catch(t=>{throw Rr.create("idb-open",{originalErrorMessage:t.message})})),md}async function DS(t){try{const n=(await Dw()).transaction(io),r=await n.objectStore(io).get(Vw(t));return await n.done,r}catch(e){if(e instanceof er)Qn.warn(e.message);else{const n=Rr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Qn.warn(n.message)}}}async function Og(t,e){try{const r=(await Dw()).transaction(io,"readwrite");await r.objectStore(io).put(e,Vw(t)),await r.done}catch(n){if(n instanceof er)Qn.warn(n.message);else{const r=Rr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Qn.warn(r.message)}}}function Vw(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VS=1024,OS=30;class LS{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new FS(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Lg();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>OS){const a=US(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Qn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Lg(),{heartbeatsToSend:r,unsentEntries:s}=MS(this._heartbeatsCache.heartbeats),i=yc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Qn.warn(n),""}}}function Lg(){return new Date().toISOString().substring(0,10)}function MS(t,e=VS){const n=[];let r=t.slice();for(const s of t){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),Mg(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Mg(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class FS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Sx()?Nx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await DS(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Og(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Og(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Mg(t){return yc(JSON.stringify({version:2,heartbeats:t})).length}function US(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zS(t){Si(new Is("platform-logger",e=>new Zx(e),"PRIVATE")),Si(new Is("heartbeat",e=>new LS(e),"PRIVATE")),jr(vh,Dg,t),jr(vh,Dg,"esm2020"),jr("fire-js","")}zS("");function Ow(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const BS=Ow,Lw=new Eo("auth","Firebase",Ow());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _c=new zf("@firebase/auth");function $S(t,...e){_c.logLevel<=de.WARN&&_c.warn(`Auth (${Mi}): ${t}`,...e)}function Ll(t,...e){_c.logLevel<=de.ERROR&&_c.error(`Auth (${Mi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pn(t,...e){throw qf(t,...e)}function Sn(t,...e){return qf(t,...e)}function Mw(t,e,n){const r={...BS(),[e]:n};return new Eo("auth","Firebase",r).create(e,{appName:t.name})}function Bn(t){return Mw(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function qf(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Lw.create(t,...e)}function te(t,e,...n){if(!t)throw qf(e,...n)}function Fn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ll(e),new Error(e)}function Yn(t,e){t||Fn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eh(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function qS(){return Fg()==="http:"||Fg()==="https:"}function Fg(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(qS()||Ex()||"connection"in navigator)?navigator.onLine:!0}function HS(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(e,n){this.shortDelay=e,this.longDelay=n,Yn(n>e,"Short delay should be less than long delay!"),this.isMobile=vx()||Tx()}get(){return WS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wf(t,e){Yn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Fn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Fn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Fn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KS=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],QS=new Io(3e4,6e4);function Hr(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Gr(t,e,n,r,s={}){return Uw(t,s,async()=>{let i={},a={};r&&(e==="GET"?a=r:i={body:JSON.stringify(r)});const c=To({key:t.config.apiKey,...a}).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:u,...i};return wx()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&Li(t.emulatorConfig.host)&&(d.credentials="include"),Fw.fetch()(await zw(t,t.config.apiHost,n,c),d)})}async function Uw(t,e,n){t._canInitEmulator=!1;const r={...GS,...e};try{const s=new JS(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw _l(t,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const c=i.ok?a.errorMessage:a.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw _l(t,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw _l(t,"email-already-in-use",a);if(u==="USER_DISABLED")throw _l(t,"user-disabled",a);const p=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Mw(t,p,d);pn(t,p)}}catch(s){if(s instanceof er)throw s;pn(t,"network-request-failed",{message:String(s)})}}async function xo(t,e,n,r,s={}){const i=await Gr(t,e,n,r,s);return"mfaPendingCredential"in i&&pn(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function zw(t,e,n,r){const s=`${e}${n}?${r}`,i=t,a=i.config.emulator?Wf(t.config,s):`${t.config.apiScheme}://${s}`;return KS.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(a).toString():a}function YS(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class JS{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Sn(this.auth,"network-request-failed")),QS.get())})}}function _l(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Sn(t,e,r);return s.customData._tokenResponse=n,s}function Ug(t){return t!==void 0&&t.enterprise!==void 0}class XS{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return YS(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function ZS(t,e){return Gr(t,"GET","/v2/recaptchaConfig",Hr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eN(t,e){return Gr(t,"POST","/v1/accounts:delete",e)}async function wc(t,e){return Gr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function La(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function tN(t,e=!1){const n=Et(t),r=await n.getIdToken(e),s=Hf(r);te(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:La(gd(s.auth_time)),issuedAtTime:La(gd(s.iat)),expirationTime:La(gd(s.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function gd(t){return Number(t)*1e3}function Hf(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Ll("JWT malformed, contained fewer than 3 sections"),null;try{const s=xw(n);return s?JSON.parse(s):(Ll("Failed to decode base64 JWT payload"),null)}catch(s){return Ll("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function zg(t){const e=Hf(t);return te(e,"internal-error"),te(typeof e.exp<"u","internal-error"),te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ao(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof er&&nN(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function nN({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=La(this.lastLoginAt),this.creationTime=La(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ec(t){var m;const e=t.auth,n=await t.getIdToken(),r=await ao(t,wc(e,{idToken:n}));te(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(m=s.providerUserInfo)!=null&&m.length?Bw(s.providerUserInfo):[],a=iN(t.providerData,i),c=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),d=c?u:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Th(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,p)}async function sN(t){const e=Et(t);await Ec(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function iN(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Bw(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aN(t,e){const n=await Uw(t,{},async()=>{const r=To({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,a=await zw(t,s,"/v1/token",`key=${i}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:c,body:r};return t.emulatorConfig&&Li(t.emulatorConfig.host)&&(u.credentials="include"),Fw.fetch()(a,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function oN(t,e){return Gr(t,"POST","/v2/accounts:revokeToken",Hr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){te(e.idToken,"internal-error"),te(typeof e.idToken<"u","internal-error"),te(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):zg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){te(e.length!==0,"internal-error");const n=zg(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await aN(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,a=new hi;return r&&(te(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),s&&(te(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),i&&(te(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new hi,this.toJSON())}_performRefresh(){return Fn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ur(t,e){te(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ln{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new rN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Th(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await ao(this,this.stsTokenManager.getToken(this.auth,e));return te(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return tN(this,e)}reload(){return sN(this)}_assign(e){this!==e&&(te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ln({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Ec(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Qt(this.auth.app))return Promise.reject(Bn(this.auth));const e=await this.getIdToken();return await ao(this,eN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,a=n.photoURL??void 0,c=n.tenantId??void 0,u=n._redirectEventId??void 0,d=n.createdAt??void 0,p=n.lastLoginAt??void 0,{uid:m,emailVerified:g,isAnonymous:_,providerData:P,stsTokenManager:R}=n;te(m&&R,e,"internal-error");const L=hi.fromJSON(this.name,R);te(typeof m=="string",e,"internal-error"),ur(r,e.name),ur(s,e.name),te(typeof g=="boolean",e,"internal-error"),te(typeof _=="boolean",e,"internal-error"),ur(i,e.name),ur(a,e.name),ur(c,e.name),ur(u,e.name),ur(d,e.name),ur(p,e.name);const N=new ln({uid:m,auth:e,email:s,emailVerified:g,displayName:r,isAnonymous:_,photoURL:a,phoneNumber:i,tenantId:c,stsTokenManager:L,createdAt:d,lastLoginAt:p});return P&&Array.isArray(P)&&(N.providerData=P.map(x=>({...x}))),u&&(N._redirectEventId=u),N}static async _fromIdTokenResponse(e,n,r=!1){const s=new hi;s.updateFromServerResponse(n);const i=new ln({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Ec(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];te(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?Bw(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),c=new hi;c.updateFromIdToken(r);const u=new ln({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:a}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Th(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bg=new Map;function Un(t){Yn(t instanceof Function,"Expected a class definition");let e=Bg.get(t);return e?(Yn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Bg.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}$w.type="NONE";const $g=$w;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ml(t,e,n){return`firebase:${t}:${e}:${n}`}class fi{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Ml(this.userKey,s.apiKey,i),this.fullPersistenceKey=Ml("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await wc(this.auth,{idToken:e}).catch(()=>{});return n?ln._fromGetAccountInfoResponse(this.auth,n,e):null}return ln._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new fi(Un($g),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||Un($g);const a=Ml(r,e.config.apiKey,e.name);let c=null;for(const d of n)try{const p=await d._get(a);if(p){let m;if(typeof p=="string"){const g=await wc(e,{idToken:p}).catch(()=>{});if(!g)break;m=await ln._fromGetAccountInfoResponse(e,g,p)}else m=ln._fromJSON(e,p);d!==i&&(c=m),i=d;break}}catch{}const u=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new fi(i,e,r):(i=u[0],c&&await i._set(a,c.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(a)}catch{}})),new fi(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qg(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Gw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(qw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Qw(e))return"Blackberry";if(Yw(e))return"Webos";if(Ww(e))return"Safari";if((e.includes("chrome/")||Hw(e))&&!e.includes("edge/"))return"Chrome";if(Kw(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function qw(t=wt()){return/firefox\//i.test(t)}function Ww(t=wt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Hw(t=wt()){return/crios\//i.test(t)}function Gw(t=wt()){return/iemobile/i.test(t)}function Kw(t=wt()){return/android/i.test(t)}function Qw(t=wt()){return/blackberry/i.test(t)}function Yw(t=wt()){return/webos/i.test(t)}function Gf(t=wt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function lN(t=wt()){var e;return Gf(t)&&!!((e=window.navigator)!=null&&e.standalone)}function cN(){return Ix()&&document.documentMode===10}function Jw(t=wt()){return Gf(t)||Kw(t)||Yw(t)||Qw(t)||/windows phone/i.test(t)||Gw(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xw(t,e=[]){let n;switch(t){case"Browser":n=qg(wt());break;case"Worker":n=`${qg(wt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Mi}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((a,c)=>{try{const u=e(i);a(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dN(t,e={}){return Gr(t,"GET","/v2/passwordPolicy",Hr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hN=6;class fN{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??hN,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Wg(this),this.idTokenSubscription=new Wg(this),this.beforeStateQueue=new uN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Lw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Un(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await fi.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await wc(this,{idToken:e}),r=await ln._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(Qt(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(c,c))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(i=this.redirectUser)==null?void 0:i._redirectEventId,c=r==null?void 0:r._redirectEventId,u=await this.tryRedirectSignIn(e);(!a||a===c)&&(u!=null&&u.user)&&(r=u.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ec(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=HS()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Qt(this.app))return Promise.reject(Bn(this));const n=e?Et(e):null;return n&&te(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Qt(this.app)?Promise.reject(Bn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Qt(this.app)?Promise.reject(Bn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Un(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await dN(this),n=new fN(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Eo("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await oN(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Un(e)||this._popupRedirectResolver;te(n,this,"argument-error"),this.redirectPersistenceManager=await fi.create(this,[Un(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let a=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(te(c,this,"internal-error"),c.then(()=>{a||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{a=!0,u()}}else{const u=e.addObserver(n);return()=>{a=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Xw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Qt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&$S(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Rs(t){return Et(t)}class Wg{constructor(e){this.auth=e,this.observer=null,this.addObserver=Rx(n=>this.observer=n)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function mN(t){nu=t}function Zw(t){return nu.loadJS(t)}function gN(){return nu.recaptchaEnterpriseScript}function yN(){return nu.gapiScript}function vN(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class _N{constructor(){this.enterprise=new wN}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class wN{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const EN="recaptcha-enterprise",eE="NO_RECAPTCHA";class TN{constructor(e){this.type=EN,this.auth=Rs(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(a,c)=>{ZS(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const d=new XS(u);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,a(d.siteKey)}}).catch(u=>{c(u)})})}function s(i,a,c){const u=window.grecaptcha;Ug(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(d=>{a(d)}).catch(()=>{a(eE)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new _N().execute("siteKey",{action:"verify"}):new Promise((i,a)=>{r(this.auth).then(c=>{if(!n&&Ug(window.grecaptcha))s(c,i,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let u=gN();u.length!==0&&(u+=c),Zw(u).then(()=>{s(c,i,a)}).catch(d=>{a(d)})}}).catch(c=>{a(c)})})}}async function Hg(t,e,n,r=!1,s=!1){const i=new TN(t);let a;if(s)a=eE;else try{a=await i.verify(n)}catch{a=await i.verify(n,!0)}const c={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const u=c.phoneEnrollmentInfo.phoneNumber,d=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:d,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const u=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:a}):Object.assign(c,{captchaResponse:a}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function Ih(t,e,n,r,s){var i;if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await Hg(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await Hg(t,e,n,n==="getOobCode");return r(t,c)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IN(t,e){const n=$f(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Ts(i,e??{}))return s;pn(s,"already-initialized")}return n.initialize({options:e})}function xN(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Un);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function SN(t,e,n){const r=Rs(t);te(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=tE(e),{host:a,port:c}=NN(e),u=c===null?"":`:${c}`,d={url:`${i}//${a}${u}/`},p=Object.freeze({host:a,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){te(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),te(Ts(d,r.config.emulator)&&Ts(p,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=p,r.settings.appVerificationDisabledForTesting=!0,Li(a)?(Aw(`${i}//${a}${u}`),kw("Auth",!0)):CN()}function tE(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function NN(t){const e=tE(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Gg(r.substr(i.length+1))}}else{const[i,a]=r.split(":");return{host:i,port:Gg(a)}}}function Gg(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function CN(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Fn("not implemented")}_getIdTokenResponse(e){return Fn("not implemented")}_linkToIdToken(e,n){return Fn("not implemented")}_getReauthenticationResolver(e){return Fn("not implemented")}}async function AN(t,e){return Gr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kN(t,e){return xo(t,"POST","/v1/accounts:signInWithPassword",Hr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PN(t,e){return xo(t,"POST","/v1/accounts:signInWithEmailLink",Hr(t,e))}async function RN(t,e){return xo(t,"POST","/v1/accounts:signInWithEmailLink",Hr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo extends Kf{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new oo(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new oo(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ih(e,n,"signInWithPassword",kN);case"emailLink":return PN(e,{email:this._email,oobCode:this._password});default:pn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ih(e,r,"signUpPassword",AN);case"emailLink":return RN(e,{idToken:n,email:this._email,oobCode:this._password});default:pn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pi(t,e){return xo(t,"POST","/v1/accounts:signInWithIdp",Hr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jN="http://localhost";class xs extends Kf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new xs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):pn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const a=new xs(r,s);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return pi(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,pi(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,pi(e,n)}buildRequest(){const e={requestUri:jN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=To(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bN(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function DN(t){const e=wa(Ea(t)).link,n=e?wa(Ea(e)).deep_link_id:null,r=wa(Ea(t)).deep_link_id;return(r?wa(Ea(r)).link:null)||r||n||e||t}class Qf{constructor(e){const n=wa(Ea(e)),r=n.apiKey??null,s=n.oobCode??null,i=bN(n.mode??null);te(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=DN(e);try{return new Qf(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(){this.providerId=Fi.PROVIDER_ID}static credential(e,n){return oo._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Qf.parseLink(n);return te(r,"argument-error"),oo._fromEmailAndCode(e,r.code,r.tenantId)}}Fi.PROVIDER_ID="password";Fi.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Fi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So extends nE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr extends So{constructor(){super("facebook.com")}static credential(e){return xs._fromParams({providerId:mr.PROVIDER_ID,signInMethod:mr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return mr.credentialFromTaggedObject(e)}static credentialFromError(e){return mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return mr.credential(e.oauthAccessToken)}catch{return null}}}mr.FACEBOOK_SIGN_IN_METHOD="facebook.com";mr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr extends So{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return xs._fromParams({providerId:gr.PROVIDER_ID,signInMethod:gr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return gr.credentialFromTaggedObject(e)}static credentialFromError(e){return gr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return gr.credential(n,r)}catch{return null}}}gr.GOOGLE_SIGN_IN_METHOD="google.com";gr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr extends So{constructor(){super("github.com")}static credential(e){return xs._fromParams({providerId:yr.PROVIDER_ID,signInMethod:yr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yr.credentialFromTaggedObject(e)}static credentialFromError(e){return yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return yr.credential(e.oauthAccessToken)}catch{return null}}}yr.GITHUB_SIGN_IN_METHOD="github.com";yr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr extends So{constructor(){super("twitter.com")}static credential(e,n){return xs._fromParams({providerId:vr.PROVIDER_ID,signInMethod:vr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return vr.credentialFromTaggedObject(e)}static credentialFromError(e){return vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return vr.credential(n,r)}catch{return null}}}vr.TWITTER_SIGN_IN_METHOD="twitter.com";vr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VN(t,e){return xo(t,"POST","/v1/accounts:signUp",Hr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await ln._fromIdTokenResponse(e,r,s),a=Kg(r);return new Ss({user:i,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Kg(r);return new Ss({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Kg(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc extends er{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Tc.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Tc(e,n,r,s)}}function rE(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Tc._fromErrorAndOperation(t,i,e,r):i})}async function ON(t,e,n=!1){const r=await ao(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ss._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LN(t,e,n=!1){const{auth:r}=t;if(Qt(r.app))return Promise.reject(Bn(r));const s="reauthenticate";try{const i=await ao(t,rE(r,s,e,t),n);te(i.idToken,r,"internal-error");const a=Hf(i.idToken);te(a,r,"internal-error");const{sub:c}=a;return te(t.uid===c,r,"user-mismatch"),Ss._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&pn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sE(t,e,n=!1){if(Qt(t.app))return Promise.reject(Bn(t));const r="signIn",s=await rE(t,r,e),i=await Ss._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function MN(t,e){return sE(Rs(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iE(t){const e=Rs(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function FN(t,e,n){if(Qt(t.app))return Promise.reject(Bn(t));const r=Rs(t),a=await Ih(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",VN).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&iE(t),u}),c=await Ss._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(c.user),c}function UN(t,e,n){return Qt(t.app)?Promise.reject(Bn(t)):MN(Et(t),Fi.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&iE(t),r})}function zN(t,e,n,r){return Et(t).onIdTokenChanged(e,n,r)}function BN(t,e,n){return Et(t).beforeAuthStateChanged(e,n)}function $N(t,e,n,r){return Et(t).onAuthStateChanged(e,n,r)}function qN(t){return Et(t).signOut()}const Ic="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ic,"1"),this.storage.removeItem(Ic),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WN=1e3,HN=10;class oE extends aE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Jw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},i=this.storage.getItem(r);cN()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,HN):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},WN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}oE.type="LOCAL";const GN=oE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE extends aE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}lE.type="SESSION";const cE=lE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KN(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new ru(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(a).map(async d=>d(n.origin,i)),u=await KN(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ru.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yf(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,a;return new Promise((c,u)=>{const d=Yf("",20);s.port1.start();const p=setTimeout(()=>{u(new Error("unsupported_event"))},r);a={messageChannel:s,onMessage(m){const g=m;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(p),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),c(g.data.response);break;default:clearTimeout(p),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nn(){return window}function YN(t){Nn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uE(){return typeof Nn().WorkerGlobalScope<"u"&&typeof Nn().importScripts=="function"}async function JN(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function XN(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function ZN(){return uE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dE="firebaseLocalStorageDb",eC=1,xc="firebaseLocalStorage",hE="fbase_key";class No{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function su(t,e){return t.transaction([xc],e?"readwrite":"readonly").objectStore(xc)}function tC(){const t=indexedDB.deleteDatabase(dE);return new No(t).toPromise()}function xh(){const t=indexedDB.open(dE,eC);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(xc,{keyPath:hE})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(xc)?e(r):(r.close(),await tC(),e(await xh()))})})}async function Qg(t,e,n){const r=su(t,!0).put({[hE]:e,value:n});return new No(r).toPromise()}async function nC(t,e){const n=su(t,!1).get(e),r=await new No(n).toPromise();return r===void 0?null:r.value}function Yg(t,e){const n=su(t,!0).delete(e);return new No(n).toPromise()}const rC=800,sC=3;class fE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await xh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>sC)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return uE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ru._getInstance(ZN()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await JN(),!this.activeServiceWorker)return;this.sender=new QN(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||XN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await xh();return await Qg(e,Ic,"1"),await Yg(e,Ic),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Qg(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>nC(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Yg(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=su(s,!1).getAll();return new No(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),rC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}fE.type="LOCAL";const iC=fE;new Io(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aC(t,e){return e?Un(e):(te(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf extends Kf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return pi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return pi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return pi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function oC(t){return sE(t.auth,new Jf(t),t.bypassAuthState)}function lC(t){const{auth:e,user:n}=t;return te(n,e,"internal-error"),LN(n,new Jf(t),t.bypassAuthState)}async function cC(t){const{auth:e,user:n}=t;return te(n,e,"internal-error"),ON(n,new Jf(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pE{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:a,type:c}=e;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return oC;case"linkViaPopup":case"linkViaRedirect":return cC;case"reauthViaPopup":case"reauthViaRedirect":return lC;default:pn(this.auth,"internal-error")}}resolve(e){Yn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Yn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uC=new Io(2e3,1e4);class ii extends pE{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,ii.currentPopupAction&&ii.currentPopupAction.cancel(),ii.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return te(e,this.auth,"internal-error"),e}async onExecution(){Yn(this.filter.length===1,"Popup operations only handle one event");const e=Yf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Sn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Sn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ii.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Sn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,uC.get())};e()}}ii.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dC="pendingRedirect",Fl=new Map;class hC extends pE{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Fl.get(this.auth._key());if(!e){try{const r=await fC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Fl.set(this.auth._key(),e)}return this.bypassAuthState||Fl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function fC(t,e){const n=gC(e),r=mC(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function pC(t,e){Fl.set(t._key(),e)}function mC(t){return Un(t._redirectPersistence)}function gC(t){return Ml(dC,t.config.apiKey,t.name)}async function yC(t,e,n=!1){if(Qt(t.app))return Promise.reject(Bn(t));const r=Rs(t),s=aC(r,e),a=await new hC(r,s,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC=10*60*1e3;class _C{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!wC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!mE(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(Sn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=vC&&this.cachedEventUids.clear(),this.cachedEventUids.has(Jg(e))}saveEventToCache(e){this.cachedEventUids.add(Jg(e)),this.lastProcessedEventTime=Date.now()}}function Jg(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function mE({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function wC(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return mE(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EC(t,e={}){return Gr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,IC=/^https?/;async function xC(t){if(t.config.emulator)return;const{authorizedDomains:e}=await EC(t);for(const n of e)try{if(SC(n))return}catch{}pn(t,"unauthorized-domain")}function SC(t){const e=Eh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===r}if(!IC.test(n))return!1;if(TC.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NC=new Io(3e4,6e4);function Xg(){const t=Nn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function CC(t){return new Promise((e,n)=>{var s,i,a;function r(){Xg(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Xg(),n(Sn(t,"network-request-failed"))},timeout:NC.get()})}if((i=(s=Nn().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((a=Nn().gapi)!=null&&a.load)r();else{const c=vN("iframefcb");return Nn()[c]=()=>{gapi.load?r():n(Sn(t,"network-request-failed"))},Zw(`${yN()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw Ul=null,e})}let Ul=null;function AC(t){return Ul=Ul||CC(t),Ul}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kC=new Io(5e3,15e3),PC="__/auth/iframe",RC="emulator/auth/iframe",jC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},bC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function DC(t){const e=t.config;te(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Wf(e,RC):`https://${t.config.authDomain}/${PC}`,r={apiKey:e.apiKey,appName:t.name,v:Mi},s=bC.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${To(r).slice(1)}`}async function VC(t){const e=await AC(t),n=Nn().gapi;return te(n,t,"internal-error"),e.open({where:document.body,url:DC(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:jC,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const a=Sn(t,"network-request-failed"),c=Nn().setTimeout(()=>{i(a)},kC.get());function u(){Nn().clearTimeout(c),s(r)}r.ping(u).then(u,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},LC=500,MC=600,FC="_blank",UC="http://localhost";class Zg{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function zC(t,e,n,r=LC,s=MC){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u={...OC,width:r.toString(),height:s.toString(),top:i,left:a},d=wt().toLowerCase();n&&(c=Hw(d)?FC:n),qw(d)&&(e=e||UC,u.scrollbars="yes");const p=Object.entries(u).reduce((g,[_,P])=>`${g}${_}=${P},`,"");if(lN(d)&&c!=="_self")return BC(e||"",c),new Zg(null);const m=window.open(e||"",c,p);te(m,t,"popup-blocked");try{m.focus()}catch{}return new Zg(m)}function BC(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $C="__/auth/handler",qC="emulator/auth/handler",WC=encodeURIComponent("fac");async function ey(t,e,n,r,s,i){te(t.config.authDomain,t,"auth-domain-config-required"),te(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Mi,eventId:s};if(e instanceof nE){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",Px(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,m]of Object.entries({}))a[p]=m}if(e instanceof So){const p=e.getScopes().filter(m=>m!=="");p.length>0&&(a.scopes=p.join(","))}t.tenantId&&(a.tid=t.tenantId);const c=a;for(const p of Object.keys(c))c[p]===void 0&&delete c[p];const u=await t._getAppCheckToken(),d=u?`#${WC}=${encodeURIComponent(u)}`:"";return`${HC(t)}?${To(c).slice(1)}${d}`}function HC({config:t}){return t.emulator?Wf(t,qC):`https://${t.authDomain}/${$C}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yd="webStorageSupport";class GC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=cE,this._completeRedirectFn=yC,this._overrideRedirectResult=pC}async _openPopup(e,n,r,s){var a;Yn((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const i=await ey(e,n,r,Eh(),s);return zC(e,i,Yf())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await ey(e,n,r,Eh(),s);return YN(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Yn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await VC(e),r=new _C(e);return n.register("authEvent",s=>(te(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(yd,{type:yd},s=>{var a;const i=(a=s==null?void 0:s[0])==null?void 0:a[yd];i!==void 0&&n(!!i),pn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=xC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Jw()||Ww()||Gf()}}const KC=GC;var ty="@firebase/auth",ny="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YC(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function JC(t){Si(new Is("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=r.options;te(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:a,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Xw(t)},d=new pN(r,s,i,u);return xN(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Si(new Is("auth-internal",e=>{const n=Rs(e.getProvider("auth").getImmediate());return(r=>new QC(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),jr(ty,ny,YC(t)),jr(ty,ny,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XC=5*60,ZC=Cw("authIdTokenMaxAge")||XC;let ry=null;const eA=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>ZC)return;const s=n==null?void 0:n.token;ry!==s&&(ry=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function tA(t=bw()){const e=$f(t,"auth");if(e.isInitialized())return e.getImmediate();const n=IN(t,{popupRedirectResolver:KC,persistence:[iC,GN,cE]}),r=Cw("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const a=eA(i.toString());BN(n,a,()=>a(n.currentUser)),zN(n,c=>a(c))}}const s=Sw("auth");return s&&SN(n,`http://${s}`),n}function nA(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}mN({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Sn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",nA().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});JC("Browser");var sy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var br,gE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(w,y){function I(){}I.prototype=y.prototype,w.F=y.prototype,w.prototype=new I,w.prototype.constructor=w,w.D=function(S,A,j){for(var C=Array(arguments.length-2),ae=2;ae<arguments.length;ae++)C[ae-2]=arguments[ae];return y.prototype[A].apply(S,C)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(w,y,I){I||(I=0);const S=Array(16);if(typeof y=="string")for(var A=0;A<16;++A)S[A]=y.charCodeAt(I++)|y.charCodeAt(I++)<<8|y.charCodeAt(I++)<<16|y.charCodeAt(I++)<<24;else for(A=0;A<16;++A)S[A]=y[I++]|y[I++]<<8|y[I++]<<16|y[I++]<<24;y=w.g[0],I=w.g[1],A=w.g[2];let j=w.g[3],C;C=y+(j^I&(A^j))+S[0]+3614090360&4294967295,y=I+(C<<7&4294967295|C>>>25),C=j+(A^y&(I^A))+S[1]+3905402710&4294967295,j=y+(C<<12&4294967295|C>>>20),C=A+(I^j&(y^I))+S[2]+606105819&4294967295,A=j+(C<<17&4294967295|C>>>15),C=I+(y^A&(j^y))+S[3]+3250441966&4294967295,I=A+(C<<22&4294967295|C>>>10),C=y+(j^I&(A^j))+S[4]+4118548399&4294967295,y=I+(C<<7&4294967295|C>>>25),C=j+(A^y&(I^A))+S[5]+1200080426&4294967295,j=y+(C<<12&4294967295|C>>>20),C=A+(I^j&(y^I))+S[6]+2821735955&4294967295,A=j+(C<<17&4294967295|C>>>15),C=I+(y^A&(j^y))+S[7]+4249261313&4294967295,I=A+(C<<22&4294967295|C>>>10),C=y+(j^I&(A^j))+S[8]+1770035416&4294967295,y=I+(C<<7&4294967295|C>>>25),C=j+(A^y&(I^A))+S[9]+2336552879&4294967295,j=y+(C<<12&4294967295|C>>>20),C=A+(I^j&(y^I))+S[10]+4294925233&4294967295,A=j+(C<<17&4294967295|C>>>15),C=I+(y^A&(j^y))+S[11]+2304563134&4294967295,I=A+(C<<22&4294967295|C>>>10),C=y+(j^I&(A^j))+S[12]+1804603682&4294967295,y=I+(C<<7&4294967295|C>>>25),C=j+(A^y&(I^A))+S[13]+4254626195&4294967295,j=y+(C<<12&4294967295|C>>>20),C=A+(I^j&(y^I))+S[14]+2792965006&4294967295,A=j+(C<<17&4294967295|C>>>15),C=I+(y^A&(j^y))+S[15]+1236535329&4294967295,I=A+(C<<22&4294967295|C>>>10),C=y+(A^j&(I^A))+S[1]+4129170786&4294967295,y=I+(C<<5&4294967295|C>>>27),C=j+(I^A&(y^I))+S[6]+3225465664&4294967295,j=y+(C<<9&4294967295|C>>>23),C=A+(y^I&(j^y))+S[11]+643717713&4294967295,A=j+(C<<14&4294967295|C>>>18),C=I+(j^y&(A^j))+S[0]+3921069994&4294967295,I=A+(C<<20&4294967295|C>>>12),C=y+(A^j&(I^A))+S[5]+3593408605&4294967295,y=I+(C<<5&4294967295|C>>>27),C=j+(I^A&(y^I))+S[10]+38016083&4294967295,j=y+(C<<9&4294967295|C>>>23),C=A+(y^I&(j^y))+S[15]+3634488961&4294967295,A=j+(C<<14&4294967295|C>>>18),C=I+(j^y&(A^j))+S[4]+3889429448&4294967295,I=A+(C<<20&4294967295|C>>>12),C=y+(A^j&(I^A))+S[9]+568446438&4294967295,y=I+(C<<5&4294967295|C>>>27),C=j+(I^A&(y^I))+S[14]+3275163606&4294967295,j=y+(C<<9&4294967295|C>>>23),C=A+(y^I&(j^y))+S[3]+4107603335&4294967295,A=j+(C<<14&4294967295|C>>>18),C=I+(j^y&(A^j))+S[8]+1163531501&4294967295,I=A+(C<<20&4294967295|C>>>12),C=y+(A^j&(I^A))+S[13]+2850285829&4294967295,y=I+(C<<5&4294967295|C>>>27),C=j+(I^A&(y^I))+S[2]+4243563512&4294967295,j=y+(C<<9&4294967295|C>>>23),C=A+(y^I&(j^y))+S[7]+1735328473&4294967295,A=j+(C<<14&4294967295|C>>>18),C=I+(j^y&(A^j))+S[12]+2368359562&4294967295,I=A+(C<<20&4294967295|C>>>12),C=y+(I^A^j)+S[5]+4294588738&4294967295,y=I+(C<<4&4294967295|C>>>28),C=j+(y^I^A)+S[8]+2272392833&4294967295,j=y+(C<<11&4294967295|C>>>21),C=A+(j^y^I)+S[11]+1839030562&4294967295,A=j+(C<<16&4294967295|C>>>16),C=I+(A^j^y)+S[14]+4259657740&4294967295,I=A+(C<<23&4294967295|C>>>9),C=y+(I^A^j)+S[1]+2763975236&4294967295,y=I+(C<<4&4294967295|C>>>28),C=j+(y^I^A)+S[4]+1272893353&4294967295,j=y+(C<<11&4294967295|C>>>21),C=A+(j^y^I)+S[7]+4139469664&4294967295,A=j+(C<<16&4294967295|C>>>16),C=I+(A^j^y)+S[10]+3200236656&4294967295,I=A+(C<<23&4294967295|C>>>9),C=y+(I^A^j)+S[13]+681279174&4294967295,y=I+(C<<4&4294967295|C>>>28),C=j+(y^I^A)+S[0]+3936430074&4294967295,j=y+(C<<11&4294967295|C>>>21),C=A+(j^y^I)+S[3]+3572445317&4294967295,A=j+(C<<16&4294967295|C>>>16),C=I+(A^j^y)+S[6]+76029189&4294967295,I=A+(C<<23&4294967295|C>>>9),C=y+(I^A^j)+S[9]+3654602809&4294967295,y=I+(C<<4&4294967295|C>>>28),C=j+(y^I^A)+S[12]+3873151461&4294967295,j=y+(C<<11&4294967295|C>>>21),C=A+(j^y^I)+S[15]+530742520&4294967295,A=j+(C<<16&4294967295|C>>>16),C=I+(A^j^y)+S[2]+3299628645&4294967295,I=A+(C<<23&4294967295|C>>>9),C=y+(A^(I|~j))+S[0]+4096336452&4294967295,y=I+(C<<6&4294967295|C>>>26),C=j+(I^(y|~A))+S[7]+1126891415&4294967295,j=y+(C<<10&4294967295|C>>>22),C=A+(y^(j|~I))+S[14]+2878612391&4294967295,A=j+(C<<15&4294967295|C>>>17),C=I+(j^(A|~y))+S[5]+4237533241&4294967295,I=A+(C<<21&4294967295|C>>>11),C=y+(A^(I|~j))+S[12]+1700485571&4294967295,y=I+(C<<6&4294967295|C>>>26),C=j+(I^(y|~A))+S[3]+2399980690&4294967295,j=y+(C<<10&4294967295|C>>>22),C=A+(y^(j|~I))+S[10]+4293915773&4294967295,A=j+(C<<15&4294967295|C>>>17),C=I+(j^(A|~y))+S[1]+2240044497&4294967295,I=A+(C<<21&4294967295|C>>>11),C=y+(A^(I|~j))+S[8]+1873313359&4294967295,y=I+(C<<6&4294967295|C>>>26),C=j+(I^(y|~A))+S[15]+4264355552&4294967295,j=y+(C<<10&4294967295|C>>>22),C=A+(y^(j|~I))+S[6]+2734768916&4294967295,A=j+(C<<15&4294967295|C>>>17),C=I+(j^(A|~y))+S[13]+1309151649&4294967295,I=A+(C<<21&4294967295|C>>>11),C=y+(A^(I|~j))+S[4]+4149444226&4294967295,y=I+(C<<6&4294967295|C>>>26),C=j+(I^(y|~A))+S[11]+3174756917&4294967295,j=y+(C<<10&4294967295|C>>>22),C=A+(y^(j|~I))+S[2]+718787259&4294967295,A=j+(C<<15&4294967295|C>>>17),C=I+(j^(A|~y))+S[9]+3951481745&4294967295,w.g[0]=w.g[0]+y&4294967295,w.g[1]=w.g[1]+(A+(C<<21&4294967295|C>>>11))&4294967295,w.g[2]=w.g[2]+A&4294967295,w.g[3]=w.g[3]+j&4294967295}r.prototype.v=function(w,y){y===void 0&&(y=w.length);const I=y-this.blockSize,S=this.C;let A=this.h,j=0;for(;j<y;){if(A==0)for(;j<=I;)s(this,w,j),j+=this.blockSize;if(typeof w=="string"){for(;j<y;)if(S[A++]=w.charCodeAt(j++),A==this.blockSize){s(this,S),A=0;break}}else for(;j<y;)if(S[A++]=w[j++],A==this.blockSize){s(this,S),A=0;break}}this.h=A,this.o+=y},r.prototype.A=function(){var w=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);w[0]=128;for(var y=1;y<w.length-8;++y)w[y]=0;y=this.o*8;for(var I=w.length-8;I<w.length;++I)w[I]=y&255,y/=256;for(this.v(w),w=Array(16),y=0,I=0;I<4;++I)for(let S=0;S<32;S+=8)w[y++]=this.g[I]>>>S&255;return w};function i(w,y){var I=c;return Object.prototype.hasOwnProperty.call(I,w)?I[w]:I[w]=y(w)}function a(w,y){this.h=y;const I=[];let S=!0;for(let A=w.length-1;A>=0;A--){const j=w[A]|0;S&&j==y||(I[A]=j,S=!1)}this.g=I}var c={};function u(w){return-128<=w&&w<128?i(w,function(y){return new a([y|0],y<0?-1:0)}):new a([w|0],w<0?-1:0)}function d(w){if(isNaN(w)||!isFinite(w))return m;if(w<0)return L(d(-w));const y=[];let I=1;for(let S=0;w>=I;S++)y[S]=w/I|0,I*=4294967296;return new a(y,0)}function p(w,y){if(w.length==0)throw Error("number format error: empty string");if(y=y||10,y<2||36<y)throw Error("radix out of range: "+y);if(w.charAt(0)=="-")return L(p(w.substring(1),y));if(w.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=d(Math.pow(y,8));let S=m;for(let j=0;j<w.length;j+=8){var A=Math.min(8,w.length-j);const C=parseInt(w.substring(j,j+A),y);A<8?(A=d(Math.pow(y,A)),S=S.j(A).add(d(C))):(S=S.j(I),S=S.add(d(C)))}return S}var m=u(0),g=u(1),_=u(16777216);t=a.prototype,t.m=function(){if(R(this))return-L(this).m();let w=0,y=1;for(let I=0;I<this.g.length;I++){const S=this.i(I);w+=(S>=0?S:4294967296+S)*y,y*=4294967296}return w},t.toString=function(w){if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(P(this))return"0";if(R(this))return"-"+L(this).toString(w);const y=d(Math.pow(w,6));var I=this;let S="";for(;;){const A=O(I,y).g;I=N(I,A.j(y));let j=((I.g.length>0?I.g[0]:I.h)>>>0).toString(w);if(I=A,P(I))return j+S;for(;j.length<6;)j="0"+j;S=j+S}},t.i=function(w){return w<0?0:w<this.g.length?this.g[w]:this.h};function P(w){if(w.h!=0)return!1;for(let y=0;y<w.g.length;y++)if(w.g[y]!=0)return!1;return!0}function R(w){return w.h==-1}t.l=function(w){return w=N(this,w),R(w)?-1:P(w)?0:1};function L(w){const y=w.g.length,I=[];for(let S=0;S<y;S++)I[S]=~w.g[S];return new a(I,~w.h).add(g)}t.abs=function(){return R(this)?L(this):this},t.add=function(w){const y=Math.max(this.g.length,w.g.length),I=[];let S=0;for(let A=0;A<=y;A++){let j=S+(this.i(A)&65535)+(w.i(A)&65535),C=(j>>>16)+(this.i(A)>>>16)+(w.i(A)>>>16);S=C>>>16,j&=65535,C&=65535,I[A]=C<<16|j}return new a(I,I[I.length-1]&-2147483648?-1:0)};function N(w,y){return w.add(L(y))}t.j=function(w){if(P(this)||P(w))return m;if(R(this))return R(w)?L(this).j(L(w)):L(L(this).j(w));if(R(w))return L(this.j(L(w)));if(this.l(_)<0&&w.l(_)<0)return d(this.m()*w.m());const y=this.g.length+w.g.length,I=[];for(var S=0;S<2*y;S++)I[S]=0;for(S=0;S<this.g.length;S++)for(let A=0;A<w.g.length;A++){const j=this.i(S)>>>16,C=this.i(S)&65535,ae=w.i(A)>>>16,Xe=w.i(A)&65535;I[2*S+2*A]+=C*Xe,x(I,2*S+2*A),I[2*S+2*A+1]+=j*Xe,x(I,2*S+2*A+1),I[2*S+2*A+1]+=C*ae,x(I,2*S+2*A+1),I[2*S+2*A+2]+=j*ae,x(I,2*S+2*A+2)}for(w=0;w<y;w++)I[w]=I[2*w+1]<<16|I[2*w];for(w=y;w<2*y;w++)I[w]=0;return new a(I,0)};function x(w,y){for(;(w[y]&65535)!=w[y];)w[y+1]+=w[y]>>>16,w[y]&=65535,y++}function E(w,y){this.g=w,this.h=y}function O(w,y){if(P(y))throw Error("division by zero");if(P(w))return new E(m,m);if(R(w))return y=O(L(w),y),new E(L(y.g),L(y.h));if(R(y))return y=O(w,L(y)),new E(L(y.g),y.h);if(w.g.length>30){if(R(w)||R(y))throw Error("slowDivide_ only works with positive integers.");for(var I=g,S=y;S.l(w)<=0;)I=b(I),S=b(S);var A=U(I,1),j=U(S,1);for(S=U(S,2),I=U(I,2);!P(S);){var C=j.add(S);C.l(w)<=0&&(A=A.add(I),j=C),S=U(S,1),I=U(I,1)}return y=N(w,A.j(y)),new E(A,y)}for(A=m;w.l(y)>=0;){for(I=Math.max(1,Math.floor(w.m()/y.m())),S=Math.ceil(Math.log(I)/Math.LN2),S=S<=48?1:Math.pow(2,S-48),j=d(I),C=j.j(y);R(C)||C.l(w)>0;)I-=S,j=d(I),C=j.j(y);P(j)&&(j=g),A=A.add(j),w=N(w,C)}return new E(A,w)}t.B=function(w){return O(this,w).h},t.and=function(w){const y=Math.max(this.g.length,w.g.length),I=[];for(let S=0;S<y;S++)I[S]=this.i(S)&w.i(S);return new a(I,this.h&w.h)},t.or=function(w){const y=Math.max(this.g.length,w.g.length),I=[];for(let S=0;S<y;S++)I[S]=this.i(S)|w.i(S);return new a(I,this.h|w.h)},t.xor=function(w){const y=Math.max(this.g.length,w.g.length),I=[];for(let S=0;S<y;S++)I[S]=this.i(S)^w.i(S);return new a(I,this.h^w.h)};function b(w){const y=w.g.length+1,I=[];for(let S=0;S<y;S++)I[S]=w.i(S)<<1|w.i(S-1)>>>31;return new a(I,w.h)}function U(w,y){const I=y>>5;y%=32;const S=w.g.length-I,A=[];for(let j=0;j<S;j++)A[j]=y>0?w.i(j+I)>>>y|w.i(j+I+1)<<32-y:w.i(j+I);return new a(A,w.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,gE=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=p,br=a}).apply(typeof sy<"u"?sy:typeof self<"u"?self:typeof window<"u"?window:{});var wl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var yE,Ta,vE,zl,Sh,_E,wE,EE;(function(){var t,e=Object.defineProperty;function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof wl=="object"&&wl];for(var h=0;h<o.length;++h){var f=o[h];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function s(o,h){if(h)e:{var f=r;o=o.split(".");for(var v=0;v<o.length-1;v++){var D=o[v];if(!(D in f))break e;f=f[D]}o=o[o.length-1],v=f[o],h=h(v),h!=v&&h!=null&&e(f,o,{configurable:!0,writable:!0,value:h})}}s("Symbol.dispose",function(o){return o||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(o){return o||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(o){return o||function(h){var f=[],v;for(v in h)Object.prototype.hasOwnProperty.call(h,v)&&f.push([v,h[v]]);return f}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},a=this||self;function c(o){var h=typeof o;return h=="object"&&o!=null||h=="function"}function u(o,h,f){return o.call.apply(o.bind,arguments)}function d(o,h,f){return d=u,d.apply(null,arguments)}function p(o,h){var f=Array.prototype.slice.call(arguments,1);return function(){var v=f.slice();return v.push.apply(v,arguments),o.apply(this,v)}}function m(o,h){function f(){}f.prototype=h.prototype,o.Z=h.prototype,o.prototype=new f,o.prototype.constructor=o,o.Ob=function(v,D,V){for(var W=Array(arguments.length-2),oe=2;oe<arguments.length;oe++)W[oe-2]=arguments[oe];return h.prototype[D].apply(v,W)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?o=>o&&AsyncContext.Snapshot.wrap(o):o=>o;function _(o){const h=o.length;if(h>0){const f=Array(h);for(let v=0;v<h;v++)f[v]=o[v];return f}return[]}function P(o,h){for(let v=1;v<arguments.length;v++){const D=arguments[v];var f=typeof D;if(f=f!="object"?f:D?Array.isArray(D)?"array":f:"null",f=="array"||f=="object"&&typeof D.length=="number"){f=o.length||0;const V=D.length||0;o.length=f+V;for(let W=0;W<V;W++)o[f+W]=D[W]}else o.push(D)}}class R{constructor(h,f){this.i=h,this.j=f,this.h=0,this.g=null}get(){let h;return this.h>0?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function L(o){a.setTimeout(()=>{throw o},0)}function N(){var o=w;let h=null;return o.g&&(h=o.g,o.g=o.g.next,o.g||(o.h=null),h.next=null),h}class x{constructor(){this.h=this.g=null}add(h,f){const v=E.get();v.set(h,f),this.h?this.h.next=v:this.g=v,this.h=v}}var E=new R(()=>new O,o=>o.reset());class O{constructor(){this.next=this.g=this.h=null}set(h,f){this.h=h,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let b,U=!1,w=new x,y=()=>{const o=Promise.resolve(void 0);b=()=>{o.then(I)}};function I(){for(var o;o=N();){try{o.h.call(o.g)}catch(f){L(f)}var h=E;h.j(o),h.h<100&&(h.h++,o.next=h.g,h.g=o)}U=!1}function S(){this.u=this.u,this.C=this.C}S.prototype.u=!1,S.prototype.dispose=function(){this.u||(this.u=!0,this.N())},S.prototype[Symbol.dispose]=function(){this.dispose()},S.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function A(o,h){this.type=o,this.g=this.target=h,this.defaultPrevented=!1}A.prototype.h=function(){this.defaultPrevented=!0};var j=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var o=!1,h=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const f=()=>{};a.addEventListener("test",f,h),a.removeEventListener("test",f,h)}catch{}return o}();function C(o){return/^[\s\xa0]*$/.test(o)}function ae(o,h){A.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o&&this.init(o,h)}m(ae,A),ae.prototype.init=function(o,h){const f=this.type=o.type,v=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;this.target=o.target||o.srcElement,this.g=h,h=o.relatedTarget,h||(f=="mouseover"?h=o.fromElement:f=="mouseout"&&(h=o.toElement)),this.relatedTarget=h,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=o.pointerType,this.state=o.state,this.i=o,o.defaultPrevented&&ae.Z.h.call(this)},ae.prototype.h=function(){ae.Z.h.call(this);const o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var Xe="closure_listenable_"+(Math.random()*1e6|0),Be=0;function qt(o,h,f,v,D){this.listener=o,this.proxy=null,this.src=h,this.type=f,this.capture=!!v,this.ha=D,this.key=++Be,this.da=this.fa=!1}function G(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function B(o,h,f){for(const v in o)h.call(f,o[v],v,o)}function ee(o,h){for(const f in o)h.call(void 0,o[f],f,o)}function _e(o){const h={};for(const f in o)h[f]=o[f];return h}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function q(o,h){let f,v;for(let D=1;D<arguments.length;D++){v=arguments[D];for(f in v)o[f]=v[f];for(let V=0;V<k.length;V++)f=k[V],Object.prototype.hasOwnProperty.call(v,f)&&(o[f]=v[f])}}function Z(o){this.src=o,this.g={},this.h=0}Z.prototype.add=function(o,h,f,v,D){const V=o.toString();o=this.g[V],o||(o=this.g[V]=[],this.h++);const W=me(o,h,v,D);return W>-1?(h=o[W],f||(h.fa=!1)):(h=new qt(h,this.src,V,!!v,D),h.fa=f,o.push(h)),h};function se(o,h){const f=h.type;if(f in o.g){var v=o.g[f],D=Array.prototype.indexOf.call(v,h,void 0),V;(V=D>=0)&&Array.prototype.splice.call(v,D,1),V&&(G(h),o.g[f].length==0&&(delete o.g[f],o.h--))}}function me(o,h,f,v){for(let D=0;D<o.length;++D){const V=o[D];if(!V.da&&V.listener==h&&V.capture==!!f&&V.ha==v)return D}return-1}var K="closure_lm_"+(Math.random()*1e6|0),Wt={};function nr(o,h,f,v,D){if(Array.isArray(h)){for(let V=0;V<h.length;V++)nr(o,h[V],f,v,D);return null}return f=dt(f),o&&o[Xe]?o.J(h,f,c(v)?!!v.capture:!1,D):Do(o,h,f,!1,v,D)}function Do(o,h,f,v,D,V){if(!h)throw Error("Invalid event type");const W=c(D)?!!D.capture:!!D;let oe=jn(o);if(oe||(o[K]=oe=new Z(o)),f=oe.add(h,f,v,W,V),f.proxy)return f;if(v=qi(),f.proxy=v,v.src=o,v.listener=f,o.addEventListener)j||(D=W),D===void 0&&(D=!1),o.addEventListener(h.toString(),v,D);else if(o.attachEvent)o.attachEvent(Vo(h.toString()),v);else if(o.addListener&&o.removeListener)o.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return f}function qi(){function o(f){return h.call(o.src,o.listener,f)}const h=xu;return o}function Kr(o,h,f,v,D){if(Array.isArray(h))for(var V=0;V<h.length;V++)Kr(o,h[V],f,v,D);else v=c(v)?!!v.capture:!!v,f=dt(f),o&&o[Xe]?(o=o.i,V=String(h).toString(),V in o.g&&(h=o.g[V],f=me(h,f,v,D),f>-1&&(G(h[f]),Array.prototype.splice.call(h,f,1),h.length==0&&(delete o.g[V],o.h--)))):o&&(o=jn(o))&&(h=o.g[h.toString()],o=-1,h&&(o=me(h,f,v,D)),(f=o>-1?h[o]:null)&&It(f))}function It(o){if(typeof o!="number"&&o&&!o.da){var h=o.src;if(h&&h[Xe])se(h.i,o);else{var f=o.type,v=o.proxy;h.removeEventListener?h.removeEventListener(f,v,o.capture):h.detachEvent?h.detachEvent(Vo(f),v):h.addListener&&h.removeListener&&h.removeListener(v),(f=jn(h))?(se(f,o),f.h==0&&(f.src=null,h[K]=null)):G(o)}}}function Vo(o){return o in Wt?Wt[o]:Wt[o]="on"+o}function xu(o,h){if(o.da)o=!0;else{h=new ae(h,this);const f=o.listener,v=o.ha||o.src;o.fa&&It(o),o=f.call(v,h)}return o}function jn(o){return o=o[K],o instanceof Z?o:null}var le="__closure_events_fn_"+(Math.random()*1e9>>>0);function dt(o){return typeof o=="function"?o:(o[le]||(o[le]=function(h){return o.handleEvent(h)}),o[le])}function $e(){S.call(this),this.i=new Z(this),this.M=this,this.G=null}m($e,S),$e.prototype[Xe]=!0,$e.prototype.removeEventListener=function(o,h,f,v){Kr(this,o,h,f,v)};function Ze(o,h){var f,v=o.G;if(v)for(f=[];v;v=v.G)f.push(v);if(o=o.M,v=h.type||h,typeof h=="string")h=new A(h,o);else if(h instanceof A)h.target=h.target||o;else{var D=h;h=new A(v,o),q(h,D)}D=!0;let V,W;if(f)for(W=f.length-1;W>=0;W--)V=h.g=f[W],D=rr(V,v,!0,h)&&D;if(V=h.g=o,D=rr(V,v,!0,h)&&D,D=rr(V,v,!1,h)&&D,f)for(W=0;W<f.length;W++)V=h.g=f[W],D=rr(V,v,!1,h)&&D}$e.prototype.N=function(){if($e.Z.N.call(this),this.i){var o=this.i;for(const h in o.g){const f=o.g[h];for(let v=0;v<f.length;v++)G(f[v]);delete o.g[h],o.h--}}this.G=null},$e.prototype.J=function(o,h,f,v){return this.i.add(String(o),h,!1,f,v)},$e.prototype.K=function(o,h,f,v){return this.i.add(String(o),h,!0,f,v)};function rr(o,h,f,v){if(h=o.i.g[String(h)],!h)return!0;h=h.concat();let D=!0;for(let V=0;V<h.length;++V){const W=h[V];if(W&&!W.da&&W.capture==f){const oe=W.listener,Ke=W.ha||W.src;W.fa&&se(o.i,W),D=oe.call(Ke,v)!==!1&&D}}return D&&!v.defaultPrevented}function Oo(o,h){if(typeof o!="function")if(o&&typeof o.handleEvent=="function")o=d(o.handleEvent,o);else throw Error("Invalid listener argument");return Number(h)>2147483647?-1:a.setTimeout(o,h||0)}function Wi(o){o.g=Oo(()=>{o.g=null,o.i&&(o.i=!1,Wi(o))},o.l);const h=o.h;o.h=null,o.m.apply(null,h)}class Su extends S{constructor(h,f){super(),this.m=h,this.l=f,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Wi(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Qr(o){S.call(this),this.h=o,this.g={}}m(Qr,S);var Lo=[];function Mo(o){B(o.g,function(h,f){this.g.hasOwnProperty(f)&&It(h)},o),o.g={}}Qr.prototype.N=function(){Qr.Z.N.call(this),Mo(this)},Qr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Hi=a.JSON.stringify,Nu=a.JSON.parse,Cu=class{stringify(o){return a.JSON.stringify(o,void 0)}parse(o){return a.JSON.parse(o,void 0)}};function Fo(){}function Uo(){}var Yr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Gi(){A.call(this,"d")}m(Gi,A);function Ki(){A.call(this,"c")}m(Ki,A);var bn={},zo=null;function Fs(){return zo=zo||new $e}bn.Ia="serverreachability";function Qi(o){A.call(this,bn.Ia,o)}m(Qi,A);function Jr(o){const h=Fs();Ze(h,new Qi(h))}bn.STAT_EVENT="statevent";function Bo(o,h){A.call(this,bn.STAT_EVENT,o),this.stat=h}m(Bo,A);function st(o){const h=Fs();Ze(h,new Bo(h,o))}bn.Ja="timingevent";function $o(o,h){A.call(this,bn.Ja,o),this.size=h}m($o,A);function Xr(o,h){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){o()},h)}function Zr(){this.g=!0}Zr.prototype.ua=function(){this.g=!1};function Yi(o,h,f,v,D,V){o.info(function(){if(o.g)if(V){var W="",oe=V.split("&");for(let xe=0;xe<oe.length;xe++){var Ke=oe[xe].split("=");if(Ke.length>1){const et=Ke[0];Ke=Ke[1];const vn=et.split("_");W=vn.length>=2&&vn[1]=="type"?W+(et+"="+Ke+"&"):W+(et+"=redacted&")}}}else W=null;else W=V;return"XMLHTTP REQ ("+v+") [attempt "+D+"]: "+h+`
`+f+`
`+W})}function qo(o,h,f,v,D,V,W){o.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+D+"]: "+h+`
`+f+`
`+V+" "+W})}function Dn(o,h,f,v){o.info(function(){return"XMLHTTP TEXT ("+h+"): "+Ho(o,f)+(v?" "+v:"")})}function Wo(o,h){o.info(function(){return"TIMEOUT: "+h})}Zr.prototype.info=function(){};function Ho(o,h){if(!o.g)return h;if(!h)return null;try{const V=JSON.parse(h);if(V){for(o=0;o<V.length;o++)if(Array.isArray(V[o])){var f=V[o];if(!(f.length<2)){var v=f[1];if(Array.isArray(v)&&!(v.length<1)){var D=v[0];if(D!="noop"&&D!="stop"&&D!="close")for(let W=1;W<v.length;W++)v[W]=""}}}}return Hi(V)}catch{return h}}var es={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},T={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},H;function we(){}m(we,Fo),we.prototype.g=function(){return new XMLHttpRequest},H=new we;function ye(o){return encodeURIComponent(String(o))}function nn(o){var h=1;o=o.split(":");const f=[];for(;h>0&&o.length;)f.push(o.shift()),h--;return o.length&&f.push(o.join(":")),f}function ht(o,h,f,v){this.j=o,this.i=h,this.l=f,this.S=v||1,this.V=new Qr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ee}function Ee(){this.i=null,this.g="",this.h=!1}var ue={},At={};function kt(o,h,f){o.M=1,o.A=Ko(yn(h)),o.u=f,o.R=!0,Pt(o,null)}function Pt(o,h){o.F=Date.now(),Go(o),o.B=yn(o.A);var f=o.B,v=o.S;Array.isArray(v)||(v=[String(v)]),Jp(f.i,"t",v),o.C=0,f=o.j.L,o.h=new Ee,o.g=mm(o.j,f?h:null,!o.u),o.P>0&&(o.O=new Su(d(o.Y,o,o.g),o.P)),h=o.V,f=o.g,v=o.ba;var D="readystatechange";Array.isArray(D)||(D&&(Lo[0]=D.toString()),D=Lo);for(let V=0;V<D.length;V++){const W=nr(f,D[V],v||h.handleEvent,!1,h.h||h);if(!W)break;h.g[W.key]=W}h=o.J?_e(o.J):{},o.u?(o.v||(o.v="POST"),h["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.B,o.v,o.u,h)):(o.v="GET",o.g.ea(o.B,o.v,null,h)),Jr(),Yi(o.i,o.v,o.B,o.l,o.S,o.u)}ht.prototype.ba=function(o){o=o.target;const h=this.O;h&&ar(o)==3?h.j():this.Y(o)},ht.prototype.Y=function(o){try{if(o==this.g)e:{const oe=ar(this.g),Ke=this.g.ya(),xe=this.g.ca();if(!(oe<3)&&(oe!=3||this.g&&(this.h.h||this.g.la()||sm(this.g)))){this.K||oe!=4||Ke==7||(Ke==8||xe<=0?Jr(3):Jr(2)),Au(this);var h=this.g.ca();this.X=h;var f=pT(this);if(this.o=h==200,qo(this.i,this.v,this.B,this.l,this.S,oe,h),this.o){if(this.U&&!this.L){t:{if(this.g){var v,D=this.g;if((v=D.g?D.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(v)){var V=v;break t}}V=null}if(o=V)Dn(this.i,this.l,o,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ku(this,o);else{this.o=!1,this.m=3,st(12),ts(this),Ji(this);break e}}if(this.R){o=!0;let et;for(;!this.K&&this.C<f.length;)if(et=mT(this,f),et==At){oe==4&&(this.m=4,st(14),o=!1),Dn(this.i,this.l,null,"[Incomplete Response]");break}else if(et==ue){this.m=4,st(15),Dn(this.i,this.l,f,"[Invalid Chunk]"),o=!1;break}else Dn(this.i,this.l,et,null),ku(this,et);if(Fp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),oe!=4||f.length!=0||this.h.h||(this.m=1,st(16),o=!1),this.o=this.o&&o,!o)Dn(this.i,this.l,f,"[Invalid Chunked Response]"),ts(this),Ji(this);else if(f.length>0&&!this.W){this.W=!0;var W=this.j;W.g==this&&W.aa&&!W.P&&(W.j.info("Great, no buffering proxy detected. Bytes received: "+f.length),Lu(W),W.P=!0,st(11))}}else Dn(this.i,this.l,f,null),ku(this,f);oe==4&&ts(this),this.o&&!this.K&&(oe==4?dm(this.j,this):(this.o=!1,Go(this)))}else kT(this.g),h==400&&f.indexOf("Unknown SID")>0?(this.m=3,st(12)):(this.m=0,st(13)),ts(this),Ji(this)}}}catch{}finally{}};function pT(o){if(!Fp(o))return o.g.la();const h=sm(o.g);if(h==="")return"";let f="";const v=h.length,D=ar(o.g)==4;if(!o.h.i){if(typeof TextDecoder>"u")return ts(o),Ji(o),"";o.h.i=new a.TextDecoder}for(let V=0;V<v;V++)o.h.h=!0,f+=o.h.i.decode(h[V],{stream:!(D&&V==v-1)});return h.length=0,o.h.g+=f,o.C=0,o.h.g}function Fp(o){return o.g?o.v=="GET"&&o.M!=2&&o.j.Aa:!1}function mT(o,h){var f=o.C,v=h.indexOf(`
`,f);return v==-1?At:(f=Number(h.substring(f,v)),isNaN(f)?ue:(v+=1,v+f>h.length?At:(h=h.slice(v,v+f),o.C=v+f,h)))}ht.prototype.cancel=function(){this.K=!0,ts(this)};function Go(o){o.T=Date.now()+o.H,Up(o,o.H)}function Up(o,h){if(o.D!=null)throw Error("WatchDog timer not null");o.D=Xr(d(o.aa,o),h)}function Au(o){o.D&&(a.clearTimeout(o.D),o.D=null)}ht.prototype.aa=function(){this.D=null;const o=Date.now();o-this.T>=0?(Wo(this.i,this.B),this.M!=2&&(Jr(),st(17)),ts(this),this.m=2,Ji(this)):Up(this,this.T-o)};function Ji(o){o.j.I==0||o.K||dm(o.j,o)}function ts(o){Au(o);var h=o.O;h&&typeof h.dispose=="function"&&h.dispose(),o.O=null,Mo(o.V),o.g&&(h=o.g,o.g=null,h.abort(),h.dispose())}function ku(o,h){try{var f=o.j;if(f.I!=0&&(f.g==o||Pu(f.h,o))){if(!o.L&&Pu(f.h,o)&&f.I==3){try{var v=f.Ba.g.parse(h)}catch{v=null}if(Array.isArray(v)&&v.length==3){var D=v;if(D[0]==0){e:if(!f.v){if(f.g)if(f.g.F+3e3<o.F)Zo(f),Jo(f);else break e;Ou(f),st(18)}}else f.xa=D[1],0<f.xa-f.K&&D[2]<37500&&f.F&&f.A==0&&!f.C&&(f.C=Xr(d(f.Va,f),6e3));$p(f.h)<=1&&f.ta&&(f.ta=void 0)}else rs(f,11)}else if((o.L||f.g==o)&&Zo(f),!C(h))for(D=f.Ba.g.parse(h),h=0;h<D.length;h++){let xe=D[h];const et=xe[0];if(!(et<=f.K))if(f.K=et,xe=xe[1],f.I==2)if(xe[0]=="c"){f.M=xe[1],f.ba=xe[2];const vn=xe[3];vn!=null&&(f.ka=vn,f.j.info("VER="+f.ka));const ss=xe[4];ss!=null&&(f.za=ss,f.j.info("SVER="+f.za));const or=xe[5];or!=null&&typeof or=="number"&&or>0&&(v=1.5*or,f.O=v,f.j.info("backChannelRequestTimeoutMs_="+v)),v=f;const lr=o.g;if(lr){const tl=lr.g?lr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(tl){var V=v.h;V.g||tl.indexOf("spdy")==-1&&tl.indexOf("quic")==-1&&tl.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(Ru(V,V.h),V.h=null))}if(v.G){const Mu=lr.g?lr.g.getResponseHeader("X-HTTP-Session-Id"):null;Mu&&(v.wa=Mu,Ce(v.J,v.G,Mu))}}f.I=3,f.l&&f.l.ra(),f.aa&&(f.T=Date.now()-o.F,f.j.info("Handshake RTT: "+f.T+"ms")),v=f;var W=o;if(v.na=pm(v,v.L?v.ba:null,v.W),W.L){qp(v.h,W);var oe=W,Ke=v.O;Ke&&(oe.H=Ke),oe.D&&(Au(oe),Go(oe)),v.g=W}else cm(v);f.i.length>0&&Xo(f)}else xe[0]!="stop"&&xe[0]!="close"||rs(f,7);else f.I==3&&(xe[0]=="stop"||xe[0]=="close"?xe[0]=="stop"?rs(f,7):Vu(f):xe[0]!="noop"&&f.l&&f.l.qa(xe),f.A=0)}}Jr(4)}catch{}}var gT=class{constructor(o,h){this.g=o,this.map=h}};function zp(o){this.l=o||10,a.PerformanceNavigationTiming?(o=a.performance.getEntriesByType("navigation"),o=o.length>0&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Bp(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function $p(o){return o.h?1:o.g?o.g.size:0}function Pu(o,h){return o.h?o.h==h:o.g?o.g.has(h):!1}function Ru(o,h){o.g?o.g.add(h):o.h=h}function qp(o,h){o.h&&o.h==h?o.h=null:o.g&&o.g.has(h)&&o.g.delete(h)}zp.prototype.cancel=function(){if(this.i=Wp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function Wp(o){if(o.h!=null)return o.i.concat(o.h.G);if(o.g!=null&&o.g.size!==0){let h=o.i;for(const f of o.g.values())h=h.concat(f.G);return h}return _(o.i)}var Hp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function yT(o,h){if(o){o=o.split("&");for(let f=0;f<o.length;f++){const v=o[f].indexOf("=");let D,V=null;v>=0?(D=o[f].substring(0,v),V=o[f].substring(v+1)):D=o[f],h(D,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function sr(o){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let h;o instanceof sr?(this.l=o.l,Xi(this,o.j),this.o=o.o,this.g=o.g,Zi(this,o.u),this.h=o.h,ju(this,Xp(o.i)),this.m=o.m):o&&(h=String(o).match(Hp))?(this.l=!1,Xi(this,h[1]||"",!0),this.o=ea(h[2]||""),this.g=ea(h[3]||"",!0),Zi(this,h[4]),this.h=ea(h[5]||"",!0),ju(this,h[6]||"",!0),this.m=ea(h[7]||"")):(this.l=!1,this.i=new na(null,this.l))}sr.prototype.toString=function(){const o=[];var h=this.j;h&&o.push(ta(h,Gp,!0),":");var f=this.g;return(f||h=="file")&&(o.push("//"),(h=this.o)&&o.push(ta(h,Gp,!0),"@"),o.push(ye(f).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.u,f!=null&&o.push(":",String(f))),(f=this.h)&&(this.g&&f.charAt(0)!="/"&&o.push("/"),o.push(ta(f,f.charAt(0)=="/"?wT:_T,!0))),(f=this.i.toString())&&o.push("?",f),(f=this.m)&&o.push("#",ta(f,TT)),o.join("")},sr.prototype.resolve=function(o){const h=yn(this);let f=!!o.j;f?Xi(h,o.j):f=!!o.o,f?h.o=o.o:f=!!o.g,f?h.g=o.g:f=o.u!=null;var v=o.h;if(f)Zi(h,o.u);else if(f=!!o.h){if(v.charAt(0)!="/")if(this.g&&!this.h)v="/"+v;else{var D=h.h.lastIndexOf("/");D!=-1&&(v=h.h.slice(0,D+1)+v)}if(D=v,D==".."||D==".")v="";else if(D.indexOf("./")!=-1||D.indexOf("/.")!=-1){v=D.lastIndexOf("/",0)==0,D=D.split("/");const V=[];for(let W=0;W<D.length;){const oe=D[W++];oe=="."?v&&W==D.length&&V.push(""):oe==".."?((V.length>1||V.length==1&&V[0]!="")&&V.pop(),v&&W==D.length&&V.push("")):(V.push(oe),v=!0)}v=V.join("/")}else v=D}return f?h.h=v:f=o.i.toString()!=="",f?ju(h,Xp(o.i)):f=!!o.m,f&&(h.m=o.m),h};function yn(o){return new sr(o)}function Xi(o,h,f){o.j=f?ea(h,!0):h,o.j&&(o.j=o.j.replace(/:$/,""))}function Zi(o,h){if(h){if(h=Number(h),isNaN(h)||h<0)throw Error("Bad port number "+h);o.u=h}else o.u=null}function ju(o,h,f){h instanceof na?(o.i=h,IT(o.i,o.l)):(f||(h=ta(h,ET)),o.i=new na(h,o.l))}function Ce(o,h,f){o.i.set(h,f)}function Ko(o){return Ce(o,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),o}function ea(o,h){return o?h?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function ta(o,h,f){return typeof o=="string"?(o=encodeURI(o).replace(h,vT),f&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function vT(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var Gp=/[#\/\?@]/g,_T=/[#\?:]/g,wT=/[#\?]/g,ET=/[#\?@]/g,TT=/#/g;function na(o,h){this.h=this.g=null,this.i=o||null,this.j=!!h}function ns(o){o.g||(o.g=new Map,o.h=0,o.i&&yT(o.i,function(h,f){o.add(decodeURIComponent(h.replace(/\+/g," ")),f)}))}t=na.prototype,t.add=function(o,h){ns(this),this.i=null,o=Us(this,o);let f=this.g.get(o);return f||this.g.set(o,f=[]),f.push(h),this.h+=1,this};function Kp(o,h){ns(o),h=Us(o,h),o.g.has(h)&&(o.i=null,o.h-=o.g.get(h).length,o.g.delete(h))}function Qp(o,h){return ns(o),h=Us(o,h),o.g.has(h)}t.forEach=function(o,h){ns(this),this.g.forEach(function(f,v){f.forEach(function(D){o.call(h,D,v,this)},this)},this)};function Yp(o,h){ns(o);let f=[];if(typeof h=="string")Qp(o,h)&&(f=f.concat(o.g.get(Us(o,h))));else for(o=Array.from(o.g.values()),h=0;h<o.length;h++)f=f.concat(o[h]);return f}t.set=function(o,h){return ns(this),this.i=null,o=Us(this,o),Qp(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[h]),this.h+=1,this},t.get=function(o,h){return o?(o=Yp(this,o),o.length>0?String(o[0]):h):h};function Jp(o,h,f){Kp(o,h),f.length>0&&(o.i=null,o.g.set(Us(o,h),_(f)),o.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],h=Array.from(this.g.keys());for(let v=0;v<h.length;v++){var f=h[v];const D=ye(f);f=Yp(this,f);for(let V=0;V<f.length;V++){let W=D;f[V]!==""&&(W+="="+ye(f[V])),o.push(W)}}return this.i=o.join("&")};function Xp(o){const h=new na;return h.i=o.i,o.g&&(h.g=new Map(o.g),h.h=o.h),h}function Us(o,h){return h=String(h),o.j&&(h=h.toLowerCase()),h}function IT(o,h){h&&!o.j&&(ns(o),o.i=null,o.g.forEach(function(f,v){const D=v.toLowerCase();v!=D&&(Kp(this,v),Jp(this,D,f))},o)),o.j=h}function xT(o,h){const f=new Zr;if(a.Image){const v=new Image;v.onload=p(ir,f,"TestLoadImage: loaded",!0,h,v),v.onerror=p(ir,f,"TestLoadImage: error",!1,h,v),v.onabort=p(ir,f,"TestLoadImage: abort",!1,h,v),v.ontimeout=p(ir,f,"TestLoadImage: timeout",!1,h,v),a.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=o}else h(!1)}function ST(o,h){const f=new Zr,v=new AbortController,D=setTimeout(()=>{v.abort(),ir(f,"TestPingServer: timeout",!1,h)},1e4);fetch(o,{signal:v.signal}).then(V=>{clearTimeout(D),V.ok?ir(f,"TestPingServer: ok",!0,h):ir(f,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(D),ir(f,"TestPingServer: error",!1,h)})}function ir(o,h,f,v,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),v(f)}catch{}}function NT(){this.g=new Cu}function bu(o){this.i=o.Sb||null,this.h=o.ab||!1}m(bu,Fo),bu.prototype.g=function(){return new Qo(this.i,this.h)};function Qo(o,h){$e.call(this),this.H=o,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}m(Qo,$e),t=Qo.prototype,t.open=function(o,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=o,this.D=h,this.readyState=1,sa(this)},t.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const h={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};o&&(h.body=o),(this.H||a).fetch(new Request(this.D,h)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ra(this)),this.readyState=0},t.Pa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,sa(this)),this.g&&(this.readyState=3,sa(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Zp(this)}else o.text().then(this.Oa.bind(this),this.ga.bind(this))};function Zp(o){o.j.read().then(o.Ma.bind(o)).catch(o.ga.bind(o))}t.Ma=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var h=o.value?o.value:new Uint8Array(0);(h=this.B.decode(h,{stream:!o.done}))&&(this.response=this.responseText+=h)}o.done?ra(this):sa(this),this.readyState==3&&Zp(this)}},t.Oa=function(o){this.g&&(this.response=this.responseText=o,ra(this))},t.Na=function(o){this.g&&(this.response=o,ra(this))},t.ga=function(){this.g&&ra(this)};function ra(o){o.readyState=4,o.l=null,o.j=null,o.B=null,sa(o)}t.setRequestHeader=function(o,h){this.A.append(o,h)},t.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],h=this.h.entries();for(var f=h.next();!f.done;)f=f.value,o.push(f[0]+": "+f[1]),f=h.next();return o.join(`\r
`)};function sa(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(Qo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function em(o){let h="";return B(o,function(f,v){h+=v,h+=":",h+=f,h+=`\r
`}),h}function Du(o,h,f){e:{for(v in f){var v=!1;break e}v=!0}v||(f=em(f),typeof o=="string"?f!=null&&ye(f):Ce(o,h,f))}function Oe(o){$e.call(this),this.headers=new Map,this.L=o||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}m(Oe,$e);var CT=/^https?$/i,AT=["POST","PUT"];t=Oe.prototype,t.Fa=function(o){this.H=o},t.ea=function(o,h,f,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);h=h?h.toUpperCase():"GET",this.D=o,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():H.g(),this.g.onreadystatechange=g(d(this.Ca,this));try{this.B=!0,this.g.open(h,String(o),!0),this.B=!1}catch(V){tm(this,V);return}if(o=f||"",f=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var D in v)f.set(D,v[D]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(const V of v.keys())f.set(V,v.get(V));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(f.keys()).find(V=>V.toLowerCase()=="content-type"),D=a.FormData&&o instanceof a.FormData,!(Array.prototype.indexOf.call(AT,h,void 0)>=0)||v||D||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,W]of f)this.g.setRequestHeader(V,W);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(o),this.v=!1}catch(V){tm(this,V)}};function tm(o,h){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=h,o.o=5,nm(o),Yo(o)}function nm(o){o.A||(o.A=!0,Ze(o,"complete"),Ze(o,"error"))}t.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=o||7,Ze(this,"complete"),Ze(this,"abort"),Yo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Yo(this,!0)),Oe.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?rm(this):this.Xa())},t.Xa=function(){rm(this)};function rm(o){if(o.h&&typeof i<"u"){if(o.v&&ar(o)==4)setTimeout(o.Ca.bind(o),0);else if(Ze(o,"readystatechange"),ar(o)==4){o.h=!1;try{const V=o.ca();e:switch(V){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var f;if(!(f=h)){var v;if(v=V===0){let W=String(o.D).match(Hp)[1]||null;!W&&a.self&&a.self.location&&(W=a.self.location.protocol.slice(0,-1)),v=!CT.test(W?W.toLowerCase():"")}f=v}if(f)Ze(o,"complete"),Ze(o,"success");else{o.o=6;try{var D=ar(o)>2?o.g.statusText:""}catch{D=""}o.l=D+" ["+o.ca()+"]",nm(o)}}finally{Yo(o)}}}}function Yo(o,h){if(o.g){o.m&&(clearTimeout(o.m),o.m=null);const f=o.g;o.g=null,h||Ze(o,"ready");try{f.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function ar(o){return o.g?o.g.readyState:0}t.ca=function(){try{return ar(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(o){if(this.g){var h=this.g.responseText;return o&&h.indexOf(o)==0&&(h=h.substring(o.length)),Nu(h)}};function sm(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.F){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function kT(o){const h={};o=(o.g&&ar(o)>=2&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<o.length;v++){if(C(o[v]))continue;var f=nn(o[v]);const D=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const V=h[D]||[];h[D]=V,V.push(f)}ee(h,function(v){return v.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ia(o,h,f){return f&&f.internalChannelParams&&f.internalChannelParams[o]||h}function im(o){this.za=0,this.i=[],this.j=new Zr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ia("failFast",!1,o),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ia("baseRetryDelayMs",5e3,o),this.Za=ia("retryDelaySeedMs",1e4,o),this.Ta=ia("forwardChannelMaxRetries",2,o),this.va=ia("forwardChannelRequestTimeoutMs",2e4,o),this.ma=o&&o.xmlHttpFactory||void 0,this.Ua=o&&o.Rb||void 0,this.Aa=o&&o.useFetchStreams||!1,this.O=void 0,this.L=o&&o.supportsCrossDomainXhr||!1,this.M="",this.h=new zp(o&&o.concurrentRequestLimit),this.Ba=new NT,this.S=o&&o.fastHandshake||!1,this.R=o&&o.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=o&&o.Pb||!1,o&&o.ua&&this.j.ua(),o&&o.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&o&&o.detectBufferingProxy||!1,this.ia=void 0,o&&o.longPollingTimeout&&o.longPollingTimeout>0&&(this.ia=o.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=im.prototype,t.ka=8,t.I=1,t.connect=function(o,h,f,v){st(0),this.W=o,this.H=h||{},f&&v!==void 0&&(this.H.OSID=f,this.H.OAID=v),this.F=this.X,this.J=pm(this,null,this.W),Xo(this)};function Vu(o){if(am(o),o.I==3){var h=o.V++,f=yn(o.J);if(Ce(f,"SID",o.M),Ce(f,"RID",h),Ce(f,"TYPE","terminate"),aa(o,f),h=new ht(o,o.j,h),h.M=2,h.A=Ko(yn(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(h.A.toString(),"")}catch{}!f&&a.Image&&(new Image().src=h.A,f=!0),f||(h.g=mm(h.j,null),h.g.ea(h.A)),h.F=Date.now(),Go(h)}fm(o)}function Jo(o){o.g&&(Lu(o),o.g.cancel(),o.g=null)}function am(o){Jo(o),o.v&&(a.clearTimeout(o.v),o.v=null),Zo(o),o.h.cancel(),o.m&&(typeof o.m=="number"&&a.clearTimeout(o.m),o.m=null)}function Xo(o){if(!Bp(o.h)&&!o.m){o.m=!0;var h=o.Ea;b||y(),U||(b(),U=!0),w.add(h,o),o.D=0}}function PT(o,h){return $p(o.h)>=o.h.j-(o.m?1:0)?!1:o.m?(o.i=h.G.concat(o.i),!0):o.I==1||o.I==2||o.D>=(o.Sa?0:o.Ta)?!1:(o.m=Xr(d(o.Ea,o,h),hm(o,o.D)),o.D++,!0)}t.Ea=function(o){if(this.m)if(this.m=null,this.I==1){if(!o){this.V=Math.floor(Math.random()*1e5),o=this.V++;const D=new ht(this,this.j,o);let V=this.o;if(this.U&&(V?(V=_e(V),q(V,this.U)):V=this.U),this.u!==null||this.R||(D.J=V,V=null),this.S)e:{for(var h=0,f=0;f<this.i.length;f++){t:{var v=this.i[f];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(h+=v,h>4096){h=f;break e}if(h===4096||f===this.i.length-1){h=f+1;break e}}h=1e3}else h=1e3;h=lm(this,D,h),f=yn(this.J),Ce(f,"RID",o),Ce(f,"CVER",22),this.G&&Ce(f,"X-HTTP-Session-Id",this.G),aa(this,f),V&&(this.R?h="headers="+ye(em(V))+"&"+h:this.u&&Du(f,this.u,V)),Ru(this.h,D),this.Ra&&Ce(f,"TYPE","init"),this.S?(Ce(f,"$req",h),Ce(f,"SID","null"),D.U=!0,kt(D,f,null)):kt(D,f,h),this.I=2}}else this.I==3&&(o?om(this,o):this.i.length==0||Bp(this.h)||om(this))};function om(o,h){var f;h?f=h.l:f=o.V++;const v=yn(o.J);Ce(v,"SID",o.M),Ce(v,"RID",f),Ce(v,"AID",o.K),aa(o,v),o.u&&o.o&&Du(v,o.u,o.o),f=new ht(o,o.j,f,o.D+1),o.u===null&&(f.J=o.o),h&&(o.i=h.G.concat(o.i)),h=lm(o,f,1e3),f.H=Math.round(o.va*.5)+Math.round(o.va*.5*Math.random()),Ru(o.h,f),kt(f,v,h)}function aa(o,h){o.H&&B(o.H,function(f,v){Ce(h,v,f)}),o.l&&B({},function(f,v){Ce(h,v,f)})}function lm(o,h,f){f=Math.min(o.i.length,f);const v=o.l?d(o.l.Ka,o.l,o):null;e:{var D=o.i;let oe=-1;for(;;){const Ke=["count="+f];oe==-1?f>0?(oe=D[0].g,Ke.push("ofs="+oe)):oe=0:Ke.push("ofs="+oe);let xe=!0;for(let et=0;et<f;et++){var V=D[et].g;const vn=D[et].map;if(V-=oe,V<0)oe=Math.max(0,D[et].g-100),xe=!1;else try{V="req"+V+"_"||"";try{var W=vn instanceof Map?vn:Object.entries(vn);for(const[ss,or]of W){let lr=or;c(or)&&(lr=Hi(or)),Ke.push(V+ss+"="+encodeURIComponent(lr))}}catch(ss){throw Ke.push(V+"type="+encodeURIComponent("_badmap")),ss}}catch{v&&v(vn)}}if(xe){W=Ke.join("&");break e}}W=void 0}return o=o.i.splice(0,f),h.G=o,W}function cm(o){if(!o.g&&!o.v){o.Y=1;var h=o.Da;b||y(),U||(b(),U=!0),w.add(h,o),o.A=0}}function Ou(o){return o.g||o.v||o.A>=3?!1:(o.Y++,o.v=Xr(d(o.Da,o),hm(o,o.A)),o.A++,!0)}t.Da=function(){if(this.v=null,um(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var o=4*this.T;this.j.info("BP detection timer enabled: "+o),this.B=Xr(d(this.Wa,this),o)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,st(10),Jo(this),um(this))};function Lu(o){o.B!=null&&(a.clearTimeout(o.B),o.B=null)}function um(o){o.g=new ht(o,o.j,"rpc",o.Y),o.u===null&&(o.g.J=o.o),o.g.P=0;var h=yn(o.na);Ce(h,"RID","rpc"),Ce(h,"SID",o.M),Ce(h,"AID",o.K),Ce(h,"CI",o.F?"0":"1"),!o.F&&o.ia&&Ce(h,"TO",o.ia),Ce(h,"TYPE","xmlhttp"),aa(o,h),o.u&&o.o&&Du(h,o.u,o.o),o.O&&(o.g.H=o.O);var f=o.g;o=o.ba,f.M=1,f.A=Ko(yn(h)),f.u=null,f.R=!0,Pt(f,o)}t.Va=function(){this.C!=null&&(this.C=null,Jo(this),Ou(this),st(19))};function Zo(o){o.C!=null&&(a.clearTimeout(o.C),o.C=null)}function dm(o,h){var f=null;if(o.g==h){Zo(o),Lu(o),o.g=null;var v=2}else if(Pu(o.h,h))f=h.G,qp(o.h,h),v=1;else return;if(o.I!=0){if(h.o)if(v==1){f=h.u?h.u.length:0,h=Date.now()-h.F;var D=o.D;v=Fs(),Ze(v,new $o(v,f)),Xo(o)}else cm(o);else if(D=h.m,D==3||D==0&&h.X>0||!(v==1&&PT(o,h)||v==2&&Ou(o)))switch(f&&f.length>0&&(h=o.h,h.i=h.i.concat(f)),D){case 1:rs(o,5);break;case 4:rs(o,10);break;case 3:rs(o,6);break;default:rs(o,2)}}}function hm(o,h){let f=o.Qa+Math.floor(Math.random()*o.Za);return o.isActive()||(f*=2),f*h}function rs(o,h){if(o.j.info("Error code "+h),h==2){var f=d(o.bb,o),v=o.Ua;const D=!v;v=new sr(v||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Xi(v,"https"),Ko(v),D?xT(v.toString(),f):ST(v.toString(),f)}else st(2);o.I=0,o.l&&o.l.pa(h),fm(o),am(o)}t.bb=function(o){o?(this.j.info("Successfully pinged google.com"),st(2)):(this.j.info("Failed to ping google.com"),st(1))};function fm(o){if(o.I=0,o.ja=[],o.l){const h=Wp(o.h);(h.length!=0||o.i.length!=0)&&(P(o.ja,h),P(o.ja,o.i),o.h.i.length=0,_(o.i),o.i.length=0),o.l.oa()}}function pm(o,h,f){var v=f instanceof sr?yn(f):new sr(f);if(v.g!="")h&&(v.g=h+"."+v.g),Zi(v,v.u);else{var D=a.location;v=D.protocol,h=h?h+"."+D.hostname:D.hostname,D=+D.port;const V=new sr(null);v&&Xi(V,v),h&&(V.g=h),D&&Zi(V,D),f&&(V.h=f),v=V}return f=o.G,h=o.wa,f&&h&&Ce(v,f,h),Ce(v,"VER",o.ka),aa(o,v),v}function mm(o,h,f){if(h&&!o.L)throw Error("Can't create secondary domain capable XhrIo object.");return h=o.Aa&&!o.ma?new Oe(new bu({ab:f})):new Oe(o.ma),h.Fa(o.L),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function gm(){}t=gm.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function el(){}el.prototype.g=function(o,h){return new Lt(o,h)};function Lt(o,h){$e.call(this),this.g=new im(h),this.l=o,this.h=h&&h.messageUrlParams||null,o=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(o?o["X-WebChannel-Content-Type"]=h.messageContentType:o={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.sa&&(o?o["X-WebChannel-Client-Profile"]=h.sa:o={"X-WebChannel-Client-Profile":h.sa}),this.g.U=o,(o=h&&h.Qb)&&!C(o)&&(this.g.u=o),this.A=h&&h.supportsCrossDomainXhr||!1,this.v=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!C(h)&&(this.g.G=h,o=this.h,o!==null&&h in o&&(o=this.h,h in o&&delete o[h])),this.j=new zs(this)}m(Lt,$e),Lt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Lt.prototype.close=function(){Vu(this.g)},Lt.prototype.o=function(o){var h=this.g;if(typeof o=="string"){var f={};f.__data__=o,o=f}else this.v&&(f={},f.__data__=Hi(o),o=f);h.i.push(new gT(h.Ya++,o)),h.I==3&&Xo(h)},Lt.prototype.N=function(){this.g.l=null,delete this.j,Vu(this.g),delete this.g,Lt.Z.N.call(this)};function ym(o){Gi.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var h=o.__sm__;if(h){e:{for(const f in h){o=f;break e}o=void 0}(this.i=o)&&(o=this.i,h=h!==null&&o in h?h[o]:void 0),this.data=h}else this.data=o}m(ym,Gi);function vm(){Ki.call(this),this.status=1}m(vm,Ki);function zs(o){this.g=o}m(zs,gm),zs.prototype.ra=function(){Ze(this.g,"a")},zs.prototype.qa=function(o){Ze(this.g,new ym(o))},zs.prototype.pa=function(o){Ze(this.g,new vm)},zs.prototype.oa=function(){Ze(this.g,"b")},el.prototype.createWebChannel=el.prototype.g,Lt.prototype.send=Lt.prototype.o,Lt.prototype.open=Lt.prototype.m,Lt.prototype.close=Lt.prototype.close,EE=function(){return new el},wE=function(){return Fs()},_E=bn,Sh={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},es.NO_ERROR=0,es.TIMEOUT=8,es.HTTP_ERROR=6,zl=es,T.COMPLETE="complete",vE=T,Uo.EventType=Yr,Yr.OPEN="a",Yr.CLOSE="b",Yr.ERROR="c",Yr.MESSAGE="d",$e.prototype.listen=$e.prototype.J,Ta=Uo,Oe.prototype.listenOnce=Oe.prototype.K,Oe.prototype.getLastError=Oe.prototype.Ha,Oe.prototype.getLastErrorCode=Oe.prototype.ya,Oe.prototype.getStatus=Oe.prototype.ca,Oe.prototype.getResponseJson=Oe.prototype.La,Oe.prototype.getResponseText=Oe.prototype.la,Oe.prototype.send=Oe.prototype.ea,Oe.prototype.setWithCredentials=Oe.prototype.Fa,yE=Oe}).apply(typeof wl<"u"?wl:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};gt.UNAUTHENTICATED=new gt(null),gt.GOOGLE_CREDENTIALS=new gt("google-credentials-uid"),gt.FIRST_PARTY=new gt("first-party-uid"),gt.MOCK_USER=new gt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ui="12.8.0";function rA(t){Ui=t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ns=new zf("@firebase/firestore");function $s(){return Ns.logLevel}function Y(t,...e){if(Ns.logLevel<=de.DEBUG){const n=e.map(Xf);Ns.debug(`Firestore (${Ui}): ${t}`,...n)}}function Jn(t,...e){if(Ns.logLevel<=de.ERROR){const n=e.map(Xf);Ns.error(`Firestore (${Ui}): ${t}`,...n)}}function Ni(t,...e){if(Ns.logLevel<=de.WARN){const n=e.map(Xf);Ns.warn(`Firestore (${Ui}): ${t}`,...n)}}function Xf(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ne(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,TE(t,r,n)}function TE(t,e,n){let r=`FIRESTORE (${Ui}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Jn(r),new Error(r)}function Te(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||TE(e,s,r)}function ie(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Q extends er{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class sA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(gt.UNAUTHENTICATED))}shutdown(){}}class iA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class aA{constructor(e){this.t=e,this.currentUser=gt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Te(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new $n;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new $n,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},c=u=>{Y("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(Y("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new $n)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Y("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Te(typeof r.accessToken=="string",31837,{l:r}),new IE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Te(e===null||typeof e=="string",2055,{h:e}),new gt(e)}}class oA{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=gt.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class lA{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new oA(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(gt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class iy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class cA{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Qt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Te(this.o===void 0,3512);const r=i=>{i.error!=null&&Y("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.m;return this.m=i.token,Y("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{Y("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):Y("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new iy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Te(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new iy(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uA(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=uA(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function he(t,e){return t<e?-1:t>e?1:0}function Nh(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return vd(s)===vd(i)?he(s,i):vd(s)?1:-1}return he(t.length,e.length)}const dA=55296,hA=57343;function vd(t){const e=t.charCodeAt(0);return e>=dA&&e<=hA}function Ci(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ay="__name__";class En{constructor(e,n,r){n===void 0?n=0:n>e.length&&ne(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ne(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return En.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof En?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=En.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return he(e.length,n.length)}static compareSegments(e,n){const r=En.isNumericId(e),s=En.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?En.extractNumericId(e).compare(En.extractNumericId(n)):Nh(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return br.fromString(e.substring(4,e.length-2))}}class Se extends En{construct(e,n,r){return new Se(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Q(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Se(n)}static emptyPath(){return new Se([])}}const fA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ot extends En{construct(e,n,r){return new ot(e,n,r)}static isValidIdentifier(e){return fA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ot.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ay}static keyField(){return new ot([ay])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Q(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new Q(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Q(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else c==="`"?(a=!a,s++):c!=="."||a?(r+=c,s++):(i(),s++)}if(i(),a)throw new Q(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ot(n)}static emptyPath(){return new ot([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e){this.path=e}static fromPath(e){return new X(Se.fromString(e))}static fromName(e){return new X(Se.fromString(e).popFirst(5))}static empty(){return new X(Se.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Se.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Se.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new X(new Se(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xE(t,e,n){if(!n)throw new Q(M.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function pA(t,e,n,r){if(e===!0&&r===!0)throw new Q(M.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function oy(t){if(!X.isDocumentKey(t))throw new Q(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function ly(t){if(X.isDocumentKey(t))throw new Q(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function SE(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function iu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ne(12329,{type:typeof t})}function Cn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Q(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=iu(t);throw new Q(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ge(t,e){const n={typeString:t};return e&&(n.value=e),n}function Co(t,e){if(!SE(t))throw new Q(M.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const a=t[r];if(s&&typeof a!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&a!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new Q(M.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cy=-62135596800,uy=1e6;class ke{static now(){return ke.fromMillis(Date.now())}static fromDate(e){return ke.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*uy);return new ke(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Q(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Q(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<cy)throw new Q(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Q(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/uy}_compareTo(e){return this.seconds===e.seconds?he(this.nanoseconds,e.nanoseconds):he(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ke._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Co(e,ke._jsonSchema))return new ke(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-cy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ke._jsonSchemaVersion="firestore/timestamp/1.0",ke._jsonSchema={type:Ge("string",ke._jsonSchemaVersion),seconds:Ge("number"),nanoseconds:Ge("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{static fromTimestamp(e){return new re(e)}static min(){return new re(new ke(0,0))}static max(){return new re(new ke(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lo=-1;function mA(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=re.fromTimestamp(r===1e9?new ke(n+1,0):new ke(n,r));return new Lr(s,X.empty(),e)}function gA(t){return new Lr(t.readTime,t.key,lo)}class Lr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Lr(re.min(),X.empty(),lo)}static max(){return new Lr(re.max(),X.empty(),lo)}}function yA(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=X.comparator(t.documentKey,e.documentKey),n!==0?n:he(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class _A{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zi(t){if(t.code!==M.FAILED_PRECONDITION||t.message!==vA)throw t;Y("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ne(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,r)=>{n(e)})}static reject(e){return new F((n,r)=>{r(e)})}static waitFor(e){return new F((n,r)=>{let s=0,i=0,a=!1;e.forEach(c=>{++s,c.next(()=>{++i,a&&i===s&&n()},u=>r(u))}),a=!0,i===s&&n()})}static or(e){let n=F.resolve(!1);for(const r of e)n=n.next(s=>s?F.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new F((r,s)=>{const i=e.length,a=new Array(i);let c=0;for(let u=0;u<i;u++){const d=u;n(e[d]).next(p=>{a[d]=p,++c,c===i&&r(a)},p=>s(p))}})}static doWhile(e,n){return new F((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function wA(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Bi(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}au.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ep=-1;function ou(t){return t==null}function Sc(t){return t===0&&1/t==-1/0}function EA(t){return typeof t=="number"&&Number.isInteger(t)&&!Sc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NE="";function TA(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=dy(e)),e=IA(t.get(n),e);return dy(e)}function IA(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case NE:n+="";break;default:n+=i}}return n}function dy(t){return t+NE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hy(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function js(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function CE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(e,n){this.comparator=e,this.root=n||at.EMPTY}insert(e,n){return new Ve(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,at.BLACK,null,null))}remove(e){return new Ve(this.comparator,this.root.remove(e,this.comparator).copy(null,null,at.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new El(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new El(this.root,e,this.comparator,!1)}getReverseIterator(){return new El(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new El(this.root,e,this.comparator,!0)}}class El{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class at{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??at.RED,this.left=s??at.EMPTY,this.right=i??at.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new at(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return at.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return at.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,at.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,at.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ne(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ne(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ne(27949);return e+(this.isRed()?0:1)}}at.EMPTY=null,at.RED=!0,at.BLACK=!1;at.EMPTY=new class{constructor(){this.size=0}get key(){throw ne(57766)}get value(){throw ne(16141)}get color(){throw ne(16727)}get left(){throw ne(29726)}get right(){throw ne(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new at(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e){this.comparator=e,this.data=new Ve(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new fy(this.data.getIterator())}getIteratorFrom(e){return new fy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Je)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Je(this.comparator);return n.data=e,n}}class fy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.fields=e,e.sort(ot.comparator)}static empty(){return new cn([])}unionWith(e){let n=new Je(ot.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new cn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ci(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new AE("Invalid base64 string: "+i):i}}(e);return new ut(n)}static fromUint8Array(e){const n=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new ut(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return he(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ut.EMPTY_BYTE_STRING=new ut("");const xA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Mr(t){if(Te(!!t,39018),typeof t=="string"){let e=0;const n=xA.exec(t);if(Te(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Me(t.seconds),nanos:Me(t.nanos)}}function Me(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Fr(t){return typeof t=="string"?ut.fromBase64String(t):ut.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kE="server_timestamp",PE="__type__",RE="__previous_value__",jE="__local_write_time__";function tp(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[PE])==null?void 0:r.stringValue)===kE}function lu(t){const e=t.mapValue.fields[RE];return tp(e)?lu(e):e}function co(t){const e=Mr(t.mapValue.fields[jE].timestampValue);return new ke(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(e,n,r,s,i,a,c,u,d,p,m){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=p,this.apiKey=m}}const Nc="(default)";class uo{constructor(e,n){this.projectId=e,this.database=n||Nc}static empty(){return new uo("","")}get isDefaultDatabase(){return this.database===Nc}isEqual(e){return e instanceof uo&&e.projectId===this.projectId&&e.database===this.database}}function NA(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Q(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new uo(t.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bE="__type__",CA="__max__",Tl={mapValue:{}},DE="__vector__",Cc="value";function Ur(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?tp(t)?4:kA(t)?9007199254740991:AA(t)?10:11:ne(28295,{value:t})}function Rn(t,e){if(t===e)return!0;const n=Ur(t);if(n!==Ur(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return co(t).isEqual(co(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=Mr(s.timestampValue),c=Mr(i.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Fr(s.bytesValue).isEqual(Fr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Me(s.geoPointValue.latitude)===Me(i.geoPointValue.latitude)&&Me(s.geoPointValue.longitude)===Me(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Me(s.integerValue)===Me(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=Me(s.doubleValue),c=Me(i.doubleValue);return a===c?Sc(a)===Sc(c):isNaN(a)&&isNaN(c)}return!1}(t,e);case 9:return Ci(t.arrayValue.values||[],e.arrayValue.values||[],Rn);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},c=i.mapValue.fields||{};if(hy(a)!==hy(c))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(c[u]===void 0||!Rn(a[u],c[u])))return!1;return!0}(t,e);default:return ne(52216,{left:t})}}function ho(t,e){return(t.values||[]).find(n=>Rn(n,e))!==void 0}function Ai(t,e){if(t===e)return 0;const n=Ur(t),r=Ur(e);if(n!==r)return he(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return he(t.booleanValue,e.booleanValue);case 2:return function(i,a){const c=Me(i.integerValue||i.doubleValue),u=Me(a.integerValue||a.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return py(t.timestampValue,e.timestampValue);case 4:return py(co(t),co(e));case 5:return Nh(t.stringValue,e.stringValue);case 6:return function(i,a){const c=Fr(i),u=Fr(a);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const c=i.split("/"),u=a.split("/");for(let d=0;d<c.length&&d<u.length;d++){const p=he(c[d],u[d]);if(p!==0)return p}return he(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const c=he(Me(i.latitude),Me(a.latitude));return c!==0?c:he(Me(i.longitude),Me(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return my(t.arrayValue,e.arrayValue);case 10:return function(i,a){var g,_,P,R;const c=i.fields||{},u=a.fields||{},d=(g=c[Cc])==null?void 0:g.arrayValue,p=(_=u[Cc])==null?void 0:_.arrayValue,m=he(((P=d==null?void 0:d.values)==null?void 0:P.length)||0,((R=p==null?void 0:p.values)==null?void 0:R.length)||0);return m!==0?m:my(d,p)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===Tl.mapValue&&a===Tl.mapValue)return 0;if(i===Tl.mapValue)return 1;if(a===Tl.mapValue)return-1;const c=i.fields||{},u=Object.keys(c),d=a.fields||{},p=Object.keys(d);u.sort(),p.sort();for(let m=0;m<u.length&&m<p.length;++m){const g=Nh(u[m],p[m]);if(g!==0)return g;const _=Ai(c[u[m]],d[p[m]]);if(_!==0)return _}return he(u.length,p.length)}(t.mapValue,e.mapValue);default:throw ne(23264,{he:n})}}function py(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return he(t,e);const n=Mr(t),r=Mr(e),s=he(n.seconds,r.seconds);return s!==0?s:he(n.nanos,r.nanos)}function my(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Ai(n[s],r[s]);if(i)return i}return he(n.length,r.length)}function ki(t){return Ch(t)}function Ch(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Mr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Fr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return X.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Ch(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${Ch(n.fields[a])}`;return s+"}"}(t.mapValue):ne(61005,{value:t})}function Bl(t){switch(Ur(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=lu(t);return e?16+Bl(e):16;case 5:return 2*t.stringValue.length;case 6:return Fr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Bl(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return js(r.fields,(i,a)=>{s+=i.length+Bl(a)}),s}(t.mapValue);default:throw ne(13486,{value:t})}}function gy(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Ah(t){return!!t&&"integerValue"in t}function np(t){return!!t&&"arrayValue"in t}function yy(t){return!!t&&"nullValue"in t}function vy(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function $l(t){return!!t&&"mapValue"in t}function AA(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[bE])==null?void 0:r.stringValue)===DE}function Ma(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return js(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ma(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ma(t.arrayValue.values[n]);return e}return{...t}}function kA(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===CA}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.value=e}static empty(){return new Yt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!$l(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ma(n)}setAll(e){let n=ot.emptyPath(),r={},s=[];e.forEach((a,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=c.popLast()}a?r[c.lastSegment()]=Ma(a):s.push(c.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());$l(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Rn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];$l(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){js(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Yt(Ma(this.value))}}function VE(t){const e=[];return js(t.fields,(n,r)=>{const s=new ot([n]);if($l(r)){const i=VE(r.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new cn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e,n,r,s,i,a,c){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=c}static newInvalidDocument(e){return new vt(e,0,re.min(),re.min(),re.min(),Yt.empty(),0)}static newFoundDocument(e,n,r,s){return new vt(e,1,n,re.min(),r,s,0)}static newNoDocument(e,n){return new vt(e,2,n,re.min(),re.min(),Yt.empty(),0)}static newUnknownDocument(e,n){return new vt(e,3,n,re.min(),re.min(),Yt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Yt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Yt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof vt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new vt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(e,n){this.position=e,this.inclusive=n}}function _y(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?r=X.comparator(X.fromName(a.referenceValue),n.key):r=Ai(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function wy(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Rn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(e,n="asc"){this.field=e,this.dir=n}}function PA(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE{}class He extends OE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new jA(e,n,r):n==="array-contains"?new VA(e,r):n==="in"?new OA(e,r):n==="not-in"?new LA(e,r):n==="array-contains-any"?new MA(e,r):new He(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new bA(e,r):new DA(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ai(n,this.value)):n!==null&&Ur(this.value)===Ur(n)&&this.matchesComparison(Ai(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ne(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class mn extends OE{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new mn(e,n)}matches(e){return LE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function LE(t){return t.op==="and"}function ME(t){return RA(t)&&LE(t)}function RA(t){for(const e of t.filters)if(e instanceof mn)return!1;return!0}function kh(t){if(t instanceof He)return t.field.canonicalString()+t.op.toString()+ki(t.value);if(ME(t))return t.filters.map(e=>kh(e)).join(",");{const e=t.filters.map(n=>kh(n)).join(",");return`${t.op}(${e})`}}function FE(t,e){return t instanceof He?function(r,s){return s instanceof He&&r.op===s.op&&r.field.isEqual(s.field)&&Rn(r.value,s.value)}(t,e):t instanceof mn?function(r,s){return s instanceof mn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,a,c)=>i&&FE(a,s.filters[c]),!0):!1}(t,e):void ne(19439)}function UE(t){return t instanceof He?function(n){return`${n.field.canonicalString()} ${n.op} ${ki(n.value)}`}(t):t instanceof mn?function(n){return n.op.toString()+" {"+n.getFilters().map(UE).join(" ,")+"}"}(t):"Filter"}class jA extends He{constructor(e,n,r){super(e,n,r),this.key=X.fromName(r.referenceValue)}matches(e){const n=X.comparator(e.key,this.key);return this.matchesComparison(n)}}class bA extends He{constructor(e,n){super(e,"in",n),this.keys=zE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class DA extends He{constructor(e,n){super(e,"not-in",n),this.keys=zE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function zE(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>X.fromName(r.referenceValue))}class VA extends He{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return np(n)&&ho(n.arrayValue,this.value)}}class OA extends He{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ho(this.value.arrayValue,n)}}class LA extends He{constructor(e,n){super(e,"not-in",n)}matches(e){if(ho(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ho(this.value.arrayValue,n)}}class MA extends He{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!np(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ho(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(e,n=null,r=[],s=[],i=null,a=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=c,this.Te=null}}function Ey(t,e=null,n=[],r=[],s=null,i=null,a=null){return new FA(t,e,n,r,s,i,a)}function rp(t){const e=ie(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>kh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),ou(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ki(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ki(r)).join(",")),e.Te=n}return e.Te}function sp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!PA(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!FE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!wy(t.startAt,e.startAt)&&wy(t.endAt,e.endAt)}function Ph(t){return X.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(e,n=null,r=[],s=[],i=null,a="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=c,this.endAt=u,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function UA(t,e,n,r,s,i,a,c){return new Ao(t,e,n,r,s,i,a,c)}function cu(t){return new Ao(t)}function Ty(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function zA(t){return X.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function BE(t){return t.collectionGroup!==null}function Fa(t){const e=ie(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new Je(ot.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new kc(i,r))}),n.has(ot.keyField().canonicalString())||e.Ie.push(new kc(ot.keyField(),r))}return e.Ie}function An(t){const e=ie(t);return e.Ee||(e.Ee=BA(e,Fa(t))),e.Ee}function BA(t,e){if(t.limitType==="F")return Ey(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new kc(s.field,i)});const n=t.endAt?new Ac(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ac(t.startAt.position,t.startAt.inclusive):null;return Ey(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Rh(t,e){const n=t.filters.concat([e]);return new Ao(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function jh(t,e,n){return new Ao(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function uu(t,e){return sp(An(t),An(e))&&t.limitType===e.limitType}function $E(t){return`${rp(An(t))}|lt:${t.limitType}`}function qs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>UE(s)).join(", ")}]`),ou(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>ki(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>ki(s)).join(",")),`Target(${r})`}(An(t))}; limitType=${t.limitType})`}function du(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):X.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Fa(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(a,c,u){const d=_y(a,c,u);return a.inclusive?d<=0:d<0}(r.startAt,Fa(r),s)||r.endAt&&!function(a,c,u){const d=_y(a,c,u);return a.inclusive?d>=0:d>0}(r.endAt,Fa(r),s))}(t,e)}function $A(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function qE(t){return(e,n)=>{let r=!1;for(const s of Fa(t)){const i=qA(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function qA(t,e,n){const r=t.field.isKeyField()?X.comparator(e.key,n.key):function(i,a,c){const u=a.data.field(i),d=c.data.field(i);return u!==null&&d!==null?Ai(u,d):ne(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ne(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){js(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return CE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WA=new Ve(X.comparator);function Xn(){return WA}const WE=new Ve(X.comparator);function Ia(...t){let e=WE;for(const n of t)e=e.insert(n.key,n);return e}function HE(t){let e=WE;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function hs(){return Ua()}function GE(){return Ua()}function Ua(){return new bs(t=>t.toString(),(t,e)=>t.isEqual(e))}const HA=new Ve(X.comparator),GA=new Je(X.comparator);function fe(...t){let e=GA;for(const n of t)e=e.add(n);return e}const KA=new Je(he);function QA(){return KA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ip(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Sc(e)?"-0":e}}function KE(t){return{integerValue:""+t}}function YA(t,e){return EA(e)?KE(e):ip(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(){this._=void 0}}function JA(t,e,n){return t instanceof fo?function(s,i){const a={fields:{[PE]:{stringValue:kE},[jE]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&tp(i)&&(i=lu(i)),i&&(a.fields[RE]=i),{mapValue:a}}(n,e):t instanceof po?YE(t,e):t instanceof mo?JE(t,e):function(s,i){const a=QE(s,i),c=Iy(a)+Iy(s.Ae);return Ah(a)&&Ah(s.Ae)?KE(c):ip(s.serializer,c)}(t,e)}function XA(t,e,n){return t instanceof po?YE(t,e):t instanceof mo?JE(t,e):n}function QE(t,e){return t instanceof Pc?function(r){return Ah(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class fo extends hu{}class po extends hu{constructor(e){super(),this.elements=e}}function YE(t,e){const n=XE(e);for(const r of t.elements)n.some(s=>Rn(s,r))||n.push(r);return{arrayValue:{values:n}}}class mo extends hu{constructor(e){super(),this.elements=e}}function JE(t,e){let n=XE(e);for(const r of t.elements)n=n.filter(s=>!Rn(s,r));return{arrayValue:{values:n}}}class Pc extends hu{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Iy(t){return Me(t.integerValue||t.doubleValue)}function XE(t){return np(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(e,n){this.field=e,this.transform=n}}function ek(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof po&&s instanceof po||r instanceof mo&&s instanceof mo?Ci(r.elements,s.elements,Rn):r instanceof Pc&&s instanceof Pc?Rn(r.Ae,s.Ae):r instanceof fo&&s instanceof fo}(t.transform,e.transform)}class tk{constructor(e,n){this.version=e,this.transformResults=n}}class qn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new qn}static exists(e){return new qn(void 0,e)}static updateTime(e){return new qn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ql(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class fu{}function ZE(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new t0(t.key,qn.none()):new ko(t.key,t.data,qn.none());{const n=t.data,r=Yt.empty();let s=new Je(ot.comparator);for(let i of e.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new Ds(t.key,r,new cn(s.toArray()),qn.none())}}function nk(t,e,n){t instanceof ko?function(s,i,a){const c=s.value.clone(),u=Sy(s.fieldTransforms,i,a.transformResults);c.setAll(u),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):t instanceof Ds?function(s,i,a){if(!ql(s.precondition,i))return void i.convertToUnknownDocument(a.version);const c=Sy(s.fieldTransforms,i,a.transformResults),u=i.data;u.setAll(e0(s)),u.setAll(c),i.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function za(t,e,n,r){return t instanceof ko?function(i,a,c,u){if(!ql(i.precondition,a))return c;const d=i.value.clone(),p=Ny(i.fieldTransforms,u,a);return d.setAll(p),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ds?function(i,a,c,u){if(!ql(i.precondition,a))return c;const d=Ny(i.fieldTransforms,u,a),p=a.data;return p.setAll(e0(i)),p.setAll(d),a.convertToFoundDocument(a.version,p).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,a,c){return ql(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c}(t,e,n)}function rk(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=QE(r.transform,s||null);i!=null&&(n===null&&(n=Yt.empty()),n.set(r.field,i))}return n||null}function xy(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ci(r,s,(i,a)=>ek(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ko extends fu{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ds extends fu{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function e0(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Sy(t,e,n){const r=new Map;Te(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let s=0;s<n.length;s++){const i=t[s],a=i.transform,c=e.data.field(i.field);r.set(i.field,XA(a,c,n[s]))}return r}function Ny(t,e,n){const r=new Map;for(const s of t){const i=s.transform,a=n.data.field(s.field);r.set(s.field,JA(i,a,e))}return r}class t0 extends fu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class sk extends fu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&nk(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=za(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=za(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=GE();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let c=this.applyToLocalView(a,i.mutatedFields);c=n.has(s.key)?null:c;const u=ZE(a,c);u!==null&&r.set(s.key,u),a.isValidDocument()||a.convertToNoDocument(re.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),fe())}isEqual(e){return this.batchId===e.batchId&&Ci(this.mutations,e.mutations,(n,r)=>xy(n,r))&&Ci(this.baseMutations,e.baseMutations,(n,r)=>xy(n,r))}}class ap{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Te(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return HA}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new ap(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ok{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qe,pe;function lk(t){switch(t){case M.OK:return ne(64938);case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0;default:return ne(15467,{code:t})}}function n0(t){if(t===void 0)return Jn("GRPC error has no .code"),M.UNKNOWN;switch(t){case qe.OK:return M.OK;case qe.CANCELLED:return M.CANCELLED;case qe.UNKNOWN:return M.UNKNOWN;case qe.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case qe.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case qe.INTERNAL:return M.INTERNAL;case qe.UNAVAILABLE:return M.UNAVAILABLE;case qe.UNAUTHENTICATED:return M.UNAUTHENTICATED;case qe.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case qe.NOT_FOUND:return M.NOT_FOUND;case qe.ALREADY_EXISTS:return M.ALREADY_EXISTS;case qe.PERMISSION_DENIED:return M.PERMISSION_DENIED;case qe.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case qe.ABORTED:return M.ABORTED;case qe.OUT_OF_RANGE:return M.OUT_OF_RANGE;case qe.UNIMPLEMENTED:return M.UNIMPLEMENTED;case qe.DATA_LOSS:return M.DATA_LOSS;default:return ne(39323,{code:t})}}(pe=qe||(qe={}))[pe.OK=0]="OK",pe[pe.CANCELLED=1]="CANCELLED",pe[pe.UNKNOWN=2]="UNKNOWN",pe[pe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pe[pe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pe[pe.NOT_FOUND=5]="NOT_FOUND",pe[pe.ALREADY_EXISTS=6]="ALREADY_EXISTS",pe[pe.PERMISSION_DENIED=7]="PERMISSION_DENIED",pe[pe.UNAUTHENTICATED=16]="UNAUTHENTICATED",pe[pe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pe[pe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pe[pe.ABORTED=10]="ABORTED",pe[pe.OUT_OF_RANGE=11]="OUT_OF_RANGE",pe[pe.UNIMPLEMENTED=12]="UNIMPLEMENTED",pe[pe.INTERNAL=13]="INTERNAL",pe[pe.UNAVAILABLE=14]="UNAVAILABLE",pe[pe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ck(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uk=new br([4294967295,4294967295],0);function Cy(t){const e=ck().encode(t),n=new gE;return n.update(e),new Uint8Array(n.digest())}function Ay(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new br([n,r],0),new br([s,i],0)]}class op{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new xa(`Invalid padding: ${n}`);if(r<0)throw new xa(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new xa(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new xa(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=br.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(br.fromNumber(r)));return s.compare(uk)===1&&(s=new br([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Cy(e),[r,s]=Ay(n);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);if(!this.we(a))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new op(i,s,n);return r.forEach(c=>a.insert(c)),a}insert(e){if(this.ge===0)return;const n=Cy(e),[r,s]=Ay(n);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);this.be(a)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class xa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Po.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new pu(re.min(),s,new Ve(he),Xn(),fe())}}class Po{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Po(r,n,fe(),fe(),fe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(e,n,r,s){this.Se=e,this.removedTargetIds=n,this.key=r,this.De=s}}class r0{constructor(e,n){this.targetId=e,this.Ce=n}}class s0{constructor(e,n,r=ut.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class ky{constructor(){this.ve=0,this.Fe=Py(),this.Me=ut.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=fe(),n=fe(),r=fe();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ne(38017,{changeType:i})}}),new Po(this.Me,this.xe,e,n,r)}Ke(){this.Oe=!1,this.Fe=Py()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Te(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class dk{constructor(e){this.Ge=e,this.ze=new Map,this.je=Xn(),this.He=Il(),this.Je=Il(),this.Ze=new Ve(he)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:ne(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(Ph(i))if(r===0){const a=new X(i.path);this.et(n,a,vt.newNoDocument(a,re.min()))}else Te(r===1,20013,{expectedCount:r});else{const a=this._t(n);if(a!==r){const c=this.ut(e),u=c?this.ct(c,e,a):1;if(u!==0){this.it(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,c;try{a=Fr(r).toUint8Array()}catch(u){if(u instanceof AE)return Ni("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new op(a,s,i)}catch(u){return Ni(u instanceof xa?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.ge===0?null:c}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const a=this.Ge.ht(),c=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,a)=>{const c=this.ot(a);if(c){if(i.current&&Ph(c.target)){const u=new X(c.target.path);this.It(u).has(a)||this.Et(a,u)||this.et(a,u,vt.newNoDocument(u,e))}i.Be&&(n.set(a,i.ke()),i.Ke())}});let r=fe();this.Je.forEach((i,a)=>{let c=!0;a.forEachWhile(u=>{const d=this.ot(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(i))}),this.je.forEach((i,a)=>a.setReadTime(e));const s=new pu(e,n,this.Ze,this.je,r);return this.je=Xn(),this.He=Il(),this.Je=Il(),this.Ze=new Ve(he),s}Ye(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,r),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.qe(n,1):s.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new ky,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new Je(he),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new Je(he),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Y("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new ky),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Il(){return new Ve(X.comparator)}function Py(){return new Ve(X.comparator)}const hk={asc:"ASCENDING",desc:"DESCENDING"},fk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},pk={and:"AND",or:"OR"};class mk{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function bh(t,e){return t.useProto3Json||ou(e)?e:{value:e}}function Rc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function i0(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function gk(t,e){return Rc(t,e.toTimestamp())}function kn(t){return Te(!!t,49232),re.fromTimestamp(function(n){const r=Mr(n);return new ke(r.seconds,r.nanos)}(t))}function lp(t,e){return Dh(t,e).canonicalString()}function Dh(t,e){const n=function(s){return new Se(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function a0(t){const e=Se.fromString(t);return Te(d0(e),10190,{key:e.toString()}),e}function Vh(t,e){return lp(t.databaseId,e.path)}function _d(t,e){const n=a0(e);if(n.get(1)!==t.databaseId.projectId)throw new Q(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Q(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new X(l0(n))}function o0(t,e){return lp(t.databaseId,e)}function yk(t){const e=a0(t);return e.length===4?Se.emptyPath():l0(e)}function Oh(t){return new Se(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function l0(t){return Te(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Ry(t,e,n){return{name:Vh(t,e),fields:n.value.mapValue.fields}}function vk(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:ne(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,p){return d.useProto3Json?(Te(p===void 0||typeof p=="string",58123),ut.fromBase64String(p||"")):(Te(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),ut.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,c=a&&function(d){const p=d.code===void 0?M.UNKNOWN:n0(d.code);return new Q(p,d.message||"")}(a);n=new s0(r,s,i,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=_d(t,r.document.name),i=kn(r.document.updateTime),a=r.document.createTime?kn(r.document.createTime):re.min(),c=new Yt({mapValue:{fields:r.document.fields}}),u=vt.newFoundDocument(s,i,a,c),d=r.targetIds||[],p=r.removedTargetIds||[];n=new Wl(d,p,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=_d(t,r.document),i=r.readTime?kn(r.readTime):re.min(),a=vt.newNoDocument(s,i),c=r.removedTargetIds||[];n=new Wl([],c,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=_d(t,r.document),i=r.removedTargetIds||[];n=new Wl([],i,s,null)}else{if(!("filter"in e))return ne(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new ok(s,i),c=r.targetId;n=new r0(c,a)}}return n}function _k(t,e){let n;if(e instanceof ko)n={update:Ry(t,e.key,e.value)};else if(e instanceof t0)n={delete:Vh(t,e.key)};else if(e instanceof Ds)n={update:Ry(t,e.key,e.data),updateMask:Ak(e.fieldMask)};else{if(!(e instanceof sk))return ne(16599,{dt:e.type});n={verify:Vh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const c=a.transform;if(c instanceof fo)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof po)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof mo)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Pc)return{fieldPath:a.field.canonicalString(),increment:c.Ae};throw ne(20930,{transform:a.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:gk(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ne(27497)}(t,e.precondition)),n}function wk(t,e){return t&&t.length>0?(Te(e!==void 0,14353),t.map(n=>function(s,i){let a=s.updateTime?kn(s.updateTime):kn(i);return a.isEqual(re.min())&&(a=kn(i)),new tk(a,s.transformResults||[])}(n,e))):[]}function Ek(t,e){return{documents:[o0(t,e.path)]}}function Tk(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=o0(t,s);const i=function(d){if(d.length!==0)return u0(mn.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const a=function(d){if(d.length!==0)return d.map(p=>function(g){return{field:Ws(g.field),direction:Sk(g.dir)}}(p))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const c=bh(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:n,parent:s}}function Ik(t){let e=yk(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Te(r===1,65062);const p=n.from[0];p.allDescendants?s=p.collectionId:e=e.child(p.collectionId)}let i=[];n.where&&(i=function(m){const g=c0(m);return g instanceof mn&&ME(g)?g.getFilters():[g]}(n.where));let a=[];n.orderBy&&(a=function(m){return m.map(g=>function(P){return new kc(Hs(P.field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(P.direction))}(g))}(n.orderBy));let c=null;n.limit&&(c=function(m){let g;return g=typeof m=="object"?m.value:m,ou(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(m){const g=!!m.before,_=m.values||[];return new Ac(_,g)}(n.startAt));let d=null;return n.endAt&&(d=function(m){const g=!m.before,_=m.values||[];return new Ac(_,g)}(n.endAt)),UA(e,s,a,i,c,"F",u,d)}function xk(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ne(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function c0(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Hs(n.unaryFilter.field);return He.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Hs(n.unaryFilter.field);return He.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Hs(n.unaryFilter.field);return He.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Hs(n.unaryFilter.field);return He.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ne(61313);default:return ne(60726)}}(t):t.fieldFilter!==void 0?function(n){return He.create(Hs(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ne(58110);default:return ne(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return mn.create(n.compositeFilter.filters.map(r=>c0(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ne(1026)}}(n.compositeFilter.op))}(t):ne(30097,{filter:t})}function Sk(t){return hk[t]}function Nk(t){return fk[t]}function Ck(t){return pk[t]}function Ws(t){return{fieldPath:t.canonicalString()}}function Hs(t){return ot.fromServerFormat(t.fieldPath)}function u0(t){return t instanceof He?function(n){if(n.op==="=="){if(vy(n.value))return{unaryFilter:{field:Ws(n.field),op:"IS_NAN"}};if(yy(n.value))return{unaryFilter:{field:Ws(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(vy(n.value))return{unaryFilter:{field:Ws(n.field),op:"IS_NOT_NAN"}};if(yy(n.value))return{unaryFilter:{field:Ws(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ws(n.field),op:Nk(n.op),value:n.value}}}(t):t instanceof mn?function(n){const r=n.getFilters().map(s=>u0(s));return r.length===1?r[0]:{compositeFilter:{op:Ck(n.op),filters:r}}}(t):ne(54877,{filter:t})}function Ak(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function d0(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function h0(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e,n,r,s,i=re.min(),a=re.min(),c=ut.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new Er(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Er(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Er(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Er(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk{constructor(e){this.yt=e}}function Pk(t){const e=Ik({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?jh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(){this.Sn=new jk}addToCollectionParentIndex(e,n){return this.Sn.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(Lr.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(Lr.min())}updateCollectionGroup(e,n,r){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class jk{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Je(Se.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Je(Se.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},f0=41943040;class Rt{static withCacheSize(e){return new Rt(e,Rt.DEFAULT_COLLECTION_PERCENTILE,Rt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Rt.DEFAULT_COLLECTION_PERCENTILE=10,Rt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Rt.DEFAULT=new Rt(f0,Rt.DEFAULT_COLLECTION_PERCENTILE,Rt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Rt.DISABLED=new Rt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Pi(0)}static ar(){return new Pi(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const by="LruGarbageCollector",bk=1048576;function Dy([t,e],[n,r]){const s=he(t,n);return s===0?he(e,r):s}class Dk{constructor(e){this.Pr=e,this.buffer=new Je(Dy),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Dy(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Vk{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Y(by,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Bi(n)?Y(by,"Ignoring IndexedDB error during garbage collection: ",n):await zi(n)}await this.Ar(3e5)})}}class Ok{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return F.resolve(au.ce);const r=new Dk(n);return this.Vr.forEachTarget(e,s=>r.Er(s.sequenceNumber)).next(()=>this.Vr.mr(e,s=>r.Er(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Y("LruGarbageCollector","Garbage collection skipped; disabled"),F.resolve(jy)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Y("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),jy):this.gr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let r,s,i,a,c,u,d;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(Y("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),s=this.params.maximumSequenceNumbersToCollect):s=m,a=Date.now(),this.nthSequenceNumber(e,s))).next(m=>(r=m,c=Date.now(),this.removeTargets(e,r,n))).next(m=>(i=m,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(d=Date.now(),$s()<=de.DEBUG&&Y("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-p}ms
	Determined least recently used ${s} in `+(c-a)+`ms
	Removed ${i} targets in `+(u-c)+`ms
	Removed ${m} documents in `+(d-u)+`ms
Total Duration: ${d-p}ms`),F.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:m})))}}function Lk(t,e){return new Ok(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk{constructor(){this.changes=new bs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,vt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?F.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&za(r.mutation,s,cn.empty(),ke.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,fe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=fe()){const s=hs();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let a=Ia();return i.forEach((c,u)=>{a=a.insert(c,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=hs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,fe()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,c)=>{n.set(a,c)})})}computeViews(e,n,r,s){let i=Xn();const a=Ua(),c=function(){return Ua()}();return n.forEach((u,d)=>{const p=r.get(d.key);s.has(d.key)&&(p===void 0||p.mutation instanceof Ds)?i=i.insert(d.key,d):p!==void 0?(a.set(d.key,p.mutation.getFieldMask()),za(p.mutation,d,p.mutation.getFieldMask(),ke.now())):a.set(d.key,cn.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((d,p)=>a.set(d,p)),n.forEach((d,p)=>c.set(d,new Fk(p,a.get(d)??null))),c))}recalculateAndSaveOverlays(e,n){const r=Ua();let s=new Ve((a,c)=>a-c),i=fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const c of a)c.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let p=r.get(u)||cn.empty();p=c.applyToLocalView(d,p),r.set(u,p);const m=(s.get(c.batchId)||fe()).add(u);s=s.insert(c.batchId,m)})}).next(()=>{const a=[],c=s.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),d=u.key,p=u.value,m=GE();p.forEach(g=>{if(!i.has(g)){const _=ZE(n.get(g),r.get(g));_!==null&&m.set(g,_),i=i.add(g)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,m))}return F.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return zA(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):BE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):F.resolve(hs());let c=lo,u=i;return a.next(d=>F.forEach(d,(p,m)=>(c<m.largestBatchId&&(c=m.largestBatchId),i.get(p)?F.resolve():this.remoteDocumentCache.getEntry(e,p).next(g=>{u=u.insert(p,g)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,u,d,fe())).next(p=>({batchId:c,changes:HE(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new X(n)).next(r=>{let s=Ia();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let a=Ia();return this.indexManager.getCollectionParents(e,i).next(c=>F.forEach(c,u=>{const d=function(m,g){return new Ao(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(p=>{p.forEach((m,g)=>{a=a.insert(m,g)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(a=>{i.forEach((u,d)=>{const p=d.getKey();a.get(p)===null&&(a=a.insert(p,vt.newInvalidDocument(p)))});let c=Ia();return a.forEach((u,d)=>{const p=i.get(u);p!==void 0&&za(p.mutation,d,cn.empty(),ke.now()),du(n,d)&&(c=c.insert(u,d))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return F.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:kn(s.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,function(s){return{name:s.name,query:Pk(s.bundledQuery),readTime:kn(s.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{constructor(){this.overlays=new Ve(X.comparator),this.Lr=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const r=hs();return F.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.bt(e,n,i)}),F.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Lr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Lr.delete(r)),F.resolve()}getOverlaysForCollection(e,n,r){const s=hs(),i=n.length+1,a=new X(n.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){const u=c.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return F.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ve((d,p)=>d-p);const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let p=i.get(d.largestBatchId);p===null&&(p=hs(),i=i.insert(d.largestBatchId,p)),p.set(d.getKey(),d)}}const c=hs(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,p)=>c.set(d,p)),!(c.size()>=s)););return F.resolve(c)}bt(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.Lr.get(s.largestBatchId).delete(r.key);this.Lr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new ak(n,r));let i=this.Lr.get(n);i===void 0&&(i=fe(),this.Lr.set(n,i)),this.Lr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{constructor(){this.sessionToken=ut.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(){this.kr=new Je(tt.Kr),this.qr=new Je(tt.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const r=new tt(e,n);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new tt(e,n))}Qr(e,n){e.forEach(r=>this.removeReference(r,n))}Gr(e){const n=new X(new Se([])),r=new tt(n,e),s=new tt(n,e+1),i=[];return this.qr.forEachInRange([r,s],a=>{this.Wr(a),i.push(a.key)}),i}zr(){this.kr.forEach(e=>this.Wr(e))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new X(new Se([])),r=new tt(n,e),s=new tt(n,e+1);let i=fe();return this.qr.forEachInRange([r,s],a=>{i=i.add(a.key)}),i}containsKey(e){const n=new tt(e,0),r=this.kr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class tt{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return X.comparator(e.key,n.key)||he(e.Hr,n.Hr)}static Ur(e,n){return he(e.Hr,n.Hr)||X.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new Je(tt.Kr)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new ik(i,n,r,s);this.mutationQueue.push(a);for(const c of s)this.Jr=this.Jr.add(new tt(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return F.resolve(a)}lookupMutationBatch(e,n){return F.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Xr(r),i=s<0?0:s;return F.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?ep:this.Yn-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new tt(n,0),s=new tt(n,Number.POSITIVE_INFINITY),i=[];return this.Jr.forEachInRange([r,s],a=>{const c=this.Zr(a.Hr);i.push(c)}),F.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Je(he);return n.forEach(s=>{const i=new tt(s,0),a=new tt(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([i,a],c=>{r=r.add(c.Hr)})}),F.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;X.isDocumentKey(i)||(i=i.child(""));const a=new tt(new X(i),0);let c=new Je(he);return this.Jr.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(c=c.add(u.Hr)),!0)},a),F.resolve(this.Yr(c))}Yr(e){const n=[];return e.forEach(r=>{const s=this.Zr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Te(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return F.forEach(n.mutations,s=>{const i=new tt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Jr=r})}nr(e){}containsKey(e,n){const r=new tt(n,0),s=this.Jr.firstAfterOrEqual(r);return F.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{constructor(e){this.ti=e,this.docs=function(){return new Ve(X.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.ti(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return F.resolve(r?r.document.mutableCopy():vt.newInvalidDocument(n))}getEntries(e,n){let r=Xn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():vt.newInvalidDocument(s))}),F.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Xn();const a=n.path,c=new X(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:d,value:{document:p}}=u.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||yA(gA(p),r)<=0||(s.has(p.key)||du(n,p))&&(i=i.insert(p.key,p.mutableCopy()))}return F.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ne(9500)}ni(e,n){return F.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Hk(this)}getSize(e){return F.resolve(this.size)}}class Hk extends Mk{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Mr.addEntry(e,s)):this.Mr.removeEntry(r)}),F.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(e){this.persistence=e,this.ri=new bs(n=>rp(n),sp),this.lastRemoteSnapshotVersion=re.min(),this.highestTargetId=0,this.ii=0,this.si=new cp,this.targetCount=0,this.oi=Pi._r()}forEachTarget(e,n){return this.ri.forEach((r,s)=>n(s)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ii&&(this.ii=n),F.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new Pi(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.lr(n),F.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.ri.forEach((a,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.ri.delete(a),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)}),F.waitFor(i).next(()=>s)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const r=this.ri.get(n)||null;return F.resolve(r)}addMatchingKeys(e,n,r){return this.si.$r(n,r),F.resolve()}removeMatchingKeys(e,n,r){this.si.Qr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),F.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const r=this.si.jr(n);return F.resolve(r)}containsKey(e,n){return F.resolve(this.si.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0{constructor(e,n){this._i={},this.overlays={},this.ai=new au(0),this.ui=!1,this.ui=!0,this.ci=new $k,this.referenceDelegate=e(this),this.li=new Gk(this),this.indexManager=new Rk,this.remoteDocumentCache=function(s){return new Wk(s)}(r=>this.referenceDelegate.hi(r)),this.serializer=new kk(n),this.Pi=new zk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Bk,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this._i[e.toKey()];return r||(r=new qk(n,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,r){Y("MemoryPersistence","Starting transaction:",e);const s=new Kk(this.ai.next());return this.referenceDelegate.Ti(),r(s).next(i=>this.referenceDelegate.Ii(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ei(e,n){return F.or(Object.values(this._i).map(r=>()=>r.containsKey(e,n)))}}class Kk extends _A{constructor(e){super(),this.currentSequenceNumber=e}}class up{constructor(e){this.persistence=e,this.Ri=new cp,this.Ai=null}static Vi(e){return new up(e)}get di(){if(this.Ai)return this.Ai;throw ne(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.di.delete(r.toString()),F.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.di.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),F.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach(s=>this.di.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.di.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.di,r=>{const s=X.fromPath(r);return this.mi(e,s).next(i=>{i||n.removeEntry(s,re.min())})}).next(()=>(this.Ai=null,n.apply(e)))}updateLimboDocument(e,n){return this.mi(e,n).next(r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())})}hi(e){return 0}mi(e,n){return F.or([()=>F.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class jc{constructor(e,n){this.persistence=e,this.fi=new bs(r=>TA(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=Lk(this,n)}static Vi(e,n){return new jc(e,n)}Ti(){}Ii(e){return F.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}pr(e){let n=0;return this.mr(e,r=>{n++}).next(()=>n)}mr(e,n){return F.forEach(this.fi,(r,s)=>this.wr(e,r,s).next(i=>i?F.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ni(e,a=>this.wr(e,a,n).next(c=>{c||(r++,i.removeEntry(a,re.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),F.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),F.resolve()}removeReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),F.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),F.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Bl(e.data.value)),n}wr(e,n,r){return F.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.fi.get(n);return F.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Ts=r,this.Is=s}static Es(e,n){let r=fe(),s=fe();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new dp(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yk{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=function(){return xx()?8:wA(wt())>0?6:4}()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.gs(e,n).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.ps(e,n,s,r).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new Qk;return this.ys(e,n,a).next(c=>{if(i.result=c,this.As)return this.ws(e,n,a,c.size)})}).next(()=>i.result)}ws(e,n,r,s){return r.documentReadCount<this.Vs?($s()<=de.DEBUG&&Y("QueryEngine","SDK will not create cache indexes for query:",qs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),F.resolve()):($s()<=de.DEBUG&&Y("QueryEngine","Query:",qs(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ds*s?($s()<=de.DEBUG&&Y("QueryEngine","The SDK decides to create cache indexes for query:",qs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,An(n))):F.resolve())}gs(e,n){if(Ty(n))return F.resolve(null);let r=An(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=jh(n,null,"F"),r=An(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const a=fe(...i);return this.fs.getDocuments(e,a).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.bs(n,c);return this.Ss(n,d,a,u.readTime)?this.gs(e,jh(n,null,"F")):this.Ds(e,d,n,u)}))})))}ps(e,n,r,s){return Ty(n)||s.isEqual(re.min())?F.resolve(null):this.fs.getDocuments(e,r).next(i=>{const a=this.bs(n,i);return this.Ss(n,a,r,s)?F.resolve(null):($s()<=de.DEBUG&&Y("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),qs(n)),this.Ds(e,a,n,mA(s,lo)).next(c=>c))})}bs(e,n){let r=new Je(qE(e));return n.forEach((s,i)=>{du(e,i)&&(r=r.add(i))}),r}Ss(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}ys(e,n,r){return $s()<=de.DEBUG&&Y("QueryEngine","Using full collection scan to execute query:",qs(n)),this.fs.getDocumentsMatchingQuery(e,n,Lr.min(),r)}Ds(e,n,r,s){return this.fs.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hp="LocalStore",Jk=3e8;class Xk{constructor(e,n,r,s){this.persistence=e,this.Cs=n,this.serializer=s,this.vs=new Ve(he),this.Fs=new bs(i=>rp(i),sp),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Uk(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.vs))}}function Zk(t,e,n,r){return new Xk(t,e,n,r)}async function m0(t,e){const n=ie(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Os(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const a=[],c=[];let u=fe();for(const d of s){a.push(d.batchId);for(const p of d.mutations)u=u.add(p.key)}for(const d of i){c.push(d.batchId);for(const p of d.mutations)u=u.add(p.key)}return n.localDocuments.getDocuments(r,u).next(d=>({Ns:d,removedBatchIds:a,addedBatchIds:c}))})})}function eP(t,e){const n=ie(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.xs.newChangeBuffer({trackRemovals:!0});return function(c,u,d,p){const m=d.batch,g=m.keys();let _=F.resolve();return g.forEach(P=>{_=_.next(()=>p.getEntry(u,P)).next(R=>{const L=d.docVersions.get(P);Te(L!==null,48541),R.version.compareTo(L)<0&&(m.applyToRemoteDocument(R,d),R.isValidDocument()&&(R.setReadTime(d.commitVersion),p.addEntry(R)))})}),_.next(()=>c.mutationQueue.removeMutationBatch(u,m))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=fe();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function g0(t){const e=ie(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.li.getLastRemoteSnapshotVersion(n))}function tP(t,e){const n=ie(t),r=e.snapshotVersion;let s=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=n.xs.newChangeBuffer({trackRemovals:!0});s=n.vs;const c=[];e.targetChanges.forEach((p,m)=>{const g=s.get(m);if(!g)return;c.push(n.li.removeMatchingKeys(i,p.removedDocuments,m).next(()=>n.li.addMatchingKeys(i,p.addedDocuments,m)));let _=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?_=_.withResumeToken(ut.EMPTY_BYTE_STRING,re.min()).withLastLimboFreeSnapshotVersion(re.min()):p.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(p.resumeToken,r)),s=s.insert(m,_),function(R,L,N){return R.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=Jk?!0:N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0}(g,_,p)&&c.push(n.li.updateTargetData(i,_))});let u=Xn(),d=fe();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(i,p))}),c.push(nP(i,a,e.documentUpdates).next(p=>{u=p.Bs,d=p.Ls})),!r.isEqual(re.min())){const p=n.li.getLastRemoteSnapshotVersion(i).next(m=>n.li.setTargetsMetadata(i,i.currentSequenceNumber,r));c.push(p)}return F.waitFor(c).next(()=>a.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,d)).next(()=>u)}).then(i=>(n.vs=s,i))}function nP(t,e,n){let r=fe(),s=fe();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let a=Xn();return n.forEach((c,u)=>{const d=i.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(c)),u.isNoDocument()&&u.version.isEqual(re.min())?(e.removeEntry(c,u.readTime),a=a.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),a=a.insert(c,u)):Y(hp,"Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)}),{Bs:a,Ls:s}})}function rP(t,e){const n=ie(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=ep),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function sP(t,e){const n=ie(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.li.getTargetData(r,e).next(i=>i?(s=i,F.resolve(s)):n.li.allocateTargetId(r).next(a=>(s=new Er(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.li.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.vs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.vs=n.vs.insert(r.targetId,r),n.Fs.set(e,r.targetId)),r})}async function Lh(t,e,n){const r=ie(t),s=r.vs.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,a=>r.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!Bi(a))throw a;Y(hp,`Failed to update sequence numbers for target ${e}: ${a}`)}r.vs=r.vs.remove(e),r.Fs.delete(s.target)}function Vy(t,e,n){const r=ie(t);let s=re.min(),i=fe();return r.persistence.runTransaction("Execute query","readwrite",a=>function(u,d,p){const m=ie(u),g=m.Fs.get(p);return g!==void 0?F.resolve(m.vs.get(g)):m.li.getTargetData(d,p)}(r,a,An(e)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(a,c.targetId).next(u=>{i=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(a,e,n?s:re.min(),n?i:fe())).next(c=>(iP(r,$A(e),c),{documents:c,ks:i})))}function iP(t,e,n){let r=t.Ms.get(e)||re.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Ms.set(e,r)}class Oy{constructor(){this.activeTargetIds=QA()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class aP{constructor(){this.vo=new Oy,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,r){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Oy,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oP{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ly="ConnectivityMonitor";class My{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Y(Ly,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Y(Ly,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xl=null;function Mh(){return xl===null?xl=function(){return 268435456+Math.round(2147483648*Math.random())}():xl++,"0x"+xl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wd="RestConnection",lP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class cP{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.$o=this.databaseId.database===Nc?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,n,r,s,i){const a=Mh(),c=this.Qo(e,n.toUriEncodedString());Y(wd,`Sending RPC '${e}' ${a}:`,c,r);const u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(u,s,i);const{host:d}=new URL(c),p=Li(d);return this.zo(e,c,u,r,p).then(m=>(Y(wd,`Received RPC '${e}' ${a}: `,m),m),m=>{throw Ni(wd,`RPC '${e}' ${a} failed with error: `,m,"url: ",c,"request:",r),m})}jo(e,n,r,s,i,a){return this.Wo(e,n,r,s,i)}Go(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ui}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}Qo(e,n){const r=lP[e];let s=`${this.qo}/v1/${n}:${r}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uP{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mt="WebChannelConnection",ma=(t,e,n)=>{t.listen(e,r=>{try{n(r)}catch(s){setTimeout(()=>{throw s},0)}})};class mi extends cP{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!mi.c_){const e=wE();ma(e,_E.STAT_EVENT,n=>{n.stat===Sh.PROXY?Y(mt,"STAT_EVENT: detected buffering proxy"):n.stat===Sh.NOPROXY&&Y(mt,"STAT_EVENT: detected no buffering proxy")}),mi.c_=!0}}zo(e,n,r,s,i){const a=Mh();return new Promise((c,u)=>{const d=new yE;d.setWithCredentials(!0),d.listenOnce(vE.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case zl.NO_ERROR:const m=d.getResponseJson();Y(mt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(m)),c(m);break;case zl.TIMEOUT:Y(mt,`RPC '${e}' ${a} timed out`),u(new Q(M.DEADLINE_EXCEEDED,"Request time out"));break;case zl.HTTP_ERROR:const g=d.getStatus();if(Y(mt,`RPC '${e}' ${a} failed with status:`,g,"response text:",d.getResponseText()),g>0){let _=d.getResponseJson();Array.isArray(_)&&(_=_[0]);const P=_==null?void 0:_.error;if(P&&P.status&&P.message){const R=function(N){const x=N.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(x)>=0?x:M.UNKNOWN}(P.status);u(new Q(R,P.message))}else u(new Q(M.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new Q(M.UNAVAILABLE,"Connection failed."));break;default:ne(9055,{l_:e,streamId:a,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{Y(mt,`RPC '${e}' ${a} completed.`)}});const p=JSON.stringify(s);Y(mt,`RPC '${e}' ${a} sending request:`,s),d.send(n,"POST",p,r,15)})}T_(e,n,r){const s=Mh(),i=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=this.createWebChannelTransport(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Go(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const d=i.join("");Y(mt,`Creating RPC '${e}' stream ${s}: ${d}`,c);const p=a.createWebChannel(d,c);this.I_(p);let m=!1,g=!1;const _=new uP({Ho:P=>{g?Y(mt,`Not sending because RPC '${e}' stream ${s} is closed:`,P):(m||(Y(mt,`Opening RPC '${e}' stream ${s} transport.`),p.open(),m=!0),Y(mt,`RPC '${e}' stream ${s} sending:`,P),p.send(P))},Jo:()=>p.close()});return ma(p,Ta.EventType.OPEN,()=>{g||(Y(mt,`RPC '${e}' stream ${s} transport opened.`),_.i_())}),ma(p,Ta.EventType.CLOSE,()=>{g||(g=!0,Y(mt,`RPC '${e}' stream ${s} transport closed`),_.o_(),this.E_(p))}),ma(p,Ta.EventType.ERROR,P=>{g||(g=!0,Ni(mt,`RPC '${e}' stream ${s} transport errored. Name:`,P.name,"Message:",P.message),_.o_(new Q(M.UNAVAILABLE,"The operation could not be completed")))}),ma(p,Ta.EventType.MESSAGE,P=>{var R;if(!g){const L=P.data[0];Te(!!L,16349);const N=L,x=(N==null?void 0:N.error)||((R=N[0])==null?void 0:R.error);if(x){Y(mt,`RPC '${e}' stream ${s} received error:`,x);const E=x.status;let O=function(w){const y=qe[w];if(y!==void 0)return n0(y)}(E),b=x.message;O===void 0&&(O=M.INTERNAL,b="Unknown error status: "+E+" with message "+x.message),g=!0,_.o_(new Q(O,b)),p.close()}else Y(mt,`RPC '${e}' stream ${s} received:`,L),_.__(L)}}),mi.u_(),setTimeout(()=>{_.s_()},0),_}terminate(){this.a_.forEach(e=>e.close()),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter(n=>n===e)}Go(e,n,r){super.Go(e,n,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return EE()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dP(t){return new mi(t)}function Ed(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mu(t){return new mk(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */mi.c_=!1;class y0{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Ci=e,this.timerId=n,this.R_=r,this.A_=s,this.V_=i,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&Y("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fy="PersistentStream";class v0{constructor(e,n,r,s,i,a,c,u){this.Ci=e,this.b_=r,this.S_=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new y0(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,()=>this.k_()))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===M.RESOURCE_EXHAUSTED?(Jn(n.toString()),Jn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new Q(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.Yo(()=>{r(()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.Yo()))}),this.stream.t_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.H_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Y(Fy,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget(()=>this.D_===e?n():(Y(Fy,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class hP extends v0{constructor(e,n,r,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=vk(this.serializer,e),r=function(i){if(!("targetChange"in i))return re.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?re.min():a.readTime?kn(a.readTime):re.min()}(e);return this.listener.J_(n,r)}Z_(e){const n={};n.database=Oh(this.serializer),n.addTarget=function(i,a){let c;const u=a.target;if(c=Ph(u)?{documents:Ek(i,u)}:{query:Tk(i,u).ft},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=i0(i,a.resumeToken);const d=bh(i,a.expectedCount);d!==null&&(c.expectedCount=d)}else if(a.snapshotVersion.compareTo(re.min())>0){c.readTime=Rc(i,a.snapshotVersion.toTimestamp());const d=bh(i,a.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);const r=xk(this.serializer,e);r&&(n.labels=r),this.K_(n)}X_(e){const n={};n.database=Oh(this.serializer),n.removeTarget=e,this.K_(n)}}class fP extends v0{constructor(e,n,r,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return Te(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Te(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Te(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=wk(e.writeResults,e.commitTime),r=kn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Oh(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>_k(this.serializer,r))};this.K_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pP{}class mP extends pP{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new Q(M.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Wo(e,Dh(n,r),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Q(M.UNKNOWN,i.toString())})}jo(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.jo(e,Dh(n,r),s,a,c,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Q(M.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}function gP(t,e,n,r){return new mP(t,e,n,r)}class yP{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Jn(n),this.aa=!1):Y("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cs="RemoteStore";class vP{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=i,this.Aa.Mo(a=>{r.enqueueAndForget(async()=>{Vs(this)&&(Y(Cs,"Restarting streams for network reachability change."),await async function(u){const d=ie(u);d.Ea.add(4),await Ro(d),d.Va.set("Unknown"),d.Ea.delete(4),await gu(d)}(this))})}),this.Va=new yP(r,s)}}async function gu(t){if(Vs(t))for(const e of t.Ra)await e(!0)}async function Ro(t){for(const e of t.Ra)await e(!1)}function _0(t,e){const n=ie(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),gp(n)?mp(n):$i(n).O_()&&pp(n,e))}function fp(t,e){const n=ie(t),r=$i(n);n.Ia.delete(e),r.O_()&&w0(n,e),n.Ia.size===0&&(r.O_()?r.L_():Vs(n)&&n.Va.set("Unknown"))}function pp(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(re.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}$i(t).Z_(e)}function w0(t,e){t.da.$e(e),$i(t).X_(e)}function mp(t){t.da=new dk({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),$i(t).start(),t.Va.ua()}function gp(t){return Vs(t)&&!$i(t).x_()&&t.Ia.size>0}function Vs(t){return ie(t).Ea.size===0}function E0(t){t.da=void 0}async function _P(t){t.Va.set("Online")}async function wP(t){t.Ia.forEach((e,n)=>{pp(t,e)})}async function EP(t,e){E0(t),gp(t)?(t.Va.ha(e),mp(t)):t.Va.set("Unknown")}async function TP(t,e,n){if(t.Va.set("Online"),e instanceof s0&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const c of i.targetIds)s.Ia.has(c)&&(await s.remoteSyncer.rejectListen(c,a),s.Ia.delete(c),s.da.removeTarget(c))}(t,e)}catch(r){Y(Cs,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await bc(t,r)}else if(e instanceof Wl?t.da.Xe(e):e instanceof r0?t.da.st(e):t.da.tt(e),!n.isEqual(re.min()))try{const r=await g0(t.localStore);n.compareTo(r)>=0&&await function(i,a){const c=i.da.Tt(a);return c.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const p=i.Ia.get(d);p&&i.Ia.set(d,p.withResumeToken(u.resumeToken,a))}}),c.targetMismatches.forEach((u,d)=>{const p=i.Ia.get(u);if(!p)return;i.Ia.set(u,p.withResumeToken(ut.EMPTY_BYTE_STRING,p.snapshotVersion)),w0(i,u);const m=new Er(p.target,u,d,p.sequenceNumber);pp(i,m)}),i.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){Y(Cs,"Failed to raise snapshot:",r),await bc(t,r)}}async function bc(t,e,n){if(!Bi(e))throw e;t.Ea.add(1),await Ro(t),t.Va.set("Offline"),n||(n=()=>g0(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Y(Cs,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await gu(t)})}function T0(t,e){return e().catch(n=>bc(t,n,e))}async function yu(t){const e=ie(t),n=zr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ep;for(;IP(e);)try{const s=await rP(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,xP(e,s)}catch(s){await bc(e,s)}I0(e)&&x0(e)}function IP(t){return Vs(t)&&t.Ta.length<10}function xP(t,e){t.Ta.push(e);const n=zr(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function I0(t){return Vs(t)&&!zr(t).x_()&&t.Ta.length>0}function x0(t){zr(t).start()}async function SP(t){zr(t).ra()}async function NP(t){const e=zr(t);for(const n of t.Ta)e.ea(n.mutations)}async function CP(t,e,n){const r=t.Ta.shift(),s=ap.from(r,e,n);await T0(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await yu(t)}async function AP(t,e){e&&zr(t).Y_&&await async function(r,s){if(function(a){return lk(a)&&a!==M.ABORTED}(s.code)){const i=r.Ta.shift();zr(r).B_(),await T0(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await yu(r)}}(t,e),I0(t)&&x0(t)}async function Uy(t,e){const n=ie(t);n.asyncQueue.verifyOperationInProgress(),Y(Cs,"RemoteStore received new credentials");const r=Vs(n);n.Ea.add(3),await Ro(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await gu(n)}async function kP(t,e){const n=ie(t);e?(n.Ea.delete(2),await gu(n)):e||(n.Ea.add(2),await Ro(n),n.Va.set("Unknown"))}function $i(t){return t.ma||(t.ma=function(n,r,s){const i=ie(n);return i.sa(),new hP(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:_P.bind(null,t),Yo:wP.bind(null,t),t_:EP.bind(null,t),J_:TP.bind(null,t)}),t.Ra.push(async e=>{e?(t.ma.B_(),gp(t)?mp(t):t.Va.set("Unknown")):(await t.ma.stop(),E0(t))})),t.ma}function zr(t){return t.fa||(t.fa=function(n,r,s){const i=ie(n);return i.sa(),new fP(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:SP.bind(null,t),t_:AP.bind(null,t),ta:NP.bind(null,t),na:CP.bind(null,t)}),t.Ra.push(async e=>{e?(t.fa.B_(),await yu(t)):(await t.fa.stop(),t.Ta.length>0&&(Y(Cs,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new $n,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const a=Date.now()+r,c=new yp(e,n,a,s,i);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Q(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function vp(t,e){if(Jn("AsyncQueue",`${e}: ${t}`),Bi(t))return new Q(M.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{static emptySet(e){return new gi(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||X.comparator(n.key,r.key):(n,r)=>X.comparator(n.key,r.key),this.keyedMap=Ia(),this.sortedSet=new Ve(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof gi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new gi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zy{constructor(){this.ga=new Ve(X.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ne(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ri{constructor(e,n,r,s,i,a,c,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const a=[];return n.forEach(c=>{a.push({type:0,doc:c})}),new Ri(e,n,gi.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&uu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PP{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some(e=>e.Da())}}class RP{constructor(){this.queries=By(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=ie(n),i=s.queries;s.queries=By(),i.forEach((a,c)=>{for(const u of c.ba)u.onError(r)})})(this,new Q(M.ABORTED,"Firestore shutting down"))}}function By(){return new bs(t=>$E(t),uu)}async function _p(t,e){const n=ie(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.Sa()&&e.Da()&&(r=2):(i=new PP,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const c=vp(a,`Initialization of query '${qs(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,i),i.ba.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Ep(n)}async function wp(t,e){const n=ie(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const a=i.ba.indexOf(e);a>=0&&(i.ba.splice(a,1),i.ba.length===0?s=e.Da()?0:1:!i.Sa()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function jP(t,e){const n=ie(t);let r=!1;for(const s of e){const i=s.query,a=n.queries.get(i);if(a){for(const c of a.ba)c.Fa(s)&&(r=!0);a.wa=s}}r&&Ep(n)}function bP(t,e,n){const r=ie(t),s=r.queries.get(e);if(s)for(const i of s.ba)i.onError(n);r.queries.delete(e)}function Ep(t){t.Ca.forEach(e=>{e.next()})}var Fh,$y;($y=Fh||(Fh={})).Ma="default",$y.Cache="cache";class Tp{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Ri(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Ri.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Fh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0{constructor(e){this.key=e}}class N0{constructor(e){this.key=e}}class DP{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=fe(),this.mutatedKeys=fe(),this.eu=qE(e),this.tu=new gi(this.eu)}get nu(){return this.Za}ru(e,n){const r=n?n.iu:new zy,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,c=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((p,m)=>{const g=s.get(p),_=du(this.query,m)?m:null,P=!!g&&this.mutatedKeys.has(g.key),R=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let L=!1;g&&_?g.data.isEqual(_.data)?P!==R&&(r.track({type:3,doc:_}),L=!0):this.su(g,_)||(r.track({type:2,doc:_}),L=!0,(u&&this.eu(_,u)>0||d&&this.eu(_,d)<0)&&(c=!0)):!g&&_?(r.track({type:0,doc:_}),L=!0):g&&!_&&(r.track({type:1,doc:g}),L=!0,(u||d)&&(c=!0)),L&&(_?(a=a.add(_),i=R?i.add(p):i.delete(p)):(a=a.delete(p),i=i.delete(p)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const p=this.query.limitType==="F"?a.last():a.first();a=a.delete(p.key),i=i.delete(p.key),r.track({type:1,doc:p})}return{tu:a,iu:r,Ss:c,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((p,m)=>function(_,P){const R=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ne(20277,{Vt:L})}};return R(_)-R(P)}(p.type,m.type)||this.eu(p.doc,m.doc)),this.ou(r),s=s??!1;const c=n&&!s?this._u():[],u=this.Ya.size===0&&this.current&&!s?1:0,d=u!==this.Xa;return this.Xa=u,a.length!==0||d?{snapshot:new Ri(this.query,e.tu,i,a,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new zy,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Za=this.Za.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Za=this.Za.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=fe(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return e.forEach(r=>{this.Ya.has(r)||n.push(new N0(r))}),this.Ya.forEach(r=>{e.has(r)||n.push(new S0(r))}),n}cu(e){this.Za=e.ks,this.Ya=fe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Ri.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Ip="SyncEngine";class VP{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class OP{constructor(e){this.key=e,this.hu=!1}}class LP{constructor(e,n,r,s,i,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new bs(c=>$E(c),uu),this.Iu=new Map,this.Eu=new Set,this.Ru=new Ve(X.comparator),this.Au=new Map,this.Vu=new cp,this.du={},this.mu=new Map,this.fu=Pi.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function MP(t,e,n=!0){const r=j0(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await C0(r,e,n,!0),s}async function FP(t,e){const n=j0(t);await C0(n,e,!0,!1)}async function C0(t,e,n,r){const s=await sP(t.localStore,An(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,n);let c;return r&&(c=await UP(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&n&&_0(t.remoteStore,s),c}async function UP(t,e,n,r,s){t.pu=(m,g,_)=>async function(R,L,N,x){let E=L.view.ru(N);E.Ss&&(E=await Vy(R.localStore,L.query,!1).then(({documents:w})=>L.view.ru(w,E)));const O=x&&x.targetChanges.get(L.targetId),b=x&&x.targetMismatches.get(L.targetId)!=null,U=L.view.applyChanges(E,R.isPrimaryClient,O,b);return Wy(R,L.targetId,U.au),U.snapshot}(t,m,g,_);const i=await Vy(t.localStore,e,!0),a=new DP(e,i.ks),c=a.ru(i.documents),u=Po.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=a.applyChanges(c,t.isPrimaryClient,u);Wy(t,n,d.au);const p=new VP(e,n,a);return t.Tu.set(e,p),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function zP(t,e,n){const r=ie(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(a=>!uu(a,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Lh(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&fp(r.remoteStore,s.targetId),Uh(r,s.targetId)}).catch(zi)):(Uh(r,s.targetId),await Lh(r.localStore,s.targetId,!0))}async function BP(t,e){const n=ie(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),fp(n.remoteStore,r.targetId))}async function $P(t,e,n){const r=YP(t);try{const s=await function(a,c){const u=ie(a),d=ke.now(),p=c.reduce((_,P)=>_.add(P.key),fe());let m,g;return u.persistence.runTransaction("Locally write mutations","readwrite",_=>{let P=Xn(),R=fe();return u.xs.getEntries(_,p).next(L=>{P=L,P.forEach((N,x)=>{x.isValidDocument()||(R=R.add(N))})}).next(()=>u.localDocuments.getOverlayedDocuments(_,P)).next(L=>{m=L;const N=[];for(const x of c){const E=rk(x,m.get(x.key).overlayedDocument);E!=null&&N.push(new Ds(x.key,E,VE(E.value.mapValue),qn.exists(!0)))}return u.mutationQueue.addMutationBatch(_,d,N,c)}).next(L=>{g=L;const N=L.applyToLocalDocumentSet(m,R);return u.documentOverlayCache.saveOverlays(_,L.batchId,N)})}).then(()=>({batchId:g.batchId,changes:HE(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(a,c,u){let d=a.du[a.currentUser.toKey()];d||(d=new Ve(he)),d=d.insert(c,u),a.du[a.currentUser.toKey()]=d}(r,s.batchId,n),await jo(r,s.changes),await yu(r.remoteStore)}catch(s){const i=vp(s,"Failed to persist write");n.reject(i)}}async function A0(t,e){const n=ie(t);try{const r=await tP(n.localStore,e);e.targetChanges.forEach((s,i)=>{const a=n.Au.get(i);a&&(Te(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.hu=!0:s.modifiedDocuments.size>0?Te(a.hu,14607):s.removedDocuments.size>0&&(Te(a.hu,42227),a.hu=!1))}),await jo(n,r,e)}catch(r){await zi(r)}}function qy(t,e,n){const r=ie(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,a)=>{const c=a.view.va(e);c.snapshot&&s.push(c.snapshot)}),function(a,c){const u=ie(a);u.onlineState=c;let d=!1;u.queries.forEach((p,m)=>{for(const g of m.ba)g.va(c)&&(d=!0)}),d&&Ep(u)}(r.eventManager,e),s.length&&r.Pu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function qP(t,e,n){const r=ie(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let a=new Ve(X.comparator);a=a.insert(i,vt.newNoDocument(i,re.min()));const c=fe().add(i),u=new pu(re.min(),new Map,new Ve(he),a,c);await A0(r,u),r.Ru=r.Ru.remove(i),r.Au.delete(e),xp(r)}else await Lh(r.localStore,e,!1).then(()=>Uh(r,e,n)).catch(zi)}async function WP(t,e){const n=ie(t),r=e.batch.batchId;try{const s=await eP(n.localStore,e);P0(n,r,null),k0(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await jo(n,s)}catch(s){await zi(s)}}async function HP(t,e,n){const r=ie(t);try{const s=await function(a,c){const u=ie(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let p;return u.mutationQueue.lookupMutationBatch(d,c).next(m=>(Te(m!==null,37113),p=m.keys(),u.mutationQueue.removeMutationBatch(d,m))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,p,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,p)).next(()=>u.localDocuments.getDocuments(d,p))})}(r.localStore,e);P0(r,e,n),k0(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await jo(r,s)}catch(s){await zi(s)}}function k0(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function P0(t,e,n){const r=ie(t);let s=r.du[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.du[r.currentUser.toKey()]=s}}function Uh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach(r=>{t.Vu.containsKey(r)||R0(t,r)})}function R0(t,e){t.Eu.delete(e.path.canonicalString());const n=t.Ru.get(e);n!==null&&(fp(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),xp(t))}function Wy(t,e,n){for(const r of n)r instanceof S0?(t.Vu.addReference(r.key,e),GP(t,r)):r instanceof N0?(Y(Ip,"Document no longer in limbo: "+r.key),t.Vu.removeReference(r.key,e),t.Vu.containsKey(r.key)||R0(t,r.key)):ne(19791,{wu:r})}function GP(t,e){const n=e.key,r=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(r)||(Y(Ip,"New document in limbo: "+n),t.Eu.add(r),xp(t))}function xp(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new X(Se.fromString(e)),r=t.fu.next();t.Au.set(r,new OP(n)),t.Ru=t.Ru.insert(n,r),_0(t.remoteStore,new Er(An(cu(n.path)),r,"TargetPurposeLimboResolution",au.ce))}}async function jo(t,e,n){const r=ie(t),s=[],i=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach((c,u)=>{a.push(r.pu(u,e,n).then(d=>{var p;if((d||n)&&r.isPrimaryClient){const m=d?!d.fromCache:(p=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:p.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(d){s.push(d);const m=dp.Es(u.targetId,d);i.push(m)}}))}),await Promise.all(a),r.Pu.J_(s),await async function(u,d){const p=ie(u);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>F.forEach(d,g=>F.forEach(g.Ts,_=>p.persistence.referenceDelegate.addReference(m,g.targetId,_)).next(()=>F.forEach(g.Is,_=>p.persistence.referenceDelegate.removeReference(m,g.targetId,_)))))}catch(m){if(!Bi(m))throw m;Y(hp,"Failed to update sequence numbers: "+m)}for(const m of d){const g=m.targetId;if(!m.fromCache){const _=p.vs.get(g),P=_.snapshotVersion,R=_.withLastLimboFreeSnapshotVersion(P);p.vs=p.vs.insert(g,R)}}}(r.localStore,i))}async function KP(t,e){const n=ie(t);if(!n.currentUser.isEqual(e)){Y(Ip,"User change. New user:",e.toKey());const r=await m0(n.localStore,e);n.currentUser=e,function(i,a){i.mu.forEach(c=>{c.forEach(u=>{u.reject(new Q(M.CANCELLED,a))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await jo(n,r.Ns)}}function QP(t,e){const n=ie(t),r=n.Au.get(e);if(r&&r.hu)return fe().add(r.key);{let s=fe();const i=n.Iu.get(e);if(!i)return s;for(const a of i){const c=n.Tu.get(a);s=s.unionWith(c.view.nu)}return s}}function j0(t){const e=ie(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=A0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=QP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=qP.bind(null,e),e.Pu.J_=jP.bind(null,e.eventManager),e.Pu.yu=bP.bind(null,e.eventManager),e}function YP(t){const e=ie(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=WP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=HP.bind(null,e),e}class Dc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=mu(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return Zk(this.persistence,new Yk,e.initialUser,this.serializer)}Cu(e){return new p0(up.Vi,this.serializer)}Du(e){return new aP}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Dc.provider={build:()=>new Dc};class JP extends Dc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Te(this.persistence.referenceDelegate instanceof jc,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Vk(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Rt.withCacheSize(this.cacheSizeBytes):Rt.DEFAULT;return new p0(r=>jc.Vi(r,n),this.serializer)}}class zh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>qy(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=KP.bind(null,this.syncEngine),await kP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new RP}()}createDatastore(e){const n=mu(e.databaseInfo.databaseId),r=dP(e.databaseInfo);return gP(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,a,c){return new vP(r,s,i,a,c)}(this.localStore,this.datastore,e.asyncQueue,n=>qy(this.syncEngine,n,0),function(){return My.v()?new My:new oP}())}createSyncEngine(e,n){return function(s,i,a,c,u,d,p){const m=new LP(s,i,a,c,u,d);return p&&(m.gu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=ie(s);Y(Cs,"RemoteStore shutting down."),i.Ea.add(5),await Ro(i),i.Aa.shutdown(),i.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}zh.provider={build:()=>new zh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Jn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Br="FirestoreClient";class XP{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this._databaseInfo=s,this.user=gt.UNAUTHENTICATED,this.clientId=Zf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async a=>{Y(Br,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(Y(Br,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new $n;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=vp(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Td(t,e){t.asyncQueue.verifyOperationInProgress(),Y(Br,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await m0(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Hy(t,e){t.asyncQueue.verifyOperationInProgress();const n=await ZP(t);Y(Br,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Uy(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Uy(e.remoteStore,s)),t._onlineComponents=e}async function ZP(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Y(Br,"Using user provided OfflineComponentProvider");try{await Td(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===M.FAILED_PRECONDITION||s.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Ni("Error using user provided cache. Falling back to memory cache: "+n),await Td(t,new Dc)}}else Y(Br,"Using default OfflineComponentProvider"),await Td(t,new JP(void 0));return t._offlineComponents}async function b0(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Y(Br,"Using user provided OnlineComponentProvider"),await Hy(t,t._uninitializedComponentsProvider._online)):(Y(Br,"Using default OnlineComponentProvider"),await Hy(t,new zh))),t._onlineComponents}function eR(t){return b0(t).then(e=>e.syncEngine)}async function Vc(t){const e=await b0(t),n=e.eventManager;return n.onListen=MP.bind(null,e.syncEngine),n.onUnlisten=zP.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=FP.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=BP.bind(null,e.syncEngine),n}function tR(t,e,n,r){const s=new Sp(r),i=new Tp(e,s,n);return t.asyncQueue.enqueueAndForget(async()=>_p(await Vc(t),i)),()=>{s.Nu(),t.asyncQueue.enqueueAndForget(async()=>wp(await Vc(t),i))}}function nR(t,e,n={}){const r=new $n;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,c,u,d){const p=new Sp({next:g=>{p.Nu(),a.enqueueAndForget(()=>wp(i,m));const _=g.docs.has(c);!_&&g.fromCache?d.reject(new Q(M.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&g.fromCache&&u&&u.source==="server"?d.reject(new Q(M.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),m=new Tp(cu(c.path),p,{includeMetadataChanges:!0,Ka:!0});return _p(i,m)}(await Vc(t),t.asyncQueue,e,n,r)),r.promise}function rR(t,e,n={}){const r=new $n;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,c,u,d){const p=new Sp({next:g=>{p.Nu(),a.enqueueAndForget(()=>wp(i,m)),g.fromCache&&u.source==="server"?d.reject(new Q(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(g)},error:g=>d.reject(g)}),m=new Tp(c,p,{includeMetadataChanges:!0,Ka:!0});return _p(i,m)}(await Vc(t),t.asyncQueue,e,n,r)),r.promise}function sR(t,e){const n=new $n;return t.asyncQueue.enqueueAndForget(async()=>$P(await eR(t),e,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D0(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iR="ComponentProvider",Gy=new Map;function aR(t,e,n,r,s){return new SA(t,e,n,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,D0(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V0="firestore.googleapis.com",Ky=!0;class Qy{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Q(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=V0,this.ssl=Ky}else this.host=e.host,this.ssl=e.ssl??Ky;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=f0;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<bk)throw new Q(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}pA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=D0(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Q(M.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Q(M.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Q(M.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class vu{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Qy({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Q(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Q(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Qy(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new sA;switch(r.type){case"firstParty":return new lA(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Q(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Gy.get(n);r&&(Y(iR,"Removing Datastore"),Gy.delete(n),r.terminate())}(this),Promise.resolve()}}function oR(t,e,n,r={}){var d;t=Cn(t,vu);const s=Li(e),i=t._getSettings(),a={...i,emulatorOptions:t._getEmulatorOptions()},c=`${e}:${n}`;s&&(Aw(`https://${c}`),kw("Firestore",!0)),i.host!==V0&&i.host!==c&&Ni("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...i,host:c,ssl:s,emulatorOptions:r};if(!Ts(u,a)&&(t._setSettings(u),r.mockUserToken)){let p,m;if(typeof r.mockUserToken=="string")p=r.mockUserToken,m=gt.MOCK_USER;else{p=mx(r.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new Q(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new gt(g)}t._authCredentials=new iA(new IE(p,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Os(this.firestore,e,this._query)}}class Ue{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Dr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ue(this.firestore,e,this._key)}toJSON(){return{type:Ue._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Co(n,Ue._jsonSchema))return new Ue(e,r||null,new X(Se.fromString(n.referencePath)))}}Ue._jsonSchemaVersion="firestore/documentReference/1.0",Ue._jsonSchema={type:Ge("string",Ue._jsonSchemaVersion),referencePath:Ge("string")};class Dr extends Os{constructor(e,n,r){super(e,n,cu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ue(this.firestore,null,new X(e))}withConverter(e){return new Dr(this.firestore,e,this._path)}}function ji(t,e,...n){if(t=Et(t),xE("collection","path",e),t instanceof vu){const r=Se.fromString(e,...n);return ly(r),new Dr(t,null,r)}{if(!(t instanceof Ue||t instanceof Dr))throw new Q(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Se.fromString(e,...n));return ly(r),new Dr(t.firestore,null,r)}}function Tt(t,e,...n){if(t=Et(t),arguments.length===1&&(e=Zf.newId()),xE("doc","path",e),t instanceof vu){const r=Se.fromString(e,...n);return oy(r),new Ue(t,null,new X(r))}{if(!(t instanceof Ue||t instanceof Dr))throw new Q(M.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Se.fromString(e,...n));return oy(r),new Ue(t.firestore,t instanceof Dr?t.converter:null,new X(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yy="AsyncQueue";class Jy{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new y0(this,"async_queue_retry"),this._c=()=>{const r=Ed();r&&Y(Yy,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Ed();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Ed();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new $n;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Bi(e))throw e;Y(Yy,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Jn("INTERNAL UNHANDLED ERROR: ",Xy(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=yp.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&ne(47125,{Pc:Xy(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Xy(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class bi extends vu{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Jy,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Jy(e),this._firestoreClient=void 0,await e}}}function lR(t,e){const n=typeof t=="object"?t:bw(),r=typeof t=="string"?t:Nc,s=$f(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=fx("firestore");i&&oR(s,...i)}return s}function _u(t){if(t._terminated)throw new Q(M.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||cR(t),t._firestoreClient}function cR(t){var r,s,i,a;const e=t._freezeSettings(),n=aR(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,(s=t._app)==null?void 0:s.options.apiKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((a=e.localCache)!=null&&a._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new XP(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(u){const d=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(d),_online:d}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Jt(ut.fromBase64String(e))}catch(n){throw new Q(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Jt(ut.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Jt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Co(e,Jt._jsonSchema))return Jt.fromBase64String(e.bytes)}}Jt._jsonSchemaVersion="firestore/bytes/1.0",Jt._jsonSchema={type:Ge("string",Jt._jsonSchemaVersion),bytes:Ge("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Q(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ot(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Q(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Q(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return he(this._lat,e._lat)||he(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Pn._jsonSchemaVersion}}static fromJSON(e){if(Co(e,Pn._jsonSchema))return new Pn(e.latitude,e.longitude)}}Pn._jsonSchemaVersion="firestore/geoPoint/1.0",Pn._jsonSchema={type:Ge("string",Pn._jsonSchemaVersion),latitude:Ge("number"),longitude:Ge("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:hn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Co(e,hn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new hn(e.vectorValues);throw new Q(M.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}hn._jsonSchemaVersion="firestore/vectorValue/1.0",hn._jsonSchema={type:Ge("string",hn._jsonSchemaVersion),vectorValues:Ge("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uR=/^__.*__$/;class dR{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ds(e,this.data,this.fieldMask,n,this.fieldTransforms):new ko(e,this.data,n,this.fieldTransforms)}}function L0(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ne(40011,{dataSource:t})}}class Cp{constructor(e,n,r,s,i,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.validatePath(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Cp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Oc(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(L0(this.dataSource)&&uR.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class hR{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||mu(e)}createContext(e,n,r,s=!1){return new Cp({dataSource:e,methodName:n,targetDoc:r,path:ot.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function M0(t){const e=t._freezeSettings(),n=mu(t._databaseId);return new hR(t._databaseId,!!e.ignoreUndefinedProperties,n)}function fR(t,e,n,r,s,i={}){const a=t.createContext(i.merge||i.mergeFields?2:0,e,n,s);z0("Data must be an object, but it was:",a,r);const c=F0(r,a);let u,d;if(i.merge)u=new cn(a.fieldMask),d=a.fieldTransforms;else if(i.mergeFields){const p=[];for(const m of i.mergeFields){const g=wu(e,m,n);if(!a.contains(g))throw new Q(M.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);yR(p,g)||p.push(g)}u=new cn(p),d=a.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,d=a.fieldTransforms;return new dR(new Yt(c),u,d)}class Ap extends Np{_toFieldTransform(e){return new ZA(e.path,new fo)}isEqual(e){return e instanceof Ap}}function pR(t,e,n,r=!1){return kp(n,t.createContext(r?4:3,e))}function kp(t,e){if(U0(t=Et(t)))return z0("Unsupported field value:",e,t),F0(t,e);if(t instanceof Np)return function(r,s){if(!L0(s.dataSource))throw s.createError(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return function(r,s){const i=[];let a=0;for(const c of r){let u=kp(c,s.childContextForArray(a));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),a++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Et(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return YA(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=ke.fromDate(r);return{timestampValue:Rc(s.serializer,i)}}if(r instanceof ke){const i=new ke(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Rc(s.serializer,i)}}if(r instanceof Pn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Jt)return{bytesValue:i0(s.serializer,r._byteString)};if(r instanceof Ue){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.createError(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:lp(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof hn)return function(a,c){const u=a instanceof hn?a.toArray():a;return{mapValue:{fields:{[bE]:{stringValue:DE},[Cc]:{arrayValue:{values:u.map(p=>{if(typeof p!="number")throw c.createError("VectorValues must only contain numeric values.");return ip(c.serializer,p)})}}}}}}(r,s);if(h0(r))return r._toProto(s.serializer);throw s.createError(`Unsupported field value: ${iu(r)}`)}(t,e)}function F0(t,e){const n={};return CE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):js(t,(r,s)=>{const i=kp(s,e.childContextForField(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function U0(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ke||t instanceof Pn||t instanceof Jt||t instanceof Ue||t instanceof Np||t instanceof hn||h0(t))}function z0(t,e,n){if(!U0(n)||!SE(n)){const r=iu(n);throw r==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+r)}}function wu(t,e,n){if((e=Et(e))instanceof O0)return e._internalPath;if(typeof e=="string")return gR(t,e);throw Oc("Field path arguments must be of type string or ",t,!1,void 0,n)}const mR=new RegExp("[~\\*/\\[\\]]");function gR(t,e,n){if(e.search(mR)>=0)throw Oc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new O0(...e.split("."))._internalPath}catch{throw Oc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Oc(t,e,n,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(i||a)&&(u+=" (found",i&&(u+=` in field ${r}`),a&&(u+=` in document ${s}`),u+=")"),new Q(M.INVALID_ARGUMENT,c+t+u)}function yR(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{convertValue(e,n="none"){switch(Ur(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Me(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Fr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ne(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return js(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[Cc].arrayValue)==null?void 0:s.values)==null?void 0:i.map(a=>Me(a.doubleValue));return new hn(n)}convertGeoPoint(e){return new Pn(Me(e.latitude),Me(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=lu(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(co(e));default:return null}}convertTimestamp(e){const n=Mr(e);return new ke(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Se.fromString(e);Te(d0(r),9688,{name:e});const s=new uo(r.get(1),r.get(3)),i=new X(r.popFirst(5));return s.isEqual(n)||Jn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp extends vR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ue(this.firestore,null,n)}}function gn(){return new Ap("serverTimestamp")}const Zy="@firebase/firestore",ev="4.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tv(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ue(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new _R(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const n=this._document.data.field(wu("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class _R extends B0{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $0(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Q(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Rp{}class wR extends Rp{}function Lc(t,e,...n){let r=[];e instanceof Rp&&r.push(e),r=r.concat(n),function(i){const a=i.filter(u=>u instanceof jp).length,c=i.filter(u=>u instanceof Eu).length;if(a>1||a>0&&c>0)throw new Q(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Eu extends wR{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Eu(e,n,r)}_apply(e){const n=this._parse(e);return q0(e._query,n),new Os(e.firestore,e.converter,Rh(e._query,n))}_parse(e){const n=M0(e.firestore);return function(i,a,c,u,d,p,m){let g;if(d.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new Q(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){rv(m,p);const P=[];for(const R of m)P.push(nv(u,i,R));g={arrayValue:{values:P}}}else g=nv(u,i,m)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||rv(m,p),g=pR(c,a,m,p==="in"||p==="not-in");return He.create(d,p,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function ER(t,e,n){const r=e,s=wu("where",t);return Eu._create(s,r,n)}class jp extends Rp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new jp(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:mn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let a=s;const c=i.getFlattenedFilters();for(const u of c)q0(a,u),a=Rh(a,u)}(e._query,n),new Os(e.firestore,e.converter,Rh(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function nv(t,e,n){if(typeof(n=Et(n))=="string"){if(n==="")throw new Q(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!BE(e)&&n.indexOf("/")!==-1)throw new Q(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Se.fromString(n));if(!X.isDocumentKey(r))throw new Q(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return gy(t,new X(r))}if(n instanceof Ue)return gy(t,n._key);throw new Q(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${iu(n)}.`)}function rv(t,e){if(!Array.isArray(t)||t.length===0)throw new Q(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function q0(t,e){const n=function(s,i){for(const a of s)for(const c of a.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Q(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Q(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function TR(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Sa{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ms extends B0{constructor(e,n,r,s,i,a){super(e,n,r,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Hl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(wu("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Q(M.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ms._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ms._jsonSchemaVersion="firestore/documentSnapshot/1.0",ms._jsonSchema={type:Ge("string",ms._jsonSchemaVersion),bundleSource:Ge("string","DocumentSnapshot"),bundleName:Ge("string"),bundle:Ge("string")};class Hl extends ms{data(e={}){return super.data(e)}}class gs{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Sa(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Hl(this._firestore,this._userDataWriter,r.key,r,new Sa(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Q(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(c=>{const u=new Hl(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Sa(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>i||c.type!==3).map(c=>{const u=new Hl(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Sa(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,p=-1;return c.type!==0&&(d=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),p=a.indexOf(c.doc.key)),{type:IR(c.type),doc:u,oldIndex:d,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Q(M.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=gs._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Zf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function IR(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ne(61501,{type:t})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gs._jsonSchemaVersion="firestore/querySnapshot/1.0",gs._jsonSchema={type:Ge("string",gs._jsonSchemaVersion),bundleSource:Ge("string","QuerySnapshot"),bundleName:Ge("string"),bundle:Ge("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ls(t){t=Cn(t,Ue);const e=Cn(t.firestore,bi),n=_u(e);return nR(n,t._key).then(r=>W0(e,t,r))}function xR(t){t=Cn(t,Os);const e=Cn(t.firestore,bi),n=_u(e),r=new Pp(e);return $0(t._query),rR(n,t._query).then(s=>new gs(e,r,t,s))}function tr(t,e,n){t=Cn(t,Ue);const r=Cn(t.firestore,bi),s=TR(t.converter,e,n),i=M0(r);return SR(r,[fR(i,"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,qn.none())])}function bp(t,...e){var d,p,m;t=Et(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||tv(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(tv(e[r])){const g=e[r];e[r]=(d=g.next)==null?void 0:d.bind(g),e[r+1]=(p=g.error)==null?void 0:p.bind(g),e[r+2]=(m=g.complete)==null?void 0:m.bind(g)}let i,a,c;if(t instanceof Ue)a=Cn(t.firestore,bi),c=cu(t._key.path),i={next:g=>{e[r]&&e[r](W0(a,t,g))},error:e[r+1],complete:e[r+2]};else{const g=Cn(t,Os);a=Cn(g.firestore,bi),c=g._query;const _=new Pp(a);i={next:P=>{e[r]&&e[r](new gs(a,_,g,P))},error:e[r+1],complete:e[r+2]},$0(t._query)}const u=_u(a);return tR(u,c,s,i)}function SR(t,e){const n=_u(t);return sR(n,e)}function W0(t,e,n){const r=n.docs.get(e._key),s=new Pp(t);return new ms(t,s,e._key,r,new Sa(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){rA(Mi),Si(new Is("firestore",(r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),c=new bi(new aA(r.getProvider("auth-internal")),new cA(a,r.getProvider("app-check-internal")),NA(a,s),a);return i={useFetchStreams:n,...i},c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),jr(Zy,ev,e),jr(Zy,ev,"esm2020")})();var NR="firebase",CR="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */jr(NR,CR,"app");const AR={apiKey:"AIzaSyCG7QOtB7a7uZzzFo5kOMOKPoLIELTkOk4",authDomain:"hpservices-29a44.firebaseapp.com",databaseURL:"https://hpservices-29a44-default-rtdb.firebaseio.com",projectId:"hpservices-29a44",storageBucket:"hpservices-29a44.firebasestorage.app",messagingSenderId:"542845890290",appId:"1:542845890290:web:18d83a41e196b1cc2a6a6b",measurementId:"G-B8PVV22FM1"},H0=jw(AR),Tu=tA(H0),ze=lR(H0),kR={cloud_name:"dpjnaefed",upload_url:"https://api.cloudinary.com/v1_1/dpjnaefed/upload"},PR="unsigned",RR=async(t,e,n)=>{try{const s=(await FN(Tu,t,e)).user,i={...n,id:s.uid,email:t,password:e,createdAt:gn(),updatedAt:gn()};return await tr(Tt(ze,"students",s.uid),i),s}catch(r){throw new Error(r.message||"   ")}},jR=async(t,e)=>{try{return(await UN(Tu,t,e)).user}catch(n){let r="      ";throw n.code==="auth/user-not-found"?r="  .   ":n.code==="auth/wrong-password"?r="   ":n.code==="auth/invalid-email"?r="   ":n.code==="auth/user-disabled"?r="   ":n.code==="auth/too-many-requests"?r=" .   ":n.code==="auth/operation-not-allowed"?r="    .   Email/Password  Firebase Console":n.message&&(r=n.message),new Error(r)}},bR=async()=>{try{await qN(Tu)}catch(t){throw new Error(t.message||"    ")}},DR=t=>$N(Tu,t),Dp=async t=>{var e,n,r;try{const s=Tt(ze,"students",t),i=await Ls(s);if(i.exists()){const a=i.data();return{...a,id:i.id,createdAt:((r=(n=(e=a.createdAt)==null?void 0:e.toDate)==null?void 0:n.call(e))==null?void 0:r.toISOString())||a.createdAt}}return null}catch(s){let i="    ";throw s.code==="permission-denied"?i=" .    Firestore Security Rules":s.message&&(i=s.message),console.error("Error getting student data:",s),new Error(i)}},G0=async(t,e)=>{try{await tr(Tt(ze,"students",t),{...e,updatedAt:gn()},{merge:!0})}catch(n){throw new Error(n.message||"    ")}},K0=(t,e)=>{const n=Lc(ji(ze,"students"));return bp(n,r=>{const s=r.docs.map(i=>{var c,u,d;const a=i.data();return{...a,id:i.id,createdAt:((d=(u=(c=a.createdAt)==null?void 0:c.toDate)==null?void 0:u.call(c))==null?void 0:d.toISOString())||a.createdAt}});console.log("subscribeToAllStudents: Found",s.length,"students"),t(s)},r=>{console.error("Error in students subscription:",r),e&&e(r)})},VR=async t=>{try{const e=ji(ze,"students"),n=[];if(!t.trim())return[];const r=await xR(e),i=/^\d+$/.test(t)&&t.length<=14,a=t.toLowerCase(),c=t.trim();return r.docs.forEach(u=>{var g,_,P;const d=u.data(),p={...d,id:u.id,createdAt:((P=(_=(g=d.createdAt)==null?void 0:g.toDate)==null?void 0:_.call(g))==null?void 0:P.toISOString())||d.createdAt};let m=!1;p.fullNameArabic&&p.fullNameArabic.toLowerCase().includes(a)&&(m=!0),p.vehicleNameEnglish&&p.vehicleNameEnglish.toLowerCase().includes(a)&&(m=!0),p.email&&p.email.toLowerCase().includes(a)&&(m=!0),p.whatsappNumber&&p.whatsappNumber.includes(c)&&(m=!0),p.nationalID&&(i?c.length<14?p.nationalID.startsWith(c)&&(m=!0):c.length===14&&p.nationalID===c&&(m=!0):p.nationalID.includes(c)&&(m=!0)),p.diplomaType&&p.diplomaType.toLowerCase().includes(a)&&(m=!0),p.track&&p.track.toLowerCase().includes(a)&&(m=!0),p.diplomaYear&&p.diplomaYear.includes(c)&&(m=!0),p.course&&p.course.toLowerCase().includes(a)&&(m=!0),p.address&&(p.address.governorate&&p.address.governorate.toLowerCase().includes(a)&&(m=!0),p.address.city&&p.address.city.toLowerCase().includes(a)&&(m=!0),p.address.street&&p.address.street.toLowerCase().includes(a)&&(m=!0),p.address.building&&p.address.building.toLowerCase().includes(a)&&(m=!0),p.address.siteNumber&&p.address.siteNumber.toLowerCase().includes(a)&&(m=!0),p.address.landmark&&p.address.landmark.toLowerCase().includes(a)&&(m=!0)),m&&n.push(p)}),n}catch(e){throw new Error(e.message||"   ")}},OR=t=>["JPEG","JPG","PNG","PDF"].includes(t.toUpperCase()),LR=t=>new Blob([JSON.stringify(t)]).size,MR=async(t,e,n)=>{var r;try{if(!OR(t.type))throw new Error("   .  : JPEG, PNG, PDF");let s;t.file?s=t.file:s=await(await fetch(t.url)).blob();const i=Date.now(),a=t.name.replace(/[^a-zA-Z0-9.-]/g,"_"),c=`serviceRequests/${e}/${n}/${i}_${a}`,u=new FormData;u.append("file",s),u.append("upload_preset",PR),u.append("public_id",c),u.append("folder","serviceRequests");const d=await fetch(kR.upload_url,{method:"POST",body:u});if(!d.ok){const _=((r=(await d.json()).error)==null?void 0:r.message)||"    Cloudinary";throw new Error(_)}let m=(await d.json()).secure_url;if(t.type.toUpperCase()!=="PDF"){const g=m.indexOf("/upload/");g>0&&(m=m.substring(0,g+8)+"w_1200,c_limit,q_auto,f_auto/"+m.substring(g+8))}return m}catch(s){throw console.error("Error uploading file to Cloudinary:",s),new Error(s.message||"    ")}},FR=async t=>{try{const e=`serviceRequests_${t.serviceId}`,n=Tt(ji(ze,e));let r=[];if(t.documents&&t.documents.length>0){const c=t.documents.map(async u=>{try{const d=await MR(u,t.studentId,t.serviceId);return{name:u.name,url:d,size:u.size,type:u.type}}catch(d){throw console.error(`Error uploading file ${u.name}:`,d),d}});r=await Promise.all(c)}const s={...t,id:n.id,documents:r,createdAt:gn(),updatedAt:gn()},i=LR(s),a=1024*1024;return i>a&&console.warn(`Document size (${(i/1024).toFixed(2)} KB) is large. Consider splitting data.`),console.log(`Saving document with size: ${(i/1024).toFixed(2)} KB`),await tr(n,s),n.id}catch(e){throw new Error(e.message||"    ")}},UR=(t,e)=>{const n=["1","2","3","4","5","6","7","8","9","10"],r=[],s=[];return n.forEach(i=>{const a=`serviceRequests_${i}`;let c;t?c=Lc(ji(ze,a),ER("studentId","==",t)):c=Lc(ji(ze,a));const u=bp(c,d=>{const p=d.docs.map(g=>{var P,R,L;const _=g.data();return{..._,id:g.id,createdAt:((L=(R=(P=_.createdAt)==null?void 0:P.toDate)==null?void 0:R.call(P))==null?void 0:L.toISOString())||_.createdAt}}),m=s.filter(g=>g.serviceId!==i);s.length=0,s.push(...m,...p),e([...s])},d=>{console.error(`Error in service requests subscription for ${i}:`,d)});r.push(u)}),()=>{r.forEach(i=>i())}},Iu=async t=>{try{const e=await Ls(Tt(ze,"admins",t));return e.exists()?e.data().isAdmin===!0:!1}catch(e){return console.error("Error checking admin status:",e),!1}},zR=t=>{const e=["1","2","3","4","5","6","7","8","9","10"],n=[],r=[];return e.forEach(s=>{const i=`serviceRequests_${s}`,a=Lc(ji(ze,i)),c=bp(a,u=>{const d=u.docs.map(m=>{var _,P,R;const g=m.data();return{...g,id:m.id,createdAt:((R=(P=(_=g.createdAt)==null?void 0:_.toDate)==null?void 0:P.call(_))==null?void 0:R.toISOString())||g.createdAt}}),p=r.findIndex(m=>m.serviceId===s);p>=0&&r.splice(p,r.filter(m=>m.serviceId===s).length),r.push(...d),t([...r])},u=>{console.error(`Error in service requests subscription for ${s}:`,u)});n.push(c)}),()=>{n.forEach(s=>s())}},BR=async(t,e,n)=>{try{const r=`serviceRequests_${n}`;await tr(Tt(ze,r,t),{status:e,updatedAt:gn()},{merge:!0})}catch(r){throw new Error(r.message||"     ")}},Q0=async()=>{try{const t=Tt(ze,"config","bookService"),e=await Ls(t);return e.exists()?e.data():null}catch(t){throw new Error(t.message||"     ")}},$R=async t=>{try{await tr(Tt(ze,"config","bookService"),{...t,updatedAt:gn()},{merge:!0})}catch(e){throw new Error(e.message||"     ")}},Y0=async()=>{try{const t=Tt(ze,"config","feesService"),e=await Ls(t);return e.exists()?e.data():null}catch(t){throw new Error(t.message||"     ")}},qR=async t=>{try{await tr(Tt(ze,"config","feesService"),{...t,updatedAt:gn()},{merge:!0})}catch(e){throw new Error(e.message||"     ")}},J0=async()=>{try{const t=Tt(ze,"config","assignmentsService"),e=await Ls(t);return e.exists()?e.data():null}catch(t){throw new Error(t.message||"     ")}},WR=async t=>{try{await tr(Tt(ze,"config","assignmentsService"),{...t,updatedAt:gn()},{merge:!0})}catch(e){throw new Error(e.message||"     ")}},X0=async()=>{var t,e;try{console.log("Fetching certificates config from Firebase...");const n=Tt(ze,"config","certificatesService"),r=await Ls(n);if(r.exists()){const s=r.data();return console.log("Certificates config loaded:",{hasCertificates:!!s.certificates,certificatesCount:((t=s.certificates)==null?void 0:t.length)||0,certificates:(e=s.certificates)==null?void 0:e.map(i=>{var a;return{id:i.id,name:i.name,hasImage:!!i.imageUrl,imageLength:((a=i.imageUrl)==null?void 0:a.length)||0}})}),s}else return console.log("Certificates config document does not exist"),null}catch(n){throw console.error("Error fetching certificates config:",n),new Error(n.message||"     ")}},sv=async t=>{var e,n;try{const r={certificates:t.certificates.map(s=>({id:s.id,name:s.name,price:s.price,imageUrl:s.imageUrl||"",description:s.description||"",fields:s.fields||[]})),paymentMethods:t.paymentMethods};console.log("Saving certificates config to Firebase:",{hasCertificates:!!r.certificates,certificatesCount:((e=r.certificates)==null?void 0:e.length)||0,certificates:(n=r.certificates)==null?void 0:n.map(s=>{var i;return{id:s.id,name:s.name,hasImage:!!s.imageUrl,imageLength:((i=s.imageUrl)==null?void 0:i.length)||0}})}),await tr(Tt(ze,"config","certificatesService"),{...r,updatedAt:gn()},{merge:!1}),console.log("Certificates config saved to Firebase successfully")}catch(r){throw console.error("Error saving certificates config:",r),new Error(r.message||"     ")}},Z0=async()=>{var t,e;try{console.log("Fetching digital transformation config from Firebase...");const n=Tt(ze,"config","digitalTransformationService"),r=await Ls(n);if(r.exists()){const s=r.data();return console.log("Digital transformation config loaded:",{hasTypes:!!s.transformationTypes,typesCount:((t=s.transformationTypes)==null?void 0:t.length)||0,hasExamLanguages:!!s.examLanguages,examLanguagesCount:((e=s.examLanguages)==null?void 0:e.length)||0}),s}else return console.log("Digital transformation config document does not exist"),null}catch(n){throw console.error("Error fetching digital transformation config:",n),new Error(n.message||"      ")}},iv=async t=>{var e,n;try{const r={transformationTypes:t.transformationTypes.map(s=>({id:s.id,name:s.name||"",price:s.price||0})),examLanguages:(t.examLanguages||[]).map(s=>({id:s.id,name:s.name||""})),paymentMethods:t.paymentMethods};console.log("Saving digital transformation config to Firebase:",{hasTypes:!!r.transformationTypes,typesCount:((e=r.transformationTypes)==null?void 0:e.length)||0,hasExamLanguages:!!r.examLanguages,examLanguagesCount:((n=r.examLanguages)==null?void 0:n.length)||0}),await tr(Tt(ze,"config","digitalTransformationService"),{...r,updatedAt:gn()},{merge:!1}),console.log("Digital transformation config saved to Firebase successfully")}catch(r){throw console.error("Error saving digital transformation config:",r),new Error(r.message||"      ")}},eT=$.createContext(void 0),HR=({children:t})=>{const[e,n]=$.useState(null),[r,s]=$.useState([]),[i,a]=$.useState(!0);$.useEffect(()=>{const _=DR(async P=>{if(P)try{if(await Iu(P.uid)){const L={id:P.uid,fullNameArabic:" ",vehicleNameEnglish:"Admin",whatsappNumber:"",diplomaYear:"",diplomaType:"",track:"",nationalID:"",address:{governorate:"",city:"",street:"",building:"",siteNumber:""},course:"",email:P.email||""};n(L)}else{const L=await Dp(P.uid);n(L)}}catch(R){console.error("Error fetching student data:",R),n(null)}else n(null),s([]);a(!1)});return()=>_()},[]),$.useEffect(()=>{if(!(e!=null&&e.id)){s([]);return}const _=UR(e.id,P=>{s(P)});return()=>_()},[e==null?void 0:e.id]);const g={student:e,setStudent:_=>{n(_)},isLoggedIn:e!==null,serviceRequests:r,addServiceRequest:async _=>{try{await FR(_)}catch(P){throw console.error("Error adding service request:",P),P}},updateServiceRequest:(_,P)=>{const R=r.map(L=>L.id===_?{...L,...P}:L);s(R)},getServiceRequest:_=>r.find(P=>P.id===_),logout:async()=>{try{await bR(),n(null),s([])}catch(_){console.error("Error logging out:",_)}}};return i?l.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:" ..."}):l.jsx(eT.Provider,{value:g,children:t})},Ms=()=>{const t=$.useContext(eT);if(t===void 0)throw new Error("useStudent must be used within StudentProvider");return t},GR=(t,e=4)=>!t||t.trim().length===0?{valid:!1,error:"  "}:/^[\u0600-\u06FF\s]+$/.test(t)?t.trim().split(/\s+/).length<e?{valid:!1,error:`    ${e}   `}:{valid:!0}:{valid:!1,error:"     "},KR=(t,e=4)=>!t||t.trim().length===0?{valid:!1,error:"This field is required"}:/^[a-zA-Z\s]+$/.test(t)?t.trim().split(/\s+/).length<e?{valid:!1,error:`    ${e}   `}:{valid:!0}:{valid:!1,error:"    "},QR=t=>{if(!t||t.trim().length===0)return{valid:!1,error:"  "};const e=t.replace(/\D/g,"");return e.length!==11?{valid:!1,error:"     11 "}:e[0]!=="0"?{valid:!1,error:"    "}:{valid:!0}},YR=t=>!t||t.trim().length===0?{valid:!1,error:"  "}:t.replace(/\D/g,"").length!==14?{valid:!1,error:"     14 "}:{valid:!0},JR=t=>!t||t.trim().length===0?{valid:!1,error:"  "}:/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)?{valid:!0}:{valid:!1,error:"    "},XR=t=>!t||t.trim().length===0?{valid:!1,error:"  "}:t.length<6?{valid:!1,error:"      6   "}:{valid:!0},tT=t=>{const e=[];if(!t.fullNameArabic)e.push({field:"fullNameArabic",message:"  "});else{const n=GR(t.fullNameArabic,4);n.valid||e.push({field:"fullNameArabic",message:n.error||"  "})}if(!t.vehicleNameEnglish)e.push({field:"vehicleNameEnglish",message:"This field is required"});else{const n=KR(t.vehicleNameEnglish,4);n.valid||e.push({field:"vehicleNameEnglish",message:n.error||"Validation error"})}if(!t.whatsappNumber)e.push({field:"whatsappNumber",message:"  "});else{const n=QR(t.whatsappNumber);n.valid||e.push({field:"whatsappNumber",message:n.error||"  "})}if(t.diplomaYear||e.push({field:"diplomaYear",message:"  "}),t.diplomaType||e.push({field:"diplomaType",message:"  "}),t.track||e.push({field:"track",message:"  "}),!t.nationalID)e.push({field:"nationalID",message:"  "});else{const n=YR(t.nationalID);n.valid||e.push({field:"nationalID",message:n.error||"  "})}if(t.address?(t.address.governorate||e.push({field:"address.governorate",message:"  "}),t.address.city||e.push({field:"address.city",message:"  "}),t.address.street||e.push({field:"address.street",message:"  "}),t.address.building||e.push({field:"address.building",message:"  "}),t.address.siteNumber||e.push({field:"address.siteNumber",message:"  "})):e.push({field:"address",message:"  "}),t.course||e.push({field:"course",message:"  "}),!t.email)e.push({field:"email",message:"  "});else{const n=JR(t.email);n.valid||e.push({field:"email",message:n.error||"  "})}if(!t.password)e.push({field:"password",message:"  "});else{const n=XR(t.password);n.valid||e.push({field:"password",message:n.error||"  "})}return e},ZR=[""," ","",""," "," ",""," "," ","","","  ","","","  ",""," (    4  )","Other"],e2=["","","","","","","","","",""," "," ","","",""," ","  ",""," ","","Other"],t2=["   ",""," "," ","",""],n2=[" "," ","  "," ","  ","  "," ","  "," "],Vp=[" "," ","  "," ","  ","  "," ","  "," "],Op=[{id:"1",nameEn:"Register Your Data",nameAr:" ",descriptionEn:"Register and update your personal information",descriptionAr:"   ",icon:"clipboard-list",color:"#3B82F6",fields:[{name:"full_name",label:"  ",type:"editable",required:!0},{name:"national_id",label:" ",type:"editable",required:!0},{name:"address",label:"  ",type:"editable",required:!0},{name:"email",label:"",type:"editable",required:!0},{name:"whatsapp_number",label:"  ",type:"editable",required:!0},{name:"college",label:"     ",type:"select",required:!0,options:ZR,hasOther:!0},{name:"college_other",label:"   ",type:"text",required:!1},{name:"department",label:"       (        )",type:"select",required:!0,options:e2,hasOther:!0},{name:"department_other",label:"   ",type:"text",required:!1},{name:"grade",label:"    (        )",type:"select",required:!0,options:t2,hasOther:!1}],paymentMethods:[]},{id:"2",nameEn:"Premium Client",nameAr:" ",descriptionEn:"Get premium support and exclusive services",descriptionAr:"     ",icon:"user",color:"#F59E0B",fields:[{name:"full_name_arabic",label:"   ",type:"editable",required:!0},{name:"full_name_english",label:"   ",type:"editable",required:!0},{name:"national_id",label:" ",type:"editable",required:!0},{name:"whatsapp_number",label:"  ",type:"editable",required:!0},{name:"email",label:"",type:"editable",required:!0},{name:"diploma_type",label:" ",type:"select",required:!0,options:n2},{name:"address",label:" ",type:"editable",required:!0}],paymentMethods:["Vodafone","Etisalat","Orange","instaPay"]},{id:"3",nameEn:"School Books Shipping",nameAr:"    ",descriptionEn:"Order and ship your school books",descriptionAr:"   ",icon:"package",color:"#10B981",fields:[{name:"number_of_copies",label:"   ( 1  10)",type:"text",required:!0},{name:"names",label:"  (       )",type:"textarea",required:!0},{name:"tracks",label:"  (        )",type:"textarea",required:!0},{name:"phone_whatsapp",label:"    ( )",type:"text",required:!0},{name:"diploma_type",label:" ",type:"select",required:!0,options:Vp},{name:"address_details",label:"  ( /  /   /   /  )",type:"textarea",required:!0},{name:"payment_account",label:"       ",type:"text",required:!0}],paymentMethods:["Vodafone","Etisalat","Orange","instaPay"]},{id:"4",nameEn:"Pay School Fees",nameAr:"  ",descriptionEn:"Pay your school fees securely",descriptionAr:"   ",icon:"creditcard",color:"#8B5CF6",fields:[{name:"full_name_arabic",label:"   ",type:"editable",required:!0},{name:"national_id",label:" ",type:"editable",required:!0},{name:"diploma_type",label:" ",type:"select",required:!0,options:["  "," ","",""]},{name:"track_category",label:"",type:"select",required:!0,options:[" ","","","",""]},{name:"track_other",label:" ",type:"text",required:!1},{name:"diploma_year",label:" ",type:"select",required:!0,options:["  "]}],paymentMethods:["Vodafone","Etisalat","Orange","instaPay"]},{id:"5",nameEn:"Solve and Deliver Assignments",nameAr:"  ",descriptionEn:"Get help with your assignments and submit them",descriptionAr:"      ",icon:"checklist",color:"#EC4899",fields:[{name:"full_name_arabic",label:"   ",type:"editable",required:!0},{name:"educational_specialization",label:" ",type:"select",required:!0,options:[" ","","","","","",""],hasOther:!0},{name:"educational_specialization_other",label:" ",type:"text",required:!1},{name:"track",label:"",type:"select",required:!0,options:[" ","","",""]},{name:"whatsapp_number",label:"   ",type:"editable",required:!0}],paymentMethods:["Vodafone","Etisalat","Orange","instaPay"]},{id:"6",nameEn:"Online Certificates",nameAr:" ",descriptionEn:"Apply for and receive online certificates",descriptionAr:"     ",icon:"award",color:"#06B6D4",fields:[{name:"full_name_arabic",label:"   ",type:"editable",required:!0},{name:"full_name_english",label:"   ",type:"editable",required:!0},{name:"email",label:"",type:"editable",required:!0},{name:"whatsapp_number",label:" ",type:"editable",required:!0},{name:"national_id",label:" ",type:"editable",required:!0},{name:"address",label:"    ",type:"editable",required:!0}],paymentMethods:["Vodafone","Etisalat","Orange","instaPay"]},{id:"7",nameEn:"Apply for Digital Transformation",nameAr:"   ",descriptionEn:"Apply for digital transformation services",descriptionAr:"   ",icon:"zap",color:"#14B8A6",fields:[{name:"full_name_arabic",label:"   ",type:"editable",required:!0},{name:"full_name_english",label:"   ",type:"editable",required:!0},{name:"national_id",label:" ",type:"editable",required:!0},{name:"whatsapp_number",label:" ",type:"editable",required:!0},{name:"email",label:"",type:"editable",required:!0},{name:"transformation_type",label:"   ",type:"select",required:!0},{name:"exam_language",label:"  ",type:"select",required:!0}],paymentMethods:["Vodafone","Etisalat","Orange","instaPay"]},{id:"8",nameEn:"Final Review",nameAr:" ",descriptionEn:"Get comprehensive review for your exams",descriptionAr:"    ",icon:"search",color:"#F97316",fields:[{name:"exam_name",label:" ",type:"text",required:!0},{name:"review_type",label:" ",type:"select",required:!0,options:["",""," "]},{name:"subjects",label:"",type:"text",required:!0},{name:"additional_notes",label:" ",type:"textarea",required:!1}],paymentMethods:["Credit Card"]},{id:"9",nameEn:"Graduation Project",nameAr:" ",descriptionEn:"Get help with your graduation project",descriptionAr:"     ",icon:"target",color:"#6366F1",fields:[{name:"project_title",label:" ",type:"text",required:!0},{name:"project_description",label:" ",type:"textarea",required:!0},{name:"team_size",label:" ",type:"number",required:!0},{name:"submission_date",label:" ",type:"text",required:!0}],paymentMethods:["Credit Card","Bank Transfer"]},{id:"10",nameEn:"Extract Documents",nameAr:" ",descriptionEn:"Request and extract official documents",descriptionAr:"   ",icon:"file-check",color:"#EF4444",fields:[{name:"document_type",label:" ",type:"select",required:!0,options:[""," "," "," "]},{name:"number_of_copies",label:" ",type:"number",required:!0},{name:"purpose",label:"  ",type:"textarea",required:!0}],paymentMethods:["Credit Card","Bank Transfer"]}],nT=["","","",""," ","","","","",""," ","","",""," ","","","","",""],rT=Array.from({length:75},(t,e)=>(2090-e).toString()),sT=["","",""],iT=["","","",""," "];var r2={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const s2=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i2=(t,e)=>{const n=$.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:a,children:c,...u},d)=>$.createElement("svg",{ref:d,...r2,width:s,height:s,stroke:r,strokeWidth:a?Number(i)*24/Number(s):i,className:`lucide lucide-${s2(t)}`,...u},[...e.map(([p,m])=>$.createElement(p,m)),...(Array.isArray(c)?c:[c])||[]]));return n.displayName=`${t}`,n};var ve=i2;const bo=ve("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Mc=ve("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),yi=ve("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]),aT=ve("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),av=ve("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]),As=ve("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),oT=ve("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]),a2=ve("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Bh=ve("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),o2=ve("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),$h=ve("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),qh=ve("FileCheck",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]),Lp=ve("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),l2=ve("GraduationCap",[["path",{d:"M22 10v6M2 10l10-5 10 5-10 5z",key:"1ef52a"}],["path",{d:"M6 12v5c3 3 9 3 12 0v-5",key:"1f75yj"}]]),c2=ve("Headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]),ov=ve("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),lT=ve("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),cT=ve("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),Wh=ve("Package",[["path",{d:"M16.5 9.4 7.55 4.24",key:"10qotr"}],["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]),Na=ve("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),uT=ve("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),u2=ve("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),is=ve("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),dT=ve("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),d2=ve("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),h2=ve("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),f2=ve("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),Mp=ve("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),hT=ve("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),lv=ve("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),Ht=ve("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),fT=ve("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),p2=({onRegistrationSuccess:t,onGoToLogin:e})=>{var R,L,N,x,E,O;const{setStudent:n}=Ms(),[r,s]=$.useState({address:{governorate:"",city:"",street:"",building:"",siteNumber:"",landmark:""}}),[i,a]=$.useState([]),[c,u]=$.useState(!1),[d,p]=$.useState(""),m=b=>{var U;return(U=i.find(w=>w.field===b))==null?void 0:U.message},g=(b,U)=>{s(w=>({...w,[b]:U})),a(w=>w.filter(y=>y.field!==b))},_=(b,U)=>{s(w=>({...w,address:{...w.address,[b]:U}})),a(w=>w.filter(y=>!y.field.startsWith("address.")))},P=async b=>{b.preventDefault(),u(!0),p("");const U=tT(r);if(U.length>0){a(U),u(!1);return}try{const w=r.email||"",y=r.password||"";if(!w||!y){p("    "),u(!1);return}const I={fullNameArabic:r.fullNameArabic||"",vehicleNameEnglish:r.vehicleNameEnglish||"",whatsappNumber:r.whatsappNumber||"",diplomaYear:r.diplomaYear||"",diplomaType:r.diplomaType||"",track:r.track||"",nationalID:r.nationalID||"",address:r.address||{governorate:"",city:"",street:"",building:"",siteNumber:"",landmark:""},course:r.course||"",email:w,password:y},S=await RR(w,y,I),A={...I,id:S.uid,createdAt:new Date().toISOString()};n(A),t()}catch(w){p(w.message||"   .    .")}finally{u(!1)}};return l.jsx("div",{className:"register-page",children:l.jsxs("div",{className:"register-container",children:[l.jsxs("div",{className:"register-header",children:[l.jsx("div",{className:"logo",children:l.jsx("div",{className:"logo-icon",children:""})}),l.jsx("h1",{children:"    "}),l.jsx("p",{children:"     "})]}),d&&l.jsxs("div",{className:"error-alert",children:[l.jsx(bo,{size:20}),l.jsx("span",{children:d})]}),l.jsxs("form",{onSubmit:P,className:"register-form",children:[l.jsxs("div",{className:"form-section",children:[l.jsx("h2",{children:" "}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"fullNameArabic",children:"  () *"}),l.jsx("input",{id:"fullNameArabic",type:"text",dir:"rtl",placeholder:"   ",value:r.fullNameArabic||"",onChange:b=>g("fullNameArabic",b.target.value),className:m("fullNameArabic")?"error":""}),m("fullNameArabic")&&l.jsx("span",{className:"error-message",children:m("fullNameArabic")})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"vehicleNameEnglish",children:"Vehicle Name (English) *"}),l.jsx("input",{id:"vehicleNameEnglish",type:"text",dir:"ltr",placeholder:"Enter vehicle name in English",value:r.vehicleNameEnglish||"",onChange:b=>g("vehicleNameEnglish",b.target.value),className:m("vehicleNameEnglish")?"error":""}),m("vehicleNameEnglish")&&l.jsx("span",{className:"error-message",children:m("vehicleNameEnglish")})]}),l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"whatsappNumber",children:"  *"}),l.jsx("input",{id:"whatsappNumber",type:"tel",placeholder:"01xxxxxxxxx",value:r.whatsappNumber||"",onChange:b=>g("whatsappNumber",b.target.value),className:m("whatsappNumber")?"error":""}),m("whatsappNumber")&&l.jsx("span",{className:"error-message",children:m("whatsappNumber")})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"nationalID",children:"  *"}),l.jsx("input",{id:"nationalID",type:"text",placeholder:"14 ",value:r.nationalID||"",onChange:b=>g("nationalID",b.target.value),className:m("nationalID")?"error":""}),m("nationalID")&&l.jsx("span",{className:"error-message",children:m("nationalID")})]})]})]}),l.jsxs("div",{className:"form-section",children:[l.jsx("h2",{children:" "}),l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"diplomaYear",children:"  *"}),l.jsxs("select",{id:"diplomaYear",value:r.diplomaYear||"",onChange:b=>g("diplomaYear",b.target.value),className:m("diplomaYear")?"error":"",children:[l.jsx("option",{value:"",children:" "}),rT.map(b=>l.jsx("option",{value:b,children:b},b))]}),m("diplomaYear")&&l.jsx("span",{className:"error-message",children:m("diplomaYear")})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"diplomaType",children:"  *"}),l.jsxs("select",{id:"diplomaType",value:r.diplomaType||"",onChange:b=>g("diplomaType",b.target.value),className:m("diplomaType")?"error":"",children:[l.jsx("option",{value:"",children:"  "}),Vp.map(b=>l.jsx("option",{value:b,children:b},b))]}),m("diplomaType")&&l.jsx("span",{className:"error-message",children:m("diplomaType")})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"track",children:" *"}),l.jsxs("select",{id:"track",value:r.track||"",onChange:b=>g("track",b.target.value),className:m("track")?"error":"",children:[l.jsx("option",{value:"",children:" "}),sT.map(b=>l.jsx("option",{value:b,children:b},b))]}),m("track")&&l.jsx("span",{className:"error-message",children:m("track")})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"course",children:" *"}),l.jsxs("select",{id:"course",value:r.course||"",onChange:b=>g("course",b.target.value),className:m("course")?"error":"",children:[l.jsx("option",{value:"",children:" "}),iT.map(b=>l.jsx("option",{value:b,children:b},b))]}),m("course")&&l.jsx("span",{className:"error-message",children:m("course")})]})]})]}),l.jsxs("div",{className:"form-section",children:[l.jsx("h2",{children:""}),l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"governorate",children:" *"}),l.jsxs("select",{id:"governorate",value:((R=r.address)==null?void 0:R.governorate)||"",onChange:b=>_("governorate",b.target.value),className:m("address.governorate")?"error":"",children:[l.jsx("option",{value:"",children:" "}),nT.map(b=>l.jsx("option",{value:b,children:b},b))]}),m("address.governorate")&&l.jsx("span",{className:"error-message",children:m("address.governorate")})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"city",children:" *"}),l.jsx("input",{id:"city",type:"text",placeholder:"   ",value:((L=r.address)==null?void 0:L.city)||"",onChange:b=>_("city",b.target.value),className:m("address.city")?"error":""}),m("address.city")&&l.jsx("span",{className:"error-message",children:m("address.city")})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"street",children:" *"}),l.jsx("input",{id:"street",type:"text",placeholder:" ",value:((N=r.address)==null?void 0:N.street)||"",onChange:b=>_("street",b.target.value),className:m("address.street")?"error":""}),m("address.street")&&l.jsx("span",{className:"error-message",children:m("address.street")})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"building",children:" / *"}),l.jsx("input",{id:"building",type:"text",placeholder:" ",value:((x=r.address)==null?void 0:x.building)||"",onChange:b=>_("building",b.target.value),className:m("address.building")?"error":""}),m("address.building")&&l.jsx("span",{className:"error-message",children:m("address.building")})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"siteNumber",children:"  *"}),l.jsx("input",{id:"siteNumber",type:"text",placeholder:" ",value:((E=r.address)==null?void 0:E.siteNumber)||"",onChange:b=>_("siteNumber",b.target.value),className:m("address.siteNumber")?"error":""}),m("address.siteNumber")&&l.jsx("span",{className:"error-message",children:m("address.siteNumber")})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"landmark",children:"  ()"}),l.jsx("input",{id:"landmark",type:"text",placeholder:"  ...",value:((O=r.address)==null?void 0:O.landmark)||"",onChange:b=>_("landmark",b.target.value)})]})]})]}),l.jsxs("div",{className:"form-section",children:[l.jsx("h2",{children:" "}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"email",children:"  *"}),l.jsx("input",{id:"email",type:"email",placeholder:"example@example.com",value:r.email||"",onChange:b=>g("email",b.target.value),className:m("email")?"error":""}),m("email")&&l.jsx("span",{className:"error-message",children:m("email")})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"password",children:"  *"}),l.jsx("input",{id:"password",type:"password",placeholder:"  ",value:r.password||"",onChange:b=>g("password",b.target.value),className:m("password")?"error":""}),m("password")&&l.jsx("span",{className:"error-message",children:m("password")})]})]}),l.jsx("button",{type:"submit",disabled:c||i.length>0,className:"submit-button",children:c?" ...":""}),l.jsx("div",{className:"login-link",children:l.jsxs("p",{children:["   ",l.jsx("button",{type:"button",onClick:e,className:"link-button",children:" "})]})})]})]})})},m2=({onLoginSuccess:t,onGoToRegister:e,onAdminLogin:n})=>{const{setStudent:r}=Ms(),[s,i]=$.useState({email:"",password:""}),[a,c]=$.useState(!1),[u,d]=$.useState(""),p=(g,_)=>{i(P=>({...P,[g]:_})),u&&d("")},m=async g=>{if(g.preventDefault(),c(!0),d(""),!s.email||!s.password){d("   "),c(!1);return}try{const _=await jR(s.email,s.password);if(await Iu(_.uid)){const L={id:_.uid,fullNameArabic:" ",vehicleNameEnglish:"Admin",whatsappNumber:"",diplomaYear:"",diplomaType:"",track:"",nationalID:"",address:{governorate:"",city:"",street:"",building:"",siteNumber:""},course:"",email:_.email||s.email};r(L),n?n():t();return}const R=await Dp(_.uid);R?(r(R),t()):d("     ")}catch(_){d(_.message||"      ")}finally{c(!1)}};return l.jsx("div",{className:"login-page",children:l.jsxs("div",{className:"login-container",children:[l.jsxs("div",{className:"login-header",children:[l.jsx("div",{className:"logo",children:l.jsx("div",{className:"logo-icon",children:""})}),l.jsx("h1",{children:"  "}),l.jsx("p",{children:"     "})]}),u&&l.jsxs("div",{className:"error-alert",children:[l.jsx(bo,{size:20}),l.jsx("span",{children:u})]}),l.jsxs("form",{onSubmit:m,className:"login-form",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"email",children:" "}),l.jsx("input",{id:"email",type:"email",placeholder:"example@example.com",value:s.email,onChange:g=>p("email",g.target.value),className:u?"error":""})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"password",children:" "}),l.jsx("input",{id:"password",type:"password",placeholder:"  ",value:s.password,onChange:g=>p("password",g.target.value),className:u?"error":""})]}),l.jsx("button",{type:"submit",disabled:a,className:"login-button",children:a?"  ...":" "}),l.jsx("div",{className:"register-link",children:l.jsxs("p",{children:["   ",l.jsx("button",{type:"button",onClick:e,className:"link-button",children:" "})]})})]})]})})},cv=t=>{const e={size:32,strokeWidth:1.5};return{headphones:l.jsx(c2,{...e}),package:l.jsx(Wh,{...e}),book:l.jsx(av,{...e}),creditcard:l.jsx(Bh,{...e}),checklist:l.jsx(As,{...e}),award:l.jsx(yi,{...e}),zap:l.jsx(fT,{...e}),"book-open":l.jsx(aT,{...e}),search:l.jsx(dT,{...e}),target:l.jsx(h2,{...e}),"file-text":l.jsx(Lp,{...e}),user:l.jsx(Mp,{...e}),"clipboard-list":l.jsx(oT,{...e}),"file-check":l.jsx(qh,{...e})}[t]||l.jsx(av,{...e})},g2=({service:t,onClick:e})=>{const n=()=>{const a=new Date().getFullYear();return a>=2026?a:2026},r=()=>t.nameAr.includes(" ")?`  ${n()}`:t.nameAr,s=()=>{const a={1:"/saveinformation.png",2:"/vip.png",3:"/pay.jpeg",4:"/pay.jpeg",5:"/solveproblem.png",6:"/Certificatesofappreciation.png",7:"/visual.png"}[t.id];return a?l.jsx("img",{src:a,alt:t.nameAr,className:"service-custom-icon",onError:c=>{const u=c.target;u.style.display="none";const d=u.parentElement;d&&(d.innerHTML="",d.appendChild(cv(t.icon)))}}):cv(t.icon)};return l.jsxs("div",{className:"service-card",onClick:e,style:{borderTopColor:t.color,"--accent-color":t.color},children:[l.jsx("div",{className:"service-icon",style:{color:t.color},children:s()}),l.jsx("h3",{className:"service-name",children:r()}),l.jsx("p",{className:"service-description",children:t.descriptionAr}),l.jsx("button",{className:"service-action",children:" "})]})},y2=({onServiceClick:t,onProfileClick:e,onLogout:n,onAllUsersClick:r,onAdminClick:s})=>{const{student:i}=Ms(),[a,c]=$.useState(!1);$.useEffect(()=>{(async()=>{if(i!=null&&i.id){const p=await Iu(i.id);c(p)}})()},[i]);const u=d=>d.split(" ")[0];return l.jsxs("div",{className:"dashboard-page",children:[l.jsxs("header",{className:"dashboard-header",children:[l.jsx("div",{className:"header-right",children:l.jsx("div",{className:"logo",children:l.jsx("div",{className:"logo-circle",children:"SS"})})}),l.jsx("div",{className:"header-center",children:l.jsxs("h1",{className:"welcome-message",children:["  ",i!=null&&i.fullNameArabic?u(i.fullNameArabic):""]})}),l.jsxs("div",{className:"header-left",children:[a&&s&&l.jsx("button",{className:"admin-button",onClick:s,title:"  ",children:l.jsx(d2,{size:20})}),l.jsx("button",{className:"all-users-button",onClick:r,title:" ",children:l.jsx(hT,{size:20})}),l.jsx("button",{className:"profile-button",onClick:e,title:" ",children:l.jsx(Mp,{size:20})}),l.jsx("button",{className:"logout-button",onClick:n,title:" ",children:l.jsx(cT,{size:20})})]})]}),l.jsx("main",{className:"dashboard-main",children:l.jsxs("div",{className:"services-container",children:[l.jsx("h2",{className:"services-title",children:" "}),l.jsx("div",{className:"services-grid",children:Op.map(d=>l.jsx(g2,{service:d,onClick:()=>t(d.id)},d.id))})]})})]})},v2=({onFilesSelected:t,maxFileSize:e=5*1024*1024,acceptedFormats:n=["JPEG","PNG","PDF"]})=>{const[r,s]=$.useState([]),[i,a]=$.useState(""),[c,u]=$.useState(""),[d,p]=$.useState(!1),m=$.useRef(null),g=E=>{var b;return((b=E.split(".").pop())==null?void 0:b.toUpperCase())||""},_=E=>{const O=g(E.name);return n.map(w=>w.toLowerCase()).includes(O.toLowerCase())?E.size>e?{valid:!1,error:`    ${(e/(1024*1024)).toFixed(0)} `}:["image/jpeg","image/jpg","image/png","application/pdf"].includes(E.type)?{valid:!0}:{valid:!1,error:"   .    (JPEG, PNG)   PDF "}:{valid:!1,error:`   .  : ${n.join(", ")}`}},P=E=>{if(a(""),u(""),!E)return;const O=Array.from(E),b=[];if(O.forEach(y=>{const I=_(y);I.valid?b.push(y):a(I.error||"    ")}),b.length===0)return;p(!0);let U=0;const w=[];b.forEach(y=>{const I=new FileReader;I.onload=S=>{var j,C;const A={id:`${Date.now()}_${Math.random()}_${U}`,name:y.name,size:y.size,type:g(y.name),url:(j=S.target)==null?void 0:j.result,preview:(C=S.target)==null?void 0:C.result,file:y};w.push(A),U++,s(ae=>{const Xe=[...ae,A];return t(Xe),Xe}),U===b.length&&(p(!1),u(`  ${w.length} () `))},I.onerror=()=>{U++,p(!1),a("    ")},I.readAsDataURL(y)}),m.current&&(m.current.value="")},R=E=>{E.preventDefault(),E.stopPropagation(),P(E.dataTransfer.files)},L=E=>{E.preventDefault(),E.stopPropagation()},N=E=>{s(O=>{const b=O.filter(U=>U.id!==E);return t(b),b})},x=E=>{if(E===0)return"0 Bytes";const O=1024,b=["Bytes","KB","MB"],U=Math.floor(Math.log(E)/Math.log(O));return Math.round(E/Math.pow(O,U)*100)/100+" "+b[U]};return l.jsxs("div",{className:"file-upload-container",children:[d&&l.jsx("div",{className:"file-upload-overlay",children:l.jsxs("div",{className:"file-upload-loading",children:[l.jsx(lT,{className:"spinning-loader-large",size:48}),l.jsx("p",{children:"  ..."})]})}),l.jsx("div",{className:"upload-section",children:l.jsxs("div",{className:`drop-zone ${d?"processing":""}`,onDrop:R,onDragOver:L,children:[l.jsx(f2,{size:48}),l.jsx("h3",{children:"   "}),l.jsx("p",{children:"     "}),l.jsxs("span",{className:"file-types",children:[" : ",n.join(", ")," |  : 5 "]}),l.jsx("input",{ref:m,type:"file",multiple:!0,accept:n.map(E=>`.${E.toLowerCase()}`).join(","),onChange:E=>P(E.target.files),className:"file-input",disabled:d}),l.jsx("button",{type:"button",onClick:()=>{var E;return(E=m.current)==null?void 0:E.click()},className:"select-button",disabled:d,children:d?" ...":" "})]})}),i&&l.jsxs("div",{className:"alert alert-error",children:[l.jsx(bo,{size:18}),l.jsx("span",{children:i})]}),c&&l.jsxs("div",{className:"alert alert-success",children:[l.jsx(As,{size:18}),l.jsx("span",{children:c})]}),r.length>0&&l.jsxs("div",{className:"uploaded-files",children:[l.jsxs("h4",{children:["  (",r.length,")"]}),l.jsx("div",{className:"files-list",children:r.map(E=>l.jsxs("div",{className:"file-item",children:[l.jsxs("div",{className:"file-info",children:[E.preview&&E.type!=="PDF"?l.jsx("img",{src:E.preview,alt:E.name,className:"file-preview"}):l.jsx("div",{className:"file-icon",children:"PDF"}),l.jsxs("div",{className:"file-details",children:[l.jsx("span",{className:"file-name",children:E.name}),l.jsx("span",{className:"file-size",children:x(E.size)})]})]}),l.jsx("button",{type:"button",onClick:()=>N(E.id),className:"remove-button",title:"",children:l.jsx(Ht,{size:18})})]},E.id))})]})]})},_2=({serviceId:t,onBack:e,onSubmitSuccess:n})=>{var _e;const{student:r,addServiceRequest:s}=Ms(),i=Op.find(k=>k.id===t),[a,c]=$.useState({}),[u,d]=$.useState(""),[p,m]=$.useState(!1),[g,_]=$.useState(null),[P,R]=$.useState({}),[L,N]=$.useState([]),[x,E]=$.useState({uploading:!1,progress:0}),[O,b]=$.useState(null),[U,w]=$.useState(null),[y,I]=$.useState(null),[S,A]=$.useState([]),[j,C]=$.useState(null),[ae,Xe]=$.useState(null),[Be,qt]=$.useState(null);if($.useEffect(()=>{i!=null&&i.id&&(i.id==="3"&&(async()=>{try{const q=await Q0();b(q||{serviceName:"    ",prices:{1:1750,2:3440,3:5160,4:6820,5:8450,6:10200,7:11885,8:13580,9:15210,10:16900},paymentMethods:{instaPay:"01017180923",cashWallet:"01050889591"}})}catch(q){console.error("Error loading book config:",q)}})(),i.id==="4"&&(async()=>{try{const q=await Y0();w(q||{prices:{}})}catch(q){console.error("Error loading fees config:",q)}})(),i.id==="5"&&(async()=>{try{const q=await J0();q&&I(q)}catch(q){console.error("Error loading assignments config:",q)}})(),i.id==="6"&&(async()=>{var q,Z;try{console.log("Loading certificates config in ServiceDetailsPage...");const se=await X0();se?(console.log("Setting certificates config in ServiceDetailsPage:",((q=se.certificates)==null?void 0:q.length)||0,"certificates"),console.log("Certificates details:",(Z=se.certificates)==null?void 0:Z.map(me=>{var K;return{id:me.id,name:me.name,hasImage:!!me.imageUrl,imageUrlLength:((K=me.imageUrl)==null?void 0:K.length)||0}})),C(se)):(console.log("No certificates config found in ServiceDetailsPage"),C(null))}catch(se){console.error("Error loading certificates config in ServiceDetailsPage:",se),C(null)}})(),i.id==="7"&&(async()=>{var q;try{console.log("Loading digital transformation config in ServiceDetailsPage...");const Z=await Z0();Z?(console.log("Setting digital transformation config in ServiceDetailsPage:",((q=Z.transformationTypes)==null?void 0:q.length)||0,"types"),qt(Z)):(console.log("No digital transformation config found in ServiceDetailsPage"),qt(null))}catch(Z){console.error("Error loading digital transformation config in ServiceDetailsPage:",Z),qt(null)}})())},[i==null?void 0:i.id]),$.useEffect(()=>{if(!(!i||!r)&&(i.id==="1"||i.id==="2"||i.id==="4"||i.id==="5"||i.id==="6"||i.id==="7")){const k={},q=r.address?`${r.address.governorate||""}, ${r.address.city||""}, ${r.address.street||""}, ${r.address.building||""}, ${r.address.siteNumber||""}${r.address.landmark?`, ${r.address.landmark}`:""}`.replace(/^,\s*|,\s*$/g,"").replace(/,\s*,/g,","):"";i.fields.forEach(se=>{if(se.type==="editable")switch(se.name){case"full_name":case"full_name_arabic":k[se.name]=r.fullNameArabic||"";break;case"full_name_english":k[se.name]=r.vehicleNameEnglish||"";break;case"national_id":k[se.name]=r.nationalID||"";break;case"address":k[se.name]=q;break;case"email":k[se.name]=r.email||"";break;case"whatsapp_number":k[se.name]=r.whatsappNumber||"";break}else if(se.type==="select"&&(i.id==="4"||i.id==="5"))switch(se.name){case"diploma_type":k[se.name]="  ";break;case"track_category":case"track":k[se.name]=" ";break;case"diploma_year":k[se.name]=" ";break;case"educational_specialization":k[se.name]=" ";break}}),c(k);const Z={};i.fields.forEach(se=>{se.type==="editable"&&(Z[se.name]=!1)}),R(Z)}},[i,r]),!i||!r)return null;const G=k=>{R(q=>({...q,[k]:!q[k]}))},B=(k,q)=>{c(Z=>({...Z,[k]:q}))},ee=async k=>{k.preventDefault(),m(!0),_(null);const q=i.fields.filter(Z=>Z.required&&!a[Z.name]).map(Z=>Z.label);if(q.length>0){_({type:"error",text:`   : ${q.join(", ")}`}),m(!1);return}if(i.paymentMethods.length>0&&!u){_({type:"error",text:"   "}),m(!1);return}if((i.id==="2"||i.id==="3"||i.id==="4"||i.id==="5"||i.id==="6"||i.id==="7")&&L.length===0){_({type:"error",text:"    "}),m(!1);return}if(i.id==="5"&&S.length===0){_({type:"error",text:"     "}),m(!1);return}if(i.id==="6"&&!ae){_({type:"error",text:"  "}),m(!1);return}if(i.id==="7"&&!a.transformation_type){_({type:"error",text:"    "}),m(!1);return}try{E({uploading:!0,progress:0});const Z={...a};if(i.id==="5"){Z.selectedAssignments=S;const me=(y==null?void 0:y.assignments.filter(K=>S.includes(K.id)))||[];Z.selectedAssignmentsData=me,Z.totalPrice=me.reduce((K,Wt)=>K+Wt.price,0)}if(i.id==="6"&&ae&&(Z.selectedCertificate=ae,Z.totalPrice=ae.price),i.id==="7"&&Be){const me=Be.transformationTypes.find(K=>K.id===a.transformation_type);me&&(Z.selectedTransformationType=me,Z.totalPrice=me.price)}const se={studentId:r.id||"",serviceId:i.id,data:Z,documents:i.id==="2"||i.id==="3"||i.id==="4"||i.id==="5"||i.id==="6"||i.id==="7"?L:[],paymentMethod:u,status:"pending",createdAt:new Date().toISOString()};E({uploading:!0,progress:30}),await new Promise(me=>setTimeout(me,150)),E({uploading:!0,progress:60}),await s(se),E({uploading:!0,progress:100}),await new Promise(me=>setTimeout(me,150)),_({type:"success",text:"   !"}),setTimeout(()=>{n()},2e3)}catch(Z){_({type:"error",text:Z.message||"    "}),E({uploading:!1,progress:0})}finally{m(!1),E({uploading:!1,progress:0})}};return i?l.jsxs("div",{className:"service-details-page",children:[l.jsxs("div",{className:"details-header",children:[l.jsxs("button",{onClick:e,className:"back-button",children:[l.jsx(Mc,{size:20}),""]}),l.jsx("h1",{children:i.id==="3"&&O?O.serviceName:i.id==="5"&&y?y.serviceName:i.nameAr})]}),l.jsx("form",{onSubmit:ee,className:"details-form",children:l.jsxs("div",{className:"details-container",children:[i.id!=="1"&&l.jsxs("section",{className:"form-section section-personal-data",children:[l.jsx("h2",{children:" "}),l.jsxs("div",{className:"personal-data-display",children:[l.jsxs("div",{className:"data-field",children:[l.jsx("span",{className:"label",children:":"}),l.jsx("span",{className:"value",children:r.fullNameArabic})]}),l.jsxs("div",{className:"data-field",children:[l.jsx("span",{className:"label",children:" :"}),l.jsx("span",{className:"value",children:r.email})]}),l.jsxs("div",{className:"data-field",children:[l.jsx("span",{className:"label",children:" :"}),l.jsx("span",{className:"value",children:r.whatsappNumber})]}),l.jsxs("div",{className:"data-field",children:[l.jsx("span",{className:"label",children:":"}),l.jsx("span",{className:"value",children:r.course})]})]}),l.jsxs("p",{className:"edit-note",children:[l.jsx(Na,{size:16}),"    .     "]})]}),l.jsxs("section",{className:"form-section section-service-data",children:[l.jsx("h2",{children:i.id==="1"?" ":" "}),l.jsx("div",{className:"service-fields",children:i.fields.map(k=>{var q,Z,se,me;if(k.name.endsWith("_other")){const K=k.name.replace("_other",""),Wt=a[K];if(Wt!=="Other"&&Wt!=="")return null}return l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{htmlFor:k.name,children:[k.label,k.required&&l.jsx("span",{className:"required",children:"*"})]}),k.type==="editable"&&l.jsx("div",{className:"editable-field-container",children:P[k.name]?l.jsx("input",{id:k.name,type:k.name==="email"?"email":"text",value:a[k.name]||"",onChange:K=>B(k.name,K.target.value),placeholder:k.name==="email"?"EX******@gmail.com":k.label,required:k.required,className:"editable-input"}):l.jsxs("div",{className:"editable-field-display",children:[l.jsx("input",{id:k.name,type:"text",value:a[k.name]||"",readOnly:!0,className:"readonly-input"}),l.jsx("button",{type:"button",onClick:()=>G(k.name),className:"edit-field-button",title:"",children:l.jsx(uT,{size:16})})]})}),k.type==="text"&&l.jsx("input",{id:k.name,type:"text",value:a[k.name]||"",onChange:K=>B(k.name,K.target.value),placeholder:k.label,required:k.required}),k.type==="number"&&l.jsx("input",{id:k.name,type:"number",value:a[k.name]||"",onChange:K=>B(k.name,K.target.value),placeholder:k.label,required:k.required}),k.type==="select"&&l.jsx(l.Fragment,{children:k.name==="diploma_year"&&i.id==="4"&&U?l.jsxs("select",{id:k.name,value:a[k.name]||"",onChange:K=>B(k.name,K.target.value),required:k.required,children:[l.jsx("option",{value:"",children:" "}),Object.keys(U.prices).sort((K,Wt)=>parseInt(Wt)-parseInt(K)).map(K=>l.jsxs("option",{value:K,children:[K," - ",U.prices[K]," "]},K))]}):k.name==="track_other"&&i.id==="4"?l.jsx(l.Fragment,{children:a.track_category===""&&l.jsx("input",{type:"text",value:a.track_other||"",onChange:K=>B("track_other",K.target.value),placeholder:" ",required:!1,className:"other-input"})}):k.name==="transformation_type"&&i.id==="7"&&Be?l.jsxs("select",{id:k.name,value:a[k.name]||"",onChange:K=>B(k.name,K.target.value),required:k.required,children:[l.jsx("option",{value:"",children:"   "}),Be.transformationTypes.map(K=>l.jsxs("option",{value:K.id,children:[K.name," - ",K.price," "]},K.id))]}):k.name==="exam_language"&&i.id==="7"&&Be?l.jsxs("select",{id:k.name,value:a[k.name]||"",onChange:K=>B(k.name,K.target.value),required:k.required,children:[l.jsx("option",{value:"",children:"  "}),(Be.examLanguages||[]).map(K=>l.jsx("option",{value:K.id,children:K.name},K.id))]}):l.jsxs(l.Fragment,{children:[l.jsxs("select",{id:k.name,value:a[k.name]||"",onChange:K=>{B(k.name,K.target.value),K.target.value!=="Other"&&K.target.value!==""&&k.hasOther&&B(k.name+"_other",""),k.name==="track_category"&&i.id==="4"&&K.target.value!==""&&B("track_other","")},required:k.required,children:[(Z=(q=k.options)==null?void 0:q[0])!=null&&Z.includes("")?l.jsx("option",{value:k.options[0],children:k.options[0]}):l.jsx("option",{value:"",children:"..."}),(me=k.options)==null?void 0:me.slice((se=k.options[0])!=null&&se.includes("")?1:0).map(K=>l.jsx("option",{value:K,children:K},K))]}),k.hasOther&&(a[k.name]==="Other"||a[k.name]==="")&&l.jsx("input",{type:"text",value:a[k.name+"_other"]||"",onChange:K=>B(k.name+"_other",K.target.value),placeholder:k.name==="educational_specialization"?" ":k.label.replace("  ","   ").replace("  ","   "),required:k.required,className:"other-input"})]})}),k.type==="textarea"&&l.jsx("textarea",{id:k.name,value:a[k.name]||"",onChange:K=>B(k.name,K.target.value),placeholder:k.label,required:k.required,rows:4})]},k.name)})})]}),i.id==="5"&&y&&l.jsxs("section",{className:"form-section section-assignments",children:[l.jsx("h2",{children:"  "}),l.jsx("div",{className:"assignments-cards-grid",children:y.assignments.map(k=>l.jsxs("div",{className:`assignment-card ${S.includes(k.id)?"selected":""}`,onClick:()=>{S.includes(k.id)?A(S.filter(q=>q!==k.id)):A([...S,k.id])},children:[l.jsxs("div",{className:"assignment-card-content",children:[l.jsx("h3",{children:k.name}),l.jsxs("div",{className:"assignment-price",children:[k.price," "]})]}),S.includes(k.id)&&l.jsx("div",{className:"assignment-selected-indicator",children:""})]},k.id))}),S.length>0&&l.jsxs("div",{className:"selected-assignments-summary",children:[l.jsx("strong",{children:" :"}),l.jsx("div",{className:"selected-assignments-list",children:y.assignments.filter(k=>S.includes(k.id)).map(k=>l.jsxs("span",{className:"selected-assignment-item",children:[k.name," (",k.price," )"]},k.id))}),l.jsx("div",{className:"total-price",children:l.jsxs("strong",{children:[": ",y.assignments.filter(k=>S.includes(k.id)).reduce((k,q)=>k+q.price,0)," "]})})]})]}),i.id==="6"&&j&&j.certificates&&l.jsx("section",{className:"certificates-section-modern",children:l.jsxs("div",{className:"certificates-container",children:[l.jsxs("div",{className:"certificates-title-section",children:[l.jsx("div",{className:"title-icon",children:l.jsx(yi,{size:32})}),l.jsxs("div",{className:"title-content",children:[l.jsx("h2",{children:" "}),l.jsx("p",{children:"      "})]})]}),l.jsx("div",{className:"certificates-selection-area",children:j.certificates.length>0?l.jsx("div",{className:"certificates-options",children:j.certificates.map(k=>l.jsxs("div",{className:`certificate-option ${(ae==null?void 0:ae.id)===k.id?"active":""}`,onClick:()=>Xe(k),children:[l.jsxs("div",{className:"certificate-option-content",children:[l.jsxs("div",{className:"certificate-image-wrapper",children:[k.imageUrl&&k.imageUrl.trim()!==""?l.jsx("img",{src:k.imageUrl,alt:k.name,className:"certificate-option-image",onError:q=>{var se;q.currentTarget.style.display="none";const Z=(se=q.currentTarget.parentElement)==null?void 0:se.querySelector(".image-fallback");Z&&(Z.style.display="flex")}}):null,l.jsx("div",{className:"image-fallback",style:{display:!k.imageUrl||k.imageUrl.trim()===""?"flex":"none"},children:l.jsx(yi,{size:24})})]}),l.jsxs("div",{className:"certificate-option-details",children:[l.jsx("h3",{className:"certificate-option-title",children:k.name}),l.jsxs("div",{className:"certificate-option-price",children:[l.jsx("span",{className:"price-value",children:k.price}),l.jsx("span",{className:"price-unit",children:""})]}),k.fields&&k.fields.length>0&&l.jsxs("div",{className:"certificate-option-meta",children:[l.jsx(Lp,{size:14}),l.jsxs("span",{children:[k.fields.length,"  "]})]})]}),l.jsx("div",{className:"certificate-selection-indicator",children:(ae==null?void 0:ae.id)===k.id?l.jsxs("div",{className:"selected-indicator",children:[l.jsx(As,{size:20}),l.jsx("span",{children:""})]}):l.jsx("div",{className:"select-indicator",children:l.jsx("span",{children:""})})})]}),k.description&&l.jsx("div",{className:"certificate-option-description",children:l.jsx("p",{children:k.description.split(`
`)[0]})})]},k.id))}):l.jsxs("div",{className:"no-certificates-state",children:[l.jsx("div",{className:"empty-state-icon",children:l.jsx(yi,{size:48})}),l.jsx("h3",{children:"   "}),l.jsx("p",{children:"   "})]})}),ae&&l.jsxs("div",{className:"certificate-details-form",children:[l.jsx("div",{className:"form-header",children:l.jsxs("div",{className:"selected-certificate-summary",children:[l.jsx("div",{className:"summary-icon",children:l.jsx(As,{size:24})}),l.jsxs("div",{className:"summary-content",children:[l.jsx("h3",{children:ae.name}),l.jsxs("p",{className:"summary-price",children:[ae.price," "]})]})]})}),l.jsxs("div",{className:"form-content",children:[ae.description&&l.jsxs("div",{className:"certificate-description-section",children:[l.jsx("h4",{children:" "}),l.jsx("div",{className:"description-text",children:ae.description.split(`
`).map((k,q)=>l.jsx("p",{children:k},q))})]}),ae.fields&&ae.fields.length>0&&l.jsxs("div",{className:"certificate-fields-section",children:[l.jsx("h4",{children:" "}),l.jsx("div",{className:"fields-container",children:ae.fields.map(k=>l.jsxs("div",{className:"field-wrapper",children:[l.jsxs("label",{htmlFor:k.name,className:"field-label-clean",children:[k.label,k.required&&l.jsx("span",{className:"field-required",children:"*"})]}),k.type==="text"&&l.jsx("input",{id:k.name,type:"text",value:a[k.name]||"",onChange:q=>B(k.name,q.target.value),placeholder:k.placeholder||k.label,required:k.required,className:"field-input-clean"}),k.type==="date"&&l.jsx("input",{id:k.name,type:"text",value:a[k.name]||"",onChange:q=>B(k.name,q.target.value),placeholder:k.placeholder||"mm/dd/yyyy",required:k.required,className:"field-input-clean"}),k.type==="select"&&k.options&&l.jsxs("select",{id:k.name,value:a[k.name]||"",onChange:q=>B(k.name,q.target.value),required:k.required,className:"field-select-clean",children:[l.jsx("option",{value:"",children:"..."}),k.options.map(q=>l.jsx("option",{value:q,children:q},q))]})]},k.name))})]})]})]})]})}),i.paymentMethods.length>0&&l.jsxs("section",{className:"form-section section-payment",children:[l.jsx("h2",{children:" "}),i.id==="3"&&O&&l.jsxs("div",{className:"payment-amount",children:[l.jsx("strong",{children:" :"}),l.jsx("div",{className:"book-prices-list",children:Object.entries(O.prices).map(([k,q])=>l.jsxs("div",{className:"price-item-row",children:[l.jsxs("span",{children:["  ",k==="1"?"":`${k} `,":"]}),l.jsxs("strong",{children:[q," "]})]},k))}),a.number_of_copies&&l.jsx("div",{className:"selected-price",children:l.jsxs("strong",{children:["  : ",O.prices[a.number_of_copies]||"   "," "]})})]}),i.id==="4"&&U&&a.diploma_year&&U.prices[a.diploma_year]&&l.jsx("div",{className:"payment-amount",children:l.jsx("div",{className:"selected-price",children:l.jsxs("strong",{children:["   ",a.diploma_year,": ",U.prices[a.diploma_year]," "]})})}),i.id==="5"&&y&&S.length>0&&l.jsx("div",{className:"payment-amount",children:l.jsx("div",{className:"selected-price",children:l.jsxs("strong",{children:["  : ",y.assignments.filter(k=>S.includes(k.id)).reduce((k,q)=>k+q.price,0)," "]})})}),i.id==="6"&&ae&&l.jsx("div",{className:"payment-amount",children:l.jsx("div",{className:"selected-price",children:l.jsxs("strong",{children:["  : ",ae.price," "]})})}),i.id==="7"&&Be&&a.transformation_type&&l.jsx("div",{className:"payment-amount",children:l.jsx("div",{className:"selected-price",children:l.jsxs("strong",{children:["  : ",((_e=Be.transformationTypes.find(k=>k.id===a.transformation_type))==null?void 0:_e.price)||0," "]})})}),l.jsx("div",{className:"payment-methods",children:i.paymentMethods&&i.paymentMethods.length>0&&i.paymentMethods.map(k=>{let q="";if(i.id==="2"||i.id==="3"||i.id==="4"||i.id==="5"||i.id==="6"||i.id==="7")if(i.id==="6"&&j)switch(k){case"Vodafone":case"Etisalat":case"Orange":q=j.paymentMethods.cashWallet;break;case"instaPay":q=j.paymentMethods.instaPay;break;default:q=""}else if(i.id==="5"&&y)switch(k){case"Vodafone":case"Etisalat":case"Orange":q=y.paymentMethods.cashWallet;break;case"instaPay":q=y.paymentMethods.instaPay;break;default:q=""}else if(i.id==="7"&&Be)switch(k){case"Vodafone":case"Etisalat":case"Orange":q=Be.paymentMethods.cashWallet;break;case"instaPay":q=Be.paymentMethods.instaPay;break;default:q=""}else switch(k){case"Vodafone":case"Etisalat":case"Orange":q="01050889591";break;case"instaPay":q="01017180923";break;default:q=""}return l.jsxs("label",{className:"payment-option",children:[l.jsx("input",{type:"radio",name:"paymentMethod",value:k,checked:u===k,onChange:Z=>d(Z.target.value)}),l.jsxs("div",{className:"payment-info",children:[l.jsx("span",{className:"payment-label",children:k}),q&&l.jsx("span",{className:"payment-number",children:q})]})]},k)})})]}),(i.id==="2"||i.id==="3"||i.id==="4"||i.id==="5"||i.id==="6"||i.id==="7")&&l.jsxs("section",{className:"form-section section-receipt",children:[l.jsx("h2",{children:"  "}),l.jsx("p",{className:"receipt-note",children:"       "}),l.jsx(v2,{onFilesSelected:N,maxFileSize:5*1024*1024,acceptedFormats:["JPEG","PNG","PDF"]})]}),x.uploading&&l.jsx("div",{className:"loading-overlay",children:l.jsxs("div",{className:"loading-modal",children:[l.jsx("div",{className:"loading-spinner-container",children:l.jsx(lT,{className:"spinning-loader-large",size:64})}),l.jsx("h3",{className:"loading-title",children:i.id==="2"&&L.length>0?"  ":"  "}),l.jsx("p",{className:"loading-subtitle",children:" ..."}),l.jsxs("div",{className:"progress-bar-wrapper",children:[l.jsx("div",{className:"progress-bar-track",children:l.jsx("div",{className:"progress-bar-fill",style:{width:`${x.progress}%`}})}),l.jsxs("span",{className:"progress-percentage-text",children:[x.progress,"%"]})]})]})}),g&&l.jsxs("div",{className:`message ${g.type}`,children:[g.type==="error"&&l.jsx(bo,{size:18}),l.jsx("span",{children:g.text})]}),l.jsxs("div",{className:"form-actions",children:[l.jsx("button",{type:"button",onClick:e,className:"cancel-button",disabled:p,children:""}),l.jsx("button",{type:"submit",className:"submit-button",disabled:p||(i.id==="2"||i.id==="3"||i.id==="4")&&L.length===0,children:p?" ...":" "})]})]})})]}):l.jsx("div",{className:"service-details-page",children:l.jsxs("div",{className:"details-header",children:[l.jsxs("button",{onClick:e,className:"back-button",children:[l.jsx(Mc,{size:20}),""]}),l.jsx("h1",{children:"  "})]})})},w2=({onBack:t})=>{var x,E,O,b,U,w;const{student:e,setStudent:n}=Ms(),[r,s]=$.useState(!1),[i,a]=$.useState(e||{}),[c,u]=$.useState([]),[d,p]=$.useState(null),[m,g]=$.useState(!1);if(!e)return null;const _=y=>{var I;return(I=c.find(S=>S.field===y))==null?void 0:I.message},P=(y,I)=>{a(S=>({...S,[y]:I})),u(S=>S.filter(A=>A.field!==y))},R=(y,I)=>{a(S=>({...S,address:{...S.address,[y]:I}})),u(S=>S.filter(A=>!A.field.startsWith("address.")))},L=async y=>{y.preventDefault(),g(!0),p(null);const I=tT(i);if(I.length>0){u(I),g(!1);return}try{if(!e.id){p({type:"error",text:"   "}),g(!1);return}const S={...e,...i,fullNameArabic:i.fullNameArabic||e.fullNameArabic,vehicleNameEnglish:i.vehicleNameEnglish||e.vehicleNameEnglish,whatsappNumber:i.whatsappNumber||e.whatsappNumber,email:i.email||e.email,address:i.address||e.address};await G0(e.id,S),n(S),p({type:"success",text:"   "}),setTimeout(()=>{s(!1)},1500)}catch(S){p({type:"error",text:S.message||"   "})}finally{g(!1)}},N=r?i:e;return l.jsxs("div",{className:"profile-page",children:[l.jsxs("div",{className:"profile-header",children:[l.jsxs("button",{onClick:t,className:"back-button",children:[l.jsx(Mc,{size:20}),""]}),l.jsx("h1",{children:" "}),!r&&l.jsx("button",{onClick:()=>s(!0),className:"edit-profile-button",children:""})]}),l.jsx("form",{onSubmit:L,className:"profile-form",children:l.jsxs("div",{className:"profile-container",children:[d&&l.jsxs("div",{className:`message ${d.type}`,children:[d.type==="success"?l.jsx(As,{size:18}):l.jsx(bo,{size:18}),l.jsx("span",{children:d.text})]}),l.jsxs("section",{className:"profile-section",children:[l.jsx("h2",{children:" "}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"fullNameArabic",children:"  ()"}),l.jsx("input",{id:"fullNameArabic",type:"text",dir:"rtl",disabled:!r,value:N.fullNameArabic||"",onChange:y=>P("fullNameArabic",y.target.value),className:_("fullNameArabic")?"error":""}),_("fullNameArabic")&&l.jsx("span",{className:"error-message",children:_("fullNameArabic")})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"vehicleNameEnglish",children:"Vehicle Name (English)"}),l.jsx("input",{id:"vehicleNameEnglish",type:"text",dir:"ltr",disabled:!r,value:N.vehicleNameEnglish||"",onChange:y=>P("vehicleNameEnglish",y.target.value),className:_("vehicleNameEnglish")?"error":""}),_("vehicleNameEnglish")&&l.jsx("span",{className:"error-message",children:_("vehicleNameEnglish")})]}),l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"whatsappNumber",children:" "}),l.jsx("input",{id:"whatsappNumber",type:"tel",disabled:!r,value:N.whatsappNumber||"",onChange:y=>P("whatsappNumber",y.target.value),className:_("whatsappNumber")?"error":""}),_("whatsappNumber")&&l.jsx("span",{className:"error-message",children:_("whatsappNumber")})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"nationalID",children:" "}),l.jsx("input",{id:"nationalID",type:"text",disabled:!r,value:N.nationalID||"",onChange:y=>P("nationalID",y.target.value),className:_("nationalID")?"error":""}),_("nationalID")&&l.jsx("span",{className:"error-message",children:_("nationalID")})]})]})]}),l.jsxs("section",{className:"profile-section",children:[l.jsx("h2",{children:" "}),l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"diplomaYear",children:" "}),l.jsx("select",{id:"diplomaYear",disabled:!r,value:N.diplomaYear||"",onChange:y=>P("diplomaYear",y.target.value),children:rT.map(y=>l.jsx("option",{value:y,children:y},y))})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"diplomaType",children:" "}),l.jsxs("select",{id:"diplomaType",disabled:!r,value:N.diplomaType||"",onChange:y=>P("diplomaType",y.target.value),children:[l.jsx("option",{value:"",children:"  "}),Vp.map(y=>l.jsx("option",{value:y,children:y},y))]})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"track",children:""}),l.jsxs("select",{id:"track",disabled:!r,value:N.track||"",onChange:y=>P("track",y.target.value),children:[l.jsx("option",{value:"",children:" "}),sT.map(y=>l.jsx("option",{value:y,children:y},y))]})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"course",children:""}),l.jsxs("select",{id:"course",disabled:!r,value:N.course||"",onChange:y=>P("course",y.target.value),children:[l.jsx("option",{value:"",children:" "}),iT.map(y=>l.jsx("option",{value:y,children:y},y))]})]})]})]}),l.jsxs("section",{className:"profile-section",children:[l.jsx("h2",{children:""}),l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"governorate",children:""}),l.jsxs("select",{id:"governorate",disabled:!r,value:((x=N.address)==null?void 0:x.governorate)||"",onChange:y=>R("governorate",y.target.value),children:[l.jsx("option",{value:"",children:" "}),nT.map(y=>l.jsx("option",{value:y,children:y},y))]})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"city",children:""}),l.jsx("input",{id:"city",type:"text",disabled:!r,value:((E=N.address)==null?void 0:E.city)||"",onChange:y=>R("city",y.target.value)})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"street",children:""}),l.jsx("input",{id:"street",type:"text",disabled:!r,value:((O=N.address)==null?void 0:O.street)||"",onChange:y=>R("street",y.target.value)})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"building",children:" /"}),l.jsx("input",{id:"building",type:"text",disabled:!r,value:((b=N.address)==null?void 0:b.building)||"",onChange:y=>R("building",y.target.value)})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"siteNumber",children:" "}),l.jsx("input",{id:"siteNumber",type:"text",disabled:!r,value:((U=N.address)==null?void 0:U.siteNumber)||"",onChange:y=>R("siteNumber",y.target.value)})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"landmark",children:"  ()"}),l.jsx("input",{id:"landmark",type:"text",disabled:!r,value:((w=N.address)==null?void 0:w.landmark)||"",onChange:y=>R("landmark",y.target.value)})]})]})]}),l.jsxs("section",{className:"profile-section",children:[l.jsx("h2",{children:" "}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"email",children:" "}),l.jsx("input",{id:"email",type:"email",disabled:!r,value:N.email||"",onChange:y=>P("email",y.target.value),className:_("email")?"error":""}),_("email")&&l.jsx("span",{className:"error-message",children:_("email")})]})]}),r&&l.jsxs("div",{className:"form-actions",children:[l.jsx("button",{type:"button",onClick:()=>{s(!1),a(e),u([])},className:"cancel-button",disabled:m,children:""}),l.jsx("button",{type:"submit",className:"save-button",disabled:m,children:m?" ...":" "})]})]})})]})},E2=({onBack:t})=>{const[e,n]=$.useState([]),[r,s]=$.useState(!0),[i,a]=$.useState({}),[c,u]=$.useState("");$.useEffect(()=>{s(!0);const g=K0(_=>{n(_),s(!1)});return()=>g()},[]);const d=g=>{a(_=>({..._,[g]:!_[g]}))},p=e.filter(g=>{var P,R,L,N;const _=c.toLowerCase();return((P=g.fullNameArabic)==null?void 0:P.toLowerCase().includes(_))||((R=g.email)==null?void 0:R.toLowerCase().includes(_))||((L=g.whatsappNumber)==null?void 0:L.includes(c))||((N=g.nationalID)==null?void 0:N.includes(c))}),m=g=>{if(!g)return" ";try{return new Date(g).toLocaleString("ar-EG",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return g}};return r?l.jsx("div",{className:"all-users-page",children:l.jsxs("div",{className:"loading-container",children:[l.jsx(u2,{className:"spinning",size:32}),l.jsx("p",{children:"  ..."})]})}):l.jsxs("div",{className:"all-users-page",children:[l.jsxs("div",{className:"users-header",children:[l.jsxs("button",{onClick:t,className:"back-button",children:[l.jsx(Mc,{size:20}),""]}),l.jsx("h1",{children:"  "}),l.jsx("div",{className:"header-info",children:l.jsxs("span",{className:"count-badge",children:[" : ",e.length]})})]}),l.jsx("div",{className:"users-controls",children:l.jsx("div",{className:"search-box",children:l.jsx("input",{type:"text",placeholder:"        ...",value:c,onChange:g=>u(g.target.value),className:"search-input"})})}),l.jsx("div",{className:"users-container",children:p.length===0?l.jsx("div",{className:"empty-state",children:l.jsx("p",{children:c?"    ":"    "})}):l.jsx("div",{className:"users-grid",children:p.map(g=>{var _;return l.jsxs("div",{className:"user-card",children:[l.jsxs("div",{className:"user-card-header",children:[l.jsx("div",{className:"user-avatar",children:((_=g.fullNameArabic)==null?void 0:_.charAt(0))||"U"}),l.jsxs("div",{className:"user-name",children:[l.jsx("h3",{children:g.fullNameArabic||" "}),l.jsx("p",{className:"user-email",children:g.email})]})]}),l.jsxs("div",{className:"user-details",children:[l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{className:"detail-label",children:"Vehicle Name:"}),l.jsx("span",{className:"detail-value",children:g.vehicleNameEnglish||" "})]}),l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{className:"detail-label",children:" :"}),l.jsx("span",{className:"detail-value",children:g.whatsappNumber||" "})]}),l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{className:"detail-label",children:" :"}),l.jsx("span",{className:"detail-value",children:g.nationalID||" "})]}),l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{className:"detail-label",children:" :"}),l.jsx("span",{className:"detail-value",children:g.diplomaYear||" "})]}),l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{className:"detail-label",children:" :"}),l.jsx("span",{className:"detail-value",children:g.diplomaType||" "})]}),l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{className:"detail-label",children:":"}),l.jsx("span",{className:"detail-value",children:g.track||" "})]}),l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{className:"detail-label",children:":"}),l.jsx("span",{className:"detail-value",children:g.course||" "})]}),g.address&&l.jsxs("div",{className:"detail-section",children:[l.jsx("strong",{className:"section-title",children:":"}),l.jsxs("div",{className:"address-details",children:[l.jsx("span",{children:g.address.governorate}),g.address.city&&l.jsxs("span",{children:[" - ",g.address.city]}),g.address.street&&l.jsxs("span",{children:[" - ",g.address.street]}),g.address.building&&l.jsxs("span",{children:[" -  ",g.address.building]}),g.address.siteNumber&&l.jsxs("span",{children:[" -  ",g.address.siteNumber]}),g.address.landmark&&l.jsxs("span",{children:[" -  ",g.address.landmark]})]})]}),l.jsxs("div",{className:"detail-row password-row",children:[l.jsx("span",{className:"detail-label",children:" :"}),l.jsxs("div",{className:"password-display",children:[l.jsx("span",{className:"detail-value password-value",children:i[g.id||""]?g.password||" ":""}),l.jsx("button",{type:"button",onClick:()=>d(g.id||""),className:"toggle-password-btn",title:i[g.id||""]?"":"",children:i[g.id||""]?l.jsx(o2,{size:16}):l.jsx($h,{size:16})})]})]}),l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{className:"detail-label",children:" :"}),l.jsx("span",{className:"detail-value",children:m(g.createdAt)})]})]})]},g.id)})})})]})},T2=({onLogout:t,onBack:e})=>{var Dn,Wo,Ho,es;const{student:n}=Ms(),[r,s]=$.useState([]),[i,a]=$.useState({}),[c,u]=$.useState(null),[d,p]=$.useState("requests"),[m,g]=$.useState(null),[_,P]=$.useState(null),[R,L]=$.useState(null),[N,x]=$.useState(null),[E,O]=$.useState(null),[b,U]=$.useState(!1),[w,y]=$.useState(!1),[I,S]=$.useState(""),[A,j]=$.useState(""),[C,ae]=$.useState(""),[Xe,Be]=$.useState(""),[qt,G]=$.useState(""),[B,ee]=$.useState(null),[_e,k]=$.useState(""),[q,Z]=$.useState(""),[se,me]=$.useState(""),[K,Wt]=$.useState(!0),[nr,Do]=$.useState(null),[qi,Kr]=$.useState([]),[It,Vo]=$.useState(""),[xu,jn]=$.useState(!1),[le,dt]=$.useState(null),[$e,Ze]=$.useState(""),[rr,Oo]=$.useState("");$.useEffect(()=>{if(!(n!=null&&n.id))return;(async()=>{if(!await Iu(n.id||"")){e();return}Wt(!1)})()},[n,e]),$.useEffect(()=>{if(K)return;const T=zR(Ee=>{s(Ee),(async()=>{const At={};for(const kt of Ee)if(!At[kt.studentId])try{const Pt=await Dp(kt.studentId);Pt&&(At[kt.studentId]=Pt)}catch(Pt){console.error(`Error fetching student ${kt.studentId}:`,Pt)}a(At)})()});return(async()=>{try{const Ee=await Q0();g(Ee||{serviceName:"    ",prices:{1:1750,2:3440,3:5160,4:6820,5:8450,6:10200,7:11885,8:13580,9:15210,10:16900},paymentMethods:{instaPay:"01017180923",cashWallet:"01050889591"}})}catch(Ee){console.error("Error loading book config:",Ee)}})(),(async()=>{try{const Ee=await Y0();P(Ee||{prices:{}})}catch(Ee){console.error("Error loading fees config:",Ee)}})(),(async()=>{try{const Ee=await J0();L(Ee||{serviceName:"    ",assignments:[],paymentMethods:{instaPay:"01017180923",cashWallet:"01050889591"}})}catch(Ee){console.error("Error loading assignments config:",Ee)}})(),(async()=>{var Ee;try{console.log("Loading certificates config in AdminDashboard...");const ue=await X0();if(ue)console.log("Setting certificates config in AdminDashboard:",((Ee=ue.certificates)==null?void 0:Ee.length)||0,"certificates"),x(ue);else{console.log("No config found, using default certificates config");const At={certificates:[{id:"1",name:"  ",price:4e3,imageUrl:"/certificat.jpeg",description:""},{id:"2",name:"  ",price:5e3,imageUrl:"/service.jpg",description:`  

                             `,fields:[{name:"qualification_name",label:" ",type:"text",required:!0,placeholder:":   /  "},{name:"qualification_date",label:"     ",type:"date",required:!0,placeholder:":  2022 /  2024"}]},{id:"3",name:"  ",price:5e3,imageUrl:"/omaya.jpeg",description:`  

                          `},{id:"4",name:"  ()",price:5e3,imageUrl:"/exprince.jpg",description:`  ( )

                 `,fields:[{name:"work_start_date",label:"   ",type:"date",required:!0,placeholder:"mm/dd/yyyy"},{name:"work_end_date",label:"   ",type:"date",required:!0,placeholder:"mm/dd/yyyy"},{name:"subject_specialization",label:" ",type:"text",required:!0,placeholder:":  -  -  . ..."}]}],paymentMethods:{instaPay:"01017180923",cashWallet:"01050889591"}};try{const kt={certificates:At.certificates.map(Pt=>({id:Pt.id,name:Pt.name,price:Pt.price,imageUrl:Pt.imageUrl||"",description:Pt.description||"",fields:Pt.fields||[]})),paymentMethods:At.paymentMethods};await sv(kt),console.log("Default certificates config saved to Firebase")}catch(kt){console.error("Error saving default config:",kt)}x(At)}}catch(ue){console.error("Error loading certificates config:",ue)}})(),(async()=>{var Ee;try{console.log("Loading digital transformation config in AdminDashboard...");const ue=await Z0();if(ue)console.log("Setting digital transformation config in AdminDashboard:",((Ee=ue.transformationTypes)==null?void 0:Ee.length)||0,"types"),O(ue);else{console.log("No config found, using default digital transformation config");const At={transformationTypes:[],examLanguages:[{id:"1",name:" "}],paymentMethods:{instaPay:"01017180923",cashWallet:"01050889591"}};try{await iv(At),console.log("Default digital transformation config saved to Firebase")}catch(kt){console.error("Error saving default config:",kt)}O(At)}}catch(ue){console.error("Error loading digital transformation config:",ue)}})(),()=>T()},[K]),$.useEffect(()=>{if(K||d!=="users"){Kr([]);return}if(It.trim())return;const T=K0(H=>{console.log("Students loaded:",H.length),Kr(H)},H=>{console.error("Error subscribing to students:",H),alert("     ")});return()=>T()},[K,d,It]);const Wi=async(T,H,we)=>{try{await BR(T,H,we)}catch(ye){alert(ye.message||"     ")}},Su=async()=>{if(m)try{await $R(m),U(!1),alert("   ")}catch(T){alert(T.message||"    ")}},Qr=async()=>{if(_)try{await qR(_),y(!1),alert("    ")}catch(T){alert(T.message||"    ")}},Lo=async()=>{if(R)try{await WR(R),alert("    ")}catch(T){alert(T.message||"    ")}},Mo=()=>{if(!I||!A||!R)return;const T=parseFloat(A);if(isNaN(T)||T<=0){alert("   ");return}const H={id:Date.now().toString(),name:I,price:T};L({...R,assignments:[...R.assignments,H]}),S(""),j("")},Hi=T=>{R&&L({...R,assignments:R.assignments.filter(H=>H.id!==T)})},Nu=async()=>{if(N)try{await sv(N),alert("    ")}catch(T){alert(T.message||"    ")}},Cu=()=>{if(!C||!Xe||!N)return;const T=parseFloat(Xe);if(isNaN(T)||T<=0){alert("   ");return}const H={id:Date.now().toString(),name:C,price:T,imageUrl:"",description:qt||void 0};x({...N,certificates:[...N.certificates,H]}),ae(""),Be(""),G("")},Fo=T=>{N&&confirm("      ")&&x({...N,certificates:N.certificates.filter(H=>H.id!==T)})},Uo=async()=>{if(E)try{await iv(E),alert("   !")}catch(T){alert(T.message||"    ")}},Yr=()=>{if(!_e||!q||!E)return;const T=parseFloat(q);if(isNaN(T)||T<=0){alert("   ");return}const H={id:Date.now().toString(),name:_e,price:T};O({...E,transformationTypes:[...E.transformationTypes,H]}),k(""),Z("")},Gi=T=>{E&&confirm("      ")&&O({...E,transformationTypes:E.transformationTypes.filter(H=>H.id!==T)})},Ki=()=>{if(!se||!E)return;const T={id:Date.now().toString(),name:se};O({...E,examLanguages:[...E.examLanguages||[],T]}),me("")},bn=T=>{E&&confirm("       ")&&O({...E,examLanguages:(E.examLanguages||[]).filter(H=>H.id!==T)})},zo=T=>{ee({...T,fields:T.fields?[...T.fields]:void 0})},Fs=()=>{!B||!N||(x({...N,certificates:N.certificates.map(T=>T.id===B.id?B:T)}),ee(null))},Qi=(T,H)=>{if(!B||B.id!==T){console.error("Certificate ID mismatch or editingCertificate is null");return}if(!H.type.startsWith("image/")){alert("    ");return}if(H.size>5*1024*1024){alert("   .   5 ");return}const we=new FileReader;we.onloadend=()=>{const ye=we.result;ye&&(ee({...B,imageUrl:ye}),console.log("Image uploaded successfully"))},we.onerror=()=>{alert("    ")},we.readAsDataURL(H)},Jr=()=>{if(!$e||!rr||!_)return;const T=parseFloat(rr);if(isNaN(T)||T<=0){alert("   ");return}P({..._,prices:{..._.prices,[$e]:T}}),Ze(""),Oo("")},Bo=T=>{if(!_)return;const H={..._.prices};delete H[T],P({..._,prices:H})},st=async()=>{if(!It.trim()){Kr([]);return}try{const T=await VR(It);console.log("Search results:",T.length),Kr(T)}catch(T){console.error("Search error:",T),alert(T.message||"   ")}};$.useEffect(()=>{if(d!=="users"||K||!It.trim())return;const T=setTimeout(()=>{st()},300);return()=>clearTimeout(T)},[It,d,K]);const $o=T=>{dt({...T}),jn(!0)},Xr=async()=>{if(!(!le||!le.id))try{await G0(le.id,le),jn(!1),alert("    ")}catch(T){alert(T.message||"    ")}},Zr=T=>r.filter(H=>H.studentId===T),Yi=T=>T==="3"&&m?m.serviceName:T==="5"&&R?R.serviceName:{1:" ",2:" ",3:"  ",4:"  ",5:"  ",6:" ",7:"   ",8:" ",9:" ",10:" "}[T]||` ${T}`,qo=T=>{switch(T){case"completed":return l.jsxs("span",{className:"status-badge status-completed",children:[l.jsx(As,{size:14})," "]});case"rejected":return l.jsxs("span",{className:"status-badge status-rejected",children:[l.jsx(lv,{size:14})," "]});default:return l.jsxs("span",{className:"status-badge status-pending",children:[l.jsx(a2,{size:14}),"  "]})}};return K?l.jsx("div",{className:"admin-dashboard-page",children:l.jsx("div",{className:"loading-container",children:l.jsx("p",{children:" ..."})})}):l.jsxs("div",{className:"admin-dashboard-page",children:[l.jsx("div",{className:"admin-header",children:l.jsxs("div",{className:"admin-header-content",children:[l.jsx("h1",{children:"  "}),l.jsxs("div",{className:"admin-actions",children:[l.jsx("button",{onClick:e,className:"back-button",children:""}),l.jsxs("button",{onClick:t,className:"logout-button",children:[l.jsx(cT,{size:18})," "]})]})]})}),l.jsxs("div",{className:"admin-tabs",children:[l.jsx("button",{className:`tab-button ${d==="requests"?"active":""}`,onClick:()=>p("requests"),children:" "}),l.jsxs("button",{className:`tab-button ${d==="books"?"active":""}`,onClick:()=>p("books"),children:[l.jsx(Wh,{size:18})," "]}),l.jsxs("button",{className:`tab-button ${d==="fees"?"active":""}`,onClick:()=>p("fees"),children:[l.jsx(Bh,{size:18}),"   "]}),l.jsxs("button",{className:`tab-button ${d==="assignments"?"active":""}`,onClick:()=>p("assignments"),children:[l.jsx(qh,{size:18})," "]}),l.jsxs("button",{className:`tab-button ${d==="certificates"?"active":""}`,onClick:()=>p("certificates"),children:[l.jsx(yi,{size:18})," "]}),l.jsxs("button",{className:`tab-button ${d==="digitalTransformation"?"active":""}`,onClick:()=>p("digitalTransformation"),children:[l.jsx(fT,{size:18})," "]}),l.jsxs("button",{className:`tab-button ${d==="users"?"active":""}`,onClick:()=>p("users"),children:[l.jsx(hT,{size:18}),""]})]}),d==="requests"&&l.jsx("div",{className:"admin-content",children:l.jsxs("div",{className:"requests-section",children:[l.jsxs("h2",{children:["  (",r.length,")"]}),l.jsx("div",{className:"services-files-grid",children:Op.map(T=>{const H=r.filter(ue=>ue.serviceId===T.id),we=H.filter(ue=>ue.status==="pending").length,ye=H.length,nn=nr===T.id;let ht=T.nameAr;T.id==="3"&&m?ht=m.serviceName:T.id==="5"&&R&&(ht=R.serviceName);const Ee=()=>{const ue={size:32};switch(T.icon){case"clipboard-list":return l.jsx(oT,{...ue});case"user":return l.jsx(Mp,{...ue});case"package":return l.jsx(Wh,{...ue});case"credit-card":return l.jsx(Bh,{...ue});case"book-open":return l.jsx(aT,{...ue});case"graduation-cap":return l.jsx(l2,{...ue});case"file-check":return l.jsx(qh,{...ue});case"award":return l.jsx(yi,{...ue});default:return l.jsx(Lp,{...ue})}};return l.jsxs("div",{className:`service-file ${nn?"selected":""}`,onClick:()=>Do(nn?null:T.id),children:[l.jsx("div",{className:"service-file-icon",style:{color:T.color},children:Ee()}),l.jsx("div",{className:"service-file-name",children:ht}),l.jsxs("div",{className:"service-file-stats",children:[l.jsxs("div",{className:"service-file-stat-item service-file-stat-new",children:[l.jsx("span",{className:"stat-label",children:""}),l.jsx("span",{className:"stat-value",children:we})]}),l.jsxs("div",{className:"service-file-stat-item service-file-stat-total",children:[l.jsx("span",{className:"stat-label",children:""}),l.jsx("span",{className:"stat-value",children:ye})]})]})]},T.id)})}),nr&&l.jsxs("div",{className:"selected-service-requests",children:[l.jsxs("div",{className:"selected-service-header",children:[l.jsx("h3",{children:Yi(nr)}),l.jsx("button",{onClick:()=>Do(null),className:"close-service-button",children:l.jsx(Ht,{size:20})})]}),l.jsx("div",{className:"requests-grid",children:r.filter(T=>T.serviceId===nr).length===0?l.jsx("div",{className:"no-requests-message",children:l.jsx("p",{children:"    "})}):r.filter(T=>T.serviceId===nr).map(T=>{var we,ye,nn;const H=i[T.studentId];return l.jsxs("div",{className:"request-card",children:[l.jsxs("div",{className:"request-header",children:[l.jsxs("div",{className:"request-info",children:[l.jsx("h3",{children:Yi(T.serviceId)}),qo(T.status)]}),l.jsx("div",{className:"request-actions",children:l.jsx("button",{onClick:()=>u(T),className:"view-button",title:" ",children:l.jsx($h,{size:18})})})]}),l.jsxs("div",{className:"request-card-body",children:[T.serviceId==="6"&&((ye=(we=T.data)==null?void 0:we.selectedCertificate)==null?void 0:ye.imageUrl)&&l.jsx("div",{className:"certificate-image-preview",children:l.jsx("img",{src:T.data.selectedCertificate.imageUrl,alt:T.data.selectedCertificate.name,className:"certificate-thumbnail-small"})}),l.jsxs("div",{className:"request-details",children:[l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{className:"detail-label",children:":"}),l.jsx("span",{className:"detail-value",children:(H==null?void 0:H.fullNameArabic)||" "})]}),l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{className:"detail-label",children:":"}),l.jsx("span",{className:"detail-value",children:(H==null?void 0:H.email)||" "})]}),l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{className:"detail-label",children:":"}),l.jsx("span",{className:"detail-value",children:T.createdAt?new Date(T.createdAt).toLocaleString("ar-EG"):" "})]}),T.paymentMethod&&l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{className:"detail-label",children:" :"}),l.jsx("span",{className:"detail-value",children:T.paymentMethod})]}),T.serviceId==="6"&&((nn=T.data)==null?void 0:nn.selectedCertificate)&&l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{className:"detail-label",children:" :"}),l.jsx("span",{className:"detail-value",children:T.data.selectedCertificate.name})]})]})]}),l.jsxs("div",{className:"request-status-actions",children:[l.jsxs("button",{onClick:()=>Wi(T.id||"","completed",T.serviceId),className:`status-button ${T.status==="completed"?"active":""}`,disabled:T.status==="completed",children:[l.jsx(As,{size:16}),""]}),l.jsxs("button",{onClick:()=>Wi(T.id||"","rejected",T.serviceId),className:`status-button reject ${T.status==="rejected"?"active":""}`,disabled:T.status==="rejected",children:[l.jsx(lv,{size:16}),""]})]})]},T.id)})})]})]})}),d==="books"&&l.jsx("div",{className:"admin-content",children:l.jsxs("div",{className:"books-section",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("h2",{children:"  "}),b?l.jsxs("div",{className:"edit-actions",children:[l.jsxs("button",{onClick:Su,className:"save-button",children:[l.jsx(is,{size:18}),""]}),l.jsxs("button",{onClick:()=>U(!1),className:"cancel-edit-button",children:[l.jsx(Ht,{size:18}),""]})]}):l.jsxs("button",{onClick:()=>U(!0),className:"edit-button",children:[l.jsx(Na,{size:18}),""]})]}),m&&l.jsxs("div",{className:"book-config-form",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:" "}),b?l.jsx("input",{type:"text",value:m.serviceName,onChange:T=>g({...m,serviceName:T.target.value}),className:"config-input"}):l.jsx("div",{className:"config-display",children:m.serviceName})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:" "}),l.jsx("div",{className:"prices-grid",children:Object.entries(m.prices).map(([T,H])=>l.jsxs("div",{className:"price-item",children:[l.jsxs("label",{children:["  ",T==="1"?"":`${T} `]}),b?l.jsx("input",{type:"number",value:H,onChange:we=>g({...m,prices:{...m.prices,[T]:parseInt(we.target.value)||0}}),className:"price-input"}):l.jsxs("div",{className:"price-display",children:[H," "]})]},T))})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:" "}),l.jsxs("div",{className:"payment-numbers",children:[l.jsxs("div",{className:"payment-item",children:[l.jsx("label",{children:"instaPay"}),b?l.jsx("input",{type:"text",value:m.paymentMethods.instaPay,onChange:T=>g({...m,paymentMethods:{...m.paymentMethods,instaPay:T.target.value}}),className:"config-input"}):l.jsx("div",{className:"config-display",children:m.paymentMethods.instaPay})]}),l.jsxs("div",{className:"payment-item",children:[l.jsx("label",{children:" "}),b?l.jsx("input",{type:"text",value:m.paymentMethods.cashWallet,onChange:T=>g({...m,paymentMethods:{...m.paymentMethods,cashWallet:T.target.value}}),className:"config-input"}):l.jsx("div",{className:"config-display",children:m.paymentMethods.cashWallet})]})]})]})]})]})}),d==="fees"&&l.jsx("div",{className:"admin-content",children:l.jsxs("div",{className:"books-section",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("h2",{children:"   "}),l.jsx("div",{className:"edit-actions",children:w?l.jsxs(l.Fragment,{children:[l.jsxs("button",{onClick:Qr,className:"save-button",children:[l.jsx(is,{size:18}),""]}),l.jsxs("button",{onClick:()=>y(!1),className:"cancel-edit-button",children:[l.jsx(Ht,{size:18}),""]})]}):l.jsxs("button",{onClick:()=>y(!0),className:"edit-button",children:[l.jsx(Na,{size:18}),""]})})]}),_&&l.jsx("div",{className:"book-config-form",children:l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"    "}),l.jsx("div",{className:"prices-grid",children:Object.entries(_.prices).sort(([T],[H])=>parseInt(H)-parseInt(T)).map(([T,H])=>l.jsxs("div",{className:"price-item",children:[l.jsx("label",{children:T}),w?l.jsxs("div",{className:"price-item-edit",children:[l.jsx("input",{type:"number",value:H,onChange:we=>{const ye=parseFloat(we.target.value);!isNaN(ye)&&ye>=0&&P({..._,prices:{..._.prices,[T]:ye}})},className:"price-input",min:"0",step:"0.01"}),l.jsx("button",{onClick:()=>Bo(T),className:"remove-price-button",title:"",children:l.jsx(Ht,{size:16})})]}):l.jsxs("div",{className:"price-display",children:[H," "]})]},T))}),w&&l.jsx("div",{className:"add-price-section",children:l.jsxs("div",{className:"add-price-form",children:[l.jsx("input",{type:"text",placeholder:"  (: 2026)",value:$e,onChange:T=>Ze(T.target.value),className:"config-input",style:{width:"200px"}}),l.jsx("input",{type:"number",placeholder:" ",value:rr,onChange:T=>Oo(T.target.value),className:"config-input",style:{width:"200px"},min:"0",step:"0.01"}),l.jsx("button",{onClick:Jr,className:"add-price-button",children:""})]})})]})})]})}),d==="assignments"&&l.jsx("div",{className:"admin-content",children:l.jsxs("div",{className:"books-section",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("h2",{children:"  "}),l.jsxs("button",{onClick:Lo,className:"save-button",children:[l.jsx(is,{size:18}),""]})]}),R&&l.jsxs("div",{className:"book-config-form",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:" "}),l.jsx("input",{type:"text",value:R.serviceName,onChange:T=>L({...R,serviceName:T.target.value}),className:"config-input",placeholder:"    "})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:" "}),l.jsx("div",{className:"assignments-list",children:R.assignments.length===0?l.jsx("div",{className:"no-assignments-message",children:l.jsx("p",{children:"   "})}):R.assignments.map(T=>l.jsxs("div",{className:"assignment-item",children:[l.jsxs("div",{className:"assignment-info",children:[l.jsx("span",{className:"assignment-name",children:T.name}),l.jsxs("span",{className:"assignment-price",children:[T.price," "]})]}),l.jsx("button",{onClick:()=>Hi(T.id),className:"remove-assignment-button",title:"",children:l.jsx(Ht,{size:16})})]},T.id))}),l.jsx("div",{className:"add-assignment-section",children:l.jsxs("div",{className:"add-assignment-form",children:[l.jsx("input",{type:"text",placeholder:" ",value:I,onChange:T=>S(T.target.value),className:"config-input",style:{width:"300px"}}),l.jsx("input",{type:"number",placeholder:" ",value:A,onChange:T=>j(T.target.value),className:"config-input",style:{width:"200px"},min:"0",step:"0.01"}),l.jsx("button",{onClick:Mo,className:"add-price-button",children:" "})]})})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:" "}),l.jsxs("div",{className:"payment-numbers",children:[l.jsxs("div",{className:"payment-item",children:[l.jsx("label",{children:"instaPay"}),l.jsx("input",{type:"text",value:R.paymentMethods.instaPay,onChange:T=>L({...R,paymentMethods:{...R.paymentMethods,instaPay:T.target.value}}),className:"config-input"})]}),l.jsxs("div",{className:"payment-item",children:[l.jsx("label",{children:" "}),l.jsx("input",{type:"text",value:R.paymentMethods.cashWallet,onChange:T=>L({...R,paymentMethods:{...R.paymentMethods,cashWallet:T.target.value}}),className:"config-input"})]})]})]})]})]})}),d==="certificates"&&l.jsx("div",{className:"admin-content",children:l.jsxs("div",{className:"books-section",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("h2",{children:"  "}),l.jsxs("button",{onClick:Nu,className:"save-button",children:[l.jsx(is,{size:18}),""]})]}),N&&l.jsxs("div",{className:"book-config-form",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:" "}),l.jsx("div",{className:"certificates-list",children:N.certificates.map(T=>l.jsx("div",{className:"certificate-item-admin",children:(B==null?void 0:B.id)===T.id?l.jsxs("div",{className:"certificate-edit-form",children:[l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:" "}),l.jsx("input",{type:"text",value:B.name,onChange:H=>ee({...B,name:H.target.value}),className:"config-input"})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:" ()"}),l.jsx("input",{type:"number",value:B.price,onChange:H=>ee({...B,price:parseFloat(H.target.value)||0}),className:"config-input",min:"0",step:"0.01"})]})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:""}),l.jsxs("div",{className:"image-upload-section",children:[l.jsx("div",{style:{position:"relative",display:"flex",flexDirection:"column",gap:"12px",alignItems:"flex-start"},children:B.imageUrl?l.jsxs(l.Fragment,{children:[l.jsx("div",{style:{position:"relative",display:"inline-block"},children:l.jsx("img",{src:B.imageUrl,alt:B.name,className:"certificate-preview-image"})}),l.jsx("input",{type:"file",accept:"image/*",onChange:H=>{var ye;const we=(ye=H.target.files)==null?void 0:ye[0];we&&Qi(B.id,we),H.target&&(H.target.value="")},className:"file-input",id:`certificate-image-input-${B.id}`,style:{display:"none"}}),l.jsxs("label",{htmlFor:`certificate-image-input-${B.id}`,className:"change-image-button",title:" ",children:[l.jsx(uT,{size:16})," "]})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"no-image-placeholder",children:[l.jsx(ov,{size:48}),l.jsx("span",{children:"  "})]}),l.jsx("input",{type:"file",accept:"image/*",onChange:H=>{var ye;const we=(ye=H.target.files)==null?void 0:ye[0];we&&Qi(B.id,we),H.target&&(H.target.value="")},className:"file-input",id:`certificate-image-input-new-${B.id}`,style:{display:"none"}}),l.jsxs("label",{htmlFor:`certificate-image-input-new-${B.id}`,className:"change-image-button",title:" ",children:[l.jsx(ov,{size:16})," "]})]})}),l.jsx("small",{style:{color:"#64748b",fontSize:"12px",marginTop:"8px",display:"block"},children:"JPEG, PNG, JPG -   5 "})]})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"  ()"}),l.jsx("textarea",{value:B.description||"",onChange:H=>ee({...B,description:H.target.value}),className:"config-input",rows:4,placeholder:"      "})]}),l.jsxs("div",{className:"edit-actions",children:[l.jsxs("button",{onClick:Fs,className:"save-button",children:[l.jsx(is,{size:16})," "]}),l.jsxs("button",{onClick:()=>ee(null),className:"cancel-edit-button",children:[l.jsx(Ht,{size:16}),""]})]})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"certificate-info",children:[T.imageUrl&&l.jsx("img",{src:T.imageUrl,alt:T.name,className:"certificate-thumbnail"}),l.jsxs("div",{className:"certificate-details",children:[l.jsx("h3",{children:T.name}),l.jsxs("div",{className:"certificate-price",children:[T.price," "]}),T.description&&l.jsxs("div",{className:"certificate-description-preview",children:[T.description.substring(0,100),"..."]})]})]}),l.jsxs("div",{className:"certificate-actions",children:[l.jsx("button",{onClick:()=>zo(T),className:"edit-button",title:"",children:l.jsx(Na,{size:16})}),l.jsx("button",{onClick:()=>Fo(T.id),className:"remove-assignment-button",title:"",children:l.jsx(Ht,{size:16})})]})]})},T.id))}),l.jsxs("div",{className:"add-certificate-section",children:[l.jsx("h3",{children:"  "}),l.jsxs("div",{className:"add-certificate-form",children:[l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:" "}),l.jsx("input",{type:"text",placeholder:" ",value:C,onChange:T=>ae(T.target.value),className:"config-input"})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:" ()"}),l.jsx("input",{type:"number",placeholder:"",value:Xe,onChange:T=>Be(T.target.value),className:"config-input",min:"0",step:"0.01"})]})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"  ()"}),l.jsx("textarea",{placeholder:"   ",value:qt,onChange:T=>G(T.target.value),className:"config-input",rows:3})]}),l.jsx("button",{onClick:Cu,className:"add-price-button",children:" "})]})]})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:" "}),l.jsxs("div",{className:"payment-numbers",children:[l.jsxs("div",{className:"payment-item",children:[l.jsx("label",{children:"instaPay"}),l.jsx("input",{type:"text",value:N.paymentMethods.instaPay,onChange:T=>x({...N,paymentMethods:{...N.paymentMethods,instaPay:T.target.value}}),className:"config-input"})]}),l.jsxs("div",{className:"payment-item",children:[l.jsx("label",{children:" "}),l.jsx("input",{type:"text",value:N.paymentMethods.cashWallet,onChange:T=>x({...N,paymentMethods:{...N.paymentMethods,cashWallet:T.target.value}}),className:"config-input"})]})]})]})]})]})}),d==="users"&&l.jsx("div",{className:"admin-content",children:l.jsxs("div",{className:"users-section",children:[l.jsxs("h2",{children:[" (",qi.length,")"]}),l.jsx("div",{className:"search-bar",children:l.jsxs("div",{className:"search-input-wrapper",children:[l.jsx(dT,{size:20,className:"search-icon"}),l.jsx("input",{type:"text",placeholder:"  :          ...",value:It,onChange:T=>Vo(T.target.value),className:"search-input"})]})}),l.jsx("div",{className:"users-grid",children:qi.length===0?l.jsx("div",{className:"no-users-message",children:l.jsx("p",{children:"  "})}):qi.map(T=>{var ye,nn,ht,Ee;const H=Zr(T.id||""),we=It.trim()&&(T.nationalID&&T.nationalID===It.trim()||T.whatsappNumber&&T.whatsappNumber.includes(It.trim())||T.email&&T.email.toLowerCase()===It.trim().toLowerCase());return l.jsxs("div",{className:`user-card ${we?"highlighted-match":""}`,children:[l.jsxs("div",{className:"user-card-header",children:[l.jsxs("div",{className:"user-info",children:[l.jsx("h3",{children:T.fullNameArabic}),l.jsx("span",{className:"user-email",children:T.email})]}),l.jsx("button",{onClick:()=>$o(T),className:"edit-user-button",title:" ",children:l.jsx(Na,{size:18})})]}),l.jsxs("div",{className:"user-card-body",children:[l.jsxs("div",{className:"user-details-grid",children:[l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{className:"detail-label",children:" :"}),l.jsx("span",{className:"detail-value",children:T.vehicleNameEnglish||" "})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{className:"detail-label",children:" :"}),l.jsx("span",{className:"detail-value",children:T.whatsappNumber||" "})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{className:"detail-label",children:" :"}),l.jsx("span",{className:"detail-value",children:T.nationalID||" "})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{className:"detail-label",children:" :"}),l.jsx("span",{className:"detail-value",children:T.diplomaType||" "})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{className:"detail-label",children:":"}),l.jsx("span",{className:"detail-value",children:T.track||" "})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{className:"detail-label",children:" :"}),l.jsx("span",{className:"detail-value",children:T.diplomaYear||" "})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{className:"detail-label",children:":"}),l.jsx("span",{className:"detail-value",children:((ye=T.address)==null?void 0:ye.governorate)||" "})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{className:"detail-label",children:":"}),l.jsx("span",{className:"detail-value",children:((nn=T.address)==null?void 0:nn.city)||" "})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{className:"detail-label",children:":"}),l.jsx("span",{className:"detail-value",children:((ht=T.address)==null?void 0:ht.street)||" "})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{className:"detail-label",children:" :"}),l.jsx("span",{className:"detail-value",children:((Ee=T.address)==null?void 0:Ee.building)||" "})]})]}),l.jsxs("div",{className:"user-requests-section",children:[l.jsxs("h4",{children:[" (",H.length,")"]}),H.length===0?l.jsx("p",{className:"no-requests",children:"  "}):l.jsx("div",{className:"user-requests-list",children:H.map(ue=>l.jsxs("div",{className:"user-request-item",children:[l.jsxs("div",{className:"request-item-header",children:[l.jsx("span",{className:"request-service-name",children:Yi(ue.serviceId)}),qo(ue.status)]}),l.jsx("div",{className:"request-item-date",children:ue.createdAt?new Date(ue.createdAt).toLocaleDateString("ar-EG"):" "}),l.jsxs("button",{onClick:()=>u(ue),className:"view-request-button",children:[l.jsx($h,{size:16})," "]})]},ue.id))})]})]})]},T.id)})})]})}),xu&&le&&l.jsx("div",{className:"request-modal-overlay",onClick:()=>{jn(!1)},children:l.jsxs("div",{className:"request-modal",onClick:T=>T.stopPropagation(),children:[l.jsxs("div",{className:"modal-header",children:[l.jsx("h2",{children:"  "}),l.jsx("button",{onClick:()=>{jn(!1)},className:"close-button",children:l.jsx(Ht,{size:24})})]}),l.jsx("div",{className:"modal-content",children:l.jsxs("div",{className:"edit-student-form",children:[l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"  *"}),l.jsx("input",{type:"text",value:le.fullNameArabic||"",onChange:T=>dt({...le,fullNameArabic:T.target.value}),className:"form-input"})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:" "}),l.jsx("input",{type:"text",value:le.vehicleNameEnglish||"",onChange:T=>dt({...le,vehicleNameEnglish:T.target.value}),className:"form-input"})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"  *"}),l.jsx("input",{type:"text",value:le.whatsappNumber||"",onChange:T=>dt({...le,whatsappNumber:T.target.value}),className:"form-input"})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"  *"}),l.jsx("input",{type:"text",value:le.nationalID||"",onChange:T=>dt({...le,nationalID:T.target.value}),className:"form-input"})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:" *"}),l.jsx("input",{type:"email",value:le.email||"",onChange:T=>dt({...le,email:T.target.value}),className:"form-input"})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:" "}),l.jsx("input",{type:"text",value:le.diplomaType||"",onChange:T=>dt({...le,diplomaType:T.target.value}),className:"form-input"})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:""}),l.jsx("input",{type:"text",value:le.track||"",onChange:T=>dt({...le,track:T.target.value}),className:"form-input"})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:" "}),l.jsx("input",{type:"text",value:le.diplomaYear||"",onChange:T=>dt({...le,diplomaYear:T.target.value}),className:"form-input"})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:""}),l.jsx("input",{type:"text",value:((Dn=le.address)==null?void 0:Dn.governorate)||"",onChange:T=>dt({...le,address:{...le.address,governorate:T.target.value}}),className:"form-input"})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:""}),l.jsx("input",{type:"text",value:((Wo=le.address)==null?void 0:Wo.city)||"",onChange:T=>dt({...le,address:{...le.address,city:T.target.value}}),className:"form-input"})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:""}),l.jsx("input",{type:"text",value:((Ho=le.address)==null?void 0:Ho.street)||"",onChange:T=>dt({...le,address:{...le.address,street:T.target.value}}),className:"form-input"})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:" "}),l.jsx("input",{type:"text",value:((es=le.address)==null?void 0:es.building)||"",onChange:T=>dt({...le,address:{...le.address,building:T.target.value}}),className:"form-input"})]})]}),l.jsxs("div",{className:"modal-actions",children:[l.jsxs("button",{onClick:Xr,className:"save-button",children:[l.jsx(is,{size:18})," "]}),l.jsx("button",{onClick:()=>{jn(!1)},className:"cancel-button",children:""})]})]})})]})}),c&&l.jsx("div",{className:"request-modal-overlay",onClick:()=>u(null),children:l.jsxs("div",{className:"request-modal",onClick:T=>T.stopPropagation(),children:[l.jsxs("div",{className:"modal-header",children:[l.jsx("h2",{children:" "}),l.jsx("button",{onClick:()=>u(null),className:"close-button",children:l.jsx(Ht,{size:24})})]}),l.jsxs("div",{className:"modal-content",children:[l.jsxs("div",{className:"modal-section",children:[l.jsx("h3",{children:" "}),i[c.studentId]&&l.jsxs("div",{className:"user-info-grid",children:[l.jsxs("div",{className:"info-item",children:[l.jsx("span",{className:"info-label",children:":"}),l.jsx("span",{className:"info-value",children:i[c.studentId].fullNameArabic})]}),l.jsxs("div",{className:"info-item",children:[l.jsx("span",{className:"info-label",children:":"}),l.jsx("span",{className:"info-value",children:i[c.studentId].email})]}),l.jsxs("div",{className:"info-item",children:[l.jsx("span",{className:"info-label",children:":"}),l.jsx("span",{className:"info-value",children:i[c.studentId].whatsappNumber})]})]})]}),l.jsxs("div",{className:"modal-section",children:[l.jsx("h3",{children:" "}),l.jsx("div",{className:"request-data-grid",children:Object.entries(c.data).map(([T,H])=>l.jsxs("div",{className:"data-item",children:[l.jsxs("span",{className:"data-label",children:[T,":"]}),l.jsx("span",{className:"data-value",children:String(H)})]},T))})]}),c.documents&&c.documents.length>0&&l.jsxs("div",{className:"modal-section",children:[l.jsxs("h3",{children:[" (",c.documents.length,")"]}),l.jsx("div",{className:"documents-grid",children:c.documents.map((T,H)=>l.jsxs("div",{className:"document-item",children:[T.type!=="PDF"&&T.url?l.jsx("img",{src:T.url,alt:T.name,className:"document-image",onClick:()=>{const we=document.createElement("img");we.src=T.url,we.onload=()=>{const ye=window.open("","_blank");ye&&ye.document.write(`
                                    <html>
                                      <head>
                                        <title>${T.name}</title>
                                        <style>
                                          body { margin: 0; padding: 20px; display: flex; justify-content: center; align-items: center; min-height: 100vh; background: #f5f5f5; }
                                          img { max-width: 100%; max-height: 100vh; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.2); }
                                        </style>
                                      </head>
                                      <body>
                                        <img src="${T.url}" alt="${T.name}" />
                                      </body>
                                    </html>
                                  `)}},style:{cursor:"pointer"}}):l.jsx("div",{className:"document-placeholder",children:"PDF"}),l.jsx("span",{className:"document-name",children:T.name})]},H))})]})]})]})}),d==="digitalTransformation"&&l.jsx("div",{className:"admin-content",children:l.jsxs("div",{className:"books-section",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("h2",{children:"   "}),l.jsxs("button",{onClick:Uo,className:"save-button",children:[l.jsx(is,{size:18}),""]})]}),E&&l.jsxs("div",{className:"book-config-form",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"  "}),l.jsx("div",{className:"transformation-types-list",children:E.transformationTypes.length>0?E.transformationTypes.map(T=>l.jsxs("div",{className:"transformation-type-item",children:[l.jsxs("div",{className:"type-info",children:[l.jsx("div",{className:"type-name",children:T.name}),l.jsxs("div",{className:"type-price",children:[T.price," "]})]}),l.jsx("button",{onClick:()=>Gi(T.id),className:"remove-assignment-button",title:"",children:l.jsx(Ht,{size:16})})]},T.id)):l.jsx("div",{className:"no-items-message",children:"   "})}),l.jsx("div",{className:"add-transformation-type-section",children:l.jsxs("div",{className:"add-transformation-type-form",children:[l.jsx("input",{type:"text",placeholder:"    ",value:_e,onChange:T=>k(T.target.value),className:"config-input",style:{width:"300px"}}),l.jsx("input",{type:"number",placeholder:" ",value:q,onChange:T=>Z(T.target.value),className:"config-input",style:{width:"200px"},min:"0",step:"0.01"}),l.jsx("button",{onClick:Yr,className:"add-price-button",children:" "})]})})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:" "}),l.jsx("div",{className:"exam-languages-list",children:(E.examLanguages||[]).length>0?(E.examLanguages||[]).map(T=>l.jsxs("div",{className:"exam-language-item",children:[l.jsx("div",{className:"language-name",children:T.name}),l.jsx("button",{onClick:()=>bn(T.id),className:"remove-assignment-button",title:"",children:l.jsx(Ht,{size:16})})]},T.id)):l.jsx("div",{className:"no-items-message",children:"   "})}),l.jsx("div",{className:"add-exam-language-section",children:l.jsxs("div",{className:"add-exam-language-form",children:[l.jsx("input",{type:"text",placeholder:"  (:  )",value:se,onChange:T=>me(T.target.value),className:"config-input",style:{width:"300px"}}),l.jsx("button",{onClick:Ki,className:"add-price-button",children:" "})]})})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:" "}),l.jsxs("div",{className:"payment-numbers",children:[l.jsxs("div",{className:"payment-item",children:[l.jsx("label",{children:"instaPay"}),l.jsx("input",{type:"text",value:E.paymentMethods.instaPay,onChange:T=>O({...E,paymentMethods:{...E.paymentMethods,instaPay:T.target.value}}),className:"config-input"})]}),l.jsxs("div",{className:"payment-item",children:[l.jsx("label",{children:" "}),l.jsx("input",{type:"text",value:E.paymentMethods.cashWallet,onChange:T=>O({...E,paymentMethods:{...E.paymentMethods,cashWallet:T.target.value}}),className:"config-input"})]})]})]})]})]})})]})},I2=()=>{const{isLoggedIn:t,logout:e}=Ms(),[n,r]=$.useState(t?"dashboard":"login"),[s,i]=$.useState(""),a=()=>{r("dashboard")},c=()=>{r("dashboard")},u=N=>{i(N),r("service")},d=()=>{r("profile")},p=()=>{r("allUsers")},m=()=>{r("admin")},g=()=>{e(),r("login")},_=()=>{r("dashboard")},P=()=>{r("dashboard")},R=()=>{r("register")},L=()=>{r("login")};return l.jsxs("div",{className:"app",children:[n==="login"&&!t&&l.jsx(m2,{onLoginSuccess:a,onGoToRegister:R,onAdminLogin:m}),n==="register"&&!t&&l.jsx(p2,{onRegistrationSuccess:c,onGoToLogin:L}),n==="dashboard"&&t&&l.jsx(y2,{onServiceClick:u,onProfileClick:d,onLogout:g,onAllUsersClick:p,onAdminClick:m}),n==="allUsers"&&t&&l.jsx(E2,{onBack:_}),n==="service"&&t&&l.jsx(_2,{serviceId:s,onBack:_,onSubmitSuccess:P}),n==="profile"&&t&&l.jsx(w2,{onBack:_}),n==="admin"&&t&&l.jsx(T2,{onLogout:g,onBack:_})]})},x2=()=>l.jsx(HR,{children:l.jsx(I2,{})});Id.createRoot(document.getElementById("root")).render(l.jsx(GT.StrictMode,{children:l.jsx(x2,{})}));
