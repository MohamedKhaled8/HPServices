(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function A1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ov={exports:{}},Ac={},av={exports:{}},le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ua=Symbol.for("react.element"),k1=Symbol.for("react.portal"),R1=Symbol.for("react.fragment"),P1=Symbol.for("react.strict_mode"),b1=Symbol.for("react.profiler"),j1=Symbol.for("react.provider"),D1=Symbol.for("react.context"),V1=Symbol.for("react.forward_ref"),O1=Symbol.for("react.suspense"),L1=Symbol.for("react.memo"),M1=Symbol.for("react.lazy"),gm=Symbol.iterator;function F1(t){return t===null||typeof t!="object"?null:(t=gm&&t[gm]||t["@@iterator"],typeof t=="function"?t:null)}var lv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},cv=Object.assign,uv={};function xi(t,e,n){this.props=t,this.context=e,this.refs=uv,this.updater=n||lv}xi.prototype.isReactComponent={};xi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};xi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function dv(){}dv.prototype=xi.prototype;function Mh(t,e,n){this.props=t,this.context=e,this.refs=uv,this.updater=n||lv}var Fh=Mh.prototype=new dv;Fh.constructor=Mh;cv(Fh,xi.prototype);Fh.isPureReactComponent=!0;var ym=Array.isArray,hv=Object.prototype.hasOwnProperty,Uh={current:null},fv={key:!0,ref:!0,__self:!0,__source:!0};function pv(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)hv.call(e,r)&&!fv.hasOwnProperty(r)&&(s[r]=e[r]);var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){for(var u=Array(c),d=0;d<c;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)s[r]===void 0&&(s[r]=c[r]);return{$$typeof:ua,type:t,key:i,ref:o,props:s,_owner:Uh.current}}function U1(t,e){return{$$typeof:ua,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function zh(t){return typeof t=="object"&&t!==null&&t.$$typeof===ua}function z1(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var vm=/\/+/g;function Pu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?z1(""+t.key):e.toString(36)}function fl(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ua:case k1:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Pu(o,0):r,ym(s)?(n="",t!=null&&(n=t.replace(vm,"$&/")+"/"),fl(s,e,n,"",function(d){return d})):s!=null&&(zh(s)&&(s=U1(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(vm,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",ym(t))for(var c=0;c<t.length;c++){i=t[c];var u=r+Pu(i,c);o+=fl(i,e,n,u,s)}else if(u=F1(t),typeof u=="function")for(t=u.call(t),c=0;!(i=t.next()).done;)i=i.value,u=r+Pu(i,c++),o+=fl(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function qa(t,e,n){if(t==null)return t;var r=[],s=0;return fl(t,r,"","",function(i){return e.call(n,i,s++)}),r}function B1(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Tt={current:null},pl={transition:null},$1={ReactCurrentDispatcher:Tt,ReactCurrentBatchConfig:pl,ReactCurrentOwner:Uh};function mv(){throw Error("act(...) is not supported in production builds of React.")}le.Children={map:qa,forEach:function(t,e,n){qa(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return qa(t,function(){e++}),e},toArray:function(t){return qa(t,function(e){return e})||[]},only:function(t){if(!zh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};le.Component=xi;le.Fragment=R1;le.Profiler=b1;le.PureComponent=Mh;le.StrictMode=P1;le.Suspense=O1;le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$1;le.act=mv;le.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=cv({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Uh.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in e)hv.call(e,u)&&!fv.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&c!==void 0?c[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){c=Array(u);for(var d=0;d<u;d++)c[d]=arguments[d+2];r.children=c}return{$$typeof:ua,type:t.type,key:s,ref:i,props:r,_owner:o}};le.createContext=function(t){return t={$$typeof:D1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:j1,_context:t},t.Consumer=t};le.createElement=pv;le.createFactory=function(t){var e=pv.bind(null,t);return e.type=t,e};le.createRef=function(){return{current:null}};le.forwardRef=function(t){return{$$typeof:V1,render:t}};le.isValidElement=zh;le.lazy=function(t){return{$$typeof:M1,_payload:{_status:-1,_result:t},_init:B1}};le.memo=function(t,e){return{$$typeof:L1,type:t,compare:e===void 0?null:e}};le.startTransition=function(t){var e=pl.transition;pl.transition={};try{t()}finally{pl.transition=e}};le.unstable_act=mv;le.useCallback=function(t,e){return Tt.current.useCallback(t,e)};le.useContext=function(t){return Tt.current.useContext(t)};le.useDebugValue=function(){};le.useDeferredValue=function(t){return Tt.current.useDeferredValue(t)};le.useEffect=function(t,e){return Tt.current.useEffect(t,e)};le.useId=function(){return Tt.current.useId()};le.useImperativeHandle=function(t,e,n){return Tt.current.useImperativeHandle(t,e,n)};le.useInsertionEffect=function(t,e){return Tt.current.useInsertionEffect(t,e)};le.useLayoutEffect=function(t,e){return Tt.current.useLayoutEffect(t,e)};le.useMemo=function(t,e){return Tt.current.useMemo(t,e)};le.useReducer=function(t,e,n){return Tt.current.useReducer(t,e,n)};le.useRef=function(t){return Tt.current.useRef(t)};le.useState=function(t){return Tt.current.useState(t)};le.useSyncExternalStore=function(t,e,n){return Tt.current.useSyncExternalStore(t,e,n)};le.useTransition=function(){return Tt.current.useTransition()};le.version="18.3.1";av.exports=le;var $=av.exports;const q1=A1($);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H1=$,W1=Symbol.for("react.element"),G1=Symbol.for("react.fragment"),K1=Object.prototype.hasOwnProperty,Q1=H1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Y1={key:!0,ref:!0,__self:!0,__source:!0};function gv(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)K1.call(e,r)&&!Y1.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:W1,type:t,key:i,ref:o,props:s,_owner:Q1.current}}Ac.Fragment=G1;Ac.jsx=gv;Ac.jsxs=gv;ov.exports=Ac;var l=ov.exports,md={},yv={exports:{}},Lt={},vv={exports:{}},_v={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(H,A){var z=H.length;H.push(A);e:for(;0<z;){var Y=z-1>>>1,Z=H[Y];if(0<s(Z,A))H[Y]=A,H[z]=Z,z=Y;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var A=H[0],z=H.pop();if(z!==A){H[0]=z;e:for(var Y=0,Z=H.length,Te=Z>>>1;Y<Te;){var J=2*(Y+1)-1,Ie=H[J],Pt=J+1,cn=H[Pt];if(0>s(Ie,z))Pt<Z&&0>s(cn,Ie)?(H[Y]=cn,H[Pt]=z,Y=Pt):(H[Y]=Ie,H[J]=z,Y=J);else if(Pt<Z&&0>s(cn,z))H[Y]=cn,H[Pt]=z,Y=Pt;else break e}}return A}function s(H,A){var z=H.sortIndex-A.sortIndex;return z!==0?z:H.id-A.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var u=[],d=[],p=1,m=null,g=3,_=!1,R=!1,P=!1,L=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(H){for(var A=n(d);A!==null;){if(A.callback===null)r(d);else if(A.startTime<=H)r(d),A.sortIndex=A.expirationTime,e(u,A);else break;A=n(d)}}function O(H){if(P=!1,x(H),!R)if(n(u)!==null)R=!0,ln(j);else{var A=n(d);A!==null&&re(O,A.startTime-H)}}function j(H,A){R=!1,P&&(P=!1,S(y),y=-1),_=!0;var z=g;try{for(x(A),m=n(u);m!==null&&(!(m.expirationTime>A)||H&&!k());){var Y=m.callback;if(typeof Y=="function"){m.callback=null,g=m.priorityLevel;var Z=Y(m.expirationTime<=A);A=t.unstable_now(),typeof Z=="function"?m.callback=Z:m===n(u)&&r(u),x(A)}else r(u);m=n(u)}if(m!==null)var Te=!0;else{var J=n(d);J!==null&&re(O,J.startTime-A),Te=!1}return Te}finally{m=null,g=z,_=!1}}var U=!1,w=null,y=-1,E=5,I=-1;function k(){return!(t.unstable_now()-I<E)}function b(){if(w!==null){var H=t.unstable_now();I=H;var A=!0;try{A=w(!0,H)}finally{A?N():(U=!1,w=null)}}else U=!1}var N;if(typeof T=="function")N=function(){T(b)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,tt=ie.port2;ie.port1.onmessage=b,N=function(){tt.postMessage(null)}}else N=function(){L(b,0)};function ln(H){w=H,U||(U=!0,N())}function re(H,A){y=L(function(){H(t.unstable_now())},A)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_continueExecution=function(){R||_||(R=!0,ln(j))},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(H){switch(g){case 1:case 2:case 3:var A=3;break;default:A=g}var z=g;g=A;try{return H()}finally{g=z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(H,A){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var z=g;g=H;try{return A()}finally{g=z}},t.unstable_scheduleCallback=function(H,A,z){var Y=t.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?Y+z:Y):z=Y,H){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=z+Z,H={id:p++,callback:A,priorityLevel:H,startTime:z,expirationTime:Z,sortIndex:-1},z>Y?(H.sortIndex=z,e(d,H),n(u)===null&&H===n(d)&&(P?(S(y),y=-1):P=!0,re(O,z-Y))):(H.sortIndex=Z,e(u,H),R||_||(R=!0,ln(j))),H},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(H){var A=g;return function(){var z=g;g=A;try{return H.apply(this,arguments)}finally{g=z}}}})(_v);vv.exports=_v;var J1=vv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X1=$,Ot=J1;function B(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var wv=new Set,Lo={};function vs(t,e){li(t,e),li(t+"Capture",e)}function li(t,e){for(Lo[t]=e,t=0;t<e.length;t++)wv.add(e[t])}var zn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),gd=Object.prototype.hasOwnProperty,Z1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_m={},wm={};function eT(t){return gd.call(wm,t)?!0:gd.call(_m,t)?!1:Z1.test(t)?wm[t]=!0:(_m[t]=!0,!1)}function tT(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function nT(t,e,n,r){if(e===null||typeof e>"u"||tT(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function It(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var lt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){lt[t]=new It(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];lt[e]=new It(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){lt[t]=new It(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){lt[t]=new It(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){lt[t]=new It(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){lt[t]=new It(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){lt[t]=new It(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){lt[t]=new It(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){lt[t]=new It(t,5,!1,t.toLowerCase(),null,!1,!1)});var Bh=/[\-:]([a-z])/g;function $h(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Bh,$h);lt[e]=new It(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Bh,$h);lt[e]=new It(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Bh,$h);lt[e]=new It(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){lt[t]=new It(t,1,!1,t.toLowerCase(),null,!1,!1)});lt.xlinkHref=new It("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){lt[t]=new It(t,1,!1,t.toLowerCase(),null,!0,!0)});function qh(t,e,n,r){var s=lt.hasOwnProperty(e)?lt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(nT(e,n,s,r)&&(n=null),r||s===null?eT(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Qn=X1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ha=Symbol.for("react.element"),Ms=Symbol.for("react.portal"),Fs=Symbol.for("react.fragment"),Hh=Symbol.for("react.strict_mode"),yd=Symbol.for("react.profiler"),Ev=Symbol.for("react.provider"),Tv=Symbol.for("react.context"),Wh=Symbol.for("react.forward_ref"),vd=Symbol.for("react.suspense"),_d=Symbol.for("react.suspense_list"),Gh=Symbol.for("react.memo"),ir=Symbol.for("react.lazy"),Iv=Symbol.for("react.offscreen"),Em=Symbol.iterator;function to(t){return t===null||typeof t!="object"?null:(t=Em&&t[Em]||t["@@iterator"],typeof t=="function"?t:null)}var je=Object.assign,bu;function uo(t){if(bu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);bu=e&&e[1]||""}return`
`+bu+t}var ju=!1;function Du(t,e){if(!t||ju)return"";ju=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,c=i.length-1;1<=o&&0<=c&&s[o]!==i[c];)c--;for(;1<=o&&0<=c;o--,c--)if(s[o]!==i[c]){if(o!==1||c!==1)do if(o--,c--,0>c||s[o]!==i[c]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=c);break}}}finally{ju=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?uo(t):""}function rT(t){switch(t.tag){case 5:return uo(t.type);case 16:return uo("Lazy");case 13:return uo("Suspense");case 19:return uo("SuspenseList");case 0:case 2:case 15:return t=Du(t.type,!1),t;case 11:return t=Du(t.type.render,!1),t;case 1:return t=Du(t.type,!0),t;default:return""}}function wd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Fs:return"Fragment";case Ms:return"Portal";case yd:return"Profiler";case Hh:return"StrictMode";case vd:return"Suspense";case _d:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Tv:return(t.displayName||"Context")+".Consumer";case Ev:return(t._context.displayName||"Context")+".Provider";case Wh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Gh:return e=t.displayName||null,e!==null?e:wd(t.type)||"Memo";case ir:e=t._payload,t=t._init;try{return wd(t(e))}catch{}}return null}function sT(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return wd(e);case 8:return e===Hh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function kr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Sv(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function iT(t){var e=Sv(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Wa(t){t._valueTracker||(t._valueTracker=iT(t))}function xv(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Sv(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Vl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ed(t,e){var n=e.checked;return je({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Tm(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=kr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Nv(t,e){e=e.checked,e!=null&&qh(t,"checked",e,!1)}function Td(t,e){Nv(t,e);var n=kr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Id(t,e.type,n):e.hasOwnProperty("defaultValue")&&Id(t,e.type,kr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Im(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Id(t,e,n){(e!=="number"||Vl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ho=Array.isArray;function Js(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+kr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Sd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(B(91));return je({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Sm(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(B(92));if(ho(n)){if(1<n.length)throw Error(B(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:kr(n)}}function Cv(t,e){var n=kr(e.value),r=kr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function xm(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Av(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Av(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ga,kv=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ga=Ga||document.createElement("div"),Ga.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ga.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Mo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var To={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},oT=["Webkit","ms","Moz","O"];Object.keys(To).forEach(function(t){oT.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),To[e]=To[t]})});function Rv(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||To.hasOwnProperty(t)&&To[t]?(""+e).trim():e+"px"}function Pv(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Rv(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var aT=je({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Nd(t,e){if(e){if(aT[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(B(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(B(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(B(61))}if(e.style!=null&&typeof e.style!="object")throw Error(B(62))}}function Cd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ad=null;function Kh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var kd=null,Xs=null,Zs=null;function Nm(t){if(t=fa(t)){if(typeof kd!="function")throw Error(B(280));var e=t.stateNode;e&&(e=jc(e),kd(t.stateNode,t.type,e))}}function bv(t){Xs?Zs?Zs.push(t):Zs=[t]:Xs=t}function jv(){if(Xs){var t=Xs,e=Zs;if(Zs=Xs=null,Nm(t),e)for(t=0;t<e.length;t++)Nm(e[t])}}function Dv(t,e){return t(e)}function Vv(){}var Vu=!1;function Ov(t,e,n){if(Vu)return t(e,n);Vu=!0;try{return Dv(t,e,n)}finally{Vu=!1,(Xs!==null||Zs!==null)&&(Vv(),jv())}}function Fo(t,e){var n=t.stateNode;if(n===null)return null;var r=jc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(B(231,e,typeof n));return n}var Rd=!1;if(zn)try{var no={};Object.defineProperty(no,"passive",{get:function(){Rd=!0}}),window.addEventListener("test",no,no),window.removeEventListener("test",no,no)}catch{Rd=!1}function lT(t,e,n,r,s,i,o,c,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(p){this.onError(p)}}var Io=!1,Ol=null,Ll=!1,Pd=null,cT={onError:function(t){Io=!0,Ol=t}};function uT(t,e,n,r,s,i,o,c,u){Io=!1,Ol=null,lT.apply(cT,arguments)}function dT(t,e,n,r,s,i,o,c,u){if(uT.apply(this,arguments),Io){if(Io){var d=Ol;Io=!1,Ol=null}else throw Error(B(198));Ll||(Ll=!0,Pd=d)}}function _s(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Lv(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Cm(t){if(_s(t)!==t)throw Error(B(188))}function hT(t){var e=t.alternate;if(!e){if(e=_s(t),e===null)throw Error(B(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Cm(s),t;if(i===r)return Cm(s),e;i=i.sibling}throw Error(B(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,c=s.child;c;){if(c===n){o=!0,n=s,r=i;break}if(c===r){o=!0,r=s,n=i;break}c=c.sibling}if(!o){for(c=i.child;c;){if(c===n){o=!0,n=i,r=s;break}if(c===r){o=!0,r=i,n=s;break}c=c.sibling}if(!o)throw Error(B(189))}}if(n.alternate!==r)throw Error(B(190))}if(n.tag!==3)throw Error(B(188));return n.stateNode.current===n?t:e}function Mv(t){return t=hT(t),t!==null?Fv(t):null}function Fv(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Fv(t);if(e!==null)return e;t=t.sibling}return null}var Uv=Ot.unstable_scheduleCallback,Am=Ot.unstable_cancelCallback,fT=Ot.unstable_shouldYield,pT=Ot.unstable_requestPaint,Me=Ot.unstable_now,mT=Ot.unstable_getCurrentPriorityLevel,Qh=Ot.unstable_ImmediatePriority,zv=Ot.unstable_UserBlockingPriority,Ml=Ot.unstable_NormalPriority,gT=Ot.unstable_LowPriority,Bv=Ot.unstable_IdlePriority,kc=null,_n=null;function yT(t){if(_n&&typeof _n.onCommitFiberRoot=="function")try{_n.onCommitFiberRoot(kc,t,void 0,(t.current.flags&128)===128)}catch{}}var tn=Math.clz32?Math.clz32:wT,vT=Math.log,_T=Math.LN2;function wT(t){return t>>>=0,t===0?32:31-(vT(t)/_T|0)|0}var Ka=64,Qa=4194304;function fo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Fl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var c=o&~s;c!==0?r=fo(c):(i&=o,i!==0&&(r=fo(i)))}else o=n&~s,o!==0?r=fo(o):i!==0&&(r=fo(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-tn(e),s=1<<n,r|=t[n],e&=~s;return r}function ET(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function TT(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-tn(i),c=1<<o,u=s[o];u===-1?(!(c&n)||c&r)&&(s[o]=ET(c,e)):u<=e&&(t.expiredLanes|=c),i&=~c}}function bd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function $v(){var t=Ka;return Ka<<=1,!(Ka&4194240)&&(Ka=64),t}function Ou(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function da(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-tn(e),t[e]=n}function IT(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-tn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Yh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-tn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var we=0;function qv(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Hv,Jh,Wv,Gv,Kv,jd=!1,Ya=[],gr=null,yr=null,vr=null,Uo=new Map,zo=new Map,ar=[],ST="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function km(t,e){switch(t){case"focusin":case"focusout":gr=null;break;case"dragenter":case"dragleave":yr=null;break;case"mouseover":case"mouseout":vr=null;break;case"pointerover":case"pointerout":Uo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":zo.delete(e.pointerId)}}function ro(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=fa(e),e!==null&&Jh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function xT(t,e,n,r,s){switch(e){case"focusin":return gr=ro(gr,t,e,n,r,s),!0;case"dragenter":return yr=ro(yr,t,e,n,r,s),!0;case"mouseover":return vr=ro(vr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Uo.set(i,ro(Uo.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,zo.set(i,ro(zo.get(i)||null,t,e,n,r,s)),!0}return!1}function Qv(t){var e=Zr(t.target);if(e!==null){var n=_s(e);if(n!==null){if(e=n.tag,e===13){if(e=Lv(n),e!==null){t.blockedOn=e,Kv(t.priority,function(){Wv(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ml(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Dd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Ad=r,n.target.dispatchEvent(r),Ad=null}else return e=fa(n),e!==null&&Jh(e),t.blockedOn=n,!1;e.shift()}return!0}function Rm(t,e,n){ml(t)&&n.delete(e)}function NT(){jd=!1,gr!==null&&ml(gr)&&(gr=null),yr!==null&&ml(yr)&&(yr=null),vr!==null&&ml(vr)&&(vr=null),Uo.forEach(Rm),zo.forEach(Rm)}function so(t,e){t.blockedOn===e&&(t.blockedOn=null,jd||(jd=!0,Ot.unstable_scheduleCallback(Ot.unstable_NormalPriority,NT)))}function Bo(t){function e(s){return so(s,t)}if(0<Ya.length){so(Ya[0],t);for(var n=1;n<Ya.length;n++){var r=Ya[n];r.blockedOn===t&&(r.blockedOn=null)}}for(gr!==null&&so(gr,t),yr!==null&&so(yr,t),vr!==null&&so(vr,t),Uo.forEach(e),zo.forEach(e),n=0;n<ar.length;n++)r=ar[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ar.length&&(n=ar[0],n.blockedOn===null);)Qv(n),n.blockedOn===null&&ar.shift()}var ei=Qn.ReactCurrentBatchConfig,Ul=!0;function CT(t,e,n,r){var s=we,i=ei.transition;ei.transition=null;try{we=1,Xh(t,e,n,r)}finally{we=s,ei.transition=i}}function AT(t,e,n,r){var s=we,i=ei.transition;ei.transition=null;try{we=4,Xh(t,e,n,r)}finally{we=s,ei.transition=i}}function Xh(t,e,n,r){if(Ul){var s=Dd(t,e,n,r);if(s===null)Wu(t,e,r,zl,n),km(t,r);else if(xT(s,t,e,n,r))r.stopPropagation();else if(km(t,r),e&4&&-1<ST.indexOf(t)){for(;s!==null;){var i=fa(s);if(i!==null&&Hv(i),i=Dd(t,e,n,r),i===null&&Wu(t,e,r,zl,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Wu(t,e,r,null,n)}}var zl=null;function Dd(t,e,n,r){if(zl=null,t=Kh(r),t=Zr(t),t!==null)if(e=_s(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Lv(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return zl=t,null}function Yv(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(mT()){case Qh:return 1;case zv:return 4;case Ml:case gT:return 16;case Bv:return 536870912;default:return 16}default:return 16}}var fr=null,Zh=null,gl=null;function Jv(){if(gl)return gl;var t,e=Zh,n=e.length,r,s="value"in fr?fr.value:fr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return gl=s.slice(t,1<r?1-r:void 0)}function yl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ja(){return!0}function Pm(){return!1}function Mt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(i):i[c]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ja:Pm,this.isPropagationStopped=Pm,this}return je(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ja)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ja)},persist:function(){},isPersistent:Ja}),e}var Ni={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ef=Mt(Ni),ha=je({},Ni,{view:0,detail:0}),kT=Mt(ha),Lu,Mu,io,Rc=je({},ha,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:tf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==io&&(io&&t.type==="mousemove"?(Lu=t.screenX-io.screenX,Mu=t.screenY-io.screenY):Mu=Lu=0,io=t),Lu)},movementY:function(t){return"movementY"in t?t.movementY:Mu}}),bm=Mt(Rc),RT=je({},Rc,{dataTransfer:0}),PT=Mt(RT),bT=je({},ha,{relatedTarget:0}),Fu=Mt(bT),jT=je({},Ni,{animationName:0,elapsedTime:0,pseudoElement:0}),DT=Mt(jT),VT=je({},Ni,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),OT=Mt(VT),LT=je({},Ni,{data:0}),jm=Mt(LT),MT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},FT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},UT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zT(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=UT[t])?!!e[t]:!1}function tf(){return zT}var BT=je({},ha,{key:function(t){if(t.key){var e=MT[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=yl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?FT[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:tf,charCode:function(t){return t.type==="keypress"?yl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?yl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),$T=Mt(BT),qT=je({},Rc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Dm=Mt(qT),HT=je({},ha,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:tf}),WT=Mt(HT),GT=je({},Ni,{propertyName:0,elapsedTime:0,pseudoElement:0}),KT=Mt(GT),QT=je({},Rc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),YT=Mt(QT),JT=[9,13,27,32],nf=zn&&"CompositionEvent"in window,So=null;zn&&"documentMode"in document&&(So=document.documentMode);var XT=zn&&"TextEvent"in window&&!So,Xv=zn&&(!nf||So&&8<So&&11>=So),Vm=" ",Om=!1;function Zv(t,e){switch(t){case"keyup":return JT.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function e_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Us=!1;function ZT(t,e){switch(t){case"compositionend":return e_(e);case"keypress":return e.which!==32?null:(Om=!0,Vm);case"textInput":return t=e.data,t===Vm&&Om?null:t;default:return null}}function eI(t,e){if(Us)return t==="compositionend"||!nf&&Zv(t,e)?(t=Jv(),gl=Zh=fr=null,Us=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Xv&&e.locale!=="ko"?null:e.data;default:return null}}var tI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Lm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!tI[t.type]:e==="textarea"}function t_(t,e,n,r){bv(r),e=Bl(e,"onChange"),0<e.length&&(n=new ef("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var xo=null,$o=null;function nI(t){h_(t,0)}function Pc(t){var e=$s(t);if(xv(e))return t}function rI(t,e){if(t==="change")return e}var n_=!1;if(zn){var Uu;if(zn){var zu="oninput"in document;if(!zu){var Mm=document.createElement("div");Mm.setAttribute("oninput","return;"),zu=typeof Mm.oninput=="function"}Uu=zu}else Uu=!1;n_=Uu&&(!document.documentMode||9<document.documentMode)}function Fm(){xo&&(xo.detachEvent("onpropertychange",r_),$o=xo=null)}function r_(t){if(t.propertyName==="value"&&Pc($o)){var e=[];t_(e,$o,t,Kh(t)),Ov(nI,e)}}function sI(t,e,n){t==="focusin"?(Fm(),xo=e,$o=n,xo.attachEvent("onpropertychange",r_)):t==="focusout"&&Fm()}function iI(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Pc($o)}function oI(t,e){if(t==="click")return Pc(e)}function aI(t,e){if(t==="input"||t==="change")return Pc(e)}function lI(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var sn=typeof Object.is=="function"?Object.is:lI;function qo(t,e){if(sn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!gd.call(e,s)||!sn(t[s],e[s]))return!1}return!0}function Um(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function zm(t,e){var n=Um(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Um(n)}}function s_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?s_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function i_(){for(var t=window,e=Vl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Vl(t.document)}return e}function rf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function cI(t){var e=i_(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&s_(n.ownerDocument.documentElement,n)){if(r!==null&&rf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=zm(n,i);var o=zm(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var uI=zn&&"documentMode"in document&&11>=document.documentMode,zs=null,Vd=null,No=null,Od=!1;function Bm(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Od||zs==null||zs!==Vl(r)||(r=zs,"selectionStart"in r&&rf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),No&&qo(No,r)||(No=r,r=Bl(Vd,"onSelect"),0<r.length&&(e=new ef("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=zs)))}function Xa(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Bs={animationend:Xa("Animation","AnimationEnd"),animationiteration:Xa("Animation","AnimationIteration"),animationstart:Xa("Animation","AnimationStart"),transitionend:Xa("Transition","TransitionEnd")},Bu={},o_={};zn&&(o_=document.createElement("div").style,"AnimationEvent"in window||(delete Bs.animationend.animation,delete Bs.animationiteration.animation,delete Bs.animationstart.animation),"TransitionEvent"in window||delete Bs.transitionend.transition);function bc(t){if(Bu[t])return Bu[t];if(!Bs[t])return t;var e=Bs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in o_)return Bu[t]=e[n];return t}var a_=bc("animationend"),l_=bc("animationiteration"),c_=bc("animationstart"),u_=bc("transitionend"),d_=new Map,$m="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Lr(t,e){d_.set(t,e),vs(e,[t])}for(var $u=0;$u<$m.length;$u++){var qu=$m[$u],dI=qu.toLowerCase(),hI=qu[0].toUpperCase()+qu.slice(1);Lr(dI,"on"+hI)}Lr(a_,"onAnimationEnd");Lr(l_,"onAnimationIteration");Lr(c_,"onAnimationStart");Lr("dblclick","onDoubleClick");Lr("focusin","onFocus");Lr("focusout","onBlur");Lr(u_,"onTransitionEnd");li("onMouseEnter",["mouseout","mouseover"]);li("onMouseLeave",["mouseout","mouseover"]);li("onPointerEnter",["pointerout","pointerover"]);li("onPointerLeave",["pointerout","pointerover"]);vs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));vs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));vs("onBeforeInput",["compositionend","keypress","textInput","paste"]);vs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));vs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));vs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var po="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fI=new Set("cancel close invalid load scroll toggle".split(" ").concat(po));function qm(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,dT(r,e,void 0,t),t.currentTarget=null}function h_(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var c=r[o],u=c.instance,d=c.currentTarget;if(c=c.listener,u!==i&&s.isPropagationStopped())break e;qm(s,c,d),i=u}else for(o=0;o<r.length;o++){if(c=r[o],u=c.instance,d=c.currentTarget,c=c.listener,u!==i&&s.isPropagationStopped())break e;qm(s,c,d),i=u}}}if(Ll)throw t=Pd,Ll=!1,Pd=null,t}function Ce(t,e){var n=e[zd];n===void 0&&(n=e[zd]=new Set);var r=t+"__bubble";n.has(r)||(f_(e,t,2,!1),n.add(r))}function Hu(t,e,n){var r=0;e&&(r|=4),f_(n,t,r,e)}var Za="_reactListening"+Math.random().toString(36).slice(2);function Ho(t){if(!t[Za]){t[Za]=!0,wv.forEach(function(n){n!=="selectionchange"&&(fI.has(n)||Hu(n,!1,t),Hu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Za]||(e[Za]=!0,Hu("selectionchange",!1,e))}}function f_(t,e,n,r){switch(Yv(e)){case 1:var s=CT;break;case 4:s=AT;break;default:s=Xh}n=s.bind(null,e,n,t),s=void 0,!Rd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Wu(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var c=r.stateNode.containerInfo;if(c===s||c.nodeType===8&&c.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;c!==null;){if(o=Zr(c),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}c=c.parentNode}}r=r.return}Ov(function(){var d=i,p=Kh(n),m=[];e:{var g=d_.get(t);if(g!==void 0){var _=ef,R=t;switch(t){case"keypress":if(yl(n)===0)break e;case"keydown":case"keyup":_=$T;break;case"focusin":R="focus",_=Fu;break;case"focusout":R="blur",_=Fu;break;case"beforeblur":case"afterblur":_=Fu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=bm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=PT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=WT;break;case a_:case l_:case c_:_=DT;break;case u_:_=KT;break;case"scroll":_=kT;break;case"wheel":_=YT;break;case"copy":case"cut":case"paste":_=OT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=Dm}var P=(e&4)!==0,L=!P&&t==="scroll",S=P?g!==null?g+"Capture":null:g;P=[];for(var T=d,x;T!==null;){x=T;var O=x.stateNode;if(x.tag===5&&O!==null&&(x=O,S!==null&&(O=Fo(T,S),O!=null&&P.push(Wo(T,O,x)))),L)break;T=T.return}0<P.length&&(g=new _(g,R,null,n,p),m.push({event:g,listeners:P}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",_=t==="mouseout"||t==="pointerout",g&&n!==Ad&&(R=n.relatedTarget||n.fromElement)&&(Zr(R)||R[Bn]))break e;if((_||g)&&(g=p.window===p?p:(g=p.ownerDocument)?g.defaultView||g.parentWindow:window,_?(R=n.relatedTarget||n.toElement,_=d,R=R?Zr(R):null,R!==null&&(L=_s(R),R!==L||R.tag!==5&&R.tag!==6)&&(R=null)):(_=null,R=d),_!==R)){if(P=bm,O="onMouseLeave",S="onMouseEnter",T="mouse",(t==="pointerout"||t==="pointerover")&&(P=Dm,O="onPointerLeave",S="onPointerEnter",T="pointer"),L=_==null?g:$s(_),x=R==null?g:$s(R),g=new P(O,T+"leave",_,n,p),g.target=L,g.relatedTarget=x,O=null,Zr(p)===d&&(P=new P(S,T+"enter",R,n,p),P.target=x,P.relatedTarget=L,O=P),L=O,_&&R)t:{for(P=_,S=R,T=0,x=P;x;x=bs(x))T++;for(x=0,O=S;O;O=bs(O))x++;for(;0<T-x;)P=bs(P),T--;for(;0<x-T;)S=bs(S),x--;for(;T--;){if(P===S||S!==null&&P===S.alternate)break t;P=bs(P),S=bs(S)}P=null}else P=null;_!==null&&Hm(m,g,_,P,!1),R!==null&&L!==null&&Hm(m,L,R,P,!0)}}e:{if(g=d?$s(d):window,_=g.nodeName&&g.nodeName.toLowerCase(),_==="select"||_==="input"&&g.type==="file")var j=rI;else if(Lm(g))if(n_)j=aI;else{j=iI;var U=sI}else(_=g.nodeName)&&_.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(j=oI);if(j&&(j=j(t,d))){t_(m,j,n,p);break e}U&&U(t,g,d),t==="focusout"&&(U=g._wrapperState)&&U.controlled&&g.type==="number"&&Id(g,"number",g.value)}switch(U=d?$s(d):window,t){case"focusin":(Lm(U)||U.contentEditable==="true")&&(zs=U,Vd=d,No=null);break;case"focusout":No=Vd=zs=null;break;case"mousedown":Od=!0;break;case"contextmenu":case"mouseup":case"dragend":Od=!1,Bm(m,n,p);break;case"selectionchange":if(uI)break;case"keydown":case"keyup":Bm(m,n,p)}var w;if(nf)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Us?Zv(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(Xv&&n.locale!=="ko"&&(Us||y!=="onCompositionStart"?y==="onCompositionEnd"&&Us&&(w=Jv()):(fr=p,Zh="value"in fr?fr.value:fr.textContent,Us=!0)),U=Bl(d,y),0<U.length&&(y=new jm(y,t,null,n,p),m.push({event:y,listeners:U}),w?y.data=w:(w=e_(n),w!==null&&(y.data=w)))),(w=XT?ZT(t,n):eI(t,n))&&(d=Bl(d,"onBeforeInput"),0<d.length&&(p=new jm("onBeforeInput","beforeinput",null,n,p),m.push({event:p,listeners:d}),p.data=w))}h_(m,e)})}function Wo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Bl(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Fo(t,n),i!=null&&r.unshift(Wo(t,i,s)),i=Fo(t,e),i!=null&&r.push(Wo(t,i,s))),t=t.return}return r}function bs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Hm(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var c=n,u=c.alternate,d=c.stateNode;if(u!==null&&u===r)break;c.tag===5&&d!==null&&(c=d,s?(u=Fo(n,i),u!=null&&o.unshift(Wo(n,u,c))):s||(u=Fo(n,i),u!=null&&o.push(Wo(n,u,c)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var pI=/\r\n?/g,mI=/\u0000|\uFFFD/g;function Wm(t){return(typeof t=="string"?t:""+t).replace(pI,`
`).replace(mI,"")}function el(t,e,n){if(e=Wm(e),Wm(t)!==e&&n)throw Error(B(425))}function $l(){}var Ld=null,Md=null;function Fd(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ud=typeof setTimeout=="function"?setTimeout:void 0,gI=typeof clearTimeout=="function"?clearTimeout:void 0,Gm=typeof Promise=="function"?Promise:void 0,yI=typeof queueMicrotask=="function"?queueMicrotask:typeof Gm<"u"?function(t){return Gm.resolve(null).then(t).catch(vI)}:Ud;function vI(t){setTimeout(function(){throw t})}function Gu(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Bo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Bo(e)}function _r(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Km(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ci=Math.random().toString(36).slice(2),vn="__reactFiber$"+Ci,Go="__reactProps$"+Ci,Bn="__reactContainer$"+Ci,zd="__reactEvents$"+Ci,_I="__reactListeners$"+Ci,wI="__reactHandles$"+Ci;function Zr(t){var e=t[vn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Bn]||n[vn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Km(t);t!==null;){if(n=t[vn])return n;t=Km(t)}return e}t=n,n=t.parentNode}return null}function fa(t){return t=t[vn]||t[Bn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function $s(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(B(33))}function jc(t){return t[Go]||null}var Bd=[],qs=-1;function Mr(t){return{current:t}}function ke(t){0>qs||(t.current=Bd[qs],Bd[qs]=null,qs--)}function xe(t,e){qs++,Bd[qs]=t.current,t.current=e}var Rr={},gt=Mr(Rr),Ct=Mr(!1),as=Rr;function ci(t,e){var n=t.type.contextTypes;if(!n)return Rr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function At(t){return t=t.childContextTypes,t!=null}function ql(){ke(Ct),ke(gt)}function Qm(t,e,n){if(gt.current!==Rr)throw Error(B(168));xe(gt,e),xe(Ct,n)}function p_(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(B(108,sT(t)||"Unknown",s));return je({},n,r)}function Hl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Rr,as=gt.current,xe(gt,t),xe(Ct,Ct.current),!0}function Ym(t,e,n){var r=t.stateNode;if(!r)throw Error(B(169));n?(t=p_(t,e,as),r.__reactInternalMemoizedMergedChildContext=t,ke(Ct),ke(gt),xe(gt,t)):ke(Ct),xe(Ct,n)}var bn=null,Dc=!1,Ku=!1;function m_(t){bn===null?bn=[t]:bn.push(t)}function EI(t){Dc=!0,m_(t)}function Fr(){if(!Ku&&bn!==null){Ku=!0;var t=0,e=we;try{var n=bn;for(we=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}bn=null,Dc=!1}catch(s){throw bn!==null&&(bn=bn.slice(t+1)),Uv(Qh,Fr),s}finally{we=e,Ku=!1}}return null}var Hs=[],Ws=0,Wl=null,Gl=0,Ut=[],zt=0,ls=null,jn=1,Dn="";function Yr(t,e){Hs[Ws++]=Gl,Hs[Ws++]=Wl,Wl=t,Gl=e}function g_(t,e,n){Ut[zt++]=jn,Ut[zt++]=Dn,Ut[zt++]=ls,ls=t;var r=jn;t=Dn;var s=32-tn(r)-1;r&=~(1<<s),n+=1;var i=32-tn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,jn=1<<32-tn(e)+s|n<<s|r,Dn=i+t}else jn=1<<i|n<<s|r,Dn=t}function sf(t){t.return!==null&&(Yr(t,1),g_(t,1,0))}function of(t){for(;t===Wl;)Wl=Hs[--Ws],Hs[Ws]=null,Gl=Hs[--Ws],Hs[Ws]=null;for(;t===ls;)ls=Ut[--zt],Ut[zt]=null,Dn=Ut[--zt],Ut[zt]=null,jn=Ut[--zt],Ut[zt]=null}var Vt=null,Dt=null,Re=!1,Xt=null;function y_(t,e){var n=Ht(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Jm(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Vt=t,Dt=_r(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Vt=t,Dt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ls!==null?{id:jn,overflow:Dn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ht(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Vt=t,Dt=null,!0):!1;default:return!1}}function $d(t){return(t.mode&1)!==0&&(t.flags&128)===0}function qd(t){if(Re){var e=Dt;if(e){var n=e;if(!Jm(t,e)){if($d(t))throw Error(B(418));e=_r(n.nextSibling);var r=Vt;e&&Jm(t,e)?y_(r,n):(t.flags=t.flags&-4097|2,Re=!1,Vt=t)}}else{if($d(t))throw Error(B(418));t.flags=t.flags&-4097|2,Re=!1,Vt=t}}}function Xm(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Vt=t}function tl(t){if(t!==Vt)return!1;if(!Re)return Xm(t),Re=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Fd(t.type,t.memoizedProps)),e&&(e=Dt)){if($d(t))throw v_(),Error(B(418));for(;e;)y_(t,e),e=_r(e.nextSibling)}if(Xm(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(B(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Dt=_r(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Dt=null}}else Dt=Vt?_r(t.stateNode.nextSibling):null;return!0}function v_(){for(var t=Dt;t;)t=_r(t.nextSibling)}function ui(){Dt=Vt=null,Re=!1}function af(t){Xt===null?Xt=[t]:Xt.push(t)}var TI=Qn.ReactCurrentBatchConfig;function oo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(B(309));var r=n.stateNode}if(!r)throw Error(B(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var c=s.refs;o===null?delete c[i]:c[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(B(284));if(!n._owner)throw Error(B(290,t))}return t}function nl(t,e){throw t=Object.prototype.toString.call(e),Error(B(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Zm(t){var e=t._init;return e(t._payload)}function __(t){function e(S,T){if(t){var x=S.deletions;x===null?(S.deletions=[T],S.flags|=16):x.push(T)}}function n(S,T){if(!t)return null;for(;T!==null;)e(S,T),T=T.sibling;return null}function r(S,T){for(S=new Map;T!==null;)T.key!==null?S.set(T.key,T):S.set(T.index,T),T=T.sibling;return S}function s(S,T){return S=Ir(S,T),S.index=0,S.sibling=null,S}function i(S,T,x){return S.index=x,t?(x=S.alternate,x!==null?(x=x.index,x<T?(S.flags|=2,T):x):(S.flags|=2,T)):(S.flags|=1048576,T)}function o(S){return t&&S.alternate===null&&(S.flags|=2),S}function c(S,T,x,O){return T===null||T.tag!==6?(T=td(x,S.mode,O),T.return=S,T):(T=s(T,x),T.return=S,T)}function u(S,T,x,O){var j=x.type;return j===Fs?p(S,T,x.props.children,O,x.key):T!==null&&(T.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===ir&&Zm(j)===T.type)?(O=s(T,x.props),O.ref=oo(S,T,x),O.return=S,O):(O=Sl(x.type,x.key,x.props,null,S.mode,O),O.ref=oo(S,T,x),O.return=S,O)}function d(S,T,x,O){return T===null||T.tag!==4||T.stateNode.containerInfo!==x.containerInfo||T.stateNode.implementation!==x.implementation?(T=nd(x,S.mode,O),T.return=S,T):(T=s(T,x.children||[]),T.return=S,T)}function p(S,T,x,O,j){return T===null||T.tag!==7?(T=ss(x,S.mode,O,j),T.return=S,T):(T=s(T,x),T.return=S,T)}function m(S,T,x){if(typeof T=="string"&&T!==""||typeof T=="number")return T=td(""+T,S.mode,x),T.return=S,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Ha:return x=Sl(T.type,T.key,T.props,null,S.mode,x),x.ref=oo(S,null,T),x.return=S,x;case Ms:return T=nd(T,S.mode,x),T.return=S,T;case ir:var O=T._init;return m(S,O(T._payload),x)}if(ho(T)||to(T))return T=ss(T,S.mode,x,null),T.return=S,T;nl(S,T)}return null}function g(S,T,x,O){var j=T!==null?T.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return j!==null?null:c(S,T,""+x,O);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Ha:return x.key===j?u(S,T,x,O):null;case Ms:return x.key===j?d(S,T,x,O):null;case ir:return j=x._init,g(S,T,j(x._payload),O)}if(ho(x)||to(x))return j!==null?null:p(S,T,x,O,null);nl(S,x)}return null}function _(S,T,x,O,j){if(typeof O=="string"&&O!==""||typeof O=="number")return S=S.get(x)||null,c(T,S,""+O,j);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case Ha:return S=S.get(O.key===null?x:O.key)||null,u(T,S,O,j);case Ms:return S=S.get(O.key===null?x:O.key)||null,d(T,S,O,j);case ir:var U=O._init;return _(S,T,x,U(O._payload),j)}if(ho(O)||to(O))return S=S.get(x)||null,p(T,S,O,j,null);nl(T,O)}return null}function R(S,T,x,O){for(var j=null,U=null,w=T,y=T=0,E=null;w!==null&&y<x.length;y++){w.index>y?(E=w,w=null):E=w.sibling;var I=g(S,w,x[y],O);if(I===null){w===null&&(w=E);break}t&&w&&I.alternate===null&&e(S,w),T=i(I,T,y),U===null?j=I:U.sibling=I,U=I,w=E}if(y===x.length)return n(S,w),Re&&Yr(S,y),j;if(w===null){for(;y<x.length;y++)w=m(S,x[y],O),w!==null&&(T=i(w,T,y),U===null?j=w:U.sibling=w,U=w);return Re&&Yr(S,y),j}for(w=r(S,w);y<x.length;y++)E=_(w,S,y,x[y],O),E!==null&&(t&&E.alternate!==null&&w.delete(E.key===null?y:E.key),T=i(E,T,y),U===null?j=E:U.sibling=E,U=E);return t&&w.forEach(function(k){return e(S,k)}),Re&&Yr(S,y),j}function P(S,T,x,O){var j=to(x);if(typeof j!="function")throw Error(B(150));if(x=j.call(x),x==null)throw Error(B(151));for(var U=j=null,w=T,y=T=0,E=null,I=x.next();w!==null&&!I.done;y++,I=x.next()){w.index>y?(E=w,w=null):E=w.sibling;var k=g(S,w,I.value,O);if(k===null){w===null&&(w=E);break}t&&w&&k.alternate===null&&e(S,w),T=i(k,T,y),U===null?j=k:U.sibling=k,U=k,w=E}if(I.done)return n(S,w),Re&&Yr(S,y),j;if(w===null){for(;!I.done;y++,I=x.next())I=m(S,I.value,O),I!==null&&(T=i(I,T,y),U===null?j=I:U.sibling=I,U=I);return Re&&Yr(S,y),j}for(w=r(S,w);!I.done;y++,I=x.next())I=_(w,S,y,I.value,O),I!==null&&(t&&I.alternate!==null&&w.delete(I.key===null?y:I.key),T=i(I,T,y),U===null?j=I:U.sibling=I,U=I);return t&&w.forEach(function(b){return e(S,b)}),Re&&Yr(S,y),j}function L(S,T,x,O){if(typeof x=="object"&&x!==null&&x.type===Fs&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Ha:e:{for(var j=x.key,U=T;U!==null;){if(U.key===j){if(j=x.type,j===Fs){if(U.tag===7){n(S,U.sibling),T=s(U,x.props.children),T.return=S,S=T;break e}}else if(U.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===ir&&Zm(j)===U.type){n(S,U.sibling),T=s(U,x.props),T.ref=oo(S,U,x),T.return=S,S=T;break e}n(S,U);break}else e(S,U);U=U.sibling}x.type===Fs?(T=ss(x.props.children,S.mode,O,x.key),T.return=S,S=T):(O=Sl(x.type,x.key,x.props,null,S.mode,O),O.ref=oo(S,T,x),O.return=S,S=O)}return o(S);case Ms:e:{for(U=x.key;T!==null;){if(T.key===U)if(T.tag===4&&T.stateNode.containerInfo===x.containerInfo&&T.stateNode.implementation===x.implementation){n(S,T.sibling),T=s(T,x.children||[]),T.return=S,S=T;break e}else{n(S,T);break}else e(S,T);T=T.sibling}T=nd(x,S.mode,O),T.return=S,S=T}return o(S);case ir:return U=x._init,L(S,T,U(x._payload),O)}if(ho(x))return R(S,T,x,O);if(to(x))return P(S,T,x,O);nl(S,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,T!==null&&T.tag===6?(n(S,T.sibling),T=s(T,x),T.return=S,S=T):(n(S,T),T=td(x,S.mode,O),T.return=S,S=T),o(S)):n(S,T)}return L}var di=__(!0),w_=__(!1),Kl=Mr(null),Ql=null,Gs=null,lf=null;function cf(){lf=Gs=Ql=null}function uf(t){var e=Kl.current;ke(Kl),t._currentValue=e}function Hd(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ti(t,e){Ql=t,lf=Gs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Nt=!0),t.firstContext=null)}function Gt(t){var e=t._currentValue;if(lf!==t)if(t={context:t,memoizedValue:e,next:null},Gs===null){if(Ql===null)throw Error(B(308));Gs=t,Ql.dependencies={lanes:0,firstContext:t}}else Gs=Gs.next=t;return e}var es=null;function df(t){es===null?es=[t]:es.push(t)}function E_(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,df(e)):(n.next=s.next,s.next=n),e.interleaved=n,$n(t,r)}function $n(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var or=!1;function hf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function T_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ln(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function wr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,me&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,$n(t,n)}return s=r.interleaved,s===null?(e.next=e,df(r)):(e.next=s.next,s.next=e),r.interleaved=e,$n(t,n)}function vl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Yh(t,n)}}function eg(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Yl(t,e,n,r){var s=t.updateQueue;or=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,c=s.shared.pending;if(c!==null){s.shared.pending=null;var u=c,d=u.next;u.next=null,o===null?i=d:o.next=d,o=u;var p=t.alternate;p!==null&&(p=p.updateQueue,c=p.lastBaseUpdate,c!==o&&(c===null?p.firstBaseUpdate=d:c.next=d,p.lastBaseUpdate=u))}if(i!==null){var m=s.baseState;o=0,p=d=u=null,c=i;do{var g=c.lane,_=c.eventTime;if((r&g)===g){p!==null&&(p=p.next={eventTime:_,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var R=t,P=c;switch(g=e,_=n,P.tag){case 1:if(R=P.payload,typeof R=="function"){m=R.call(_,m,g);break e}m=R;break e;case 3:R.flags=R.flags&-65537|128;case 0:if(R=P.payload,g=typeof R=="function"?R.call(_,m,g):R,g==null)break e;m=je({},m,g);break e;case 2:or=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[c]:g.push(c))}else _={eventTime:_,lane:g,tag:c.tag,payload:c.payload,callback:c.callback,next:null},p===null?(d=p=_,u=m):p=p.next=_,o|=g;if(c=c.next,c===null){if(c=s.shared.pending,c===null)break;g=c,c=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(p===null&&(u=m),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=p,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);us|=o,t.lanes=o,t.memoizedState=m}}function tg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(B(191,s));s.call(r)}}}var pa={},wn=Mr(pa),Ko=Mr(pa),Qo=Mr(pa);function ts(t){if(t===pa)throw Error(B(174));return t}function ff(t,e){switch(xe(Qo,e),xe(Ko,t),xe(wn,pa),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:xd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=xd(e,t)}ke(wn),xe(wn,e)}function hi(){ke(wn),ke(Ko),ke(Qo)}function I_(t){ts(Qo.current);var e=ts(wn.current),n=xd(e,t.type);e!==n&&(xe(Ko,t),xe(wn,n))}function pf(t){Ko.current===t&&(ke(wn),ke(Ko))}var Pe=Mr(0);function Jl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Qu=[];function mf(){for(var t=0;t<Qu.length;t++)Qu[t]._workInProgressVersionPrimary=null;Qu.length=0}var _l=Qn.ReactCurrentDispatcher,Yu=Qn.ReactCurrentBatchConfig,cs=0,be=null,He=null,Ze=null,Xl=!1,Co=!1,Yo=0,II=0;function ut(){throw Error(B(321))}function gf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!sn(t[n],e[n]))return!1;return!0}function yf(t,e,n,r,s,i){if(cs=i,be=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,_l.current=t===null||t.memoizedState===null?CI:AI,t=n(r,s),Co){i=0;do{if(Co=!1,Yo=0,25<=i)throw Error(B(301));i+=1,Ze=He=null,e.updateQueue=null,_l.current=kI,t=n(r,s)}while(Co)}if(_l.current=Zl,e=He!==null&&He.next!==null,cs=0,Ze=He=be=null,Xl=!1,e)throw Error(B(300));return t}function vf(){var t=Yo!==0;return Yo=0,t}function gn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ze===null?be.memoizedState=Ze=t:Ze=Ze.next=t,Ze}function Kt(){if(He===null){var t=be.alternate;t=t!==null?t.memoizedState:null}else t=He.next;var e=Ze===null?be.memoizedState:Ze.next;if(e!==null)Ze=e,He=t;else{if(t===null)throw Error(B(310));He=t,t={memoizedState:He.memoizedState,baseState:He.baseState,baseQueue:He.baseQueue,queue:He.queue,next:null},Ze===null?be.memoizedState=Ze=t:Ze=Ze.next=t}return Ze}function Jo(t,e){return typeof e=="function"?e(t):e}function Ju(t){var e=Kt(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=He,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var c=o=null,u=null,d=i;do{var p=d.lane;if((cs&p)===p)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var m={lane:p,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(c=u=m,o=r):u=u.next=m,be.lanes|=p,us|=p}d=d.next}while(d!==null&&d!==i);u===null?o=r:u.next=c,sn(r,e.memoizedState)||(Nt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,be.lanes|=i,us|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Xu(t){var e=Kt(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);sn(i,e.memoizedState)||(Nt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function S_(){}function x_(t,e){var n=be,r=Kt(),s=e(),i=!sn(r.memoizedState,s);if(i&&(r.memoizedState=s,Nt=!0),r=r.queue,_f(A_.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Ze!==null&&Ze.memoizedState.tag&1){if(n.flags|=2048,Xo(9,C_.bind(null,n,r,s,e),void 0,null),et===null)throw Error(B(349));cs&30||N_(n,e,s)}return s}function N_(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=be.updateQueue,e===null?(e={lastEffect:null,stores:null},be.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function C_(t,e,n,r){e.value=n,e.getSnapshot=r,k_(e)&&R_(t)}function A_(t,e,n){return n(function(){k_(e)&&R_(t)})}function k_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!sn(t,n)}catch{return!0}}function R_(t){var e=$n(t,1);e!==null&&nn(e,t,1,-1)}function ng(t){var e=gn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Jo,lastRenderedState:t},e.queue=t,t=t.dispatch=NI.bind(null,be,t),[e.memoizedState,t]}function Xo(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=be.updateQueue,e===null?(e={lastEffect:null,stores:null},be.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function P_(){return Kt().memoizedState}function wl(t,e,n,r){var s=gn();be.flags|=t,s.memoizedState=Xo(1|e,n,void 0,r===void 0?null:r)}function Vc(t,e,n,r){var s=Kt();r=r===void 0?null:r;var i=void 0;if(He!==null){var o=He.memoizedState;if(i=o.destroy,r!==null&&gf(r,o.deps)){s.memoizedState=Xo(e,n,i,r);return}}be.flags|=t,s.memoizedState=Xo(1|e,n,i,r)}function rg(t,e){return wl(8390656,8,t,e)}function _f(t,e){return Vc(2048,8,t,e)}function b_(t,e){return Vc(4,2,t,e)}function j_(t,e){return Vc(4,4,t,e)}function D_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function V_(t,e,n){return n=n!=null?n.concat([t]):null,Vc(4,4,D_.bind(null,e,t),n)}function wf(){}function O_(t,e){var n=Kt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&gf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function L_(t,e){var n=Kt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&gf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function M_(t,e,n){return cs&21?(sn(n,e)||(n=$v(),be.lanes|=n,us|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Nt=!0),t.memoizedState=n)}function SI(t,e){var n=we;we=n!==0&&4>n?n:4,t(!0);var r=Yu.transition;Yu.transition={};try{t(!1),e()}finally{we=n,Yu.transition=r}}function F_(){return Kt().memoizedState}function xI(t,e,n){var r=Tr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},U_(t))z_(e,n);else if(n=E_(t,e,n,r),n!==null){var s=Et();nn(n,t,r,s),B_(n,e,r)}}function NI(t,e,n){var r=Tr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(U_(t))z_(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,c=i(o,n);if(s.hasEagerState=!0,s.eagerState=c,sn(c,o)){var u=e.interleaved;u===null?(s.next=s,df(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=E_(t,e,s,r),n!==null&&(s=Et(),nn(n,t,r,s),B_(n,e,r))}}function U_(t){var e=t.alternate;return t===be||e!==null&&e===be}function z_(t,e){Co=Xl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function B_(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Yh(t,n)}}var Zl={readContext:Gt,useCallback:ut,useContext:ut,useEffect:ut,useImperativeHandle:ut,useInsertionEffect:ut,useLayoutEffect:ut,useMemo:ut,useReducer:ut,useRef:ut,useState:ut,useDebugValue:ut,useDeferredValue:ut,useTransition:ut,useMutableSource:ut,useSyncExternalStore:ut,useId:ut,unstable_isNewReconciler:!1},CI={readContext:Gt,useCallback:function(t,e){return gn().memoizedState=[t,e===void 0?null:e],t},useContext:Gt,useEffect:rg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,wl(4194308,4,D_.bind(null,e,t),n)},useLayoutEffect:function(t,e){return wl(4194308,4,t,e)},useInsertionEffect:function(t,e){return wl(4,2,t,e)},useMemo:function(t,e){var n=gn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=gn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=xI.bind(null,be,t),[r.memoizedState,t]},useRef:function(t){var e=gn();return t={current:t},e.memoizedState=t},useState:ng,useDebugValue:wf,useDeferredValue:function(t){return gn().memoizedState=t},useTransition:function(){var t=ng(!1),e=t[0];return t=SI.bind(null,t[1]),gn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=be,s=gn();if(Re){if(n===void 0)throw Error(B(407));n=n()}else{if(n=e(),et===null)throw Error(B(349));cs&30||N_(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,rg(A_.bind(null,r,i,t),[t]),r.flags|=2048,Xo(9,C_.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=gn(),e=et.identifierPrefix;if(Re){var n=Dn,r=jn;n=(r&~(1<<32-tn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Yo++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=II++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},AI={readContext:Gt,useCallback:O_,useContext:Gt,useEffect:_f,useImperativeHandle:V_,useInsertionEffect:b_,useLayoutEffect:j_,useMemo:L_,useReducer:Ju,useRef:P_,useState:function(){return Ju(Jo)},useDebugValue:wf,useDeferredValue:function(t){var e=Kt();return M_(e,He.memoizedState,t)},useTransition:function(){var t=Ju(Jo)[0],e=Kt().memoizedState;return[t,e]},useMutableSource:S_,useSyncExternalStore:x_,useId:F_,unstable_isNewReconciler:!1},kI={readContext:Gt,useCallback:O_,useContext:Gt,useEffect:_f,useImperativeHandle:V_,useInsertionEffect:b_,useLayoutEffect:j_,useMemo:L_,useReducer:Xu,useRef:P_,useState:function(){return Xu(Jo)},useDebugValue:wf,useDeferredValue:function(t){var e=Kt();return He===null?e.memoizedState=t:M_(e,He.memoizedState,t)},useTransition:function(){var t=Xu(Jo)[0],e=Kt().memoizedState;return[t,e]},useMutableSource:S_,useSyncExternalStore:x_,useId:F_,unstable_isNewReconciler:!1};function Yt(t,e){if(t&&t.defaultProps){e=je({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Wd(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:je({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Oc={isMounted:function(t){return(t=t._reactInternals)?_s(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Et(),s=Tr(t),i=Ln(r,s);i.payload=e,n!=null&&(i.callback=n),e=wr(t,i,s),e!==null&&(nn(e,t,s,r),vl(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Et(),s=Tr(t),i=Ln(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=wr(t,i,s),e!==null&&(nn(e,t,s,r),vl(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Et(),r=Tr(t),s=Ln(n,r);s.tag=2,e!=null&&(s.callback=e),e=wr(t,s,r),e!==null&&(nn(e,t,r,n),vl(e,t,r))}};function sg(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!qo(n,r)||!qo(s,i):!0}function $_(t,e,n){var r=!1,s=Rr,i=e.contextType;return typeof i=="object"&&i!==null?i=Gt(i):(s=At(e)?as:gt.current,r=e.contextTypes,i=(r=r!=null)?ci(t,s):Rr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Oc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function ig(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Oc.enqueueReplaceState(e,e.state,null)}function Gd(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},hf(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Gt(i):(i=At(e)?as:gt.current,s.context=ci(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Wd(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Oc.enqueueReplaceState(s,s.state,null),Yl(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function fi(t,e){try{var n="",r=e;do n+=rT(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Zu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Kd(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var RI=typeof WeakMap=="function"?WeakMap:Map;function q_(t,e,n){n=Ln(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){tc||(tc=!0,sh=r),Kd(t,e)},n}function H_(t,e,n){n=Ln(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Kd(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Kd(t,e),typeof r!="function"&&(Er===null?Er=new Set([this]):Er.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function og(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new RI;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=qI.bind(null,t,e,n),e.then(t,t))}function ag(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function lg(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ln(-1,1),e.tag=2,wr(n,e,1))),n.lanes|=1),t)}var PI=Qn.ReactCurrentOwner,Nt=!1;function wt(t,e,n,r){e.child=t===null?w_(e,null,n,r):di(e,t.child,n,r)}function cg(t,e,n,r,s){n=n.render;var i=e.ref;return ti(e,s),r=yf(t,e,n,r,i,s),n=vf(),t!==null&&!Nt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,qn(t,e,s)):(Re&&n&&sf(e),e.flags|=1,wt(t,e,r,s),e.child)}function ug(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Af(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,W_(t,e,i,r,s)):(t=Sl(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:qo,n(o,r)&&t.ref===e.ref)return qn(t,e,s)}return e.flags|=1,t=Ir(i,r),t.ref=e.ref,t.return=e,e.child=t}function W_(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(qo(i,r)&&t.ref===e.ref)if(Nt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Nt=!0);else return e.lanes=t.lanes,qn(t,e,s)}return Qd(t,e,n,r,s)}function G_(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},xe(Qs,jt),jt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,xe(Qs,jt),jt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,xe(Qs,jt),jt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,xe(Qs,jt),jt|=r;return wt(t,e,s,n),e.child}function K_(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Qd(t,e,n,r,s){var i=At(n)?as:gt.current;return i=ci(e,i),ti(e,s),n=yf(t,e,n,r,i,s),r=vf(),t!==null&&!Nt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,qn(t,e,s)):(Re&&r&&sf(e),e.flags|=1,wt(t,e,n,s),e.child)}function dg(t,e,n,r,s){if(At(n)){var i=!0;Hl(e)}else i=!1;if(ti(e,s),e.stateNode===null)El(t,e),$_(e,n,r),Gd(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,c=e.memoizedProps;o.props=c;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=Gt(d):(d=At(n)?as:gt.current,d=ci(e,d));var p=n.getDerivedStateFromProps,m=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==r||u!==d)&&ig(e,o,r,d),or=!1;var g=e.memoizedState;o.state=g,Yl(e,r,o,s),u=e.memoizedState,c!==r||g!==u||Ct.current||or?(typeof p=="function"&&(Wd(e,n,p,r),u=e.memoizedState),(c=or||sg(e,n,c,r,g,u,d))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=d,r=c):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,T_(t,e),c=e.memoizedProps,d=e.type===e.elementType?c:Yt(e.type,c),o.props=d,m=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Gt(u):(u=At(n)?as:gt.current,u=ci(e,u));var _=n.getDerivedStateFromProps;(p=typeof _=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==m||g!==u)&&ig(e,o,r,u),or=!1,g=e.memoizedState,o.state=g,Yl(e,r,o,s);var R=e.memoizedState;c!==m||g!==R||Ct.current||or?(typeof _=="function"&&(Wd(e,n,_,r),R=e.memoizedState),(d=or||sg(e,n,d,r,g,R,u)||!1)?(p||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,R,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,R,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=R),o.props=r,o.state=R,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return Yd(t,e,n,r,i,s)}function Yd(t,e,n,r,s,i){K_(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Ym(e,n,!1),qn(t,e,i);r=e.stateNode,PI.current=e;var c=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=di(e,t.child,null,i),e.child=di(e,null,c,i)):wt(t,e,c,i),e.memoizedState=r.state,s&&Ym(e,n,!0),e.child}function Q_(t){var e=t.stateNode;e.pendingContext?Qm(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Qm(t,e.context,!1),ff(t,e.containerInfo)}function hg(t,e,n,r,s){return ui(),af(s),e.flags|=256,wt(t,e,n,r),e.child}var Jd={dehydrated:null,treeContext:null,retryLane:0};function Xd(t){return{baseLanes:t,cachePool:null,transitions:null}}function Y_(t,e,n){var r=e.pendingProps,s=Pe.current,i=!1,o=(e.flags&128)!==0,c;if((c=o)||(c=t!==null&&t.memoizedState===null?!1:(s&2)!==0),c?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),xe(Pe,s&1),t===null)return qd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Fc(o,r,0,null),t=ss(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Xd(n),e.memoizedState=Jd,t):Ef(e,o));if(s=t.memoizedState,s!==null&&(c=s.dehydrated,c!==null))return bI(t,e,o,r,c,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,c=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Ir(s,u),r.subtreeFlags=s.subtreeFlags&14680064),c!==null?i=Ir(c,i):(i=ss(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Xd(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Jd,r}return i=t.child,t=i.sibling,r=Ir(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Ef(t,e){return e=Fc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function rl(t,e,n,r){return r!==null&&af(r),di(e,t.child,null,n),t=Ef(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function bI(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Zu(Error(B(422))),rl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Fc({mode:"visible",children:r.children},s,0,null),i=ss(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&di(e,t.child,null,o),e.child.memoizedState=Xd(o),e.memoizedState=Jd,i);if(!(e.mode&1))return rl(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var c=r.dgst;return r=c,i=Error(B(419)),r=Zu(i,r,void 0),rl(t,e,o,r)}if(c=(o&t.childLanes)!==0,Nt||c){if(r=et,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,$n(t,s),nn(r,t,s,-1))}return Cf(),r=Zu(Error(B(421))),rl(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=HI.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Dt=_r(s.nextSibling),Vt=e,Re=!0,Xt=null,t!==null&&(Ut[zt++]=jn,Ut[zt++]=Dn,Ut[zt++]=ls,jn=t.id,Dn=t.overflow,ls=e),e=Ef(e,r.children),e.flags|=4096,e)}function fg(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Hd(t.return,e,n)}function ed(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function J_(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(wt(t,e,r.children,n),r=Pe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&fg(t,n,e);else if(t.tag===19)fg(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(xe(Pe,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Jl(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),ed(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Jl(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}ed(e,!0,n,null,i);break;case"together":ed(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function El(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function qn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),us|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(B(153));if(e.child!==null){for(t=e.child,n=Ir(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ir(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function jI(t,e,n){switch(e.tag){case 3:Q_(e),ui();break;case 5:I_(e);break;case 1:At(e.type)&&Hl(e);break;case 4:ff(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;xe(Kl,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(xe(Pe,Pe.current&1),e.flags|=128,null):n&e.child.childLanes?Y_(t,e,n):(xe(Pe,Pe.current&1),t=qn(t,e,n),t!==null?t.sibling:null);xe(Pe,Pe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return J_(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),xe(Pe,Pe.current),r)break;return null;case 22:case 23:return e.lanes=0,G_(t,e,n)}return qn(t,e,n)}var X_,Zd,Z_,ew;X_=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Zd=function(){};Z_=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,ts(wn.current);var i=null;switch(n){case"input":s=Ed(t,s),r=Ed(t,r),i=[];break;case"select":s=je({},s,{value:void 0}),r=je({},r,{value:void 0}),i=[];break;case"textarea":s=Sd(t,s),r=Sd(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=$l)}Nd(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var c=s[d];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Lo.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(c=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==c&&(u!=null||c!=null))if(d==="style")if(c){for(o in c)!c.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&c[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Lo.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&Ce("scroll",t),i||c===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};ew=function(t,e,n,r){n!==r&&(e.flags|=4)};function ao(t,e){if(!Re)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function dt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function DI(t,e,n){var r=e.pendingProps;switch(of(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dt(e),null;case 1:return At(e.type)&&ql(),dt(e),null;case 3:return r=e.stateNode,hi(),ke(Ct),ke(gt),mf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(tl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Xt!==null&&(ah(Xt),Xt=null))),Zd(t,e),dt(e),null;case 5:pf(e);var s=ts(Qo.current);if(n=e.type,t!==null&&e.stateNode!=null)Z_(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(B(166));return dt(e),null}if(t=ts(wn.current),tl(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[vn]=e,r[Go]=i,t=(e.mode&1)!==0,n){case"dialog":Ce("cancel",r),Ce("close",r);break;case"iframe":case"object":case"embed":Ce("load",r);break;case"video":case"audio":for(s=0;s<po.length;s++)Ce(po[s],r);break;case"source":Ce("error",r);break;case"img":case"image":case"link":Ce("error",r),Ce("load",r);break;case"details":Ce("toggle",r);break;case"input":Tm(r,i),Ce("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ce("invalid",r);break;case"textarea":Sm(r,i),Ce("invalid",r)}Nd(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var c=i[o];o==="children"?typeof c=="string"?r.textContent!==c&&(i.suppressHydrationWarning!==!0&&el(r.textContent,c,t),s=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(i.suppressHydrationWarning!==!0&&el(r.textContent,c,t),s=["children",""+c]):Lo.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&Ce("scroll",r)}switch(n){case"input":Wa(r),Im(r,i,!0);break;case"textarea":Wa(r),xm(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=$l)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Av(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[vn]=e,t[Go]=r,X_(t,e,!1,!1),e.stateNode=t;e:{switch(o=Cd(n,r),n){case"dialog":Ce("cancel",t),Ce("close",t),s=r;break;case"iframe":case"object":case"embed":Ce("load",t),s=r;break;case"video":case"audio":for(s=0;s<po.length;s++)Ce(po[s],t);s=r;break;case"source":Ce("error",t),s=r;break;case"img":case"image":case"link":Ce("error",t),Ce("load",t),s=r;break;case"details":Ce("toggle",t),s=r;break;case"input":Tm(t,r),s=Ed(t,r),Ce("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=je({},r,{value:void 0}),Ce("invalid",t);break;case"textarea":Sm(t,r),s=Sd(t,r),Ce("invalid",t);break;default:s=r}Nd(n,s),c=s;for(i in c)if(c.hasOwnProperty(i)){var u=c[i];i==="style"?Pv(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&kv(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Mo(t,u):typeof u=="number"&&Mo(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Lo.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Ce("scroll",t):u!=null&&qh(t,i,u,o))}switch(n){case"input":Wa(t),Im(t,r,!1);break;case"textarea":Wa(t),xm(t);break;case"option":r.value!=null&&t.setAttribute("value",""+kr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Js(t,!!r.multiple,i,!1):r.defaultValue!=null&&Js(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=$l)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return dt(e),null;case 6:if(t&&e.stateNode!=null)ew(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(B(166));if(n=ts(Qo.current),ts(wn.current),tl(e)){if(r=e.stateNode,n=e.memoizedProps,r[vn]=e,(i=r.nodeValue!==n)&&(t=Vt,t!==null))switch(t.tag){case 3:el(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&el(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[vn]=e,e.stateNode=r}return dt(e),null;case 13:if(ke(Pe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Re&&Dt!==null&&e.mode&1&&!(e.flags&128))v_(),ui(),e.flags|=98560,i=!1;else if(i=tl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(B(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(B(317));i[vn]=e}else ui(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;dt(e),i=!1}else Xt!==null&&(ah(Xt),Xt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Pe.current&1?We===0&&(We=3):Cf())),e.updateQueue!==null&&(e.flags|=4),dt(e),null);case 4:return hi(),Zd(t,e),t===null&&Ho(e.stateNode.containerInfo),dt(e),null;case 10:return uf(e.type._context),dt(e),null;case 17:return At(e.type)&&ql(),dt(e),null;case 19:if(ke(Pe),i=e.memoizedState,i===null)return dt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)ao(i,!1);else{if(We!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Jl(t),o!==null){for(e.flags|=128,ao(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return xe(Pe,Pe.current&1|2),e.child}t=t.sibling}i.tail!==null&&Me()>pi&&(e.flags|=128,r=!0,ao(i,!1),e.lanes=4194304)}else{if(!r)if(t=Jl(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ao(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Re)return dt(e),null}else 2*Me()-i.renderingStartTime>pi&&n!==1073741824&&(e.flags|=128,r=!0,ao(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Me(),e.sibling=null,n=Pe.current,xe(Pe,r?n&1|2:n&1),e):(dt(e),null);case 22:case 23:return Nf(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?jt&1073741824&&(dt(e),e.subtreeFlags&6&&(e.flags|=8192)):dt(e),null;case 24:return null;case 25:return null}throw Error(B(156,e.tag))}function VI(t,e){switch(of(e),e.tag){case 1:return At(e.type)&&ql(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return hi(),ke(Ct),ke(gt),mf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return pf(e),null;case 13:if(ke(Pe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(B(340));ui()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ke(Pe),null;case 4:return hi(),null;case 10:return uf(e.type._context),null;case 22:case 23:return Nf(),null;case 24:return null;default:return null}}var sl=!1,pt=!1,OI=typeof WeakSet=="function"?WeakSet:Set,Q=null;function Ks(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Oe(t,e,r)}else n.current=null}function eh(t,e,n){try{n()}catch(r){Oe(t,e,r)}}var pg=!1;function LI(t,e){if(Ld=Ul,t=i_(),rf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,c=-1,u=-1,d=0,p=0,m=t,g=null;t:for(;;){for(var _;m!==n||s!==0&&m.nodeType!==3||(c=o+s),m!==i||r!==0&&m.nodeType!==3||(u=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(_=m.firstChild)!==null;)g=m,m=_;for(;;){if(m===t)break t;if(g===n&&++d===s&&(c=o),g===i&&++p===r&&(u=o),(_=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=_}n=c===-1||u===-1?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Md={focusedElem:t,selectionRange:n},Ul=!1,Q=e;Q!==null;)if(e=Q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Q=t;else for(;Q!==null;){e=Q;try{var R=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(R!==null){var P=R.memoizedProps,L=R.memoizedState,S=e.stateNode,T=S.getSnapshotBeforeUpdate(e.elementType===e.type?P:Yt(e.type,P),L);S.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(B(163))}}catch(O){Oe(e,e.return,O)}if(t=e.sibling,t!==null){t.return=e.return,Q=t;break}Q=e.return}return R=pg,pg=!1,R}function Ao(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&eh(e,n,i)}s=s.next}while(s!==r)}}function Lc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function th(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function tw(t){var e=t.alternate;e!==null&&(t.alternate=null,tw(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[vn],delete e[Go],delete e[zd],delete e[_I],delete e[wI])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function nw(t){return t.tag===5||t.tag===3||t.tag===4}function mg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||nw(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function nh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=$l));else if(r!==4&&(t=t.child,t!==null))for(nh(t,e,n),t=t.sibling;t!==null;)nh(t,e,n),t=t.sibling}function rh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(rh(t,e,n),t=t.sibling;t!==null;)rh(t,e,n),t=t.sibling}var st=null,Jt=!1;function rr(t,e,n){for(n=n.child;n!==null;)rw(t,e,n),n=n.sibling}function rw(t,e,n){if(_n&&typeof _n.onCommitFiberUnmount=="function")try{_n.onCommitFiberUnmount(kc,n)}catch{}switch(n.tag){case 5:pt||Ks(n,e);case 6:var r=st,s=Jt;st=null,rr(t,e,n),st=r,Jt=s,st!==null&&(Jt?(t=st,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):st.removeChild(n.stateNode));break;case 18:st!==null&&(Jt?(t=st,n=n.stateNode,t.nodeType===8?Gu(t.parentNode,n):t.nodeType===1&&Gu(t,n),Bo(t)):Gu(st,n.stateNode));break;case 4:r=st,s=Jt,st=n.stateNode.containerInfo,Jt=!0,rr(t,e,n),st=r,Jt=s;break;case 0:case 11:case 14:case 15:if(!pt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&eh(n,e,o),s=s.next}while(s!==r)}rr(t,e,n);break;case 1:if(!pt&&(Ks(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){Oe(n,e,c)}rr(t,e,n);break;case 21:rr(t,e,n);break;case 22:n.mode&1?(pt=(r=pt)||n.memoizedState!==null,rr(t,e,n),pt=r):rr(t,e,n);break;default:rr(t,e,n)}}function gg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new OI),e.forEach(function(r){var s=WI.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Qt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,c=o;e:for(;c!==null;){switch(c.tag){case 5:st=c.stateNode,Jt=!1;break e;case 3:st=c.stateNode.containerInfo,Jt=!0;break e;case 4:st=c.stateNode.containerInfo,Jt=!0;break e}c=c.return}if(st===null)throw Error(B(160));rw(i,o,s),st=null,Jt=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){Oe(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)sw(e,t),e=e.sibling}function sw(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Qt(e,t),pn(t),r&4){try{Ao(3,t,t.return),Lc(3,t)}catch(P){Oe(t,t.return,P)}try{Ao(5,t,t.return)}catch(P){Oe(t,t.return,P)}}break;case 1:Qt(e,t),pn(t),r&512&&n!==null&&Ks(n,n.return);break;case 5:if(Qt(e,t),pn(t),r&512&&n!==null&&Ks(n,n.return),t.flags&32){var s=t.stateNode;try{Mo(s,"")}catch(P){Oe(t,t.return,P)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,c=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{c==="input"&&i.type==="radio"&&i.name!=null&&Nv(s,i),Cd(c,o);var d=Cd(c,i);for(o=0;o<u.length;o+=2){var p=u[o],m=u[o+1];p==="style"?Pv(s,m):p==="dangerouslySetInnerHTML"?kv(s,m):p==="children"?Mo(s,m):qh(s,p,m,d)}switch(c){case"input":Td(s,i);break;case"textarea":Cv(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var _=i.value;_!=null?Js(s,!!i.multiple,_,!1):g!==!!i.multiple&&(i.defaultValue!=null?Js(s,!!i.multiple,i.defaultValue,!0):Js(s,!!i.multiple,i.multiple?[]:"",!1))}s[Go]=i}catch(P){Oe(t,t.return,P)}}break;case 6:if(Qt(e,t),pn(t),r&4){if(t.stateNode===null)throw Error(B(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(P){Oe(t,t.return,P)}}break;case 3:if(Qt(e,t),pn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Bo(e.containerInfo)}catch(P){Oe(t,t.return,P)}break;case 4:Qt(e,t),pn(t);break;case 13:Qt(e,t),pn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Sf=Me())),r&4&&gg(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(pt=(d=pt)||p,Qt(e,t),pt=d):Qt(e,t),pn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!p&&t.mode&1)for(Q=t,p=t.child;p!==null;){for(m=Q=p;Q!==null;){switch(g=Q,_=g.child,g.tag){case 0:case 11:case 14:case 15:Ao(4,g,g.return);break;case 1:Ks(g,g.return);var R=g.stateNode;if(typeof R.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,R.props=e.memoizedProps,R.state=e.memoizedState,R.componentWillUnmount()}catch(P){Oe(r,n,P)}}break;case 5:Ks(g,g.return);break;case 22:if(g.memoizedState!==null){vg(m);continue}}_!==null?(_.return=g,Q=_):vg(m)}p=p.sibling}e:for(p=null,m=t;;){if(m.tag===5){if(p===null){p=m;try{s=m.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(c=m.stateNode,u=m.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=Rv("display",o))}catch(P){Oe(t,t.return,P)}}}else if(m.tag===6){if(p===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(P){Oe(t,t.return,P)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;p===m&&(p=null),m=m.return}p===m&&(p=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Qt(e,t),pn(t),r&4&&gg(t);break;case 21:break;default:Qt(e,t),pn(t)}}function pn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(nw(n)){var r=n;break e}n=n.return}throw Error(B(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Mo(s,""),r.flags&=-33);var i=mg(t);rh(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,c=mg(t);nh(t,c,o);break;default:throw Error(B(161))}}catch(u){Oe(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function MI(t,e,n){Q=t,iw(t)}function iw(t,e,n){for(var r=(t.mode&1)!==0;Q!==null;){var s=Q,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||sl;if(!o){var c=s.alternate,u=c!==null&&c.memoizedState!==null||pt;c=sl;var d=pt;if(sl=o,(pt=u)&&!d)for(Q=s;Q!==null;)o=Q,u=o.child,o.tag===22&&o.memoizedState!==null?_g(s):u!==null?(u.return=o,Q=u):_g(s);for(;i!==null;)Q=i,iw(i),i=i.sibling;Q=s,sl=c,pt=d}yg(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Q=i):yg(t)}}function yg(t){for(;Q!==null;){var e=Q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:pt||Lc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!pt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Yt(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&tg(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}tg(e,o,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var p=d.memoizedState;if(p!==null){var m=p.dehydrated;m!==null&&Bo(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(B(163))}pt||e.flags&512&&th(e)}catch(g){Oe(e,e.return,g)}}if(e===t){Q=null;break}if(n=e.sibling,n!==null){n.return=e.return,Q=n;break}Q=e.return}}function vg(t){for(;Q!==null;){var e=Q;if(e===t){Q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Q=n;break}Q=e.return}}function _g(t){for(;Q!==null;){var e=Q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Lc(4,e)}catch(u){Oe(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Oe(e,s,u)}}var i=e.return;try{th(e)}catch(u){Oe(e,i,u)}break;case 5:var o=e.return;try{th(e)}catch(u){Oe(e,o,u)}}}catch(u){Oe(e,e.return,u)}if(e===t){Q=null;break}var c=e.sibling;if(c!==null){c.return=e.return,Q=c;break}Q=e.return}}var FI=Math.ceil,ec=Qn.ReactCurrentDispatcher,Tf=Qn.ReactCurrentOwner,Wt=Qn.ReactCurrentBatchConfig,me=0,et=null,ze=null,at=0,jt=0,Qs=Mr(0),We=0,Zo=null,us=0,Mc=0,If=0,ko=null,xt=null,Sf=0,pi=1/0,Pn=null,tc=!1,sh=null,Er=null,il=!1,pr=null,nc=0,Ro=0,ih=null,Tl=-1,Il=0;function Et(){return me&6?Me():Tl!==-1?Tl:Tl=Me()}function Tr(t){return t.mode&1?me&2&&at!==0?at&-at:TI.transition!==null?(Il===0&&(Il=$v()),Il):(t=we,t!==0||(t=window.event,t=t===void 0?16:Yv(t.type)),t):1}function nn(t,e,n,r){if(50<Ro)throw Ro=0,ih=null,Error(B(185));da(t,n,r),(!(me&2)||t!==et)&&(t===et&&(!(me&2)&&(Mc|=n),We===4&&lr(t,at)),kt(t,r),n===1&&me===0&&!(e.mode&1)&&(pi=Me()+500,Dc&&Fr()))}function kt(t,e){var n=t.callbackNode;TT(t,e);var r=Fl(t,t===et?at:0);if(r===0)n!==null&&Am(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Am(n),e===1)t.tag===0?EI(wg.bind(null,t)):m_(wg.bind(null,t)),yI(function(){!(me&6)&&Fr()}),n=null;else{switch(qv(r)){case 1:n=Qh;break;case 4:n=zv;break;case 16:n=Ml;break;case 536870912:n=Bv;break;default:n=Ml}n=fw(n,ow.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function ow(t,e){if(Tl=-1,Il=0,me&6)throw Error(B(327));var n=t.callbackNode;if(ni()&&t.callbackNode!==n)return null;var r=Fl(t,t===et?at:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=rc(t,r);else{e=r;var s=me;me|=2;var i=lw();(et!==t||at!==e)&&(Pn=null,pi=Me()+500,rs(t,e));do try{BI();break}catch(c){aw(t,c)}while(!0);cf(),ec.current=i,me=s,ze!==null?e=0:(et=null,at=0,e=We)}if(e!==0){if(e===2&&(s=bd(t),s!==0&&(r=s,e=oh(t,s))),e===1)throw n=Zo,rs(t,0),lr(t,r),kt(t,Me()),n;if(e===6)lr(t,r);else{if(s=t.current.alternate,!(r&30)&&!UI(s)&&(e=rc(t,r),e===2&&(i=bd(t),i!==0&&(r=i,e=oh(t,i))),e===1))throw n=Zo,rs(t,0),lr(t,r),kt(t,Me()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(B(345));case 2:Jr(t,xt,Pn);break;case 3:if(lr(t,r),(r&130023424)===r&&(e=Sf+500-Me(),10<e)){if(Fl(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Et(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Ud(Jr.bind(null,t,xt,Pn),e);break}Jr(t,xt,Pn);break;case 4:if(lr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-tn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Me()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*FI(r/1960))-r,10<r){t.timeoutHandle=Ud(Jr.bind(null,t,xt,Pn),r);break}Jr(t,xt,Pn);break;case 5:Jr(t,xt,Pn);break;default:throw Error(B(329))}}}return kt(t,Me()),t.callbackNode===n?ow.bind(null,t):null}function oh(t,e){var n=ko;return t.current.memoizedState.isDehydrated&&(rs(t,e).flags|=256),t=rc(t,e),t!==2&&(e=xt,xt=n,e!==null&&ah(e)),t}function ah(t){xt===null?xt=t:xt.push.apply(xt,t)}function UI(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!sn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function lr(t,e){for(e&=~If,e&=~Mc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-tn(e),r=1<<n;t[n]=-1,e&=~r}}function wg(t){if(me&6)throw Error(B(327));ni();var e=Fl(t,0);if(!(e&1))return kt(t,Me()),null;var n=rc(t,e);if(t.tag!==0&&n===2){var r=bd(t);r!==0&&(e=r,n=oh(t,r))}if(n===1)throw n=Zo,rs(t,0),lr(t,e),kt(t,Me()),n;if(n===6)throw Error(B(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Jr(t,xt,Pn),kt(t,Me()),null}function xf(t,e){var n=me;me|=1;try{return t(e)}finally{me=n,me===0&&(pi=Me()+500,Dc&&Fr())}}function ds(t){pr!==null&&pr.tag===0&&!(me&6)&&ni();var e=me;me|=1;var n=Wt.transition,r=we;try{if(Wt.transition=null,we=1,t)return t()}finally{we=r,Wt.transition=n,me=e,!(me&6)&&Fr()}}function Nf(){jt=Qs.current,ke(Qs)}function rs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,gI(n)),ze!==null)for(n=ze.return;n!==null;){var r=n;switch(of(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ql();break;case 3:hi(),ke(Ct),ke(gt),mf();break;case 5:pf(r);break;case 4:hi();break;case 13:ke(Pe);break;case 19:ke(Pe);break;case 10:uf(r.type._context);break;case 22:case 23:Nf()}n=n.return}if(et=t,ze=t=Ir(t.current,null),at=jt=e,We=0,Zo=null,If=Mc=us=0,xt=ko=null,es!==null){for(e=0;e<es.length;e++)if(n=es[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}es=null}return t}function aw(t,e){do{var n=ze;try{if(cf(),_l.current=Zl,Xl){for(var r=be.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Xl=!1}if(cs=0,Ze=He=be=null,Co=!1,Yo=0,Tf.current=null,n===null||n.return===null){We=1,Zo=e,ze=null;break}e:{var i=t,o=n.return,c=n,u=e;if(e=at,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,p=c,m=p.tag;if(!(p.mode&1)&&(m===0||m===11||m===15)){var g=p.alternate;g?(p.updateQueue=g.updateQueue,p.memoizedState=g.memoizedState,p.lanes=g.lanes):(p.updateQueue=null,p.memoizedState=null)}var _=ag(o);if(_!==null){_.flags&=-257,lg(_,o,c,i,e),_.mode&1&&og(i,d,e),e=_,u=d;var R=e.updateQueue;if(R===null){var P=new Set;P.add(u),e.updateQueue=P}else R.add(u);break e}else{if(!(e&1)){og(i,d,e),Cf();break e}u=Error(B(426))}}else if(Re&&c.mode&1){var L=ag(o);if(L!==null){!(L.flags&65536)&&(L.flags|=256),lg(L,o,c,i,e),af(fi(u,c));break e}}i=u=fi(u,c),We!==4&&(We=2),ko===null?ko=[i]:ko.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var S=q_(i,u,e);eg(i,S);break e;case 1:c=u;var T=i.type,x=i.stateNode;if(!(i.flags&128)&&(typeof T.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Er===null||!Er.has(x)))){i.flags|=65536,e&=-e,i.lanes|=e;var O=H_(i,c,e);eg(i,O);break e}}i=i.return}while(i!==null)}uw(n)}catch(j){e=j,ze===n&&n!==null&&(ze=n=n.return);continue}break}while(!0)}function lw(){var t=ec.current;return ec.current=Zl,t===null?Zl:t}function Cf(){(We===0||We===3||We===2)&&(We=4),et===null||!(us&268435455)&&!(Mc&268435455)||lr(et,at)}function rc(t,e){var n=me;me|=2;var r=lw();(et!==t||at!==e)&&(Pn=null,rs(t,e));do try{zI();break}catch(s){aw(t,s)}while(!0);if(cf(),me=n,ec.current=r,ze!==null)throw Error(B(261));return et=null,at=0,We}function zI(){for(;ze!==null;)cw(ze)}function BI(){for(;ze!==null&&!fT();)cw(ze)}function cw(t){var e=hw(t.alternate,t,jt);t.memoizedProps=t.pendingProps,e===null?uw(t):ze=e,Tf.current=null}function uw(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=VI(n,e),n!==null){n.flags&=32767,ze=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{We=6,ze=null;return}}else if(n=DI(n,e,jt),n!==null){ze=n;return}if(e=e.sibling,e!==null){ze=e;return}ze=e=t}while(e!==null);We===0&&(We=5)}function Jr(t,e,n){var r=we,s=Wt.transition;try{Wt.transition=null,we=1,$I(t,e,n,r)}finally{Wt.transition=s,we=r}return null}function $I(t,e,n,r){do ni();while(pr!==null);if(me&6)throw Error(B(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(B(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(IT(t,i),t===et&&(ze=et=null,at=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||il||(il=!0,fw(Ml,function(){return ni(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Wt.transition,Wt.transition=null;var o=we;we=1;var c=me;me|=4,Tf.current=null,LI(t,n),sw(n,t),cI(Md),Ul=!!Ld,Md=Ld=null,t.current=n,MI(n),pT(),me=c,we=o,Wt.transition=i}else t.current=n;if(il&&(il=!1,pr=t,nc=s),i=t.pendingLanes,i===0&&(Er=null),yT(n.stateNode),kt(t,Me()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(tc)throw tc=!1,t=sh,sh=null,t;return nc&1&&t.tag!==0&&ni(),i=t.pendingLanes,i&1?t===ih?Ro++:(Ro=0,ih=t):Ro=0,Fr(),null}function ni(){if(pr!==null){var t=qv(nc),e=Wt.transition,n=we;try{if(Wt.transition=null,we=16>t?16:t,pr===null)var r=!1;else{if(t=pr,pr=null,nc=0,me&6)throw Error(B(331));var s=me;for(me|=4,Q=t.current;Q!==null;){var i=Q,o=i.child;if(Q.flags&16){var c=i.deletions;if(c!==null){for(var u=0;u<c.length;u++){var d=c[u];for(Q=d;Q!==null;){var p=Q;switch(p.tag){case 0:case 11:case 15:Ao(8,p,i)}var m=p.child;if(m!==null)m.return=p,Q=m;else for(;Q!==null;){p=Q;var g=p.sibling,_=p.return;if(tw(p),p===d){Q=null;break}if(g!==null){g.return=_,Q=g;break}Q=_}}}var R=i.alternate;if(R!==null){var P=R.child;if(P!==null){R.child=null;do{var L=P.sibling;P.sibling=null,P=L}while(P!==null)}}Q=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Q=o;else e:for(;Q!==null;){if(i=Q,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ao(9,i,i.return)}var S=i.sibling;if(S!==null){S.return=i.return,Q=S;break e}Q=i.return}}var T=t.current;for(Q=T;Q!==null;){o=Q;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,Q=x;else e:for(o=T;Q!==null;){if(c=Q,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Lc(9,c)}}catch(j){Oe(c,c.return,j)}if(c===o){Q=null;break e}var O=c.sibling;if(O!==null){O.return=c.return,Q=O;break e}Q=c.return}}if(me=s,Fr(),_n&&typeof _n.onPostCommitFiberRoot=="function")try{_n.onPostCommitFiberRoot(kc,t)}catch{}r=!0}return r}finally{we=n,Wt.transition=e}}return!1}function Eg(t,e,n){e=fi(n,e),e=q_(t,e,1),t=wr(t,e,1),e=Et(),t!==null&&(da(t,1,e),kt(t,e))}function Oe(t,e,n){if(t.tag===3)Eg(t,t,n);else for(;e!==null;){if(e.tag===3){Eg(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Er===null||!Er.has(r))){t=fi(n,t),t=H_(e,t,1),e=wr(e,t,1),t=Et(),e!==null&&(da(e,1,t),kt(e,t));break}}e=e.return}}function qI(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Et(),t.pingedLanes|=t.suspendedLanes&n,et===t&&(at&n)===n&&(We===4||We===3&&(at&130023424)===at&&500>Me()-Sf?rs(t,0):If|=n),kt(t,e)}function dw(t,e){e===0&&(t.mode&1?(e=Qa,Qa<<=1,!(Qa&130023424)&&(Qa=4194304)):e=1);var n=Et();t=$n(t,e),t!==null&&(da(t,e,n),kt(t,n))}function HI(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),dw(t,n)}function WI(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(B(314))}r!==null&&r.delete(e),dw(t,n)}var hw;hw=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ct.current)Nt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Nt=!1,jI(t,e,n);Nt=!!(t.flags&131072)}else Nt=!1,Re&&e.flags&1048576&&g_(e,Gl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;El(t,e),t=e.pendingProps;var s=ci(e,gt.current);ti(e,n),s=yf(null,e,r,t,s,n);var i=vf();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,At(r)?(i=!0,Hl(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,hf(e),s.updater=Oc,e.stateNode=s,s._reactInternals=e,Gd(e,r,t,n),e=Yd(null,e,r,!0,i,n)):(e.tag=0,Re&&i&&sf(e),wt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(El(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=KI(r),t=Yt(r,t),s){case 0:e=Qd(null,e,r,t,n);break e;case 1:e=dg(null,e,r,t,n);break e;case 11:e=cg(null,e,r,t,n);break e;case 14:e=ug(null,e,r,Yt(r.type,t),n);break e}throw Error(B(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Yt(r,s),Qd(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Yt(r,s),dg(t,e,r,s,n);case 3:e:{if(Q_(e),t===null)throw Error(B(387));r=e.pendingProps,i=e.memoizedState,s=i.element,T_(t,e),Yl(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=fi(Error(B(423)),e),e=hg(t,e,r,n,s);break e}else if(r!==s){s=fi(Error(B(424)),e),e=hg(t,e,r,n,s);break e}else for(Dt=_r(e.stateNode.containerInfo.firstChild),Vt=e,Re=!0,Xt=null,n=w_(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ui(),r===s){e=qn(t,e,n);break e}wt(t,e,r,n)}e=e.child}return e;case 5:return I_(e),t===null&&qd(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Fd(r,s)?o=null:i!==null&&Fd(r,i)&&(e.flags|=32),K_(t,e),wt(t,e,o,n),e.child;case 6:return t===null&&qd(e),null;case 13:return Y_(t,e,n);case 4:return ff(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=di(e,null,r,n):wt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Yt(r,s),cg(t,e,r,s,n);case 7:return wt(t,e,e.pendingProps,n),e.child;case 8:return wt(t,e,e.pendingProps.children,n),e.child;case 12:return wt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,xe(Kl,r._currentValue),r._currentValue=o,i!==null)if(sn(i.value,o)){if(i.children===s.children&&!Ct.current){e=qn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var c=i.dependencies;if(c!==null){o=i.child;for(var u=c.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=Ln(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var p=d.pending;p===null?u.next=u:(u.next=p.next,p.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Hd(i.return,n,e),c.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(B(341));o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),Hd(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}wt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ti(e,n),s=Gt(s),r=r(s),e.flags|=1,wt(t,e,r,n),e.child;case 14:return r=e.type,s=Yt(r,e.pendingProps),s=Yt(r.type,s),ug(t,e,r,s,n);case 15:return W_(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Yt(r,s),El(t,e),e.tag=1,At(r)?(t=!0,Hl(e)):t=!1,ti(e,n),$_(e,r,s),Gd(e,r,s,n),Yd(null,e,r,!0,t,n);case 19:return J_(t,e,n);case 22:return G_(t,e,n)}throw Error(B(156,e.tag))};function fw(t,e){return Uv(t,e)}function GI(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ht(t,e,n,r){return new GI(t,e,n,r)}function Af(t){return t=t.prototype,!(!t||!t.isReactComponent)}function KI(t){if(typeof t=="function")return Af(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Wh)return 11;if(t===Gh)return 14}return 2}function Ir(t,e){var n=t.alternate;return n===null?(n=Ht(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Sl(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Af(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Fs:return ss(n.children,s,i,e);case Hh:o=8,s|=8;break;case yd:return t=Ht(12,n,e,s|2),t.elementType=yd,t.lanes=i,t;case vd:return t=Ht(13,n,e,s),t.elementType=vd,t.lanes=i,t;case _d:return t=Ht(19,n,e,s),t.elementType=_d,t.lanes=i,t;case Iv:return Fc(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Ev:o=10;break e;case Tv:o=9;break e;case Wh:o=11;break e;case Gh:o=14;break e;case ir:o=16,r=null;break e}throw Error(B(130,t==null?t:typeof t,""))}return e=Ht(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function ss(t,e,n,r){return t=Ht(7,t,r,e),t.lanes=n,t}function Fc(t,e,n,r){return t=Ht(22,t,r,e),t.elementType=Iv,t.lanes=n,t.stateNode={isHidden:!1},t}function td(t,e,n){return t=Ht(6,t,null,e),t.lanes=n,t}function nd(t,e,n){return e=Ht(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function QI(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ou(0),this.expirationTimes=Ou(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ou(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function kf(t,e,n,r,s,i,o,c,u){return t=new QI(t,e,n,c,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Ht(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},hf(i),t}function YI(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ms,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function pw(t){if(!t)return Rr;t=t._reactInternals;e:{if(_s(t)!==t||t.tag!==1)throw Error(B(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(At(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(B(171))}if(t.tag===1){var n=t.type;if(At(n))return p_(t,n,e)}return e}function mw(t,e,n,r,s,i,o,c,u){return t=kf(n,r,!0,t,s,i,o,c,u),t.context=pw(null),n=t.current,r=Et(),s=Tr(n),i=Ln(r,s),i.callback=e??null,wr(n,i,s),t.current.lanes=s,da(t,s,r),kt(t,r),t}function Uc(t,e,n,r){var s=e.current,i=Et(),o=Tr(s);return n=pw(n),e.context===null?e.context=n:e.pendingContext=n,e=Ln(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=wr(s,e,o),t!==null&&(nn(t,s,o,i),vl(t,s,o)),o}function sc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Tg(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Rf(t,e){Tg(t,e),(t=t.alternate)&&Tg(t,e)}function JI(){return null}var gw=typeof reportError=="function"?reportError:function(t){console.error(t)};function Pf(t){this._internalRoot=t}zc.prototype.render=Pf.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(B(409));Uc(t,e,null,null)};zc.prototype.unmount=Pf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ds(function(){Uc(null,t,null,null)}),e[Bn]=null}};function zc(t){this._internalRoot=t}zc.prototype.unstable_scheduleHydration=function(t){if(t){var e=Gv();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ar.length&&e!==0&&e<ar[n].priority;n++);ar.splice(n,0,t),n===0&&Qv(t)}};function bf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Bc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Ig(){}function XI(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=sc(o);i.call(d)}}var o=mw(e,r,t,0,null,!1,!1,"",Ig);return t._reactRootContainer=o,t[Bn]=o.current,Ho(t.nodeType===8?t.parentNode:t),ds(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var c=r;r=function(){var d=sc(u);c.call(d)}}var u=kf(t,0,!1,null,null,!1,!1,"",Ig);return t._reactRootContainer=u,t[Bn]=u.current,Ho(t.nodeType===8?t.parentNode:t),ds(function(){Uc(e,u,n,r)}),u}function $c(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var c=s;s=function(){var u=sc(o);c.call(u)}}Uc(e,o,t,s)}else o=XI(n,e,t,s,r);return sc(o)}Hv=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=fo(e.pendingLanes);n!==0&&(Yh(e,n|1),kt(e,Me()),!(me&6)&&(pi=Me()+500,Fr()))}break;case 13:ds(function(){var r=$n(t,1);if(r!==null){var s=Et();nn(r,t,1,s)}}),Rf(t,1)}};Jh=function(t){if(t.tag===13){var e=$n(t,134217728);if(e!==null){var n=Et();nn(e,t,134217728,n)}Rf(t,134217728)}};Wv=function(t){if(t.tag===13){var e=Tr(t),n=$n(t,e);if(n!==null){var r=Et();nn(n,t,e,r)}Rf(t,e)}};Gv=function(){return we};Kv=function(t,e){var n=we;try{return we=t,e()}finally{we=n}};kd=function(t,e,n){switch(e){case"input":if(Td(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=jc(r);if(!s)throw Error(B(90));xv(r),Td(r,s)}}}break;case"textarea":Cv(t,n);break;case"select":e=n.value,e!=null&&Js(t,!!n.multiple,e,!1)}};Dv=xf;Vv=ds;var ZI={usingClientEntryPoint:!1,Events:[fa,$s,jc,bv,jv,xf]},lo={findFiberByHostInstance:Zr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},eS={bundleType:lo.bundleType,version:lo.version,rendererPackageName:lo.rendererPackageName,rendererConfig:lo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Qn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Mv(t),t===null?null:t.stateNode},findFiberByHostInstance:lo.findFiberByHostInstance||JI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ol=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ol.isDisabled&&ol.supportsFiber)try{kc=ol.inject(eS),_n=ol}catch{}}Lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ZI;Lt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!bf(e))throw Error(B(200));return YI(t,e,null,n)};Lt.createRoot=function(t,e){if(!bf(t))throw Error(B(299));var n=!1,r="",s=gw;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=kf(t,1,!1,null,null,n,!1,r,s),t[Bn]=e.current,Ho(t.nodeType===8?t.parentNode:t),new Pf(e)};Lt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(B(188)):(t=Object.keys(t).join(","),Error(B(268,t)));return t=Mv(e),t=t===null?null:t.stateNode,t};Lt.flushSync=function(t){return ds(t)};Lt.hydrate=function(t,e,n){if(!Bc(e))throw Error(B(200));return $c(null,t,e,!0,n)};Lt.hydrateRoot=function(t,e,n){if(!bf(t))throw Error(B(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=gw;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=mw(e,null,t,1,n??null,s,!1,i,o),t[Bn]=e.current,Ho(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new zc(e)};Lt.render=function(t,e,n){if(!Bc(e))throw Error(B(200));return $c(null,t,e,!1,n)};Lt.unmountComponentAtNode=function(t){if(!Bc(t))throw Error(B(40));return t._reactRootContainer?(ds(function(){$c(null,null,t,!1,function(){t._reactRootContainer=null,t[Bn]=null})}),!0):!1};Lt.unstable_batchedUpdates=xf;Lt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Bc(n))throw Error(B(200));if(t==null||t._reactInternals===void 0)throw Error(B(38));return $c(t,e,n,!1,r)};Lt.version="18.3.1-next-f1338f8080-20240426";function yw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(yw)}catch(t){console.error(t)}}yw(),yv.exports=Lt;var tS=yv.exports,Sg=tS;md.createRoot=Sg.createRoot,md.hydrateRoot=Sg.hydrateRoot;const nS=()=>{};var xg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vw=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},rS=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],c=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},_w={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,c=o?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,p=i>>2,m=(i&3)<<4|c>>4;let g=(c&15)<<2|d>>6,_=d&63;u||(_=64,o||(g=64)),r.push(n[p],n[m],n[g],n[_])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(vw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):rS(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||c==null||d==null||m==null)throw new sS;const g=i<<2|c>>4;if(r.push(g),d!==64){const _=c<<4&240|d>>2;if(r.push(_),m!==64){const R=d<<6&192|m;r.push(R)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class sS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const iS=function(t){const e=vw(t);return _w.encodeByteArray(e,!0)},ic=function(t){return iS(t).replace(/\./g,"")},ww=function(t){try{return _w.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aS=()=>oS().__FIREBASE_DEFAULTS__,lS=()=>{if(typeof process>"u"||typeof xg>"u")return;const t=xg.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},cS=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&ww(t[1]);return e&&JSON.parse(e)},qc=()=>{try{return nS()||aS()||lS()||cS()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Ew=t=>{var e,n;return(n=(e=qc())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},uS=t=>{const e=Ew(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Tw=()=>{var t;return(t=qc())==null?void 0:t.config},Iw=t=>{var e;return(e=qc())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ai(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Sw(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hS(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[ic(JSON.stringify(n)),ic(JSON.stringify(o)),""].join(".")}const Po={};function fS(){const t={prod:[],emulator:[]};for(const e of Object.keys(Po))Po[e]?t.emulator.push(e):t.prod.push(e);return t}function pS(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Ng=!1;function xw(t,e){if(typeof window>"u"||typeof document>"u"||!Ai(window.location.host)||Po[t]===e||Po[t]||Ng)return;Po[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",i=fS().prod.length>0;function o(){const g=document.getElementById(r);g&&g.remove()}function c(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,_){g.setAttribute("width","24"),g.setAttribute("id",_),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function d(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{Ng=!0,o()},g}function p(g,_){g.setAttribute("id",_),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function m(){const g=pS(r),_=n("text"),R=document.getElementById(_)||document.createElement("span"),P=n("learnmore"),L=document.getElementById(P)||document.createElement("a"),S=n("preprendIcon"),T=document.getElementById(S)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const x=g.element;c(x),p(L,P);const O=d();u(T,S),x.append(T,R,L,O),document.body.appendChild(x)}i?(R.innerText="Preview backend disconnected.",T.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(T.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,R.innerText="Preview backend running in this workspace."),R.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function mS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(yt())}function gS(){var e;const t=(e=qc())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function yS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function vS(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function _S(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function wS(){const t=yt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function ES(){return!gS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function TS(){try{return typeof indexedDB=="object"}catch{return!1}}function IS(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SS="FirebaseError";class Yn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=SS,Object.setPrototypeOf(this,Yn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ma.prototype.create)}}class ma{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?xS(i,r):"Error",c=`${this.serviceName}: ${o} (${s}).`;return new Yn(s,c,r)}}function xS(t,e){return t.replace(NS,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const NS=/\{\$([^}]+)}/g;function CS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function hs(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Cg(i)&&Cg(o)){if(!hs(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Cg(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ga(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function mo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function go(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function AS(t,e){const n=new kS(t,e);return n.subscribe.bind(n)}class kS{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");RS(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=rd),s.error===void 0&&(s.error=rd),s.complete===void 0&&(s.complete=rd);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function RS(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function rd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(t){return t&&t._delegate?t._delegate:t}class fs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new dS;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(jS(e))try{this.getOrInitializeService({instanceIdentifier:Xr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Xr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Xr){return this.instances.has(e)}getOptions(e=Xr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);r===c&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:bS(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Xr){return this.component?this.component.multipleInstances?e:Xr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function bS(t){return t===Xr?void 0:t}function jS(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new PS(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ue;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ue||(ue={}));const VS={debug:ue.DEBUG,verbose:ue.VERBOSE,info:ue.INFO,warn:ue.WARN,error:ue.ERROR,silent:ue.SILENT},OS=ue.INFO,LS={[ue.DEBUG]:"log",[ue.VERBOSE]:"log",[ue.INFO]:"info",[ue.WARN]:"warn",[ue.ERROR]:"error"},MS=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=LS[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class jf{constructor(e){this.name=e,this._logLevel=OS,this._logHandler=MS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?VS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ue.DEBUG,...e),this._logHandler(this,ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ue.VERBOSE,...e),this._logHandler(this,ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ue.INFO,...e),this._logHandler(this,ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ue.WARN,...e),this._logHandler(this,ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ue.ERROR,...e),this._logHandler(this,ue.ERROR,...e)}}const FS=(t,e)=>e.some(n=>t instanceof n);let Ag,kg;function US(){return Ag||(Ag=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function zS(){return kg||(kg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Nw=new WeakMap,lh=new WeakMap,Cw=new WeakMap,sd=new WeakMap,Df=new WeakMap;function BS(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Sr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Nw.set(n,t)}).catch(()=>{}),Df.set(e,t),e}function $S(t){if(lh.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});lh.set(t,e)}let ch={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return lh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Cw.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Sr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function qS(t){ch=t(ch)}function HS(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(id(this),e,...n);return Cw.set(r,e.sort?e.sort():[e]),Sr(r)}:zS().includes(t)?function(...e){return t.apply(id(this),e),Sr(Nw.get(this))}:function(...e){return Sr(t.apply(id(this),e))}}function WS(t){return typeof t=="function"?HS(t):(t instanceof IDBTransaction&&$S(t),FS(t,US())?new Proxy(t,ch):t)}function Sr(t){if(t instanceof IDBRequest)return BS(t);if(sd.has(t))return sd.get(t);const e=WS(t);return e!==t&&(sd.set(t,e),Df.set(e,t)),e}const id=t=>Df.get(t);function GS(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),c=Sr(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Sr(o.result),u.oldVersion,u.newVersion,Sr(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const KS=["get","getKey","getAll","getAllKeys","count"],QS=["put","add","delete","clear"],od=new Map;function Rg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(od.get(e))return od.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=QS.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||KS.includes(n)))return;const i=async function(o,...c){const u=this.transaction(o,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),s&&u.done]))[0]};return od.set(e,i),i}qS(t=>({...t,get:(e,n,r)=>Rg(e,n)||t.get(e,n,r),has:(e,n)=>!!Rg(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(JS(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function JS(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const uh="@firebase/app",Pg="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hn=new jf("@firebase/app"),XS="@firebase/app-compat",ZS="@firebase/analytics-compat",ex="@firebase/analytics",tx="@firebase/app-check-compat",nx="@firebase/app-check",rx="@firebase/auth",sx="@firebase/auth-compat",ix="@firebase/database",ox="@firebase/data-connect",ax="@firebase/database-compat",lx="@firebase/functions",cx="@firebase/functions-compat",ux="@firebase/installations",dx="@firebase/installations-compat",hx="@firebase/messaging",fx="@firebase/messaging-compat",px="@firebase/performance",mx="@firebase/performance-compat",gx="@firebase/remote-config",yx="@firebase/remote-config-compat",vx="@firebase/storage",_x="@firebase/storage-compat",wx="@firebase/firestore",Ex="@firebase/ai",Tx="@firebase/firestore-compat",Ix="firebase",Sx="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dh="[DEFAULT]",xx={[uh]:"fire-core",[XS]:"fire-core-compat",[ex]:"fire-analytics",[ZS]:"fire-analytics-compat",[nx]:"fire-app-check",[tx]:"fire-app-check-compat",[rx]:"fire-auth",[sx]:"fire-auth-compat",[ix]:"fire-rtdb",[ox]:"fire-data-connect",[ax]:"fire-rtdb-compat",[lx]:"fire-fn",[cx]:"fire-fn-compat",[ux]:"fire-iid",[dx]:"fire-iid-compat",[hx]:"fire-fcm",[fx]:"fire-fcm-compat",[px]:"fire-perf",[mx]:"fire-perf-compat",[gx]:"fire-rc",[yx]:"fire-rc-compat",[vx]:"fire-gcs",[_x]:"fire-gcs-compat",[wx]:"fire-fst",[Tx]:"fire-fst-compat",[Ex]:"fire-vertex","fire-js":"fire-js",[Ix]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oc=new Map,Nx=new Map,hh=new Map;function bg(t,e){try{t.container.addComponent(e)}catch(n){Hn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function mi(t){const e=t.name;if(hh.has(e))return Hn.debug(`There were multiple attempts to register component ${e}.`),!1;hh.set(e,t);for(const n of oc.values())bg(n,t);for(const n of Nx.values())bg(n,t);return!0}function Vf(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Bt(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},xr=new ma("app","Firebase",Cx);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new fs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw xr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ki=Sx;function Aw(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:dh,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw xr.create("bad-app-name",{appName:String(s)});if(n||(n=Tw()),!n)throw xr.create("no-options");const i=oc.get(s);if(i){if(hs(n,i.options)&&hs(r,i.config))return i;throw xr.create("duplicate-app",{appName:s})}const o=new DS(s);for(const u of hh.values())o.addComponent(u);const c=new Ax(n,r,o);return oc.set(s,c),c}function kw(t=dh){const e=oc.get(t);if(!e&&t===dh&&Tw())return Aw();if(!e)throw xr.create("no-app",{appName:t});return e}function Nr(t,e,n){let r=xx[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Hn.warn(o.join(" "));return}mi(new fs(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kx="firebase-heartbeat-database",Rx=1,ea="firebase-heartbeat-store";let ad=null;function Rw(){return ad||(ad=GS(kx,Rx,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ea)}catch(n){console.warn(n)}}}}).catch(t=>{throw xr.create("idb-open",{originalErrorMessage:t.message})})),ad}async function Px(t){try{const n=(await Rw()).transaction(ea),r=await n.objectStore(ea).get(Pw(t));return await n.done,r}catch(e){if(e instanceof Yn)Hn.warn(e.message);else{const n=xr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Hn.warn(n.message)}}}async function jg(t,e){try{const r=(await Rw()).transaction(ea,"readwrite");await r.objectStore(ea).put(e,Pw(t)),await r.done}catch(n){if(n instanceof Yn)Hn.warn(n.message);else{const r=xr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Hn.warn(r.message)}}}function Pw(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bx=1024,jx=30;class Dx{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Ox(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Dg();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>jx){const o=Lx(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Hn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Dg(),{heartbeatsToSend:r,unsentEntries:s}=Vx(this._heartbeatsCache.heartbeats),i=ic(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Hn.warn(n),""}}}function Dg(){return new Date().toISOString().substring(0,10)}function Vx(t,e=bx){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Vg(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Vg(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Ox{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return TS()?IS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Px(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return jg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return jg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Vg(t){return ic(JSON.stringify({version:2,heartbeats:t})).length}function Lx(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mx(t){mi(new fs("platform-logger",e=>new YS(e),"PRIVATE")),mi(new fs("heartbeat",e=>new Dx(e),"PRIVATE")),Nr(uh,Pg,t),Nr(uh,Pg,"esm2020"),Nr("fire-js","")}Mx("");function bw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Fx=bw,jw=new ma("auth","Firebase",bw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ac=new jf("@firebase/auth");function Ux(t,...e){ac.logLevel<=ue.WARN&&ac.warn(`Auth (${ki}): ${t}`,...e)}function xl(t,...e){ac.logLevel<=ue.ERROR&&ac.error(`Auth (${ki}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(t,...e){throw Of(t,...e)}function En(t,...e){return Of(t,...e)}function Dw(t,e,n){const r={...Fx(),[e]:n};return new ma("auth","Firebase",r).create(e,{appName:t.name})}function Mn(t){return Dw(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Of(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return jw.create(t,...e)}function ee(t,e,...n){if(!t)throw Of(e,...n)}function Vn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw xl(e),new Error(e)}function Wn(t,e){t||Vn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fh(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function zx(){return Og()==="http:"||Og()==="https:"}function Og(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bx(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(zx()||vS()||"connection"in navigator)?navigator.onLine:!0}function $x(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e,n){this.shortDelay=e,this.longDelay=n,Wn(n>e,"Short delay should be less than long delay!"),this.isMobile=mS()||_S()}get(){return Bx()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lf(t,e){Wn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vw{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Vn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Vn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Vn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qx={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hx=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Wx=new ya(3e4,6e4);function Ur(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function zr(t,e,n,r,s={}){return Ow(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const c=ga({key:t.config.apiKey,...o}).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:u,...i};return yS()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&Ai(t.emulatorConfig.host)&&(d.credentials="include"),Vw.fetch()(await Lw(t,t.config.apiHost,n,c),d)})}async function Ow(t,e,n){t._canInitEmulator=!1;const r={...qx,...e};try{const s=new Kx(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw al(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const c=i.ok?o.errorMessage:o.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw al(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw al(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw al(t,"user-disabled",o);const p=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Dw(t,p,d);on(t,p)}}catch(s){if(s instanceof Yn)throw s;on(t,"network-request-failed",{message:String(s)})}}async function va(t,e,n,r,s={}){const i=await zr(t,e,n,r,s);return"mfaPendingCredential"in i&&on(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function Lw(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?Lf(t.config,s):`${t.config.apiScheme}://${s}`;return Hx.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function Gx(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Kx{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(En(this.auth,"network-request-failed")),Wx.get())})}}function al(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=En(t,e,r);return s.customData._tokenResponse=n,s}function Lg(t){return t!==void 0&&t.enterprise!==void 0}class Qx{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Gx(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Yx(t,e){return zr(t,"GET","/v2/recaptchaConfig",Ur(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jx(t,e){return zr(t,"POST","/v1/accounts:delete",e)}async function lc(t,e){return zr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Xx(t,e=!1){const n=vt(t),r=await n.getIdToken(e),s=Mf(r);ee(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:bo(ld(s.auth_time)),issuedAtTime:bo(ld(s.iat)),expirationTime:bo(ld(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function ld(t){return Number(t)*1e3}function Mf(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return xl("JWT malformed, contained fewer than 3 sections"),null;try{const s=ww(n);return s?JSON.parse(s):(xl("Failed to decode base64 JWT payload"),null)}catch(s){return xl("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Mg(t){const e=Mf(t);return ee(e,"internal-error"),ee(typeof e.exp<"u","internal-error"),ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ta(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Yn&&Zx(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Zx({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=bo(this.lastLoginAt),this.creationTime=bo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cc(t){var m;const e=t.auth,n=await t.getIdToken(),r=await ta(t,lc(e,{idToken:n}));ee(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(m=s.providerUserInfo)!=null&&m.length?Mw(s.providerUserInfo):[],o=nN(t.providerData,i),c=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),d=c?u:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new ph(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,p)}async function tN(t){const e=vt(t);await cc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function nN(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Mw(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rN(t,e){const n=await Ow(t,{},async()=>{const r=ga({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await Lw(t,s,"/v1/token",`key=${i}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:c,body:r};return t.emulatorConfig&&Ai(t.emulatorConfig.host)&&(u.credentials="include"),Vw.fetch()(o,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function sN(t,e){return zr(t,"POST","/v2/accounts:revokeToken",Ur(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ee(e.idToken,"internal-error"),ee(typeof e.idToken<"u","internal-error"),ee(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Mg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ee(e.length!==0,"internal-error");const n=Mg(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await rN(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new ri;return r&&(ee(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(ee(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(ee(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ri,this.toJSON())}_performRefresh(){return Vn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sr(t,e){ee(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Zt{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new eN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new ph(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await ta(this,this.stsTokenManager.getToken(this.auth,e));return ee(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Xx(this,e)}reload(){return tN(this)}_assign(e){this!==e&&(ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Zt({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await cc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Bt(this.auth.app))return Promise.reject(Mn(this.auth));const e=await this.getIdToken();return await ta(this,Jx(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,c=n.tenantId??void 0,u=n._redirectEventId??void 0,d=n.createdAt??void 0,p=n.lastLoginAt??void 0,{uid:m,emailVerified:g,isAnonymous:_,providerData:R,stsTokenManager:P}=n;ee(m&&P,e,"internal-error");const L=ri.fromJSON(this.name,P);ee(typeof m=="string",e,"internal-error"),sr(r,e.name),sr(s,e.name),ee(typeof g=="boolean",e,"internal-error"),ee(typeof _=="boolean",e,"internal-error"),sr(i,e.name),sr(o,e.name),sr(c,e.name),sr(u,e.name),sr(d,e.name),sr(p,e.name);const S=new Zt({uid:m,auth:e,email:s,emailVerified:g,displayName:r,isAnonymous:_,photoURL:o,phoneNumber:i,tenantId:c,stsTokenManager:L,createdAt:d,lastLoginAt:p});return R&&Array.isArray(R)&&(S.providerData=R.map(T=>({...T}))),u&&(S._redirectEventId=u),S}static async _fromIdTokenResponse(e,n,r=!1){const s=new ri;s.updateFromServerResponse(n);const i=new Zt({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await cc(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ee(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?Mw(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),c=new ri;c.updateFromIdToken(r);const u=new Zt({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:o}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new ph(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fg=new Map;function On(t){Wn(t instanceof Function,"Expected a class definition");let e=Fg.get(t);return e?(Wn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Fg.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Fw.type="NONE";const Ug=Fw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nl(t,e,n){return`firebase:${t}:${e}:${n}`}class si{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Nl(this.userKey,s.apiKey,i),this.fullPersistenceKey=Nl("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await lc(this.auth,{idToken:e}).catch(()=>{});return n?Zt._fromGetAccountInfoResponse(this.auth,n,e):null}return Zt._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new si(On(Ug),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||On(Ug);const o=Nl(r,e.config.apiKey,e.name);let c=null;for(const d of n)try{const p=await d._get(o);if(p){let m;if(typeof p=="string"){const g=await lc(e,{idToken:p}).catch(()=>{});if(!g)break;m=await Zt._fromGetAccountInfoResponse(e,g,p)}else m=Zt._fromJSON(e,p);d!==i&&(c=m),i=d;break}}catch{}const u=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new si(i,e,r):(i=u[0],c&&await i._set(o,c.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(o)}catch{}})),new si(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zg(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if($w(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Uw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Hw(e))return"Blackberry";if(Ww(e))return"Webos";if(zw(e))return"Safari";if((e.includes("chrome/")||Bw(e))&&!e.includes("edge/"))return"Chrome";if(qw(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Uw(t=yt()){return/firefox\//i.test(t)}function zw(t=yt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Bw(t=yt()){return/crios\//i.test(t)}function $w(t=yt()){return/iemobile/i.test(t)}function qw(t=yt()){return/android/i.test(t)}function Hw(t=yt()){return/blackberry/i.test(t)}function Ww(t=yt()){return/webos/i.test(t)}function Ff(t=yt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function iN(t=yt()){var e;return Ff(t)&&!!((e=window.navigator)!=null&&e.standalone)}function oN(){return wS()&&document.documentMode===10}function Gw(t=yt()){return Ff(t)||qw(t)||Ww(t)||Hw(t)||/windows phone/i.test(t)||$w(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kw(t,e=[]){let n;switch(t){case"Browser":n=zg(yt());break;case"Worker":n=`${zg(yt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ki}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,c)=>{try{const u=e(i);o(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lN(t,e={}){return zr(t,"GET","/v2/passwordPolicy",Ur(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cN=6;class uN{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??cN,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Bg(this),this.idTokenSubscription=new Bg(this),this.beforeStateQueue=new aN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=jw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=On(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await si.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await lc(this,{idToken:e}),r=await Zt._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(Bt(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,c=r==null?void 0:r._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===c)&&(u!=null&&u.user)&&(r=u.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await cc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=$x()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Bt(this.app))return Promise.reject(Mn(this));const n=e?vt(e):null;return n&&ee(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Bt(this.app)?Promise.reject(Mn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Bt(this.app)?Promise.reject(Mn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(On(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await lN(this),n=new uN(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ma("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await sN(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&On(e)||this._popupRedirectResolver;ee(n,this,"argument-error"),this.redirectPersistenceManager=await si.create(this,[On(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(ee(c,this,"internal-error"),c.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Kw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Bt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&Ux(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function ws(t){return vt(t)}class Bg{constructor(e){this.auth=e,this.observer=null,this.addObserver=AS(n=>this.observer=n)}get next(){return ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function hN(t){Hc=t}function Qw(t){return Hc.loadJS(t)}function fN(){return Hc.recaptchaEnterpriseScript}function pN(){return Hc.gapiScript}function mN(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class gN{constructor(){this.enterprise=new yN}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class yN{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const vN="recaptcha-enterprise",Yw="NO_RECAPTCHA";class _N{constructor(e){this.type=vN,this.auth=ws(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,c)=>{Yx(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const d=new Qx(u);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,o(d.siteKey)}}).catch(u=>{c(u)})})}function s(i,o,c){const u=window.grecaptcha;Lg(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(d=>{o(d)}).catch(()=>{o(Yw)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new gN().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(c=>{if(!n&&Lg(window.grecaptcha))s(c,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=fN();u.length!==0&&(u+=c),Qw(u).then(()=>{s(c,i,o)}).catch(d=>{o(d)})}}).catch(c=>{o(c)})})}}async function $g(t,e,n,r=!1,s=!1){const i=new _N(t);let o;if(s)o=Yw;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const c={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const u=c.phoneEnrollmentInfo.phoneNumber,d=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const u=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:o}):Object.assign(c,{captchaResponse:o}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function mh(t,e,n,r,s){var i;if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await $g(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await $g(t,e,n,n==="getOobCode");return r(t,c)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wN(t,e){const n=Vf(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(hs(i,e??{}))return s;on(s,"already-initialized")}return n.initialize({options:e})}function EN(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(On);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function TN(t,e,n){const r=ws(t);ee(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=Jw(e),{host:o,port:c}=IN(e),u=c===null?"":`:${c}`,d={url:`${i}//${o}${u}/`},p=Object.freeze({host:o,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){ee(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ee(hs(d,r.config.emulator)&&hs(p,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=p,r.settings.appVerificationDisabledForTesting=!0,Ai(o)?(Sw(`${i}//${o}${u}`),xw("Auth",!0)):SN()}function Jw(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function IN(t){const e=Jw(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:qg(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:qg(o)}}}function qg(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function SN(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Vn("not implemented")}_getIdTokenResponse(e){return Vn("not implemented")}_linkToIdToken(e,n){return Vn("not implemented")}_getReauthenticationResolver(e){return Vn("not implemented")}}async function xN(t,e){return zr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NN(t,e){return va(t,"POST","/v1/accounts:signInWithPassword",Ur(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CN(t,e){return va(t,"POST","/v1/accounts:signInWithEmailLink",Ur(t,e))}async function AN(t,e){return va(t,"POST","/v1/accounts:signInWithEmailLink",Ur(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na extends Uf{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new na(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new na(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return mh(e,n,"signInWithPassword",NN);case"emailLink":return CN(e,{email:this._email,oobCode:this._password});default:on(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return mh(e,r,"signUpPassword",xN);case"emailLink":return AN(e,{idToken:n,email:this._email,oobCode:this._password});default:on(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ii(t,e){return va(t,"POST","/v1/accounts:signInWithIdp",Ur(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kN="http://localhost";class ps extends Uf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ps(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):on("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const o=new ps(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return ii(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ii(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ii(e,n)}buildRequest(){const e={requestUri:kN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ga(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RN(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function PN(t){const e=mo(go(t)).link,n=e?mo(go(e)).deep_link_id:null,r=mo(go(t)).deep_link_id;return(r?mo(go(r)).link:null)||r||n||e||t}class zf{constructor(e){const n=mo(go(e)),r=n.apiKey??null,s=n.oobCode??null,i=RN(n.mode??null);ee(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=PN(e);try{return new zf(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(){this.providerId=Ri.PROVIDER_ID}static credential(e,n){return na._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=zf.parseLink(n);return ee(r,"argument-error"),na._fromEmailAndCode(e,r.code,r.tenantId)}}Ri.PROVIDER_ID="password";Ri.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ri.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a extends Xw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr extends _a{constructor(){super("facebook.com")}static credential(e){return ps._fromParams({providerId:cr.PROVIDER_ID,signInMethod:cr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return cr.credentialFromTaggedObject(e)}static credentialFromError(e){return cr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return cr.credential(e.oauthAccessToken)}catch{return null}}}cr.FACEBOOK_SIGN_IN_METHOD="facebook.com";cr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur extends _a{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ps._fromParams({providerId:ur.PROVIDER_ID,signInMethod:ur.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ur.credentialFromTaggedObject(e)}static credentialFromError(e){return ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ur.credential(n,r)}catch{return null}}}ur.GOOGLE_SIGN_IN_METHOD="google.com";ur.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr extends _a{constructor(){super("github.com")}static credential(e){return ps._fromParams({providerId:dr.PROVIDER_ID,signInMethod:dr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return dr.credentialFromTaggedObject(e)}static credentialFromError(e){return dr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return dr.credential(e.oauthAccessToken)}catch{return null}}}dr.GITHUB_SIGN_IN_METHOD="github.com";dr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr extends _a{constructor(){super("twitter.com")}static credential(e,n){return ps._fromParams({providerId:hr.PROVIDER_ID,signInMethod:hr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return hr.credentialFromTaggedObject(e)}static credentialFromError(e){return hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return hr.credential(n,r)}catch{return null}}}hr.TWITTER_SIGN_IN_METHOD="twitter.com";hr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bN(t,e){return va(t,"POST","/v1/accounts:signUp",Ur(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Zt._fromIdTokenResponse(e,r,s),o=Hg(r);return new ms({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Hg(r);return new ms({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Hg(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc extends Yn{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,uc.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new uc(e,n,r,s)}}function Zw(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?uc._fromErrorAndOperation(t,i,e,r):i})}async function jN(t,e,n=!1){const r=await ta(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ms._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DN(t,e,n=!1){const{auth:r}=t;if(Bt(r.app))return Promise.reject(Mn(r));const s="reauthenticate";try{const i=await ta(t,Zw(r,s,e,t),n);ee(i.idToken,r,"internal-error");const o=Mf(i.idToken);ee(o,r,"internal-error");const{sub:c}=o;return ee(t.uid===c,r,"user-mismatch"),ms._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&on(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eE(t,e,n=!1){if(Bt(t.app))return Promise.reject(Mn(t));const r="signIn",s=await Zw(t,r,e),i=await ms._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function VN(t,e){return eE(ws(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tE(t){const e=ws(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function ON(t,e,n){if(Bt(t.app))return Promise.reject(Mn(t));const r=ws(t),o=await mh(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",bN).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&tE(t),u}),c=await ms._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(c.user),c}function LN(t,e,n){return Bt(t.app)?Promise.reject(Mn(t)):VN(vt(t),Ri.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&tE(t),r})}function MN(t,e,n,r){return vt(t).onIdTokenChanged(e,n,r)}function FN(t,e,n){return vt(t).beforeAuthStateChanged(e,n)}function UN(t,e,n,r){return vt(t).onAuthStateChanged(e,n,r)}function zN(t){return vt(t).signOut()}const dc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(dc,"1"),this.storage.removeItem(dc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BN=1e3,$N=10;class rE extends nE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Gw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,c,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);oN()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,$N):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},BN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}rE.type="LOCAL";const qN=rE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sE extends nE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}sE.type="SESSION";const iE=sE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HN(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Wc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(o).map(async d=>d(n.origin,i)),u=await HN(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Wc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bf(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((c,u)=>{const d=Bf("",20);s.port1.start();const p=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(m){const g=m;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(p),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),c(g.data.response);break;default:clearTimeout(p),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tn(){return window}function GN(t){Tn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oE(){return typeof Tn().WorkerGlobalScope<"u"&&typeof Tn().importScripts=="function"}async function KN(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function QN(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function YN(){return oE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE="firebaseLocalStorageDb",JN=1,hc="firebaseLocalStorage",lE="fbase_key";class wa{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Gc(t,e){return t.transaction([hc],e?"readwrite":"readonly").objectStore(hc)}function XN(){const t=indexedDB.deleteDatabase(aE);return new wa(t).toPromise()}function gh(){const t=indexedDB.open(aE,JN);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(hc,{keyPath:lE})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(hc)?e(r):(r.close(),await XN(),e(await gh()))})})}async function Wg(t,e,n){const r=Gc(t,!0).put({[lE]:e,value:n});return new wa(r).toPromise()}async function ZN(t,e){const n=Gc(t,!1).get(e),r=await new wa(n).toPromise();return r===void 0?null:r.value}function Gg(t,e){const n=Gc(t,!0).delete(e);return new wa(n).toPromise()}const eC=800,tC=3;class cE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await gh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>tC)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return oE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Wc._getInstance(YN()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await KN(),!this.activeServiceWorker)return;this.sender=new WN(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||QN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await gh();return await Wg(e,dc,"1"),await Gg(e,dc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Wg(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>ZN(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Gg(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Gc(s,!1).getAll();return new wa(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),eC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}cE.type="LOCAL";const nC=cE;new ya(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rC(t,e){return e?On(e):(ee(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f extends Uf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ii(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ii(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ii(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function sC(t){return eE(t.auth,new $f(t),t.bypassAuthState)}function iC(t){const{auth:e,user:n}=t;return ee(n,e,"internal-error"),DN(n,new $f(t),t.bypassAuthState)}async function oC(t){const{auth:e,user:n}=t;return ee(n,e,"internal-error"),jN(n,new $f(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:c}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return sC;case"linkViaPopup":case"linkViaRedirect":return oC;case"reauthViaPopup":case"reauthViaRedirect":return iC;default:on(this.auth,"internal-error")}}resolve(e){Wn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Wn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aC=new ya(2e3,1e4);class Ys extends uE{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Ys.currentPopupAction&&Ys.currentPopupAction.cancel(),Ys.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ee(e,this.auth,"internal-error"),e}async onExecution(){Wn(this.filter.length===1,"Popup operations only handle one event");const e=Bf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(En(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(En(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ys.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(En(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,aC.get())};e()}}Ys.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lC="pendingRedirect",Cl=new Map;class cC extends uE{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Cl.get(this.auth._key());if(!e){try{const r=await uC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Cl.set(this.auth._key(),e)}return this.bypassAuthState||Cl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function uC(t,e){const n=fC(e),r=hC(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function dC(t,e){Cl.set(t._key(),e)}function hC(t){return On(t._redirectPersistence)}function fC(t){return Nl(lC,t.config.apiKey,t.name)}async function pC(t,e,n=!1){if(Bt(t.app))return Promise.reject(Mn(t));const r=ws(t),s=rC(r,e),o=await new cC(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mC=10*60*1e3;class gC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!yC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!dE(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(En(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=mC&&this.cachedEventUids.clear(),this.cachedEventUids.has(Kg(e))}saveEventToCache(e){this.cachedEventUids.add(Kg(e)),this.lastProcessedEventTime=Date.now()}}function Kg(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function dE({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function yC(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return dE(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vC(t,e={}){return zr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _C=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,wC=/^https?/;async function EC(t){if(t.config.emulator)return;const{authorizedDomains:e}=await vC(t);for(const n of e)try{if(TC(n))return}catch{}on(t,"unauthorized-domain")}function TC(t){const e=fh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!wC.test(n))return!1;if(_C.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IC=new ya(3e4,6e4);function Qg(){const t=Tn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function SC(t){return new Promise((e,n)=>{var s,i,o;function r(){Qg(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Qg(),n(En(t,"network-request-failed"))},timeout:IC.get()})}if((i=(s=Tn().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((o=Tn().gapi)!=null&&o.load)r();else{const c=mN("iframefcb");return Tn()[c]=()=>{gapi.load?r():n(En(t,"network-request-failed"))},Qw(`${pN()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw Al=null,e})}let Al=null;function xC(t){return Al=Al||SC(t),Al}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NC=new ya(5e3,15e3),CC="__/auth/iframe",AC="emulator/auth/iframe",kC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},RC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function PC(t){const e=t.config;ee(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Lf(e,AC):`https://${t.config.authDomain}/${CC}`,r={apiKey:e.apiKey,appName:t.name,v:ki},s=RC.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${ga(r).slice(1)}`}async function bC(t){const e=await xC(t),n=Tn().gapi;return ee(n,t,"internal-error"),e.open({where:document.body,url:PC(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:kC,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=En(t,"network-request-failed"),c=Tn().setTimeout(()=>{i(o)},NC.get());function u(){Tn().clearTimeout(c),s(r)}r.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},DC=500,VC=600,OC="_blank",LC="http://localhost";class Yg{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function MC(t,e,n,r=DC,s=VC){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u={...jC,width:r.toString(),height:s.toString(),top:i,left:o},d=yt().toLowerCase();n&&(c=Bw(d)?OC:n),Uw(d)&&(e=e||LC,u.scrollbars="yes");const p=Object.entries(u).reduce((g,[_,R])=>`${g}${_}=${R},`,"");if(iN(d)&&c!=="_self")return FC(e||"",c),new Yg(null);const m=window.open(e||"",c,p);ee(m,t,"popup-blocked");try{m.focus()}catch{}return new Yg(m)}function FC(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC="__/auth/handler",zC="emulator/auth/handler",BC=encodeURIComponent("fac");async function Jg(t,e,n,r,s,i){ee(t.config.authDomain,t,"auth-domain-config-required"),ee(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ki,eventId:s};if(e instanceof Xw){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",CS(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,m]of Object.entries({}))o[p]=m}if(e instanceof _a){const p=e.getScopes().filter(m=>m!=="");p.length>0&&(o.scopes=p.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const p of Object.keys(c))c[p]===void 0&&delete c[p];const u=await t._getAppCheckToken(),d=u?`#${BC}=${encodeURIComponent(u)}`:"";return`${$C(t)}?${ga(c).slice(1)}${d}`}function $C({config:t}){return t.emulator?Lf(t,zC):`https://${t.authDomain}/${UC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cd="webStorageSupport";class qC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=iE,this._completeRedirectFn=pC,this._overrideRedirectResult=dC}async _openPopup(e,n,r,s){var o;Wn((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await Jg(e,n,r,fh(),s);return MC(e,i,Bf())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Jg(e,n,r,fh(),s);return GN(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Wn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await bC(e),r=new gC(e);return n.register("authEvent",s=>(ee(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(cd,{type:cd},s=>{var o;const i=(o=s==null?void 0:s[0])==null?void 0:o[cd];i!==void 0&&n(!!i),on(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=EC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Gw()||zw()||Ff()}}const HC=qC;var Xg="@firebase/auth",Zg="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GC(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function KC(t){mi(new fs("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;ee(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Kw(t)},d=new dN(r,s,i,u);return EN(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),mi(new fs("auth-internal",e=>{const n=ws(e.getProvider("auth").getImmediate());return(r=>new WC(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Nr(Xg,Zg,GC(t)),Nr(Xg,Zg,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QC=5*60,YC=Iw("authIdTokenMaxAge")||QC;let ey=null;const JC=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>YC)return;const s=n==null?void 0:n.token;ey!==s&&(ey=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function XC(t=kw()){const e=Vf(t,"auth");if(e.isInitialized())return e.getImmediate();const n=wN(t,{popupRedirectResolver:HC,persistence:[nC,qN,iE]}),r=Iw("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=JC(i.toString());FN(n,o,()=>o(n.currentUser)),MN(n,c=>o(c))}}const s=Ew("auth");return s&&TN(n,`http://${s}`),n}function ZC(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}hN({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=En("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",ZC().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});KC("Browser");var ty=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Cr,hE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(w,y){function E(){}E.prototype=y.prototype,w.F=y.prototype,w.prototype=new E,w.prototype.constructor=w,w.D=function(I,k,b){for(var N=Array(arguments.length-2),ie=2;ie<arguments.length;ie++)N[ie-2]=arguments[ie];return y.prototype[k].apply(I,N)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(w,y,E){E||(E=0);const I=Array(16);if(typeof y=="string")for(var k=0;k<16;++k)I[k]=y.charCodeAt(E++)|y.charCodeAt(E++)<<8|y.charCodeAt(E++)<<16|y.charCodeAt(E++)<<24;else for(k=0;k<16;++k)I[k]=y[E++]|y[E++]<<8|y[E++]<<16|y[E++]<<24;y=w.g[0],E=w.g[1],k=w.g[2];let b=w.g[3],N;N=y+(b^E&(k^b))+I[0]+3614090360&4294967295,y=E+(N<<7&4294967295|N>>>25),N=b+(k^y&(E^k))+I[1]+3905402710&4294967295,b=y+(N<<12&4294967295|N>>>20),N=k+(E^b&(y^E))+I[2]+606105819&4294967295,k=b+(N<<17&4294967295|N>>>15),N=E+(y^k&(b^y))+I[3]+3250441966&4294967295,E=k+(N<<22&4294967295|N>>>10),N=y+(b^E&(k^b))+I[4]+4118548399&4294967295,y=E+(N<<7&4294967295|N>>>25),N=b+(k^y&(E^k))+I[5]+1200080426&4294967295,b=y+(N<<12&4294967295|N>>>20),N=k+(E^b&(y^E))+I[6]+2821735955&4294967295,k=b+(N<<17&4294967295|N>>>15),N=E+(y^k&(b^y))+I[7]+4249261313&4294967295,E=k+(N<<22&4294967295|N>>>10),N=y+(b^E&(k^b))+I[8]+1770035416&4294967295,y=E+(N<<7&4294967295|N>>>25),N=b+(k^y&(E^k))+I[9]+2336552879&4294967295,b=y+(N<<12&4294967295|N>>>20),N=k+(E^b&(y^E))+I[10]+4294925233&4294967295,k=b+(N<<17&4294967295|N>>>15),N=E+(y^k&(b^y))+I[11]+2304563134&4294967295,E=k+(N<<22&4294967295|N>>>10),N=y+(b^E&(k^b))+I[12]+1804603682&4294967295,y=E+(N<<7&4294967295|N>>>25),N=b+(k^y&(E^k))+I[13]+4254626195&4294967295,b=y+(N<<12&4294967295|N>>>20),N=k+(E^b&(y^E))+I[14]+2792965006&4294967295,k=b+(N<<17&4294967295|N>>>15),N=E+(y^k&(b^y))+I[15]+1236535329&4294967295,E=k+(N<<22&4294967295|N>>>10),N=y+(k^b&(E^k))+I[1]+4129170786&4294967295,y=E+(N<<5&4294967295|N>>>27),N=b+(E^k&(y^E))+I[6]+3225465664&4294967295,b=y+(N<<9&4294967295|N>>>23),N=k+(y^E&(b^y))+I[11]+643717713&4294967295,k=b+(N<<14&4294967295|N>>>18),N=E+(b^y&(k^b))+I[0]+3921069994&4294967295,E=k+(N<<20&4294967295|N>>>12),N=y+(k^b&(E^k))+I[5]+3593408605&4294967295,y=E+(N<<5&4294967295|N>>>27),N=b+(E^k&(y^E))+I[10]+38016083&4294967295,b=y+(N<<9&4294967295|N>>>23),N=k+(y^E&(b^y))+I[15]+3634488961&4294967295,k=b+(N<<14&4294967295|N>>>18),N=E+(b^y&(k^b))+I[4]+3889429448&4294967295,E=k+(N<<20&4294967295|N>>>12),N=y+(k^b&(E^k))+I[9]+568446438&4294967295,y=E+(N<<5&4294967295|N>>>27),N=b+(E^k&(y^E))+I[14]+3275163606&4294967295,b=y+(N<<9&4294967295|N>>>23),N=k+(y^E&(b^y))+I[3]+4107603335&4294967295,k=b+(N<<14&4294967295|N>>>18),N=E+(b^y&(k^b))+I[8]+1163531501&4294967295,E=k+(N<<20&4294967295|N>>>12),N=y+(k^b&(E^k))+I[13]+2850285829&4294967295,y=E+(N<<5&4294967295|N>>>27),N=b+(E^k&(y^E))+I[2]+4243563512&4294967295,b=y+(N<<9&4294967295|N>>>23),N=k+(y^E&(b^y))+I[7]+1735328473&4294967295,k=b+(N<<14&4294967295|N>>>18),N=E+(b^y&(k^b))+I[12]+2368359562&4294967295,E=k+(N<<20&4294967295|N>>>12),N=y+(E^k^b)+I[5]+4294588738&4294967295,y=E+(N<<4&4294967295|N>>>28),N=b+(y^E^k)+I[8]+2272392833&4294967295,b=y+(N<<11&4294967295|N>>>21),N=k+(b^y^E)+I[11]+1839030562&4294967295,k=b+(N<<16&4294967295|N>>>16),N=E+(k^b^y)+I[14]+4259657740&4294967295,E=k+(N<<23&4294967295|N>>>9),N=y+(E^k^b)+I[1]+2763975236&4294967295,y=E+(N<<4&4294967295|N>>>28),N=b+(y^E^k)+I[4]+1272893353&4294967295,b=y+(N<<11&4294967295|N>>>21),N=k+(b^y^E)+I[7]+4139469664&4294967295,k=b+(N<<16&4294967295|N>>>16),N=E+(k^b^y)+I[10]+3200236656&4294967295,E=k+(N<<23&4294967295|N>>>9),N=y+(E^k^b)+I[13]+681279174&4294967295,y=E+(N<<4&4294967295|N>>>28),N=b+(y^E^k)+I[0]+3936430074&4294967295,b=y+(N<<11&4294967295|N>>>21),N=k+(b^y^E)+I[3]+3572445317&4294967295,k=b+(N<<16&4294967295|N>>>16),N=E+(k^b^y)+I[6]+76029189&4294967295,E=k+(N<<23&4294967295|N>>>9),N=y+(E^k^b)+I[9]+3654602809&4294967295,y=E+(N<<4&4294967295|N>>>28),N=b+(y^E^k)+I[12]+3873151461&4294967295,b=y+(N<<11&4294967295|N>>>21),N=k+(b^y^E)+I[15]+530742520&4294967295,k=b+(N<<16&4294967295|N>>>16),N=E+(k^b^y)+I[2]+3299628645&4294967295,E=k+(N<<23&4294967295|N>>>9),N=y+(k^(E|~b))+I[0]+4096336452&4294967295,y=E+(N<<6&4294967295|N>>>26),N=b+(E^(y|~k))+I[7]+1126891415&4294967295,b=y+(N<<10&4294967295|N>>>22),N=k+(y^(b|~E))+I[14]+2878612391&4294967295,k=b+(N<<15&4294967295|N>>>17),N=E+(b^(k|~y))+I[5]+4237533241&4294967295,E=k+(N<<21&4294967295|N>>>11),N=y+(k^(E|~b))+I[12]+1700485571&4294967295,y=E+(N<<6&4294967295|N>>>26),N=b+(E^(y|~k))+I[3]+2399980690&4294967295,b=y+(N<<10&4294967295|N>>>22),N=k+(y^(b|~E))+I[10]+4293915773&4294967295,k=b+(N<<15&4294967295|N>>>17),N=E+(b^(k|~y))+I[1]+2240044497&4294967295,E=k+(N<<21&4294967295|N>>>11),N=y+(k^(E|~b))+I[8]+1873313359&4294967295,y=E+(N<<6&4294967295|N>>>26),N=b+(E^(y|~k))+I[15]+4264355552&4294967295,b=y+(N<<10&4294967295|N>>>22),N=k+(y^(b|~E))+I[6]+2734768916&4294967295,k=b+(N<<15&4294967295|N>>>17),N=E+(b^(k|~y))+I[13]+1309151649&4294967295,E=k+(N<<21&4294967295|N>>>11),N=y+(k^(E|~b))+I[4]+4149444226&4294967295,y=E+(N<<6&4294967295|N>>>26),N=b+(E^(y|~k))+I[11]+3174756917&4294967295,b=y+(N<<10&4294967295|N>>>22),N=k+(y^(b|~E))+I[2]+718787259&4294967295,k=b+(N<<15&4294967295|N>>>17),N=E+(b^(k|~y))+I[9]+3951481745&4294967295,w.g[0]=w.g[0]+y&4294967295,w.g[1]=w.g[1]+(k+(N<<21&4294967295|N>>>11))&4294967295,w.g[2]=w.g[2]+k&4294967295,w.g[3]=w.g[3]+b&4294967295}r.prototype.v=function(w,y){y===void 0&&(y=w.length);const E=y-this.blockSize,I=this.C;let k=this.h,b=0;for(;b<y;){if(k==0)for(;b<=E;)s(this,w,b),b+=this.blockSize;if(typeof w=="string"){for(;b<y;)if(I[k++]=w.charCodeAt(b++),k==this.blockSize){s(this,I),k=0;break}}else for(;b<y;)if(I[k++]=w[b++],k==this.blockSize){s(this,I),k=0;break}}this.h=k,this.o+=y},r.prototype.A=function(){var w=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);w[0]=128;for(var y=1;y<w.length-8;++y)w[y]=0;y=this.o*8;for(var E=w.length-8;E<w.length;++E)w[E]=y&255,y/=256;for(this.v(w),w=Array(16),y=0,E=0;E<4;++E)for(let I=0;I<32;I+=8)w[y++]=this.g[E]>>>I&255;return w};function i(w,y){var E=c;return Object.prototype.hasOwnProperty.call(E,w)?E[w]:E[w]=y(w)}function o(w,y){this.h=y;const E=[];let I=!0;for(let k=w.length-1;k>=0;k--){const b=w[k]|0;I&&b==y||(E[k]=b,I=!1)}this.g=E}var c={};function u(w){return-128<=w&&w<128?i(w,function(y){return new o([y|0],y<0?-1:0)}):new o([w|0],w<0?-1:0)}function d(w){if(isNaN(w)||!isFinite(w))return m;if(w<0)return L(d(-w));const y=[];let E=1;for(let I=0;w>=E;I++)y[I]=w/E|0,E*=4294967296;return new o(y,0)}function p(w,y){if(w.length==0)throw Error("number format error: empty string");if(y=y||10,y<2||36<y)throw Error("radix out of range: "+y);if(w.charAt(0)=="-")return L(p(w.substring(1),y));if(w.indexOf("-")>=0)throw Error('number format error: interior "-" character');const E=d(Math.pow(y,8));let I=m;for(let b=0;b<w.length;b+=8){var k=Math.min(8,w.length-b);const N=parseInt(w.substring(b,b+k),y);k<8?(k=d(Math.pow(y,k)),I=I.j(k).add(d(N))):(I=I.j(E),I=I.add(d(N)))}return I}var m=u(0),g=u(1),_=u(16777216);t=o.prototype,t.m=function(){if(P(this))return-L(this).m();let w=0,y=1;for(let E=0;E<this.g.length;E++){const I=this.i(E);w+=(I>=0?I:4294967296+I)*y,y*=4294967296}return w},t.toString=function(w){if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(R(this))return"0";if(P(this))return"-"+L(this).toString(w);const y=d(Math.pow(w,6));var E=this;let I="";for(;;){const k=O(E,y).g;E=S(E,k.j(y));let b=((E.g.length>0?E.g[0]:E.h)>>>0).toString(w);if(E=k,R(E))return b+I;for(;b.length<6;)b="0"+b;I=b+I}},t.i=function(w){return w<0?0:w<this.g.length?this.g[w]:this.h};function R(w){if(w.h!=0)return!1;for(let y=0;y<w.g.length;y++)if(w.g[y]!=0)return!1;return!0}function P(w){return w.h==-1}t.l=function(w){return w=S(this,w),P(w)?-1:R(w)?0:1};function L(w){const y=w.g.length,E=[];for(let I=0;I<y;I++)E[I]=~w.g[I];return new o(E,~w.h).add(g)}t.abs=function(){return P(this)?L(this):this},t.add=function(w){const y=Math.max(this.g.length,w.g.length),E=[];let I=0;for(let k=0;k<=y;k++){let b=I+(this.i(k)&65535)+(w.i(k)&65535),N=(b>>>16)+(this.i(k)>>>16)+(w.i(k)>>>16);I=N>>>16,b&=65535,N&=65535,E[k]=N<<16|b}return new o(E,E[E.length-1]&-2147483648?-1:0)};function S(w,y){return w.add(L(y))}t.j=function(w){if(R(this)||R(w))return m;if(P(this))return P(w)?L(this).j(L(w)):L(L(this).j(w));if(P(w))return L(this.j(L(w)));if(this.l(_)<0&&w.l(_)<0)return d(this.m()*w.m());const y=this.g.length+w.g.length,E=[];for(var I=0;I<2*y;I++)E[I]=0;for(I=0;I<this.g.length;I++)for(let k=0;k<w.g.length;k++){const b=this.i(I)>>>16,N=this.i(I)&65535,ie=w.i(k)>>>16,tt=w.i(k)&65535;E[2*I+2*k]+=N*tt,T(E,2*I+2*k),E[2*I+2*k+1]+=b*tt,T(E,2*I+2*k+1),E[2*I+2*k+1]+=N*ie,T(E,2*I+2*k+1),E[2*I+2*k+2]+=b*ie,T(E,2*I+2*k+2)}for(w=0;w<y;w++)E[w]=E[2*w+1]<<16|E[2*w];for(w=y;w<2*y;w++)E[w]=0;return new o(E,0)};function T(w,y){for(;(w[y]&65535)!=w[y];)w[y+1]+=w[y]>>>16,w[y]&=65535,y++}function x(w,y){this.g=w,this.h=y}function O(w,y){if(R(y))throw Error("division by zero");if(R(w))return new x(m,m);if(P(w))return y=O(L(w),y),new x(L(y.g),L(y.h));if(P(y))return y=O(w,L(y)),new x(L(y.g),y.h);if(w.g.length>30){if(P(w)||P(y))throw Error("slowDivide_ only works with positive integers.");for(var E=g,I=y;I.l(w)<=0;)E=j(E),I=j(I);var k=U(E,1),b=U(I,1);for(I=U(I,2),E=U(E,2);!R(I);){var N=b.add(I);N.l(w)<=0&&(k=k.add(E),b=N),I=U(I,1),E=U(E,1)}return y=S(w,k.j(y)),new x(k,y)}for(k=m;w.l(y)>=0;){for(E=Math.max(1,Math.floor(w.m()/y.m())),I=Math.ceil(Math.log(E)/Math.LN2),I=I<=48?1:Math.pow(2,I-48),b=d(E),N=b.j(y);P(N)||N.l(w)>0;)E-=I,b=d(E),N=b.j(y);R(b)&&(b=g),k=k.add(b),w=S(w,N)}return new x(k,w)}t.B=function(w){return O(this,w).h},t.and=function(w){const y=Math.max(this.g.length,w.g.length),E=[];for(let I=0;I<y;I++)E[I]=this.i(I)&w.i(I);return new o(E,this.h&w.h)},t.or=function(w){const y=Math.max(this.g.length,w.g.length),E=[];for(let I=0;I<y;I++)E[I]=this.i(I)|w.i(I);return new o(E,this.h|w.h)},t.xor=function(w){const y=Math.max(this.g.length,w.g.length),E=[];for(let I=0;I<y;I++)E[I]=this.i(I)^w.i(I);return new o(E,this.h^w.h)};function j(w){const y=w.g.length+1,E=[];for(let I=0;I<y;I++)E[I]=w.i(I)<<1|w.i(I-1)>>>31;return new o(E,w.h)}function U(w,y){const E=y>>5;y%=32;const I=w.g.length-E,k=[];for(let b=0;b<I;b++)k[b]=y>0?w.i(b+E)>>>y|w.i(b+E+1)<<32-y:w.i(b+E);return new o(k,w.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,hE=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=p,Cr=o}).apply(typeof ty<"u"?ty:typeof self<"u"?self:typeof window<"u"?window:{});var ll=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var fE,yo,pE,kl,yh,mE,gE,yE;(function(){var t,e=Object.defineProperty;function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof ll=="object"&&ll];for(var h=0;h<a.length;++h){var f=a[h];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function s(a,h){if(h)e:{var f=r;a=a.split(".");for(var v=0;v<a.length-1;v++){var D=a[v];if(!(D in f))break e;f=f[D]}a=a[a.length-1],v=f[a],h=h(v),h!=v&&h!=null&&e(f,a,{configurable:!0,writable:!0,value:h})}}s("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(a){return a||function(h){var f=[],v;for(v in h)Object.prototype.hasOwnProperty.call(h,v)&&f.push([v,h[v]]);return f}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function c(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function u(a,h,f){return a.call.apply(a.bind,arguments)}function d(a,h,f){return d=u,d.apply(null,arguments)}function p(a,h){var f=Array.prototype.slice.call(arguments,1);return function(){var v=f.slice();return v.push.apply(v,arguments),a.apply(this,v)}}function m(a,h){function f(){}f.prototype=h.prototype,a.Z=h.prototype,a.prototype=new f,a.prototype.constructor=a,a.Ob=function(v,D,V){for(var q=Array(arguments.length-2),ae=2;ae<arguments.length;ae++)q[ae-2]=arguments[ae];return h.prototype[D].apply(v,q)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function _(a){const h=a.length;if(h>0){const f=Array(h);for(let v=0;v<h;v++)f[v]=a[v];return f}return[]}function R(a,h){for(let v=1;v<arguments.length;v++){const D=arguments[v];var f=typeof D;if(f=f!="object"?f:D?Array.isArray(D)?"array":f:"null",f=="array"||f=="object"&&typeof D.length=="number"){f=a.length||0;const V=D.length||0;a.length=f+V;for(let q=0;q<V;q++)a[f+q]=D[q]}else a.push(D)}}class P{constructor(h,f){this.i=h,this.j=f,this.h=0,this.g=null}get(){let h;return this.h>0?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function L(a){o.setTimeout(()=>{throw a},0)}function S(){var a=w;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class T{constructor(){this.h=this.g=null}add(h,f){const v=x.get();v.set(h,f),this.h?this.h.next=v:this.g=v,this.h=v}}var x=new P(()=>new O,a=>a.reset());class O{constructor(){this.next=this.g=this.h=null}set(h,f){this.h=h,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let j,U=!1,w=new T,y=()=>{const a=Promise.resolve(void 0);j=()=>{a.then(E)}};function E(){for(var a;a=S();){try{a.h.call(a.g)}catch(f){L(f)}var h=x;h.j(a),h.h<100&&(h.h++,a.next=h.g,h.g=a)}U=!1}function I(){this.u=this.u,this.C=this.C}I.prototype.u=!1,I.prototype.dispose=function(){this.u||(this.u=!0,this.N())},I.prototype[Symbol.dispose]=function(){this.dispose()},I.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var b=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const f=()=>{};o.addEventListener("test",f,h),o.removeEventListener("test",f,h)}catch{}return a}();function N(a){return/^[\s\xa0]*$/.test(a)}function ie(a,h){k.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,h)}m(ie,k),ie.prototype.init=function(a,h){const f=this.type=a.type,v=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget,h||(f=="mouseover"?h=a.fromElement:f=="mouseout"&&(h=a.toElement)),this.relatedTarget=h,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&ie.Z.h.call(this)},ie.prototype.h=function(){ie.Z.h.call(this);const a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var tt="closure_listenable_"+(Math.random()*1e6|0),ln=0;function re(a,h,f,v,D){this.listener=a,this.proxy=null,this.src=h,this.type=f,this.capture=!!v,this.ha=D,this.key=++ln,this.da=this.fa=!1}function H(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function A(a,h,f){for(const v in a)h.call(f,a[v],v,a)}function z(a,h){for(const f in a)h.call(void 0,a[f],f,a)}function Y(a){const h={};for(const f in a)h[f]=a[f];return h}const Z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Te(a,h){let f,v;for(let D=1;D<arguments.length;D++){v=arguments[D];for(f in v)a[f]=v[f];for(let V=0;V<Z.length;V++)f=Z[V],Object.prototype.hasOwnProperty.call(v,f)&&(a[f]=v[f])}}function J(a){this.src=a,this.g={},this.h=0}J.prototype.add=function(a,h,f,v,D){const V=a.toString();a=this.g[V],a||(a=this.g[V]=[],this.h++);const q=Pt(a,h,v,D);return q>-1?(h=a[q],f||(h.fa=!1)):(h=new re(h,this.src,V,!!v,D),h.fa=f,a.push(h)),h};function Ie(a,h){const f=h.type;if(f in a.g){var v=a.g[f],D=Array.prototype.indexOf.call(v,h,void 0),V;(V=D>=0)&&Array.prototype.splice.call(v,D,1),V&&(H(h),a.g[f].length==0&&(delete a.g[f],a.h--))}}function Pt(a,h,f,v){for(let D=0;D<a.length;++D){const V=a[D];if(!V.da&&V.listener==h&&V.capture==!!f&&V.ha==v)return D}return-1}var cn="closure_lm_"+(Math.random()*1e6|0),kn={};function ce(a,h,f,v,D){if(Array.isArray(h)){for(let V=0;V<h.length;V++)ce(a,h[V],f,v,D);return null}return f=ka(f),a&&a[tt]?a.J(h,f,c(v)?!!v.capture:!1,D):_t(a,h,f,!1,v,D)}function _t(a,h,f,v,D,V){if(!h)throw Error("Invalid event type");const q=c(D)?!!D.capture:!!D;let ae=Fi(a);if(ae||(a[cn]=ae=new J(a)),f=ae.add(h,f,v,q,V),f.proxy)return f;if(v=Oi(),f.proxy=v,v.src=a,v.listener=f,a.addEventListener)b||(D=q),D===void 0&&(D=!1),a.addEventListener(h.toString(),v,D);else if(a.attachEvent)a.attachEvent(Mi(h.toString()),v);else if(a.addListener&&a.removeListener)a.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return f}function Oi(){function a(f){return h.call(a.src,a.listener,f)}const h=Aa;return a}function Li(a,h,f,v,D){if(Array.isArray(h))for(var V=0;V<h.length;V++)Li(a,h[V],f,v,D);else v=c(v)?!!v.capture:!!v,f=ka(f),a&&a[tt]?(a=a.i,V=String(h).toString(),V in a.g&&(h=a.g[V],f=Pt(h,f,v,D),f>-1&&(H(h[f]),Array.prototype.splice.call(h,f,1),h.length==0&&(delete a.g[V],a.h--)))):a&&(a=Fi(a))&&(h=a.g[h.toString()],a=-1,h&&(a=Pt(h,f,v,D)),(f=a>-1?h[a]:null)&&$r(f))}function $r(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[tt])Ie(h.i,a);else{var f=a.type,v=a.proxy;h.removeEventListener?h.removeEventListener(f,v,a.capture):h.detachEvent?h.detachEvent(Mi(f),v):h.addListener&&h.removeListener&&h.removeListener(v),(f=Fi(h))?(Ie(f,a),f.h==0&&(f.src=null,h[cn]=null)):H(a)}}}function Mi(a){return a in kn?kn[a]:kn[a]="on"+a}function Aa(a,h){if(a.da)a=!0;else{h=new ie(h,this);const f=a.listener,v=a.ha||a.src;a.fa&&$r(a),a=f.call(v,h)}return a}function Fi(a){return a=a[cn],a instanceof J?a:null}var Ui="__closure_events_fn_"+(Math.random()*1e9>>>0);function ka(a){return typeof a=="function"?a:(a[Ui]||(a[Ui]=function(h){return a.handleEvent(h)}),a[Ui])}function Qe(){I.call(this),this.i=new J(this),this.M=this,this.G=null}m(Qe,I),Qe.prototype[tt]=!0,Qe.prototype.removeEventListener=function(a,h,f,v){Li(this,a,h,f,v)};function nt(a,h){var f,v=a.G;if(v)for(f=[];v;v=v.G)f.push(v);if(a=a.M,v=h.type||h,typeof h=="string")h=new k(h,a);else if(h instanceof k)h.target=h.target||a;else{var D=h;h=new k(v,a),Te(h,D)}D=!0;let V,q;if(f)for(q=f.length-1;q>=0;q--)V=h.g=f[q],D=Cs(V,v,!0,h)&&D;if(V=h.g=a,D=Cs(V,v,!0,h)&&D,D=Cs(V,v,!1,h)&&D,f)for(q=0;q<f.length;q++)V=h.g=f[q],D=Cs(V,v,!1,h)&&D}Qe.prototype.N=function(){if(Qe.Z.N.call(this),this.i){var a=this.i;for(const h in a.g){const f=a.g[h];for(let v=0;v<f.length;v++)H(f[v]);delete a.g[h],a.h--}}this.G=null},Qe.prototype.J=function(a,h,f,v){return this.i.add(String(a),h,!1,f,v)},Qe.prototype.K=function(a,h,f,v){return this.i.add(String(a),h,!0,f,v)};function Cs(a,h,f,v){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();let D=!0;for(let V=0;V<h.length;++V){const q=h[V];if(q&&!q.da&&q.capture==f){const ae=q.listener,qe=q.ha||q.src;q.fa&&Ie(a.i,q),D=ae.call(qe,v)!==!1&&D}}return D&&!v.defaultPrevented}function fu(a,h){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=d(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(h)>2147483647?-1:o.setTimeout(a,h||0)}function Ra(a){a.g=fu(()=>{a.g=null,a.i&&(a.i=!1,Ra(a))},a.l);const h=a.h;a.h=null,a.m.apply(null,h)}class pu extends I{constructor(h,f){super(),this.m=h,this.l=f,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Ra(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function qr(a){I.call(this),this.h=a,this.g={}}m(qr,I);var zi=[];function Pa(a){A(a.g,function(h,f){this.g.hasOwnProperty(f)&&$r(h)},a),a.g={}}qr.prototype.N=function(){qr.Z.N.call(this),Pa(this)},qr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Bi=o.JSON.stringify,mu=o.JSON.parse,gu=class{stringify(a){return o.JSON.stringify(a,void 0)}parse(a){return o.JSON.parse(a,void 0)}};function ba(){}function ja(){}var Rn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function As(){k.call(this,"d")}m(As,k);function ks(){k.call(this,"c")}m(ks,k);var un={},$i=null;function Hr(){return $i=$i||new Qe}un.Ia="serverreachability";function C(a){k.call(this,un.Ia,a)}m(C,k);function W(a){const h=Hr();nt(h,new C(h))}un.STAT_EVENT="statevent";function ye(a,h){k.call(this,un.STAT_EVENT,a),this.stat=h}m(ye,k);function oe(a){const h=Hr();nt(h,new ye(h,a))}un.Ja="timingevent";function Ft(a,h){k.call(this,un.Ja,a),this.size=h}m(Ft,k);function pe(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){a()},h)}function rt(){this.g=!0}rt.prototype.ua=function(){this.g=!1};function ve(a,h,f,v,D,V){a.info(function(){if(a.g)if(V){var q="",ae=V.split("&");for(let Ee=0;Ee<ae.length;Ee++){var qe=ae[Ee].split("=");if(qe.length>1){const Je=qe[0];qe=qe[1];const fn=Je.split("_");q=fn.length>=2&&fn[1]=="type"?q+(Je+"="+qe+"&"):q+(Je+"=redacted&")}}}else q=null;else q=V;return"XMLHTTP REQ ("+v+") [attempt "+D+"]: "+h+`
`+f+`
`+q})}function dn(a,h,f,v,D,V,q){a.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+D+"]: "+h+`
`+f+`
`+V+" "+q})}function Ye(a,h,f,v){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+c1(a,f)+(v?" "+v:"")})}function l1(a,h){a.info(function(){return"TIMEOUT: "+h})}rt.prototype.info=function(){};function c1(a,h){if(!a.g)return h;if(!h)return null;try{const V=JSON.parse(h);if(V){for(a=0;a<V.length;a++)if(Array.isArray(V[a])){var f=V[a];if(!(f.length<2)){var v=f[1];if(Array.isArray(v)&&!(v.length<1)){var D=v[0];if(D!="noop"&&D!="stop"&&D!="close")for(let q=1;q<v.length;q++)v[q]=""}}}}return Bi(V)}catch{return h}}var Da={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Pp={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},bp;function yu(){}m(yu,ba),yu.prototype.g=function(){return new XMLHttpRequest},bp=new yu;function qi(a){return encodeURIComponent(String(a))}function u1(a){var h=1;a=a.split(":");const f=[];for(;h>0&&a.length;)f.push(a.shift()),h--;return a.length&&f.push(a.join(":")),f}function Jn(a,h,f,v){this.j=a,this.i=h,this.l=f,this.S=v||1,this.V=new qr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new jp}function jp(){this.i=null,this.g="",this.h=!1}var Dp={},vu={};function _u(a,h,f){a.M=1,a.A=Oa(hn(h)),a.u=f,a.R=!0,Vp(a,null)}function Vp(a,h){a.F=Date.now(),Va(a),a.B=hn(a.A);var f=a.B,v=a.S;Array.isArray(v)||(v=[String(v)]),Kp(f.i,"t",v),a.C=0,f=a.j.L,a.h=new jp,a.g=hm(a.j,f?h:null,!a.u),a.P>0&&(a.O=new pu(d(a.Y,a,a.g),a.P)),h=a.V,f=a.g,v=a.ba;var D="readystatechange";Array.isArray(D)||(D&&(zi[0]=D.toString()),D=zi);for(let V=0;V<D.length;V++){const q=ce(f,D[V],v||h.handleEvent,!1,h.h||h);if(!q)break;h.g[q.key]=q}h=a.J?Y(a.J):{},a.u?(a.v||(a.v="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,h)):(a.v="GET",a.g.ea(a.B,a.v,null,h)),W(),ve(a.i,a.v,a.B,a.l,a.S,a.u)}Jn.prototype.ba=function(a){a=a.target;const h=this.O;h&&er(a)==3?h.j():this.Y(a)},Jn.prototype.Y=function(a){try{if(a==this.g)e:{const ae=er(this.g),qe=this.g.ya(),Ee=this.g.ca();if(!(ae<3)&&(ae!=3||this.g&&(this.h.h||this.g.la()||tm(this.g)))){this.K||ae!=4||qe==7||(qe==8||Ee<=0?W(3):W(2)),wu(this);var h=this.g.ca();this.X=h;var f=d1(this);if(this.o=h==200,dn(this.i,this.v,this.B,this.l,this.S,ae,h),this.o){if(this.U&&!this.L){t:{if(this.g){var v,D=this.g;if((v=D.g?D.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(v)){var V=v;break t}}V=null}if(a=V)Ye(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Eu(this,a);else{this.o=!1,this.m=3,oe(12),Wr(this),Hi(this);break e}}if(this.R){a=!0;let Je;for(;!this.K&&this.C<f.length;)if(Je=h1(this,f),Je==vu){ae==4&&(this.m=4,oe(14),a=!1),Ye(this.i,this.l,null,"[Incomplete Response]");break}else if(Je==Dp){this.m=4,oe(15),Ye(this.i,this.l,f,"[Invalid Chunk]"),a=!1;break}else Ye(this.i,this.l,Je,null),Eu(this,Je);if(Op(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ae!=4||f.length!=0||this.h.h||(this.m=1,oe(16),a=!1),this.o=this.o&&a,!a)Ye(this.i,this.l,f,"[Invalid Chunked Response]"),Wr(this),Hi(this);else if(f.length>0&&!this.W){this.W=!0;var q=this.j;q.g==this&&q.aa&&!q.P&&(q.j.info("Great, no buffering proxy detected. Bytes received: "+f.length),ku(q),q.P=!0,oe(11))}}else Ye(this.i,this.l,f,null),Eu(this,f);ae==4&&Wr(this),this.o&&!this.K&&(ae==4?lm(this.j,this):(this.o=!1,Va(this)))}else N1(this.g),h==400&&f.indexOf("Unknown SID")>0?(this.m=3,oe(12)):(this.m=0,oe(13)),Wr(this),Hi(this)}}}catch{}finally{}};function d1(a){if(!Op(a))return a.g.la();const h=tm(a.g);if(h==="")return"";let f="";const v=h.length,D=er(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return Wr(a),Hi(a),"";a.h.i=new o.TextDecoder}for(let V=0;V<v;V++)a.h.h=!0,f+=a.h.i.decode(h[V],{stream:!(D&&V==v-1)});return h.length=0,a.h.g+=f,a.C=0,a.h.g}function Op(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function h1(a,h){var f=a.C,v=h.indexOf(`
`,f);return v==-1?vu:(f=Number(h.substring(f,v)),isNaN(f)?Dp:(v+=1,v+f>h.length?vu:(h=h.slice(v,v+f),a.C=v+f,h)))}Jn.prototype.cancel=function(){this.K=!0,Wr(this)};function Va(a){a.T=Date.now()+a.H,Lp(a,a.H)}function Lp(a,h){if(a.D!=null)throw Error("WatchDog timer not null");a.D=pe(d(a.aa,a),h)}function wu(a){a.D&&(o.clearTimeout(a.D),a.D=null)}Jn.prototype.aa=function(){this.D=null;const a=Date.now();a-this.T>=0?(l1(this.i,this.B),this.M!=2&&(W(),oe(17)),Wr(this),this.m=2,Hi(this)):Lp(this,this.T-a)};function Hi(a){a.j.I==0||a.K||lm(a.j,a)}function Wr(a){wu(a);var h=a.O;h&&typeof h.dispose=="function"&&h.dispose(),a.O=null,Pa(a.V),a.g&&(h=a.g,a.g=null,h.abort(),h.dispose())}function Eu(a,h){try{var f=a.j;if(f.I!=0&&(f.g==a||Tu(f.h,a))){if(!a.L&&Tu(f.h,a)&&f.I==3){try{var v=f.Ba.g.parse(h)}catch{v=null}if(Array.isArray(v)&&v.length==3){var D=v;if(D[0]==0){e:if(!f.v){if(f.g)if(f.g.F+3e3<a.F)za(f),Fa(f);else break e;Au(f),oe(18)}}else f.xa=D[1],0<f.xa-f.K&&D[2]<37500&&f.F&&f.A==0&&!f.C&&(f.C=pe(d(f.Va,f),6e3));Up(f.h)<=1&&f.ta&&(f.ta=void 0)}else Kr(f,11)}else if((a.L||f.g==a)&&za(f),!N(h))for(D=f.Ba.g.parse(h),h=0;h<D.length;h++){let Ee=D[h];const Je=Ee[0];if(!(Je<=f.K))if(f.K=Je,Ee=Ee[1],f.I==2)if(Ee[0]=="c"){f.M=Ee[1],f.ba=Ee[2];const fn=Ee[3];fn!=null&&(f.ka=fn,f.j.info("VER="+f.ka));const Qr=Ee[4];Qr!=null&&(f.za=Qr,f.j.info("SVER="+f.za));const tr=Ee[5];tr!=null&&typeof tr=="number"&&tr>0&&(v=1.5*tr,f.O=v,f.j.info("backChannelRequestTimeoutMs_="+v)),v=f;const nr=a.g;if(nr){const $a=nr.g?nr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if($a){var V=v.h;V.g||$a.indexOf("spdy")==-1&&$a.indexOf("quic")==-1&&$a.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(Iu(V,V.h),V.h=null))}if(v.G){const Ru=nr.g?nr.g.getResponseHeader("X-HTTP-Session-Id"):null;Ru&&(v.wa=Ru,Ne(v.J,v.G,Ru))}}f.I=3,f.l&&f.l.ra(),f.aa&&(f.T=Date.now()-a.F,f.j.info("Handshake RTT: "+f.T+"ms")),v=f;var q=a;if(v.na=dm(v,v.L?v.ba:null,v.W),q.L){zp(v.h,q);var ae=q,qe=v.O;qe&&(ae.H=qe),ae.D&&(wu(ae),Va(ae)),v.g=q}else om(v);f.i.length>0&&Ua(f)}else Ee[0]!="stop"&&Ee[0]!="close"||Kr(f,7);else f.I==3&&(Ee[0]=="stop"||Ee[0]=="close"?Ee[0]=="stop"?Kr(f,7):Cu(f):Ee[0]!="noop"&&f.l&&f.l.qa(Ee),f.A=0)}}W(4)}catch{}}var f1=class{constructor(a,h){this.g=a,this.map=h}};function Mp(a){this.l=a||10,o.PerformanceNavigationTiming?(a=o.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Fp(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Up(a){return a.h?1:a.g?a.g.size:0}function Tu(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function Iu(a,h){a.g?a.g.add(h):a.h=h}function zp(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}Mp.prototype.cancel=function(){if(this.i=Bp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Bp(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let h=a.i;for(const f of a.g.values())h=h.concat(f.G);return h}return _(a.i)}var $p=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function p1(a,h){if(a){a=a.split("&");for(let f=0;f<a.length;f++){const v=a[f].indexOf("=");let D,V=null;v>=0?(D=a[f].substring(0,v),V=a[f].substring(v+1)):D=a[f],h(D,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function Xn(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let h;a instanceof Xn?(this.l=a.l,Wi(this,a.j),this.o=a.o,this.g=a.g,Gi(this,a.u),this.h=a.h,Su(this,Qp(a.i)),this.m=a.m):a&&(h=String(a).match($p))?(this.l=!1,Wi(this,h[1]||"",!0),this.o=Ki(h[2]||""),this.g=Ki(h[3]||"",!0),Gi(this,h[4]),this.h=Ki(h[5]||"",!0),Su(this,h[6]||"",!0),this.m=Ki(h[7]||"")):(this.l=!1,this.i=new Yi(null,this.l))}Xn.prototype.toString=function(){const a=[];var h=this.j;h&&a.push(Qi(h,qp,!0),":");var f=this.g;return(f||h=="file")&&(a.push("//"),(h=this.o)&&a.push(Qi(h,qp,!0),"@"),a.push(qi(f).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.u,f!=null&&a.push(":",String(f))),(f=this.h)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(Qi(f,f.charAt(0)=="/"?y1:g1,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",Qi(f,_1)),a.join("")},Xn.prototype.resolve=function(a){const h=hn(this);let f=!!a.j;f?Wi(h,a.j):f=!!a.o,f?h.o=a.o:f=!!a.g,f?h.g=a.g:f=a.u!=null;var v=a.h;if(f)Gi(h,a.u);else if(f=!!a.h){if(v.charAt(0)!="/")if(this.g&&!this.h)v="/"+v;else{var D=h.h.lastIndexOf("/");D!=-1&&(v=h.h.slice(0,D+1)+v)}if(D=v,D==".."||D==".")v="";else if(D.indexOf("./")!=-1||D.indexOf("/.")!=-1){v=D.lastIndexOf("/",0)==0,D=D.split("/");const V=[];for(let q=0;q<D.length;){const ae=D[q++];ae=="."?v&&q==D.length&&V.push(""):ae==".."?((V.length>1||V.length==1&&V[0]!="")&&V.pop(),v&&q==D.length&&V.push("")):(V.push(ae),v=!0)}v=V.join("/")}else v=D}return f?h.h=v:f=a.i.toString()!=="",f?Su(h,Qp(a.i)):f=!!a.m,f&&(h.m=a.m),h};function hn(a){return new Xn(a)}function Wi(a,h,f){a.j=f?Ki(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function Gi(a,h){if(h){if(h=Number(h),isNaN(h)||h<0)throw Error("Bad port number "+h);a.u=h}else a.u=null}function Su(a,h,f){h instanceof Yi?(a.i=h,w1(a.i,a.l)):(f||(h=Qi(h,v1)),a.i=new Yi(h,a.l))}function Ne(a,h,f){a.i.set(h,f)}function Oa(a){return Ne(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function Ki(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Qi(a,h,f){return typeof a=="string"?(a=encodeURI(a).replace(h,m1),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function m1(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var qp=/[#\/\?@]/g,g1=/[#\?:]/g,y1=/[#\?]/g,v1=/[#\?@]/g,_1=/#/g;function Yi(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function Gr(a){a.g||(a.g=new Map,a.h=0,a.i&&p1(a.i,function(h,f){a.add(decodeURIComponent(h.replace(/\+/g," ")),f)}))}t=Yi.prototype,t.add=function(a,h){Gr(this),this.i=null,a=Rs(this,a);let f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(h),this.h+=1,this};function Hp(a,h){Gr(a),h=Rs(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function Wp(a,h){return Gr(a),h=Rs(a,h),a.g.has(h)}t.forEach=function(a,h){Gr(this),this.g.forEach(function(f,v){f.forEach(function(D){a.call(h,D,v,this)},this)},this)};function Gp(a,h){Gr(a);let f=[];if(typeof h=="string")Wp(a,h)&&(f=f.concat(a.g.get(Rs(a,h))));else for(a=Array.from(a.g.values()),h=0;h<a.length;h++)f=f.concat(a[h]);return f}t.set=function(a,h){return Gr(this),this.i=null,a=Rs(this,a),Wp(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},t.get=function(a,h){return a?(a=Gp(this,a),a.length>0?String(a[0]):h):h};function Kp(a,h,f){Hp(a,h),f.length>0&&(a.i=null,a.g.set(Rs(a,h),_(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],h=Array.from(this.g.keys());for(let v=0;v<h.length;v++){var f=h[v];const D=qi(f);f=Gp(this,f);for(let V=0;V<f.length;V++){let q=D;f[V]!==""&&(q+="="+qi(f[V])),a.push(q)}}return this.i=a.join("&")};function Qp(a){const h=new Yi;return h.i=a.i,a.g&&(h.g=new Map(a.g),h.h=a.h),h}function Rs(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function w1(a,h){h&&!a.j&&(Gr(a),a.i=null,a.g.forEach(function(f,v){const D=v.toLowerCase();v!=D&&(Hp(this,v),Kp(this,D,f))},a)),a.j=h}function E1(a,h){const f=new rt;if(o.Image){const v=new Image;v.onload=p(Zn,f,"TestLoadImage: loaded",!0,h,v),v.onerror=p(Zn,f,"TestLoadImage: error",!1,h,v),v.onabort=p(Zn,f,"TestLoadImage: abort",!1,h,v),v.ontimeout=p(Zn,f,"TestLoadImage: timeout",!1,h,v),o.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=a}else h(!1)}function T1(a,h){const f=new rt,v=new AbortController,D=setTimeout(()=>{v.abort(),Zn(f,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:v.signal}).then(V=>{clearTimeout(D),V.ok?Zn(f,"TestPingServer: ok",!0,h):Zn(f,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(D),Zn(f,"TestPingServer: error",!1,h)})}function Zn(a,h,f,v,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),v(f)}catch{}}function I1(){this.g=new gu}function xu(a){this.i=a.Sb||null,this.h=a.ab||!1}m(xu,ba),xu.prototype.g=function(){return new La(this.i,this.h)};function La(a,h){Qe.call(this),this.H=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}m(La,Qe),t=La.prototype,t.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=h,this.readyState=1,Xi(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const h={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(h.body=a),(this.H||o).fetch(new Request(this.D,h)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ji(this)),this.readyState=0},t.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Xi(this)),this.g&&(this.readyState=3,Xi(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Yp(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function Yp(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}t.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.B.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?Ji(this):Xi(this),this.readyState==3&&Yp(this)}},t.Oa=function(a){this.g&&(this.response=this.responseText=a,Ji(this))},t.Na=function(a){this.g&&(this.response=a,Ji(this))},t.ga=function(){this.g&&Ji(this)};function Ji(a){a.readyState=4,a.l=null,a.j=null,a.B=null,Xi(a)}t.setRequestHeader=function(a,h){this.A.append(a,h)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],h=this.h.entries();for(var f=h.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=h.next();return a.join(`\r
`)};function Xi(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(La.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Jp(a){let h="";return A(a,function(f,v){h+=v,h+=":",h+=f,h+=`\r
`}),h}function Nu(a,h,f){e:{for(v in f){var v=!1;break e}v=!0}v||(f=Jp(f),typeof a=="string"?f!=null&&qi(f):Ne(a,h,f))}function Ve(a){Qe.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}m(Ve,Qe);var S1=/^https?$/i,x1=["POST","PUT"];t=Ve.prototype,t.Fa=function(a){this.H=a},t.ea=function(a,h,f,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():bp.g(),this.g.onreadystatechange=g(d(this.Ca,this));try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(V){Xp(this,V);return}if(a=f||"",f=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var D in v)f.set(D,v[D]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(const V of v.keys())f.set(V,v.get(V));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(f.keys()).find(V=>V.toLowerCase()=="content-type"),D=o.FormData&&a instanceof o.FormData,!(Array.prototype.indexOf.call(x1,h,void 0)>=0)||v||D||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,q]of f)this.g.setRequestHeader(V,q);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(V){Xp(this,V)}};function Xp(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.o=5,Zp(a),Ma(a)}function Zp(a){a.A||(a.A=!0,nt(a,"complete"),nt(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,nt(this,"complete"),nt(this,"abort"),Ma(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ma(this,!0)),Ve.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?em(this):this.Xa())},t.Xa=function(){em(this)};function em(a){if(a.h&&typeof i<"u"){if(a.v&&er(a)==4)setTimeout(a.Ca.bind(a),0);else if(nt(a,"readystatechange"),er(a)==4){a.h=!1;try{const V=a.ca();e:switch(V){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var f;if(!(f=h)){var v;if(v=V===0){let q=String(a.D).match($p)[1]||null;!q&&o.self&&o.self.location&&(q=o.self.location.protocol.slice(0,-1)),v=!S1.test(q?q.toLowerCase():"")}f=v}if(f)nt(a,"complete"),nt(a,"success");else{a.o=6;try{var D=er(a)>2?a.g.statusText:""}catch{D=""}a.l=D+" ["+a.ca()+"]",Zp(a)}}finally{Ma(a)}}}}function Ma(a,h){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);const f=a.g;a.g=null,h||nt(a,"ready");try{f.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function er(a){return a.g?a.g.readyState:0}t.ca=function(){try{return er(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),mu(h)}};function tm(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function N1(a){const h={};a=(a.g&&er(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<a.length;v++){if(N(a[v]))continue;var f=u1(a[v]);const D=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const V=h[D]||[];h[D]=V,V.push(f)}z(h,function(v){return v.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Zi(a,h,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||h}function nm(a){this.za=0,this.i=[],this.j=new rt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Zi("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Zi("baseRetryDelayMs",5e3,a),this.Za=Zi("retryDelaySeedMs",1e4,a),this.Ta=Zi("forwardChannelMaxRetries",2,a),this.va=Zi("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new Mp(a&&a.concurrentRequestLimit),this.Ba=new I1,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=nm.prototype,t.ka=8,t.I=1,t.connect=function(a,h,f,v){oe(0),this.W=a,this.H=h||{},f&&v!==void 0&&(this.H.OSID=f,this.H.OAID=v),this.F=this.X,this.J=dm(this,null,this.W),Ua(this)};function Cu(a){if(rm(a),a.I==3){var h=a.V++,f=hn(a.J);if(Ne(f,"SID",a.M),Ne(f,"RID",h),Ne(f,"TYPE","terminate"),eo(a,f),h=new Jn(a,a.j,h),h.M=2,h.A=Oa(hn(f)),f=!1,o.navigator&&o.navigator.sendBeacon)try{f=o.navigator.sendBeacon(h.A.toString(),"")}catch{}!f&&o.Image&&(new Image().src=h.A,f=!0),f||(h.g=hm(h.j,null),h.g.ea(h.A)),h.F=Date.now(),Va(h)}um(a)}function Fa(a){a.g&&(ku(a),a.g.cancel(),a.g=null)}function rm(a){Fa(a),a.v&&(o.clearTimeout(a.v),a.v=null),za(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&o.clearTimeout(a.m),a.m=null)}function Ua(a){if(!Fp(a.h)&&!a.m){a.m=!0;var h=a.Ea;j||y(),U||(j(),U=!0),w.add(h,a),a.D=0}}function C1(a,h){return Up(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=h.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=pe(d(a.Ea,a,h),cm(a,a.D)),a.D++,!0)}t.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;const D=new Jn(this,this.j,a);let V=this.o;if(this.U&&(V?(V=Y(V),Te(V,this.U)):V=this.U),this.u!==null||this.R||(D.J=V,V=null),this.S)e:{for(var h=0,f=0;f<this.i.length;f++){t:{var v=this.i[f];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(h+=v,h>4096){h=f;break e}if(h===4096||f===this.i.length-1){h=f+1;break e}}h=1e3}else h=1e3;h=im(this,D,h),f=hn(this.J),Ne(f,"RID",a),Ne(f,"CVER",22),this.G&&Ne(f,"X-HTTP-Session-Id",this.G),eo(this,f),V&&(this.R?h="headers="+qi(Jp(V))+"&"+h:this.u&&Nu(f,this.u,V)),Iu(this.h,D),this.Ra&&Ne(f,"TYPE","init"),this.S?(Ne(f,"$req",h),Ne(f,"SID","null"),D.U=!0,_u(D,f,null)):_u(D,f,h),this.I=2}}else this.I==3&&(a?sm(this,a):this.i.length==0||Fp(this.h)||sm(this))};function sm(a,h){var f;h?f=h.l:f=a.V++;const v=hn(a.J);Ne(v,"SID",a.M),Ne(v,"RID",f),Ne(v,"AID",a.K),eo(a,v),a.u&&a.o&&Nu(v,a.u,a.o),f=new Jn(a,a.j,f,a.D+1),a.u===null&&(f.J=a.o),h&&(a.i=h.G.concat(a.i)),h=im(a,f,1e3),f.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),Iu(a.h,f),_u(f,v,h)}function eo(a,h){a.H&&A(a.H,function(f,v){Ne(h,v,f)}),a.l&&A({},function(f,v){Ne(h,v,f)})}function im(a,h,f){f=Math.min(a.i.length,f);const v=a.l?d(a.l.Ka,a.l,a):null;e:{var D=a.i;let ae=-1;for(;;){const qe=["count="+f];ae==-1?f>0?(ae=D[0].g,qe.push("ofs="+ae)):ae=0:qe.push("ofs="+ae);let Ee=!0;for(let Je=0;Je<f;Je++){var V=D[Je].g;const fn=D[Je].map;if(V-=ae,V<0)ae=Math.max(0,D[Je].g-100),Ee=!1;else try{V="req"+V+"_"||"";try{var q=fn instanceof Map?fn:Object.entries(fn);for(const[Qr,tr]of q){let nr=tr;c(tr)&&(nr=Bi(tr)),qe.push(V+Qr+"="+encodeURIComponent(nr))}}catch(Qr){throw qe.push(V+"type="+encodeURIComponent("_badmap")),Qr}}catch{v&&v(fn)}}if(Ee){q=qe.join("&");break e}}q=void 0}return a=a.i.splice(0,f),h.G=a,q}function om(a){if(!a.g&&!a.v){a.Y=1;var h=a.Da;j||y(),U||(j(),U=!0),w.add(h,a),a.A=0}}function Au(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=pe(d(a.Da,a),cm(a,a.A)),a.A++,!0)}t.Da=function(){if(this.v=null,am(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=pe(d(this.Wa,this),a)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,oe(10),Fa(this),am(this))};function ku(a){a.B!=null&&(o.clearTimeout(a.B),a.B=null)}function am(a){a.g=new Jn(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var h=hn(a.na);Ne(h,"RID","rpc"),Ne(h,"SID",a.M),Ne(h,"AID",a.K),Ne(h,"CI",a.F?"0":"1"),!a.F&&a.ia&&Ne(h,"TO",a.ia),Ne(h,"TYPE","xmlhttp"),eo(a,h),a.u&&a.o&&Nu(h,a.u,a.o),a.O&&(a.g.H=a.O);var f=a.g;a=a.ba,f.M=1,f.A=Oa(hn(h)),f.u=null,f.R=!0,Vp(f,a)}t.Va=function(){this.C!=null&&(this.C=null,Fa(this),Au(this),oe(19))};function za(a){a.C!=null&&(o.clearTimeout(a.C),a.C=null)}function lm(a,h){var f=null;if(a.g==h){za(a),ku(a),a.g=null;var v=2}else if(Tu(a.h,h))f=h.G,zp(a.h,h),v=1;else return;if(a.I!=0){if(h.o)if(v==1){f=h.u?h.u.length:0,h=Date.now()-h.F;var D=a.D;v=Hr(),nt(v,new Ft(v,f)),Ua(a)}else om(a);else if(D=h.m,D==3||D==0&&h.X>0||!(v==1&&C1(a,h)||v==2&&Au(a)))switch(f&&f.length>0&&(h=a.h,h.i=h.i.concat(f)),D){case 1:Kr(a,5);break;case 4:Kr(a,10);break;case 3:Kr(a,6);break;default:Kr(a,2)}}}function cm(a,h){let f=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(f*=2),f*h}function Kr(a,h){if(a.j.info("Error code "+h),h==2){var f=d(a.bb,a),v=a.Ua;const D=!v;v=new Xn(v||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Wi(v,"https"),Oa(v),D?E1(v.toString(),f):T1(v.toString(),f)}else oe(2);a.I=0,a.l&&a.l.pa(h),um(a),rm(a)}t.bb=function(a){a?(this.j.info("Successfully pinged google.com"),oe(2)):(this.j.info("Failed to ping google.com"),oe(1))};function um(a){if(a.I=0,a.ja=[],a.l){const h=Bp(a.h);(h.length!=0||a.i.length!=0)&&(R(a.ja,h),R(a.ja,a.i),a.h.i.length=0,_(a.i),a.i.length=0),a.l.oa()}}function dm(a,h,f){var v=f instanceof Xn?hn(f):new Xn(f);if(v.g!="")h&&(v.g=h+"."+v.g),Gi(v,v.u);else{var D=o.location;v=D.protocol,h=h?h+"."+D.hostname:D.hostname,D=+D.port;const V=new Xn(null);v&&Wi(V,v),h&&(V.g=h),D&&Gi(V,D),f&&(V.h=f),v=V}return f=a.G,h=a.wa,f&&h&&Ne(v,f,h),Ne(v,"VER",a.ka),eo(a,v),v}function hm(a,h,f){if(h&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Aa&&!a.ma?new Ve(new xu({ab:f})):new Ve(a.ma),h.Fa(a.L),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function fm(){}t=fm.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Ba(){}Ba.prototype.g=function(a,h){return new bt(a,h)};function bt(a,h){Qe.call(this),this.g=new nm(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.sa&&(a?a["X-WebChannel-Client-Profile"]=h.sa:a={"X-WebChannel-Client-Profile":h.sa}),this.g.U=a,(a=h&&h.Qb)&&!N(a)&&(this.g.u=a),this.A=h&&h.supportsCrossDomainXhr||!1,this.v=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!N(h)&&(this.g.G=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new Ps(this)}m(bt,Qe),bt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},bt.prototype.close=function(){Cu(this.g)},bt.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.v&&(f={},f.__data__=Bi(a),a=f);h.i.push(new f1(h.Ya++,a)),h.I==3&&Ua(h)},bt.prototype.N=function(){this.g.l=null,delete this.j,Cu(this.g),delete this.g,bt.Z.N.call(this)};function pm(a){As.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(const f in h){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}m(pm,As);function mm(){ks.call(this),this.status=1}m(mm,ks);function Ps(a){this.g=a}m(Ps,fm),Ps.prototype.ra=function(){nt(this.g,"a")},Ps.prototype.qa=function(a){nt(this.g,new pm(a))},Ps.prototype.pa=function(a){nt(this.g,new mm)},Ps.prototype.oa=function(){nt(this.g,"b")},Ba.prototype.createWebChannel=Ba.prototype.g,bt.prototype.send=bt.prototype.o,bt.prototype.open=bt.prototype.m,bt.prototype.close=bt.prototype.close,yE=function(){return new Ba},gE=function(){return Hr()},mE=un,yh={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Da.NO_ERROR=0,Da.TIMEOUT=8,Da.HTTP_ERROR=6,kl=Da,Pp.COMPLETE="complete",pE=Pp,ja.EventType=Rn,Rn.OPEN="a",Rn.CLOSE="b",Rn.ERROR="c",Rn.MESSAGE="d",Qe.prototype.listen=Qe.prototype.J,yo=ja,Ve.prototype.listenOnce=Ve.prototype.K,Ve.prototype.getLastError=Ve.prototype.Ha,Ve.prototype.getLastErrorCode=Ve.prototype.ya,Ve.prototype.getStatus=Ve.prototype.ca,Ve.prototype.getResponseJson=Ve.prototype.La,Ve.prototype.getResponseText=Ve.prototype.la,Ve.prototype.send=Ve.prototype.ea,Ve.prototype.setWithCredentials=Ve.prototype.Fa,fE=Ve}).apply(typeof ll<"u"?ll:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ft=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ft.UNAUTHENTICATED=new ft(null),ft.GOOGLE_CREDENTIALS=new ft("google-credentials-uid"),ft.FIRST_PARTY=new ft("first-party-uid"),ft.MOCK_USER=new ft("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pi="12.8.0";function eA(t){Pi=t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gs=new jf("@firebase/firestore");function Ds(){return gs.logLevel}function K(t,...e){if(gs.logLevel<=ue.DEBUG){const n=e.map(qf);gs.debug(`Firestore (${Pi}): ${t}`,...n)}}function Gn(t,...e){if(gs.logLevel<=ue.ERROR){const n=e.map(qf);gs.error(`Firestore (${Pi}): ${t}`,...n)}}function gi(t,...e){if(gs.logLevel<=ue.WARN){const n=e.map(qf);gs.warn(`Firestore (${Pi}): ${t}`,...n)}}function qf(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function te(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,vE(t,r,n)}function vE(t,e,n){let r=`FIRESTORE (${Pi}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Gn(r),new Error(r)}function _e(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||vE(e,s,r)}function se(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class G extends Yn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class tA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ft.UNAUTHENTICATED))}shutdown(){}}class nA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class rA{constructor(e){this.t=e,this.currentUser=ft.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){_e(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new Fn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Fn,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},c=u=>{K("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(K("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Fn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(K("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(_e(typeof r.accessToken=="string",31837,{l:r}),new _E(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return _e(e===null||typeof e=="string",2055,{h:e}),new ft(e)}}class sA{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=ft.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class iA{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new sA(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(ft.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ny{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class oA{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Bt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){_e(this.o===void 0,3512);const r=i=>{i.error!=null&&K("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,K("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{K("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):K("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new ny(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(_e(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new ny(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aA(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=aA(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function de(t,e){return t<e?-1:t>e?1:0}function vh(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return ud(s)===ud(i)?de(s,i):ud(s)?1:-1}return de(t.length,e.length)}const lA=55296,cA=57343;function ud(t){const e=t.charCodeAt(0);return e>=lA&&e<=cA}function yi(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ry="__name__";class yn{constructor(e,n,r){n===void 0?n=0:n>e.length&&te(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&te(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return yn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof yn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=yn.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return de(e.length,n.length)}static compareSegments(e,n){const r=yn.isNumericId(e),s=yn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?yn.extractNumericId(e).compare(yn.extractNumericId(n)):vh(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Cr.fromString(e.substring(4,e.length-2))}}class Se extends yn{construct(e,n,r){return new Se(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new G(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Se(n)}static emptyPath(){return new Se([])}}const uA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ot extends yn{construct(e,n,r){return new ot(e,n,r)}static isValidIdentifier(e){return uA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ot.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ry}static keyField(){return new ot([ry])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new G(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new G(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new G(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else c==="`"?(o=!o,s++):c!=="."||o?(r+=c,s++):(i(),s++)}if(i(),o)throw new G(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ot(n)}static emptyPath(){return new ot([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e){this.path=e}static fromPath(e){return new X(Se.fromString(e))}static fromName(e){return new X(Se.fromString(e).popFirst(5))}static empty(){return new X(Se.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Se.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Se.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new X(new Se(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wE(t,e,n){if(!n)throw new G(M.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function dA(t,e,n,r){if(e===!0&&r===!0)throw new G(M.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function sy(t){if(!X.isDocumentKey(t))throw new G(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function iy(t){if(X.isDocumentKey(t))throw new G(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function EE(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Kc(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":te(12329,{type:typeof t})}function In(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new G(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Kc(t);throw new G(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $e(t,e){const n={typeString:t};return e&&(n.value=e),n}function Ea(t,e){if(!EE(t))throw new G(M.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new G(M.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oy=-62135596800,ay=1e6;class Ae{static now(){return Ae.fromMillis(Date.now())}static fromDate(e){return Ae.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*ay);return new Ae(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new G(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new G(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<oy)throw new G(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new G(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ay}_compareTo(e){return this.seconds===e.seconds?de(this.nanoseconds,e.nanoseconds):de(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ae._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ea(e,Ae._jsonSchema))return new Ae(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-oy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ae._jsonSchemaVersion="firestore/timestamp/1.0",Ae._jsonSchema={type:$e("string",Ae._jsonSchemaVersion),seconds:$e("number"),nanoseconds:$e("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{static fromTimestamp(e){return new ne(e)}static min(){return new ne(new Ae(0,0))}static max(){return new ne(new Ae(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ra=-1;function hA(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ne.fromTimestamp(r===1e9?new Ae(n+1,0):new Ae(n,r));return new Pr(s,X.empty(),e)}function fA(t){return new Pr(t.readTime,t.key,ra)}class Pr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Pr(ne.min(),X.empty(),ra)}static max(){return new Pr(ne.max(),X.empty(),ra)}}function pA(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=X.comparator(t.documentKey,e.documentKey),n!==0?n:de(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class gA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bi(t){if(t.code!==M.FAILED_PRECONDITION||t.message!==mA)throw t;K("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,r)=>{n(e)})}static reject(e){return new F((n,r)=>{r(e)})}static waitFor(e){return new F((n,r)=>{let s=0,i=0,o=!1;e.forEach(c=>{++s,c.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=F.resolve(!1);for(const r of e)n=n.next(s=>s?F.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new F((r,s)=>{const i=e.length,o=new Array(i);let c=0;for(let u=0;u<i;u++){const d=u;n(e[d]).next(p=>{o[d]=p,++c,c===i&&r(o)},p=>s(p))}})}static doWhile(e,n){return new F((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function yA(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ji(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Qc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wf=-1;function Yc(t){return t==null}function fc(t){return t===0&&1/t==-1/0}function vA(t){return typeof t=="number"&&Number.isInteger(t)&&!fc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TE="";function _A(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=ly(e)),e=wA(t.get(n),e);return ly(e)}function wA(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case TE:n+="";break;default:n+=i}}return n}function ly(t){return t+TE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cy(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Es(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function IE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(e,n){this.comparator=e,this.root=n||it.EMPTY}insert(e,n){return new De(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,it.BLACK,null,null))}remove(e){return new De(this.comparator,this.root.remove(e,this.comparator).copy(null,null,it.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new cl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new cl(this.root,e,this.comparator,!1)}getReverseIterator(){return new cl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new cl(this.root,e,this.comparator,!0)}}class cl{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class it{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??it.RED,this.left=s??it.EMPTY,this.right=i??it.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new it(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return it.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return it.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,it.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,it.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw te(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw te(27949);return e+(this.isRed()?0:1)}}it.EMPTY=null,it.RED=!0,it.BLACK=!1;it.EMPTY=new class{constructor(){this.size=0}get key(){throw te(57766)}get value(){throw te(16141)}get color(){throw te(16727)}get left(){throw te(29726)}get right(){throw te(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new it(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e){this.comparator=e,this.data=new De(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new uy(this.data.getIterator())}getIteratorFrom(e){return new uy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ge)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ge(this.comparator);return n.data=e,n}}class uy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.fields=e,e.sort(ot.comparator)}static empty(){return new en([])}unionWith(e){let n=new Ge(ot.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new en(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return yi(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new SE("Invalid base64 string: "+i):i}}(e);return new ct(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new ct(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return de(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ct.EMPTY_BYTE_STRING=new ct("");const EA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function br(t){if(_e(!!t,39018),typeof t=="string"){let e=0;const n=EA.exec(t);if(_e(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Le(t.seconds),nanos:Le(t.nanos)}}function Le(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function jr(t){return typeof t=="string"?ct.fromBase64String(t):ct.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xE="server_timestamp",NE="__type__",CE="__previous_value__",AE="__local_write_time__";function Gf(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[NE])==null?void 0:r.stringValue)===xE}function Jc(t){const e=t.mapValue.fields[CE];return Gf(e)?Jc(e):e}function sa(t){const e=br(t.mapValue.fields[AE].timestampValue);return new Ae(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(e,n,r,s,i,o,c,u,d,p,m){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=p,this.apiKey=m}}const pc="(default)";class ia{constructor(e,n){this.projectId=e,this.database=n||pc}static empty(){return new ia("","")}get isDefaultDatabase(){return this.database===pc}isEqual(e){return e instanceof ia&&e.projectId===this.projectId&&e.database===this.database}}function IA(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new G(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ia(t.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kE="__type__",SA="__max__",ul={mapValue:{}},RE="__vector__",mc="value";function Dr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Gf(t)?4:NA(t)?9007199254740991:xA(t)?10:11:te(28295,{value:t})}function Cn(t,e){if(t===e)return!0;const n=Dr(t);if(n!==Dr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return sa(t).isEqual(sa(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=br(s.timestampValue),c=br(i.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return jr(s.bytesValue).isEqual(jr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Le(s.geoPointValue.latitude)===Le(i.geoPointValue.latitude)&&Le(s.geoPointValue.longitude)===Le(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Le(s.integerValue)===Le(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Le(s.doubleValue),c=Le(i.doubleValue);return o===c?fc(o)===fc(c):isNaN(o)&&isNaN(c)}return!1}(t,e);case 9:return yi(t.arrayValue.values||[],e.arrayValue.values||[],Cn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},c=i.mapValue.fields||{};if(cy(o)!==cy(c))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!Cn(o[u],c[u])))return!1;return!0}(t,e);default:return te(52216,{left:t})}}function oa(t,e){return(t.values||[]).find(n=>Cn(n,e))!==void 0}function vi(t,e){if(t===e)return 0;const n=Dr(t),r=Dr(e);if(n!==r)return de(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return de(t.booleanValue,e.booleanValue);case 2:return function(i,o){const c=Le(i.integerValue||i.doubleValue),u=Le(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return dy(t.timestampValue,e.timestampValue);case 4:return dy(sa(t),sa(e));case 5:return vh(t.stringValue,e.stringValue);case 6:return function(i,o){const c=jr(i),u=jr(o);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const c=i.split("/"),u=o.split("/");for(let d=0;d<c.length&&d<u.length;d++){const p=de(c[d],u[d]);if(p!==0)return p}return de(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const c=de(Le(i.latitude),Le(o.latitude));return c!==0?c:de(Le(i.longitude),Le(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return hy(t.arrayValue,e.arrayValue);case 10:return function(i,o){var g,_,R,P;const c=i.fields||{},u=o.fields||{},d=(g=c[mc])==null?void 0:g.arrayValue,p=(_=u[mc])==null?void 0:_.arrayValue,m=de(((R=d==null?void 0:d.values)==null?void 0:R.length)||0,((P=p==null?void 0:p.values)==null?void 0:P.length)||0);return m!==0?m:hy(d,p)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===ul.mapValue&&o===ul.mapValue)return 0;if(i===ul.mapValue)return 1;if(o===ul.mapValue)return-1;const c=i.fields||{},u=Object.keys(c),d=o.fields||{},p=Object.keys(d);u.sort(),p.sort();for(let m=0;m<u.length&&m<p.length;++m){const g=vh(u[m],p[m]);if(g!==0)return g;const _=vi(c[u[m]],d[p[m]]);if(_!==0)return _}return de(u.length,p.length)}(t.mapValue,e.mapValue);default:throw te(23264,{he:n})}}function dy(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return de(t,e);const n=br(t),r=br(e),s=de(n.seconds,r.seconds);return s!==0?s:de(n.nanos,r.nanos)}function hy(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=vi(n[s],r[s]);if(i)return i}return de(n.length,r.length)}function _i(t){return _h(t)}function _h(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=br(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return jr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return X.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=_h(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${_h(n.fields[o])}`;return s+"}"}(t.mapValue):te(61005,{value:t})}function Rl(t){switch(Dr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Jc(t);return e?16+Rl(e):16;case 5:return 2*t.stringValue.length;case 6:return jr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Rl(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Es(r.fields,(i,o)=>{s+=i.length+Rl(o)}),s}(t.mapValue);default:throw te(13486,{value:t})}}function fy(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function wh(t){return!!t&&"integerValue"in t}function Kf(t){return!!t&&"arrayValue"in t}function py(t){return!!t&&"nullValue"in t}function my(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Pl(t){return!!t&&"mapValue"in t}function xA(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[kE])==null?void 0:r.stringValue)===RE}function jo(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Es(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=jo(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=jo(t.arrayValue.values[n]);return e}return{...t}}function NA(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===SA}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.value=e}static empty(){return new $t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Pl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=jo(n)}setAll(e){let n=ot.emptyPath(),r={},s=[];e.forEach((o,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=c.popLast()}o?r[c.lastSegment()]=jo(o):s.push(c.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Pl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Cn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Pl(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Es(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new $t(jo(this.value))}}function PE(t){const e=[];return Es(t.fields,(n,r)=>{const s=new ot([n]);if(Pl(r)){const i=PE(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new en(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e,n,r,s,i,o,c){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=c}static newInvalidDocument(e){return new mt(e,0,ne.min(),ne.min(),ne.min(),$t.empty(),0)}static newFoundDocument(e,n,r,s){return new mt(e,1,n,ne.min(),r,s,0)}static newNoDocument(e,n){return new mt(e,2,n,ne.min(),ne.min(),$t.empty(),0)}static newUnknownDocument(e,n){return new mt(e,3,n,ne.min(),ne.min(),$t.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=$t.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=$t.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof mt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new mt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(e,n){this.position=e,this.inclusive=n}}function gy(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=X.comparator(X.fromName(o.referenceValue),n.key):r=vi(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function yy(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Cn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(e,n="asc"){this.field=e,this.dir=n}}function CA(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{}class Be extends bE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new kA(e,n,r):n==="array-contains"?new bA(e,r):n==="in"?new jA(e,r):n==="not-in"?new DA(e,r):n==="array-contains-any"?new VA(e,r):new Be(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new RA(e,r):new PA(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(vi(n,this.value)):n!==null&&Dr(this.value)===Dr(n)&&this.matchesComparison(vi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class an extends bE{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new an(e,n)}matches(e){return jE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function jE(t){return t.op==="and"}function DE(t){return AA(t)&&jE(t)}function AA(t){for(const e of t.filters)if(e instanceof an)return!1;return!0}function Eh(t){if(t instanceof Be)return t.field.canonicalString()+t.op.toString()+_i(t.value);if(DE(t))return t.filters.map(e=>Eh(e)).join(",");{const e=t.filters.map(n=>Eh(n)).join(",");return`${t.op}(${e})`}}function VE(t,e){return t instanceof Be?function(r,s){return s instanceof Be&&r.op===s.op&&r.field.isEqual(s.field)&&Cn(r.value,s.value)}(t,e):t instanceof an?function(r,s){return s instanceof an&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,c)=>i&&VE(o,s.filters[c]),!0):!1}(t,e):void te(19439)}function OE(t){return t instanceof Be?function(n){return`${n.field.canonicalString()} ${n.op} ${_i(n.value)}`}(t):t instanceof an?function(n){return n.op.toString()+" {"+n.getFilters().map(OE).join(" ,")+"}"}(t):"Filter"}class kA extends Be{constructor(e,n,r){super(e,n,r),this.key=X.fromName(r.referenceValue)}matches(e){const n=X.comparator(e.key,this.key);return this.matchesComparison(n)}}class RA extends Be{constructor(e,n){super(e,"in",n),this.keys=LE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class PA extends Be{constructor(e,n){super(e,"not-in",n),this.keys=LE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function LE(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>X.fromName(r.referenceValue))}class bA extends Be{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Kf(n)&&oa(n.arrayValue,this.value)}}class jA extends Be{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&oa(this.value.arrayValue,n)}}class DA extends Be{constructor(e,n){super(e,"not-in",n)}matches(e){if(oa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!oa(this.value.arrayValue,n)}}class VA extends Be{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Kf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>oa(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{constructor(e,n=null,r=[],s=[],i=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=c,this.Te=null}}function vy(t,e=null,n=[],r=[],s=null,i=null,o=null){return new OA(t,e,n,r,s,i,o)}function Qf(t){const e=se(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Eh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Yc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>_i(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>_i(r)).join(",")),e.Te=n}return e.Te}function Yf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!CA(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!VE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!yy(t.startAt,e.startAt)&&yy(t.endAt,e.endAt)}function Th(t){return X.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e,n=null,r=[],s=[],i=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=c,this.endAt=u,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function LA(t,e,n,r,s,i,o,c){return new Ta(t,e,n,r,s,i,o,c)}function Xc(t){return new Ta(t)}function _y(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function MA(t){return X.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function ME(t){return t.collectionGroup!==null}function Do(t){const e=se(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new Ge(ot.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new yc(i,r))}),n.has(ot.keyField().canonicalString())||e.Ie.push(new yc(ot.keyField(),r))}return e.Ie}function Sn(t){const e=se(t);return e.Ee||(e.Ee=FA(e,Do(t))),e.Ee}function FA(t,e){if(t.limitType==="F")return vy(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new yc(s.field,i)});const n=t.endAt?new gc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new gc(t.startAt.position,t.startAt.inclusive):null;return vy(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Ih(t,e){const n=t.filters.concat([e]);return new Ta(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Sh(t,e,n){return new Ta(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Zc(t,e){return Yf(Sn(t),Sn(e))&&t.limitType===e.limitType}function FE(t){return`${Qf(Sn(t))}|lt:${t.limitType}`}function Vs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>OE(s)).join(", ")}]`),Yc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>_i(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>_i(s)).join(",")),`Target(${r})`}(Sn(t))}; limitType=${t.limitType})`}function eu(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):X.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Do(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,c,u){const d=gy(o,c,u);return o.inclusive?d<=0:d<0}(r.startAt,Do(r),s)||r.endAt&&!function(o,c,u){const d=gy(o,c,u);return o.inclusive?d>=0:d>0}(r.endAt,Do(r),s))}(t,e)}function UA(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function UE(t){return(e,n)=>{let r=!1;for(const s of Do(t)){const i=zA(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function zA(t,e,n){const r=t.field.isKeyField()?X.comparator(e.key,n.key):function(i,o,c){const u=o.data.field(i),d=c.data.field(i);return u!==null&&d!==null?vi(u,d):te(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return te(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Es(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return IE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BA=new De(X.comparator);function Kn(){return BA}const zE=new De(X.comparator);function vo(...t){let e=zE;for(const n of t)e=e.insert(n.key,n);return e}function BE(t){let e=zE;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ns(){return Vo()}function $E(){return Vo()}function Vo(){return new Ts(t=>t.toString(),(t,e)=>t.isEqual(e))}const $A=new De(X.comparator),qA=new Ge(X.comparator);function he(...t){let e=qA;for(const n of t)e=e.add(n);return e}const HA=new Ge(de);function WA(){return HA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jf(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fc(e)?"-0":e}}function qE(t){return{integerValue:""+t}}function GA(t,e){return vA(e)?qE(e):Jf(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(){this._=void 0}}function KA(t,e,n){return t instanceof aa?function(s,i){const o={fields:{[NE]:{stringValue:xE},[AE]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Gf(i)&&(i=Jc(i)),i&&(o.fields[CE]=i),{mapValue:o}}(n,e):t instanceof la?WE(t,e):t instanceof ca?GE(t,e):function(s,i){const o=HE(s,i),c=wy(o)+wy(s.Ae);return wh(o)&&wh(s.Ae)?qE(c):Jf(s.serializer,c)}(t,e)}function QA(t,e,n){return t instanceof la?WE(t,e):t instanceof ca?GE(t,e):n}function HE(t,e){return t instanceof vc?function(r){return wh(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class aa extends tu{}class la extends tu{constructor(e){super(),this.elements=e}}function WE(t,e){const n=KE(e);for(const r of t.elements)n.some(s=>Cn(s,r))||n.push(r);return{arrayValue:{values:n}}}class ca extends tu{constructor(e){super(),this.elements=e}}function GE(t,e){let n=KE(e);for(const r of t.elements)n=n.filter(s=>!Cn(s,r));return{arrayValue:{values:n}}}class vc extends tu{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function wy(t){return Le(t.integerValue||t.doubleValue)}function KE(t){return Kf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(e,n){this.field=e,this.transform=n}}function JA(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof la&&s instanceof la||r instanceof ca&&s instanceof ca?yi(r.elements,s.elements,Cn):r instanceof vc&&s instanceof vc?Cn(r.Ae,s.Ae):r instanceof aa&&s instanceof aa}(t.transform,e.transform)}class XA{constructor(e,n){this.version=e,this.transformResults=n}}class Un{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Un}static exists(e){return new Un(void 0,e)}static updateTime(e){return new Un(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function bl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class nu{}function QE(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new JE(t.key,Un.none()):new Ia(t.key,t.data,Un.none());{const n=t.data,r=$t.empty();let s=new Ge(ot.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Is(t.key,r,new en(s.toArray()),Un.none())}}function ZA(t,e,n){t instanceof Ia?function(s,i,o){const c=s.value.clone(),u=Ty(s.fieldTransforms,i,o.transformResults);c.setAll(u),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):t instanceof Is?function(s,i,o){if(!bl(s.precondition,i))return void i.convertToUnknownDocument(o.version);const c=Ty(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(YE(s)),u.setAll(c),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Oo(t,e,n,r){return t instanceof Ia?function(i,o,c,u){if(!bl(i.precondition,o))return c;const d=i.value.clone(),p=Iy(i.fieldTransforms,u,o);return d.setAll(p),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Is?function(i,o,c,u){if(!bl(i.precondition,o))return c;const d=Iy(i.fieldTransforms,u,o),p=o.data;return p.setAll(YE(i)),p.setAll(d),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,o,c){return bl(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(t,e,n)}function ek(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=HE(r.transform,s||null);i!=null&&(n===null&&(n=$t.empty()),n.set(r.field,i))}return n||null}function Ey(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&yi(r,s,(i,o)=>JA(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ia extends nu{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Is extends nu{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function YE(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Ty(t,e,n){const r=new Map;_e(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,c=e.data.field(i.field);r.set(i.field,QA(o,c,n[s]))}return r}function Iy(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,KA(i,o,e))}return r}class JE extends nu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class tk extends nu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&ZA(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Oo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Oo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=$E();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let c=this.applyToLocalView(o,i.mutatedFields);c=n.has(s.key)?null:c;const u=QE(o,c);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(ne.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),he())}isEqual(e){return this.batchId===e.batchId&&yi(this.mutations,e.mutations,(n,r)=>Ey(n,r))&&yi(this.baseMutations,e.baseMutations,(n,r)=>Ey(n,r))}}class Xf{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){_e(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return $A}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Xf(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sk{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue,fe;function ik(t){switch(t){case M.OK:return te(64938);case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0;default:return te(15467,{code:t})}}function XE(t){if(t===void 0)return Gn("GRPC error has no .code"),M.UNKNOWN;switch(t){case Ue.OK:return M.OK;case Ue.CANCELLED:return M.CANCELLED;case Ue.UNKNOWN:return M.UNKNOWN;case Ue.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case Ue.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case Ue.INTERNAL:return M.INTERNAL;case Ue.UNAVAILABLE:return M.UNAVAILABLE;case Ue.UNAUTHENTICATED:return M.UNAUTHENTICATED;case Ue.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case Ue.NOT_FOUND:return M.NOT_FOUND;case Ue.ALREADY_EXISTS:return M.ALREADY_EXISTS;case Ue.PERMISSION_DENIED:return M.PERMISSION_DENIED;case Ue.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case Ue.ABORTED:return M.ABORTED;case Ue.OUT_OF_RANGE:return M.OUT_OF_RANGE;case Ue.UNIMPLEMENTED:return M.UNIMPLEMENTED;case Ue.DATA_LOSS:return M.DATA_LOSS;default:return te(39323,{code:t})}}(fe=Ue||(Ue={}))[fe.OK=0]="OK",fe[fe.CANCELLED=1]="CANCELLED",fe[fe.UNKNOWN=2]="UNKNOWN",fe[fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fe[fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fe[fe.NOT_FOUND=5]="NOT_FOUND",fe[fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",fe[fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",fe[fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",fe[fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fe[fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fe[fe.ABORTED=10]="ABORTED",fe[fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",fe[fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",fe[fe.INTERNAL=13]="INTERNAL",fe[fe.UNAVAILABLE=14]="UNAVAILABLE",fe[fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ok(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ak=new Cr([4294967295,4294967295],0);function Sy(t){const e=ok().encode(t),n=new hE;return n.update(e),new Uint8Array(n.digest())}function xy(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Cr([n,r],0),new Cr([s,i],0)]}class Zf{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new _o(`Invalid padding: ${n}`);if(r<0)throw new _o(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new _o(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new _o(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Cr.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(Cr.fromNumber(r)));return s.compare(ak)===1&&(s=new Cr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Sy(e),[r,s]=xy(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Zf(i,s,n);return r.forEach(c=>o.insert(c)),o}insert(e){if(this.ge===0)return;const n=Sy(e),[r,s]=xy(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.be(o)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class _o extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Sa.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new ru(ne.min(),s,new De(de),Kn(),he())}}class Sa{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Sa(r,n,he(),he(),he())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(e,n,r,s){this.Se=e,this.removedTargetIds=n,this.key=r,this.De=s}}class ZE{constructor(e,n){this.targetId=e,this.Ce=n}}class e0{constructor(e,n,r=ct.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Ny{constructor(){this.ve=0,this.Fe=Cy(),this.Me=ct.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=he(),n=he(),r=he();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:te(38017,{changeType:i})}}),new Sa(this.Me,this.xe,e,n,r)}Ke(){this.Oe=!1,this.Fe=Cy()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,_e(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class lk{constructor(e){this.Ge=e,this.ze=new Map,this.je=Kn(),this.He=dl(),this.Je=dl(),this.Ze=new De(de)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:te(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(Th(i))if(r===0){const o=new X(i.path);this.et(n,o,mt.newNoDocument(o,ne.min()))}else _e(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const c=this.ut(e),u=c?this.ct(c,e,o):1;if(u!==0){this.it(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,c;try{o=jr(r).toUint8Array()}catch(u){if(u instanceof SE)return gi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new Zf(o,s,i)}catch(u){return gi(u instanceof _o?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.ge===0?null:c}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),c=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const c=this.ot(o);if(c){if(i.current&&Th(c.target)){const u=new X(c.target.path);this.It(u).has(o)||this.Et(o,u)||this.et(o,u,mt.newNoDocument(u,e))}i.Be&&(n.set(o,i.ke()),i.Ke())}});let r=he();this.Je.forEach((i,o)=>{let c=!0;o.forEachWhile(u=>{const d=this.ot(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new ru(e,n,this.Ze,this.je,r);return this.je=Kn(),this.He=dl(),this.Je=dl(),this.Ze=new De(de),s}Ye(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,r),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.qe(n,1):s.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new Ny,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new Ge(de),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new Ge(de),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||K("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Ny),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function dl(){return new De(X.comparator)}function Cy(){return new De(X.comparator)}const ck={asc:"ASCENDING",desc:"DESCENDING"},uk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},dk={and:"AND",or:"OR"};class hk{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function xh(t,e){return t.useProto3Json||Yc(e)?e:{value:e}}function _c(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function t0(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function fk(t,e){return _c(t,e.toTimestamp())}function xn(t){return _e(!!t,49232),ne.fromTimestamp(function(n){const r=br(n);return new Ae(r.seconds,r.nanos)}(t))}function ep(t,e){return Nh(t,e).canonicalString()}function Nh(t,e){const n=function(s){return new Se(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function n0(t){const e=Se.fromString(t);return _e(a0(e),10190,{key:e.toString()}),e}function Ch(t,e){return ep(t.databaseId,e.path)}function dd(t,e){const n=n0(e);if(n.get(1)!==t.databaseId.projectId)throw new G(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new G(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new X(s0(n))}function r0(t,e){return ep(t.databaseId,e)}function pk(t){const e=n0(t);return e.length===4?Se.emptyPath():s0(e)}function Ah(t){return new Se(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function s0(t){return _e(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Ay(t,e,n){return{name:Ch(t,e),fields:n.value.mapValue.fields}}function mk(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:te(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,p){return d.useProto3Json?(_e(p===void 0||typeof p=="string",58123),ct.fromBase64String(p||"")):(_e(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),ct.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(d){const p=d.code===void 0?M.UNKNOWN:XE(d.code);return new G(p,d.message||"")}(o);n=new e0(r,s,i,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=dd(t,r.document.name),i=xn(r.document.updateTime),o=r.document.createTime?xn(r.document.createTime):ne.min(),c=new $t({mapValue:{fields:r.document.fields}}),u=mt.newFoundDocument(s,i,o,c),d=r.targetIds||[],p=r.removedTargetIds||[];n=new jl(d,p,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=dd(t,r.document),i=r.readTime?xn(r.readTime):ne.min(),o=mt.newNoDocument(s,i),c=r.removedTargetIds||[];n=new jl([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=dd(t,r.document),i=r.removedTargetIds||[];n=new jl([],i,s,null)}else{if(!("filter"in e))return te(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new sk(s,i),c=r.targetId;n=new ZE(c,o)}}return n}function gk(t,e){let n;if(e instanceof Ia)n={update:Ay(t,e.key,e.value)};else if(e instanceof JE)n={delete:Ch(t,e.key)};else if(e instanceof Is)n={update:Ay(t,e.key,e.data),updateMask:xk(e.fieldMask)};else{if(!(e instanceof tk))return te(16599,{dt:e.type});n={verify:Ch(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const c=o.transform;if(c instanceof aa)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof la)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof ca)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof vc)return{fieldPath:o.field.canonicalString(),increment:c.Ae};throw te(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:fk(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:te(27497)}(t,e.precondition)),n}function yk(t,e){return t&&t.length>0?(_e(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?xn(s.updateTime):xn(i);return o.isEqual(ne.min())&&(o=xn(i)),new XA(o,s.transformResults||[])}(n,e))):[]}function vk(t,e){return{documents:[r0(t,e.path)]}}function _k(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=r0(t,s);const i=function(d){if(d.length!==0)return o0(an.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(p=>function(g){return{field:Os(g.field),direction:Tk(g.dir)}}(p))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const c=xh(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:n,parent:s}}function wk(t){let e=pk(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){_e(r===1,65062);const p=n.from[0];p.allDescendants?s=p.collectionId:e=e.child(p.collectionId)}let i=[];n.where&&(i=function(m){const g=i0(m);return g instanceof an&&DE(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(g=>function(R){return new yc(Ls(R.field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction))}(g))}(n.orderBy));let c=null;n.limit&&(c=function(m){let g;return g=typeof m=="object"?m.value:m,Yc(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(m){const g=!!m.before,_=m.values||[];return new gc(_,g)}(n.startAt));let d=null;return n.endAt&&(d=function(m){const g=!m.before,_=m.values||[];return new gc(_,g)}(n.endAt)),LA(e,s,o,i,c,"F",u,d)}function Ek(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return te(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function i0(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ls(n.unaryFilter.field);return Be.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ls(n.unaryFilter.field);return Be.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ls(n.unaryFilter.field);return Be.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ls(n.unaryFilter.field);return Be.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return te(61313);default:return te(60726)}}(t):t.fieldFilter!==void 0?function(n){return Be.create(Ls(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return te(58110);default:return te(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return an.create(n.compositeFilter.filters.map(r=>i0(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return te(1026)}}(n.compositeFilter.op))}(t):te(30097,{filter:t})}function Tk(t){return ck[t]}function Ik(t){return uk[t]}function Sk(t){return dk[t]}function Os(t){return{fieldPath:t.canonicalString()}}function Ls(t){return ot.fromServerFormat(t.fieldPath)}function o0(t){return t instanceof Be?function(n){if(n.op==="=="){if(my(n.value))return{unaryFilter:{field:Os(n.field),op:"IS_NAN"}};if(py(n.value))return{unaryFilter:{field:Os(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(my(n.value))return{unaryFilter:{field:Os(n.field),op:"IS_NOT_NAN"}};if(py(n.value))return{unaryFilter:{field:Os(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Os(n.field),op:Ik(n.op),value:n.value}}}(t):t instanceof an?function(n){const r=n.getFilters().map(s=>o0(s));return r.length===1?r[0]:{compositeFilter:{op:Sk(n.op),filters:r}}}(t):te(54877,{filter:t})}function xk(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function a0(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function l0(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e,n,r,s,i=ne.min(),o=ne.min(),c=ct.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new mr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new mr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new mr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new mr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nk{constructor(e){this.yt=e}}function Ck(t){const e=wk({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Sh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ak{constructor(){this.Sn=new kk}addToCollectionParentIndex(e,n){return this.Sn.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(Pr.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(Pr.min())}updateCollectionGroup(e,n,r){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class kk{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Ge(Se.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ge(Se.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ky={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},c0=41943040;class St{static withCacheSize(e){return new St(e,St.DEFAULT_COLLECTION_PERCENTILE,St.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */St.DEFAULT_COLLECTION_PERCENTILE=10,St.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,St.DEFAULT=new St(c0,St.DEFAULT_COLLECTION_PERCENTILE,St.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),St.DISABLED=new St(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new wi(0)}static ar(){return new wi(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ry="LruGarbageCollector",Rk=1048576;function Py([t,e],[n,r]){const s=de(t,n);return s===0?de(e,r):s}class Pk{constructor(e){this.Pr=e,this.buffer=new Ge(Py),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Py(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class bk{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){K(Ry,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ji(n)?K(Ry,"Ignoring IndexedDB error during garbage collection: ",n):await bi(n)}await this.Ar(3e5)})}}class jk{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return F.resolve(Qc.ce);const r=new Pk(n);return this.Vr.forEachTarget(e,s=>r.Er(s.sequenceNumber)).next(()=>this.Vr.mr(e,s=>r.Er(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(K("LruGarbageCollector","Garbage collection skipped; disabled"),F.resolve(ky)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(K("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ky):this.gr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let r,s,i,o,c,u,d;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(K("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),s=this.params.maximumSequenceNumbersToCollect):s=m,o=Date.now(),this.nthSequenceNumber(e,s))).next(m=>(r=m,c=Date.now(),this.removeTargets(e,r,n))).next(m=>(i=m,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(d=Date.now(),Ds()<=ue.DEBUG&&K("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-p}ms
	Determined least recently used ${s} in `+(c-o)+`ms
	Removed ${i} targets in `+(u-c)+`ms
	Removed ${m} documents in `+(d-u)+`ms
Total Duration: ${d-p}ms`),F.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:m})))}}function Dk(t,e){return new jk(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vk{constructor(){this.changes=new Ts(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,mt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?F.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ok{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lk{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Oo(r.mutation,s,en.empty(),Ae.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,he()).next(()=>r))}getLocalViewOfDocuments(e,n,r=he()){const s=ns();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=vo();return i.forEach((c,u)=>{o=o.insert(c,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ns();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,he()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,c)=>{n.set(o,c)})})}computeViews(e,n,r,s){let i=Kn();const o=Vo(),c=function(){return Vo()}();return n.forEach((u,d)=>{const p=r.get(d.key);s.has(d.key)&&(p===void 0||p.mutation instanceof Is)?i=i.insert(d.key,d):p!==void 0?(o.set(d.key,p.mutation.getFieldMask()),Oo(p.mutation,d,p.mutation.getFieldMask(),Ae.now())):o.set(d.key,en.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((d,p)=>o.set(d,p)),n.forEach((d,p)=>c.set(d,new Ok(p,o.get(d)??null))),c))}recalculateAndSaveOverlays(e,n){const r=Vo();let s=new De((o,c)=>o-c),i=he();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const c of o)c.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let p=r.get(u)||en.empty();p=c.applyToLocalView(d,p),r.set(u,p);const m=(s.get(c.batchId)||he()).add(u);s=s.insert(c.batchId,m)})}).next(()=>{const o=[],c=s.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),d=u.key,p=u.value,m=$E();p.forEach(g=>{if(!i.has(g)){const _=QE(n.get(g),r.get(g));_!==null&&m.set(g,_),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,m))}return F.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return MA(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):ME(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):F.resolve(ns());let c=ra,u=i;return o.next(d=>F.forEach(d,(p,m)=>(c<m.largestBatchId&&(c=m.largestBatchId),i.get(p)?F.resolve():this.remoteDocumentCache.getEntry(e,p).next(g=>{u=u.insert(p,g)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,u,d,he())).next(p=>({batchId:c,changes:BE(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new X(n)).next(r=>{let s=vo();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=vo();return this.indexManager.getCollectionParents(e,i).next(c=>F.forEach(c,u=>{const d=function(m,g){return new Ta(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(p=>{p.forEach((m,g)=>{o=o.insert(m,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,d)=>{const p=d.getKey();o.get(p)===null&&(o=o.insert(p,mt.newInvalidDocument(p)))});let c=vo();return o.forEach((u,d)=>{const p=i.get(u);p!==void 0&&Oo(p.mutation,d,en.empty(),Ae.now()),eu(n,d)&&(c=c.insert(u,d))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return F.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:xn(s.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,function(s){return{name:s.name,query:Ck(s.bundledQuery),readTime:xn(s.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{constructor(){this.overlays=new De(X.comparator),this.Lr=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ns();return F.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.bt(e,n,i)}),F.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Lr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Lr.delete(r)),F.resolve()}getOverlaysForCollection(e,n,r){const s=ns(),i=n.length+1,o=new X(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const u=c.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return F.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new De((d,p)=>d-p);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let p=i.get(d.largestBatchId);p===null&&(p=ns(),i=i.insert(d.largestBatchId,p)),p.set(d.getKey(),d)}}const c=ns(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,p)=>c.set(d,p)),!(c.size()>=s)););return F.resolve(c)}bt(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Lr.get(s.largestBatchId).delete(r.key);this.Lr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new rk(n,r));let i=this.Lr.get(n);i===void 0&&(i=he(),this.Lr.set(n,i)),this.Lr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk{constructor(){this.sessionToken=ct.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{constructor(){this.kr=new Ge(Xe.Kr),this.qr=new Ge(Xe.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const r=new Xe(e,n);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new Xe(e,n))}Qr(e,n){e.forEach(r=>this.removeReference(r,n))}Gr(e){const n=new X(new Se([])),r=new Xe(n,e),s=new Xe(n,e+1),i=[];return this.qr.forEachInRange([r,s],o=>{this.Wr(o),i.push(o.key)}),i}zr(){this.kr.forEach(e=>this.Wr(e))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new X(new Se([])),r=new Xe(n,e),s=new Xe(n,e+1);let i=he();return this.qr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Xe(e,0),r=this.kr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Xe{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return X.comparator(e.key,n.key)||de(e.Hr,n.Hr)}static Ur(e,n){return de(e.Hr,n.Hr)||X.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new Ge(Xe.Kr)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new nk(i,n,r,s);this.mutationQueue.push(o);for(const c of s)this.Jr=this.Jr.add(new Xe(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return F.resolve(o)}lookupMutationBatch(e,n){return F.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Xr(r),i=s<0?0:s;return F.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?Wf:this.Yn-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Xe(n,0),s=new Xe(n,Number.POSITIVE_INFINITY),i=[];return this.Jr.forEachInRange([r,s],o=>{const c=this.Zr(o.Hr);i.push(c)}),F.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ge(de);return n.forEach(s=>{const i=new Xe(s,0),o=new Xe(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([i,o],c=>{r=r.add(c.Hr)})}),F.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;X.isDocumentKey(i)||(i=i.child(""));const o=new Xe(new X(i),0);let c=new Ge(de);return this.Jr.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(c=c.add(u.Hr)),!0)},o),F.resolve(this.Yr(c))}Yr(e){const n=[];return e.forEach(r=>{const s=this.Zr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){_e(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return F.forEach(n.mutations,s=>{const i=new Xe(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Jr=r})}nr(e){}containsKey(e,n){const r=new Xe(n,0),s=this.Jr.firstAfterOrEqual(r);return F.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{constructor(e){this.ti=e,this.docs=function(){return new De(X.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ti(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return F.resolve(r?r.document.mutableCopy():mt.newInvalidDocument(n))}getEntries(e,n){let r=Kn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():mt.newInvalidDocument(s))}),F.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Kn();const o=n.path,c=new X(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:d,value:{document:p}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||pA(fA(p),r)<=0||(s.has(p.key)||eu(n,p))&&(i=i.insert(p.key,p.mutableCopy()))}return F.resolve(i)}getAllFromCollectionGroup(e,n,r,s){te(9500)}ni(e,n){return F.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new $k(this)}getSize(e){return F.resolve(this.size)}}class $k extends Vk{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Mr.addEntry(e,s)):this.Mr.removeEntry(r)}),F.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(e){this.persistence=e,this.ri=new Ts(n=>Qf(n),Yf),this.lastRemoteSnapshotVersion=ne.min(),this.highestTargetId=0,this.ii=0,this.si=new tp,this.targetCount=0,this.oi=wi._r()}forEachTarget(e,n){return this.ri.forEach((r,s)=>n(s)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ii&&(this.ii=n),F.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new wi(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.lr(n),F.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.ri.forEach((o,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.ri.delete(o),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)}),F.waitFor(i).next(()=>s)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const r=this.ri.get(n)||null;return F.resolve(r)}addMatchingKeys(e,n,r){return this.si.$r(n,r),F.resolve()}removeMatchingKeys(e,n,r){this.si.Qr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),F.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const r=this.si.jr(n);return F.resolve(r)}containsKey(e,n){return F.resolve(this.si.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u0{constructor(e,n){this._i={},this.overlays={},this.ai=new Qc(0),this.ui=!1,this.ui=!0,this.ci=new Uk,this.referenceDelegate=e(this),this.li=new qk(this),this.indexManager=new Ak,this.remoteDocumentCache=function(s){return new Bk(s)}(r=>this.referenceDelegate.hi(r)),this.serializer=new Nk(n),this.Pi=new Mk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Fk,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this._i[e.toKey()];return r||(r=new zk(n,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,r){K("MemoryPersistence","Starting transaction:",e);const s=new Hk(this.ai.next());return this.referenceDelegate.Ti(),r(s).next(i=>this.referenceDelegate.Ii(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ei(e,n){return F.or(Object.values(this._i).map(r=>()=>r.containsKey(e,n)))}}class Hk extends gA{constructor(e){super(),this.currentSequenceNumber=e}}class np{constructor(e){this.persistence=e,this.Ri=new tp,this.Ai=null}static Vi(e){return new np(e)}get di(){if(this.Ai)return this.Ai;throw te(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.di.delete(r.toString()),F.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.di.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),F.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach(s=>this.di.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.di.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.di,r=>{const s=X.fromPath(r);return this.mi(e,s).next(i=>{i||n.removeEntry(s,ne.min())})}).next(()=>(this.Ai=null,n.apply(e)))}updateLimboDocument(e,n){return this.mi(e,n).next(r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())})}hi(e){return 0}mi(e,n){return F.or([()=>F.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class wc{constructor(e,n){this.persistence=e,this.fi=new Ts(r=>_A(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=Dk(this,n)}static Vi(e,n){return new wc(e,n)}Ti(){}Ii(e){return F.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}pr(e){let n=0;return this.mr(e,r=>{n++}).next(()=>n)}mr(e,n){return F.forEach(this.fi,(r,s)=>this.wr(e,r,s).next(i=>i?F.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ni(e,o=>this.wr(e,o,n).next(c=>{c||(r++,i.removeEntry(o,ne.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),F.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),F.resolve()}removeReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),F.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),F.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Rl(e.data.value)),n}wr(e,n,r){return F.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.fi.get(n);return F.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Ts=r,this.Is=s}static Es(e,n){let r=he(),s=he();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new rp(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=function(){return ES()?8:yA(yt())>0?6:4}()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.gs(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ps(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new Wk;return this.ys(e,n,o).next(c=>{if(i.result=c,this.As)return this.ws(e,n,o,c.size)})}).next(()=>i.result)}ws(e,n,r,s){return r.documentReadCount<this.Vs?(Ds()<=ue.DEBUG&&K("QueryEngine","SDK will not create cache indexes for query:",Vs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),F.resolve()):(Ds()<=ue.DEBUG&&K("QueryEngine","Query:",Vs(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ds*s?(Ds()<=ue.DEBUG&&K("QueryEngine","The SDK decides to create cache indexes for query:",Vs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Sn(n))):F.resolve())}gs(e,n){if(_y(n))return F.resolve(null);let r=Sn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Sh(n,null,"F"),r=Sn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=he(...i);return this.fs.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.bs(n,c);return this.Ss(n,d,o,u.readTime)?this.gs(e,Sh(n,null,"F")):this.Ds(e,d,n,u)}))})))}ps(e,n,r,s){return _y(n)||s.isEqual(ne.min())?F.resolve(null):this.fs.getDocuments(e,r).next(i=>{const o=this.bs(n,i);return this.Ss(n,o,r,s)?F.resolve(null):(Ds()<=ue.DEBUG&&K("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Vs(n)),this.Ds(e,o,n,hA(s,ra)).next(c=>c))})}bs(e,n){let r=new Ge(UE(e));return n.forEach((s,i)=>{eu(e,i)&&(r=r.add(i))}),r}Ss(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}ys(e,n,r){return Ds()<=ue.DEBUG&&K("QueryEngine","Using full collection scan to execute query:",Vs(n)),this.fs.getDocumentsMatchingQuery(e,n,Pr.min(),r)}Ds(e,n,r,s){return this.fs.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sp="LocalStore",Kk=3e8;class Qk{constructor(e,n,r,s){this.persistence=e,this.Cs=n,this.serializer=s,this.vs=new De(de),this.Fs=new Ts(i=>Qf(i),Yf),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Lk(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.vs))}}function Yk(t,e,n,r){return new Qk(t,e,n,r)}async function d0(t,e){const n=se(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Os(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],c=[];let u=he();for(const d of s){o.push(d.batchId);for(const p of d.mutations)u=u.add(p.key)}for(const d of i){c.push(d.batchId);for(const p of d.mutations)u=u.add(p.key)}return n.localDocuments.getDocuments(r,u).next(d=>({Ns:d,removedBatchIds:o,addedBatchIds:c}))})})}function Jk(t,e){const n=se(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.xs.newChangeBuffer({trackRemovals:!0});return function(c,u,d,p){const m=d.batch,g=m.keys();let _=F.resolve();return g.forEach(R=>{_=_.next(()=>p.getEntry(u,R)).next(P=>{const L=d.docVersions.get(R);_e(L!==null,48541),P.version.compareTo(L)<0&&(m.applyToRemoteDocument(P,d),P.isValidDocument()&&(P.setReadTime(d.commitVersion),p.addEntry(P)))})}),_.next(()=>c.mutationQueue.removeMutationBatch(u,m))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=he();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function h0(t){const e=se(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.li.getLastRemoteSnapshotVersion(n))}function Xk(t,e){const n=se(t),r=e.snapshotVersion;let s=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.xs.newChangeBuffer({trackRemovals:!0});s=n.vs;const c=[];e.targetChanges.forEach((p,m)=>{const g=s.get(m);if(!g)return;c.push(n.li.removeMatchingKeys(i,p.removedDocuments,m).next(()=>n.li.addMatchingKeys(i,p.addedDocuments,m)));let _=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?_=_.withResumeToken(ct.EMPTY_BYTE_STRING,ne.min()).withLastLimboFreeSnapshotVersion(ne.min()):p.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(p.resumeToken,r)),s=s.insert(m,_),function(P,L,S){return P.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=Kk?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(g,_,p)&&c.push(n.li.updateTargetData(i,_))});let u=Kn(),d=he();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(i,p))}),c.push(Zk(i,o,e.documentUpdates).next(p=>{u=p.Bs,d=p.Ls})),!r.isEqual(ne.min())){const p=n.li.getLastRemoteSnapshotVersion(i).next(m=>n.li.setTargetsMetadata(i,i.currentSequenceNumber,r));c.push(p)}return F.waitFor(c).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,d)).next(()=>u)}).then(i=>(n.vs=s,i))}function Zk(t,e,n){let r=he(),s=he();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Kn();return n.forEach((c,u)=>{const d=i.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(c)),u.isNoDocument()&&u.version.isEqual(ne.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):K(sp,"Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)}),{Bs:o,Ls:s}})}function eR(t,e){const n=se(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Wf),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function tR(t,e){const n=se(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.li.getTargetData(r,e).next(i=>i?(s=i,F.resolve(s)):n.li.allocateTargetId(r).next(o=>(s=new mr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.li.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.vs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.vs=n.vs.insert(r.targetId,r),n.Fs.set(e,r.targetId)),r})}async function kh(t,e,n){const r=se(t),s=r.vs.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!ji(o))throw o;K(sp,`Failed to update sequence numbers for target ${e}: ${o}`)}r.vs=r.vs.remove(e),r.Fs.delete(s.target)}function by(t,e,n){const r=se(t);let s=ne.min(),i=he();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,p){const m=se(u),g=m.Fs.get(p);return g!==void 0?F.resolve(m.vs.get(g)):m.li.getTargetData(d,p)}(r,o,Sn(e)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(o,c.targetId).next(u=>{i=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,n?s:ne.min(),n?i:he())).next(c=>(nR(r,UA(e),c),{documents:c,ks:i})))}function nR(t,e,n){let r=t.Ms.get(e)||ne.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Ms.set(e,r)}class jy{constructor(){this.activeTargetIds=WA()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class rR{constructor(){this.vo=new jy,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,r){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new jy,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dy="ConnectivityMonitor";class Vy{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){K(Dy,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){K(Dy,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hl=null;function Rh(){return hl===null?hl=function(){return 268435456+Math.round(2147483648*Math.random())}():hl++,"0x"+hl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hd="RestConnection",iR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class oR{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.$o=this.databaseId.database===pc?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,n,r,s,i){const o=Rh(),c=this.Qo(e,n.toUriEncodedString());K(hd,`Sending RPC '${e}' ${o}:`,c,r);const u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(u,s,i);const{host:d}=new URL(c),p=Ai(d);return this.zo(e,c,u,r,p).then(m=>(K(hd,`Received RPC '${e}' ${o}: `,m),m),m=>{throw gi(hd,`RPC '${e}' ${o} failed with error: `,m,"url: ",c,"request:",r),m})}jo(e,n,r,s,i,o){return this.Wo(e,n,r,s,i)}Go(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Pi}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}Qo(e,n){const r=iR[e];let s=`${this.qo}/v1/${n}:${r}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ht="WebChannelConnection",co=(t,e,n)=>{t.listen(e,r=>{try{n(r)}catch(s){setTimeout(()=>{throw s},0)}})};class oi extends oR{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!oi.c_){const e=gE();co(e,mE.STAT_EVENT,n=>{n.stat===yh.PROXY?K(ht,"STAT_EVENT: detected buffering proxy"):n.stat===yh.NOPROXY&&K(ht,"STAT_EVENT: detected no buffering proxy")}),oi.c_=!0}}zo(e,n,r,s,i){const o=Rh();return new Promise((c,u)=>{const d=new fE;d.setWithCredentials(!0),d.listenOnce(pE.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case kl.NO_ERROR:const m=d.getResponseJson();K(ht,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),c(m);break;case kl.TIMEOUT:K(ht,`RPC '${e}' ${o} timed out`),u(new G(M.DEADLINE_EXCEEDED,"Request time out"));break;case kl.HTTP_ERROR:const g=d.getStatus();if(K(ht,`RPC '${e}' ${o} failed with status:`,g,"response text:",d.getResponseText()),g>0){let _=d.getResponseJson();Array.isArray(_)&&(_=_[0]);const R=_==null?void 0:_.error;if(R&&R.status&&R.message){const P=function(S){const T=S.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(T)>=0?T:M.UNKNOWN}(R.status);u(new G(P,R.message))}else u(new G(M.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new G(M.UNAVAILABLE,"Connection failed."));break;default:te(9055,{l_:e,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{K(ht,`RPC '${e}' ${o} completed.`)}});const p=JSON.stringify(s);K(ht,`RPC '${e}' ${o} sending request:`,s),d.send(n,"POST",p,r,15)})}T_(e,n,r){const s=Rh(),i=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=this.createWebChannelTransport(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Go(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const d=i.join("");K(ht,`Creating RPC '${e}' stream ${s}: ${d}`,c);const p=o.createWebChannel(d,c);this.I_(p);let m=!1,g=!1;const _=new aR({Ho:R=>{g?K(ht,`Not sending because RPC '${e}' stream ${s} is closed:`,R):(m||(K(ht,`Opening RPC '${e}' stream ${s} transport.`),p.open(),m=!0),K(ht,`RPC '${e}' stream ${s} sending:`,R),p.send(R))},Jo:()=>p.close()});return co(p,yo.EventType.OPEN,()=>{g||(K(ht,`RPC '${e}' stream ${s} transport opened.`),_.i_())}),co(p,yo.EventType.CLOSE,()=>{g||(g=!0,K(ht,`RPC '${e}' stream ${s} transport closed`),_.o_(),this.E_(p))}),co(p,yo.EventType.ERROR,R=>{g||(g=!0,gi(ht,`RPC '${e}' stream ${s} transport errored. Name:`,R.name,"Message:",R.message),_.o_(new G(M.UNAVAILABLE,"The operation could not be completed")))}),co(p,yo.EventType.MESSAGE,R=>{var P;if(!g){const L=R.data[0];_e(!!L,16349);const S=L,T=(S==null?void 0:S.error)||((P=S[0])==null?void 0:P.error);if(T){K(ht,`RPC '${e}' stream ${s} received error:`,T);const x=T.status;let O=function(w){const y=Ue[w];if(y!==void 0)return XE(y)}(x),j=T.message;O===void 0&&(O=M.INTERNAL,j="Unknown error status: "+x+" with message "+T.message),g=!0,_.o_(new G(O,j)),p.close()}else K(ht,`RPC '${e}' stream ${s} received:`,L),_.__(L)}}),oi.u_(),setTimeout(()=>{_.s_()},0),_}terminate(){this.a_.forEach(e=>e.close()),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter(n=>n===e)}Go(e,n,r){super.Go(e,n,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return yE()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lR(t){return new oi(t)}function fd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function su(t){return new hk(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */oi.c_=!1;class f0{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Ci=e,this.timerId=n,this.R_=r,this.A_=s,this.V_=i,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&K("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oy="PersistentStream";class p0{constructor(e,n,r,s,i,o,c,u){this.Ci=e,this.b_=r,this.S_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new f0(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,()=>this.k_()))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===M.RESOURCE_EXHAUSTED?(Gn(n.toString()),Gn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new G(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.Yo(()=>{r(()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.Yo()))}),this.stream.t_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.H_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return K(Oy,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget(()=>this.D_===e?n():(K(Oy,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class cR extends p0{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=mk(this.serializer,e),r=function(i){if(!("targetChange"in i))return ne.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ne.min():o.readTime?xn(o.readTime):ne.min()}(e);return this.listener.J_(n,r)}Z_(e){const n={};n.database=Ah(this.serializer),n.addTarget=function(i,o){let c;const u=o.target;if(c=Th(u)?{documents:vk(i,u)}:{query:_k(i,u).ft},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=t0(i,o.resumeToken);const d=xh(i,o.expectedCount);d!==null&&(c.expectedCount=d)}else if(o.snapshotVersion.compareTo(ne.min())>0){c.readTime=_c(i,o.snapshotVersion.toTimestamp());const d=xh(i,o.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);const r=Ek(this.serializer,e);r&&(n.labels=r),this.K_(n)}X_(e){const n={};n.database=Ah(this.serializer),n.removeTarget=e,this.K_(n)}}class uR extends p0{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return _e(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,_e(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){_e(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=yk(e.writeResults,e.commitTime),r=xn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Ah(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>gk(this.serializer,r))};this.K_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{}class hR extends dR{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new G(M.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Wo(e,Nh(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new G(M.UNKNOWN,i.toString())})}jo(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.jo(e,Nh(n,r),s,o,c,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new G(M.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}function fR(t,e,n,r){return new hR(t,e,n,r)}class pR{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Gn(n),this.aa=!1):K("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ys="RemoteStore";class mR{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=i,this.Aa.Mo(o=>{r.enqueueAndForget(async()=>{Ss(this)&&(K(ys,"Restarting streams for network reachability change."),await async function(u){const d=se(u);d.Ea.add(4),await xa(d),d.Va.set("Unknown"),d.Ea.delete(4),await iu(d)}(this))})}),this.Va=new pR(r,s)}}async function iu(t){if(Ss(t))for(const e of t.Ra)await e(!0)}async function xa(t){for(const e of t.Ra)await e(!1)}function m0(t,e){const n=se(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),lp(n)?ap(n):Di(n).O_()&&op(n,e))}function ip(t,e){const n=se(t),r=Di(n);n.Ia.delete(e),r.O_()&&g0(n,e),n.Ia.size===0&&(r.O_()?r.L_():Ss(n)&&n.Va.set("Unknown"))}function op(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ne.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Di(t).Z_(e)}function g0(t,e){t.da.$e(e),Di(t).X_(e)}function ap(t){t.da=new lk({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Di(t).start(),t.Va.ua()}function lp(t){return Ss(t)&&!Di(t).x_()&&t.Ia.size>0}function Ss(t){return se(t).Ea.size===0}function y0(t){t.da=void 0}async function gR(t){t.Va.set("Online")}async function yR(t){t.Ia.forEach((e,n)=>{op(t,e)})}async function vR(t,e){y0(t),lp(t)?(t.Va.ha(e),ap(t)):t.Va.set("Unknown")}async function _R(t,e,n){if(t.Va.set("Online"),e instanceof e0&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const c of i.targetIds)s.Ia.has(c)&&(await s.remoteSyncer.rejectListen(c,o),s.Ia.delete(c),s.da.removeTarget(c))}(t,e)}catch(r){K(ys,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ec(t,r)}else if(e instanceof jl?t.da.Xe(e):e instanceof ZE?t.da.st(e):t.da.tt(e),!n.isEqual(ne.min()))try{const r=await h0(t.localStore);n.compareTo(r)>=0&&await function(i,o){const c=i.da.Tt(o);return c.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const p=i.Ia.get(d);p&&i.Ia.set(d,p.withResumeToken(u.resumeToken,o))}}),c.targetMismatches.forEach((u,d)=>{const p=i.Ia.get(u);if(!p)return;i.Ia.set(u,p.withResumeToken(ct.EMPTY_BYTE_STRING,p.snapshotVersion)),g0(i,u);const m=new mr(p.target,u,d,p.sequenceNumber);op(i,m)}),i.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){K(ys,"Failed to raise snapshot:",r),await Ec(t,r)}}async function Ec(t,e,n){if(!ji(e))throw e;t.Ea.add(1),await xa(t),t.Va.set("Offline"),n||(n=()=>h0(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{K(ys,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await iu(t)})}function v0(t,e){return e().catch(n=>Ec(t,n,e))}async function ou(t){const e=se(t),n=Vr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Wf;for(;wR(e);)try{const s=await eR(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,ER(e,s)}catch(s){await Ec(e,s)}_0(e)&&w0(e)}function wR(t){return Ss(t)&&t.Ta.length<10}function ER(t,e){t.Ta.push(e);const n=Vr(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function _0(t){return Ss(t)&&!Vr(t).x_()&&t.Ta.length>0}function w0(t){Vr(t).start()}async function TR(t){Vr(t).ra()}async function IR(t){const e=Vr(t);for(const n of t.Ta)e.ea(n.mutations)}async function SR(t,e,n){const r=t.Ta.shift(),s=Xf.from(r,e,n);await v0(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await ou(t)}async function xR(t,e){e&&Vr(t).Y_&&await async function(r,s){if(function(o){return ik(o)&&o!==M.ABORTED}(s.code)){const i=r.Ta.shift();Vr(r).B_(),await v0(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await ou(r)}}(t,e),_0(t)&&w0(t)}async function Ly(t,e){const n=se(t);n.asyncQueue.verifyOperationInProgress(),K(ys,"RemoteStore received new credentials");const r=Ss(n);n.Ea.add(3),await xa(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await iu(n)}async function NR(t,e){const n=se(t);e?(n.Ea.delete(2),await iu(n)):e||(n.Ea.add(2),await xa(n),n.Va.set("Unknown"))}function Di(t){return t.ma||(t.ma=function(n,r,s){const i=se(n);return i.sa(),new cR(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:gR.bind(null,t),Yo:yR.bind(null,t),t_:vR.bind(null,t),J_:_R.bind(null,t)}),t.Ra.push(async e=>{e?(t.ma.B_(),lp(t)?ap(t):t.Va.set("Unknown")):(await t.ma.stop(),y0(t))})),t.ma}function Vr(t){return t.fa||(t.fa=function(n,r,s){const i=se(n);return i.sa(),new uR(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:TR.bind(null,t),t_:xR.bind(null,t),ta:IR.bind(null,t),na:SR.bind(null,t)}),t.Ra.push(async e=>{e?(t.fa.B_(),await ou(t)):(await t.fa.stop(),t.Ta.length>0&&(K(ys,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Fn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,c=new cp(e,n,o,s,i);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function up(t,e){if(Gn("AsyncQueue",`${e}: ${t}`),ji(t))return new G(M.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{static emptySet(e){return new ai(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||X.comparator(n.key,r.key):(n,r)=>X.comparator(n.key,r.key),this.keyedMap=vo(),this.sortedSet=new De(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ai)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ai;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class My{constructor(){this.ga=new De(X.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):te(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ei{constructor(e,n,r,s,i,o,c,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(c=>{o.push({type:0,doc:c})}),new Ei(e,n,ai.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Zc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some(e=>e.Da())}}class AR{constructor(){this.queries=Fy(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=se(n),i=s.queries;s.queries=Fy(),i.forEach((o,c)=>{for(const u of c.ba)u.onError(r)})})(this,new G(M.ABORTED,"Firestore shutting down"))}}function Fy(){return new Ts(t=>FE(t),Zc)}async function dp(t,e){const n=se(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.Sa()&&e.Da()&&(r=2):(i=new CR,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const c=up(o,`Initialization of query '${Vs(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,i),i.ba.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&fp(n)}async function hp(t,e){const n=se(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.ba.indexOf(e);o>=0&&(i.ba.splice(o,1),i.ba.length===0?s=e.Da()?0:1:!i.Sa()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function kR(t,e){const n=se(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const c of o.ba)c.Fa(s)&&(r=!0);o.wa=s}}r&&fp(n)}function RR(t,e,n){const r=se(t),s=r.queries.get(e);if(s)for(const i of s.ba)i.onError(n);r.queries.delete(e)}function fp(t){t.Ca.forEach(e=>{e.next()})}var Ph,Uy;(Uy=Ph||(Ph={})).Ma="default",Uy.Cache="cache";class pp{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Ei(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Ei.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Ph.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0{constructor(e){this.key=e}}class T0{constructor(e){this.key=e}}class PR{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=he(),this.mutatedKeys=he(),this.eu=UE(e),this.tu=new ai(this.eu)}get nu(){return this.Za}ru(e,n){const r=n?n.iu:new My,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,c=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((p,m)=>{const g=s.get(p),_=eu(this.query,m)?m:null,R=!!g&&this.mutatedKeys.has(g.key),P=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let L=!1;g&&_?g.data.isEqual(_.data)?R!==P&&(r.track({type:3,doc:_}),L=!0):this.su(g,_)||(r.track({type:2,doc:_}),L=!0,(u&&this.eu(_,u)>0||d&&this.eu(_,d)<0)&&(c=!0)):!g&&_?(r.track({type:0,doc:_}),L=!0):g&&!_&&(r.track({type:1,doc:g}),L=!0,(u||d)&&(c=!0)),L&&(_?(o=o.add(_),i=P?i.add(p):i.delete(p)):(o=o.delete(p),i=i.delete(p)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const p=this.query.limitType==="F"?o.last():o.first();o=o.delete(p.key),i=i.delete(p.key),r.track({type:1,doc:p})}return{tu:o,iu:r,Ss:c,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((p,m)=>function(_,R){const P=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return te(20277,{Vt:L})}};return P(_)-P(R)}(p.type,m.type)||this.eu(p.doc,m.doc)),this.ou(r),s=s??!1;const c=n&&!s?this._u():[],u=this.Ya.size===0&&this.current&&!s?1:0,d=u!==this.Xa;return this.Xa=u,o.length!==0||d?{snapshot:new Ei(this.query,e.tu,i,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new My,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Za=this.Za.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Za=this.Za.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=he(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return e.forEach(r=>{this.Ya.has(r)||n.push(new T0(r))}),this.Ya.forEach(r=>{e.has(r)||n.push(new E0(r))}),n}cu(e){this.Za=e.ks,this.Ya=he();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Ei.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const mp="SyncEngine";class bR{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class jR{constructor(e){this.key=e,this.hu=!1}}class DR{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Ts(c=>FE(c),Zc),this.Iu=new Map,this.Eu=new Set,this.Ru=new De(X.comparator),this.Au=new Map,this.Vu=new tp,this.du={},this.mu=new Map,this.fu=wi.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function VR(t,e,n=!0){const r=A0(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await I0(r,e,n,!0),s}async function OR(t,e){const n=A0(t);await I0(n,e,!0,!1)}async function I0(t,e,n,r){const s=await tR(t.localStore,Sn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let c;return r&&(c=await LR(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&m0(t.remoteStore,s),c}async function LR(t,e,n,r,s){t.pu=(m,g,_)=>async function(P,L,S,T){let x=L.view.ru(S);x.Ss&&(x=await by(P.localStore,L.query,!1).then(({documents:w})=>L.view.ru(w,x)));const O=T&&T.targetChanges.get(L.targetId),j=T&&T.targetMismatches.get(L.targetId)!=null,U=L.view.applyChanges(x,P.isPrimaryClient,O,j);return By(P,L.targetId,U.au),U.snapshot}(t,m,g,_);const i=await by(t.localStore,e,!0),o=new PR(e,i.ks),c=o.ru(i.documents),u=Sa.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(c,t.isPrimaryClient,u);By(t,n,d.au);const p=new bR(e,n,o);return t.Tu.set(e,p),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function MR(t,e,n){const r=se(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!Zc(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await kh(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&ip(r.remoteStore,s.targetId),bh(r,s.targetId)}).catch(bi)):(bh(r,s.targetId),await kh(r.localStore,s.targetId,!0))}async function FR(t,e){const n=se(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ip(n.remoteStore,r.targetId))}async function UR(t,e,n){const r=GR(t);try{const s=await function(o,c){const u=se(o),d=Ae.now(),p=c.reduce((_,R)=>_.add(R.key),he());let m,g;return u.persistence.runTransaction("Locally write mutations","readwrite",_=>{let R=Kn(),P=he();return u.xs.getEntries(_,p).next(L=>{R=L,R.forEach((S,T)=>{T.isValidDocument()||(P=P.add(S))})}).next(()=>u.localDocuments.getOverlayedDocuments(_,R)).next(L=>{m=L;const S=[];for(const T of c){const x=ek(T,m.get(T.key).overlayedDocument);x!=null&&S.push(new Is(T.key,x,PE(x.value.mapValue),Un.exists(!0)))}return u.mutationQueue.addMutationBatch(_,d,S,c)}).next(L=>{g=L;const S=L.applyToLocalDocumentSet(m,P);return u.documentOverlayCache.saveOverlays(_,L.batchId,S)})}).then(()=>({batchId:g.batchId,changes:BE(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,c,u){let d=o.du[o.currentUser.toKey()];d||(d=new De(de)),d=d.insert(c,u),o.du[o.currentUser.toKey()]=d}(r,s.batchId,n),await Na(r,s.changes),await ou(r.remoteStore)}catch(s){const i=up(s,"Failed to persist write");n.reject(i)}}async function S0(t,e){const n=se(t);try{const r=await Xk(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(_e(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?_e(o.hu,14607):s.removedDocuments.size>0&&(_e(o.hu,42227),o.hu=!1))}),await Na(n,r,e)}catch(r){await bi(r)}}function zy(t,e,n){const r=se(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const c=o.view.va(e);c.snapshot&&s.push(c.snapshot)}),function(o,c){const u=se(o);u.onlineState=c;let d=!1;u.queries.forEach((p,m)=>{for(const g of m.ba)g.va(c)&&(d=!0)}),d&&fp(u)}(r.eventManager,e),s.length&&r.Pu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function zR(t,e,n){const r=se(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new De(X.comparator);o=o.insert(i,mt.newNoDocument(i,ne.min()));const c=he().add(i),u=new ru(ne.min(),new Map,new De(de),o,c);await S0(r,u),r.Ru=r.Ru.remove(i),r.Au.delete(e),gp(r)}else await kh(r.localStore,e,!1).then(()=>bh(r,e,n)).catch(bi)}async function BR(t,e){const n=se(t),r=e.batch.batchId;try{const s=await Jk(n.localStore,e);N0(n,r,null),x0(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Na(n,s)}catch(s){await bi(s)}}async function $R(t,e,n){const r=se(t);try{const s=await function(o,c){const u=se(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let p;return u.mutationQueue.lookupMutationBatch(d,c).next(m=>(_e(m!==null,37113),p=m.keys(),u.mutationQueue.removeMutationBatch(d,m))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,p,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,p)).next(()=>u.localDocuments.getDocuments(d,p))})}(r.localStore,e);N0(r,e,n),x0(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Na(r,s)}catch(s){await bi(s)}}function x0(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function N0(t,e,n){const r=se(t);let s=r.du[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.du[r.currentUser.toKey()]=s}}function bh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach(r=>{t.Vu.containsKey(r)||C0(t,r)})}function C0(t,e){t.Eu.delete(e.path.canonicalString());const n=t.Ru.get(e);n!==null&&(ip(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),gp(t))}function By(t,e,n){for(const r of n)r instanceof E0?(t.Vu.addReference(r.key,e),qR(t,r)):r instanceof T0?(K(mp,"Document no longer in limbo: "+r.key),t.Vu.removeReference(r.key,e),t.Vu.containsKey(r.key)||C0(t,r.key)):te(19791,{wu:r})}function qR(t,e){const n=e.key,r=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(r)||(K(mp,"New document in limbo: "+n),t.Eu.add(r),gp(t))}function gp(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new X(Se.fromString(e)),r=t.fu.next();t.Au.set(r,new jR(n)),t.Ru=t.Ru.insert(n,r),m0(t.remoteStore,new mr(Sn(Xc(n.path)),r,"TargetPurposeLimboResolution",Qc.ce))}}async function Na(t,e,n){const r=se(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((c,u)=>{o.push(r.pu(u,e,n).then(d=>{var p;if((d||n)&&r.isPrimaryClient){const m=d?!d.fromCache:(p=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:p.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(d){s.push(d);const m=rp.Es(u.targetId,d);i.push(m)}}))}),await Promise.all(o),r.Pu.J_(s),await async function(u,d){const p=se(u);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>F.forEach(d,g=>F.forEach(g.Ts,_=>p.persistence.referenceDelegate.addReference(m,g.targetId,_)).next(()=>F.forEach(g.Is,_=>p.persistence.referenceDelegate.removeReference(m,g.targetId,_)))))}catch(m){if(!ji(m))throw m;K(sp,"Failed to update sequence numbers: "+m)}for(const m of d){const g=m.targetId;if(!m.fromCache){const _=p.vs.get(g),R=_.snapshotVersion,P=_.withLastLimboFreeSnapshotVersion(R);p.vs=p.vs.insert(g,P)}}}(r.localStore,i))}async function HR(t,e){const n=se(t);if(!n.currentUser.isEqual(e)){K(mp,"User change. New user:",e.toKey());const r=await d0(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(c=>{c.forEach(u=>{u.reject(new G(M.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Na(n,r.Ns)}}function WR(t,e){const n=se(t),r=n.Au.get(e);if(r&&r.hu)return he().add(r.key);{let s=he();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const c=n.Tu.get(o);s=s.unionWith(c.view.nu)}return s}}function A0(t){const e=se(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=S0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=WR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=zR.bind(null,e),e.Pu.J_=kR.bind(null,e.eventManager),e.Pu.yu=RR.bind(null,e.eventManager),e}function GR(t){const e=se(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=BR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=$R.bind(null,e),e}class Tc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=su(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return Yk(this.persistence,new Gk,e.initialUser,this.serializer)}Cu(e){return new u0(np.Vi,this.serializer)}Du(e){return new rR}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Tc.provider={build:()=>new Tc};class KR extends Tc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){_e(this.persistence.referenceDelegate instanceof wc,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new bk(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?St.withCacheSize(this.cacheSizeBytes):St.DEFAULT;return new u0(r=>wc.Vi(r,n),this.serializer)}}class jh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>zy(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=HR.bind(null,this.syncEngine),await NR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new AR}()}createDatastore(e){const n=su(e.databaseInfo.databaseId),r=lR(e.databaseInfo);return fR(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,c){return new mR(r,s,i,o,c)}(this.localStore,this.datastore,e.asyncQueue,n=>zy(this.syncEngine,n,0),function(){return Vy.v()?new Vy:new sR}())}createSyncEngine(e,n){return function(s,i,o,c,u,d,p){const m=new DR(s,i,o,c,u,d);return p&&(m.gu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=se(s);K(ys,"RemoteStore shutting down."),i.Ea.add(5),await xa(i),i.Aa.shutdown(),i.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}jh.provider={build:()=>new jh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Gn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Or="FirestoreClient";class QR{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this._databaseInfo=s,this.user=ft.UNAUTHENTICATED,this.clientId=Hf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{K(Or,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(K(Or,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Fn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=up(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function pd(t,e){t.asyncQueue.verifyOperationInProgress(),K(Or,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await d0(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function $y(t,e){t.asyncQueue.verifyOperationInProgress();const n=await YR(t);K(Or,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Ly(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Ly(e.remoteStore,s)),t._onlineComponents=e}async function YR(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){K(Or,"Using user provided OfflineComponentProvider");try{await pd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===M.FAILED_PRECONDITION||s.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;gi("Error using user provided cache. Falling back to memory cache: "+n),await pd(t,new Tc)}}else K(Or,"Using default OfflineComponentProvider"),await pd(t,new KR(void 0));return t._offlineComponents}async function k0(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(K(Or,"Using user provided OnlineComponentProvider"),await $y(t,t._uninitializedComponentsProvider._online)):(K(Or,"Using default OnlineComponentProvider"),await $y(t,new jh))),t._onlineComponents}function JR(t){return k0(t).then(e=>e.syncEngine)}async function Ic(t){const e=await k0(t),n=e.eventManager;return n.onListen=VR.bind(null,e.syncEngine),n.onUnlisten=MR.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=OR.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=FR.bind(null,e.syncEngine),n}function XR(t,e,n,r){const s=new yp(r),i=new pp(e,s,n);return t.asyncQueue.enqueueAndForget(async()=>dp(await Ic(t),i)),()=>{s.Nu(),t.asyncQueue.enqueueAndForget(async()=>hp(await Ic(t),i))}}function ZR(t,e,n={}){const r=new Fn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,c,u,d){const p=new yp({next:g=>{p.Nu(),o.enqueueAndForget(()=>hp(i,m));const _=g.docs.has(c);!_&&g.fromCache?d.reject(new G(M.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&g.fromCache&&u&&u.source==="server"?d.reject(new G(M.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),m=new pp(Xc(c.path),p,{includeMetadataChanges:!0,Ka:!0});return dp(i,m)}(await Ic(t),t.asyncQueue,e,n,r)),r.promise}function eP(t,e,n={}){const r=new Fn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,c,u,d){const p=new yp({next:g=>{p.Nu(),o.enqueueAndForget(()=>hp(i,m)),g.fromCache&&u.source==="server"?d.reject(new G(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(g)},error:g=>d.reject(g)}),m=new pp(c,p,{includeMetadataChanges:!0,Ka:!0});return dp(i,m)}(await Ic(t),t.asyncQueue,e,n,r)),r.promise}function tP(t,e){const n=new Fn;return t.asyncQueue.enqueueAndForget(async()=>UR(await JR(t),e,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R0(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nP="ComponentProvider",qy=new Map;function rP(t,e,n,r,s){return new TA(t,e,n,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,R0(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P0="firestore.googleapis.com",Hy=!0;class Wy{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new G(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=P0,this.ssl=Hy}else this.host=e.host,this.ssl=e.ssl??Hy;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=c0;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Rk)throw new G(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}dA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=R0(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new G(M.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new G(M.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new G(M.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class au{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Wy({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new G(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new G(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Wy(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new tA;switch(r.type){case"firstParty":return new iA(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new G(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=qy.get(n);r&&(K(nP,"Removing Datastore"),qy.delete(n),r.terminate())}(this),Promise.resolve()}}function sP(t,e,n,r={}){var d;t=In(t,au);const s=Ai(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},c=`${e}:${n}`;s&&(Sw(`https://${c}`),xw("Firestore",!0)),i.host!==P0&&i.host!==c&&gi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...i,host:c,ssl:s,emulatorOptions:r};if(!hs(u,o)&&(t._setSettings(u),r.mockUserToken)){let p,m;if(typeof r.mockUserToken=="string")p=r.mockUserToken,m=ft.MOCK_USER;else{p=hS(r.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new G(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new ft(g)}t._authCredentials=new nA(new _E(p,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new xs(this.firestore,e,this._query)}}class Fe{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ar(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Fe(this.firestore,e,this._key)}toJSON(){return{type:Fe._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Ea(n,Fe._jsonSchema))return new Fe(e,r||null,new X(Se.fromString(n.referencePath)))}}Fe._jsonSchemaVersion="firestore/documentReference/1.0",Fe._jsonSchema={type:$e("string",Fe._jsonSchemaVersion),referencePath:$e("string")};class Ar extends xs{constructor(e,n,r){super(e,n,Xc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Fe(this.firestore,null,new X(e))}withConverter(e){return new Ar(this.firestore,e,this._path)}}function Ti(t,e,...n){if(t=vt(t),wE("collection","path",e),t instanceof au){const r=Se.fromString(e,...n);return iy(r),new Ar(t,null,r)}{if(!(t instanceof Fe||t instanceof Ar))throw new G(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Se.fromString(e,...n));return iy(r),new Ar(t.firestore,null,r)}}function Rt(t,e,...n){if(t=vt(t),arguments.length===1&&(e=Hf.newId()),wE("doc","path",e),t instanceof au){const r=Se.fromString(e,...n);return sy(r),new Fe(t,null,new X(r))}{if(!(t instanceof Fe||t instanceof Ar))throw new G(M.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Se.fromString(e,...n));return sy(r),new Fe(t.firestore,t instanceof Ar?t.converter:null,new X(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gy="AsyncQueue";class Ky{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new f0(this,"async_queue_retry"),this._c=()=>{const r=fd();r&&K(Gy,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=fd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=fd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Fn;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!ji(e))throw e;K(Gy,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Gn("INTERNAL UNHANDLED ERROR: ",Qy(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=cp.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&te(47125,{Pc:Qy(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Qy(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Ii extends au{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Ky,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Ky(e),this._firestoreClient=void 0,await e}}}function iP(t,e){const n=typeof t=="object"?t:kw(),r=typeof t=="string"?t:pc,s=Vf(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=uS("firestore");i&&sP(s,...i)}return s}function lu(t){if(t._terminated)throw new G(M.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||oP(t),t._firestoreClient}function oP(t){var r,s,i,o;const e=t._freezeSettings(),n=rP(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,(s=t._app)==null?void 0:s.options.apiKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new QR(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(u){const d=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(d),_online:d}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new qt(ct.fromBase64String(e))}catch(n){throw new G(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new qt(ct.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:qt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ea(e,qt._jsonSchema))return qt.fromBase64String(e.bytes)}}qt._jsonSchemaVersion="firestore/bytes/1.0",qt._jsonSchema={type:$e("string",qt._jsonSchemaVersion),bytes:$e("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b0{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new G(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ot(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new G(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new G(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return de(this._lat,e._lat)||de(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Nn._jsonSchemaVersion}}static fromJSON(e){if(Ea(e,Nn._jsonSchema))return new Nn(e.latitude,e.longitude)}}Nn._jsonSchemaVersion="firestore/geoPoint/1.0",Nn._jsonSchema={type:$e("string",Nn._jsonSchemaVersion),latitude:$e("number"),longitude:$e("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:rn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ea(e,rn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new rn(e.vectorValues);throw new G(M.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}rn._jsonSchemaVersion="firestore/vectorValue/1.0",rn._jsonSchema={type:$e("string",rn._jsonSchemaVersion),vectorValues:$e("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aP=/^__.*__$/;class lP{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Is(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ia(e,this.data,n,this.fieldTransforms)}}function j0(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw te(40011,{dataSource:t})}}class _p{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.validatePath(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new _p({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Sc(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(j0(this.dataSource)&&aP.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class cP{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||su(e)}createContext(e,n,r,s=!1){return new _p({dataSource:e,methodName:n,targetDoc:r,path:ot.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function D0(t){const e=t._freezeSettings(),n=su(t._databaseId);return new cP(t._databaseId,!!e.ignoreUndefinedProperties,n)}function uP(t,e,n,r,s,i={}){const o=t.createContext(i.merge||i.mergeFields?2:0,e,n,s);L0("Data must be an object, but it was:",o,r);const c=V0(r,o);let u,d;if(i.merge)u=new en(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const p=[];for(const m of i.mergeFields){const g=cu(e,m,n);if(!o.contains(g))throw new G(M.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);pP(p,g)||p.push(g)}u=new en(p),d=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,d=o.fieldTransforms;return new lP(new $t(c),u,d)}class wp extends vp{_toFieldTransform(e){return new YA(e.path,new aa)}isEqual(e){return e instanceof wp}}function dP(t,e,n,r=!1){return Ep(n,t.createContext(r?4:3,e))}function Ep(t,e){if(O0(t=vt(t)))return L0("Unsupported field value:",e,t),V0(t,e);if(t instanceof vp)return function(r,s){if(!j0(s.dataSource))throw s.createError(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const c of r){let u=Ep(c,s.childContextForArray(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=vt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return GA(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Ae.fromDate(r);return{timestampValue:_c(s.serializer,i)}}if(r instanceof Ae){const i=new Ae(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:_c(s.serializer,i)}}if(r instanceof Nn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof qt)return{bytesValue:t0(s.serializer,r._byteString)};if(r instanceof Fe){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.createError(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:ep(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof rn)return function(o,c){const u=o instanceof rn?o.toArray():o;return{mapValue:{fields:{[kE]:{stringValue:RE},[mc]:{arrayValue:{values:u.map(p=>{if(typeof p!="number")throw c.createError("VectorValues must only contain numeric values.");return Jf(c.serializer,p)})}}}}}}(r,s);if(l0(r))return r._toProto(s.serializer);throw s.createError(`Unsupported field value: ${Kc(r)}`)}(t,e)}function V0(t,e){const n={};return IE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Es(t,(r,s)=>{const i=Ep(s,e.childContextForField(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function O0(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ae||t instanceof Nn||t instanceof qt||t instanceof Fe||t instanceof vp||t instanceof rn||l0(t))}function L0(t,e,n){if(!O0(n)||!EE(n)){const r=Kc(n);throw r==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+r)}}function cu(t,e,n){if((e=vt(e))instanceof b0)return e._internalPath;if(typeof e=="string")return fP(t,e);throw Sc("Field path arguments must be of type string or ",t,!1,void 0,n)}const hP=new RegExp("[~\\*/\\[\\]]");function fP(t,e,n){if(e.search(hP)>=0)throw Sc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new b0(...e.split("."))._internalPath}catch{throw Sc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Sc(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new G(M.INVALID_ARGUMENT,c+t+u)}function pP(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP{convertValue(e,n="none"){switch(Dr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Le(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(jr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw te(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Es(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[mc].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>Le(o.doubleValue));return new rn(n)}convertGeoPoint(e){return new Nn(Le(e.latitude),Le(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Jc(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(sa(e));default:return null}}convertTimestamp(e){const n=br(e);return new Ae(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Se.fromString(e);_e(a0(r),9688,{name:e});const s=new ia(r.get(1),r.get(3)),i=new X(r.popFirst(5));return s.isEqual(n)||Gn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp extends mP{constructor(e){super(),this.firestore=e}convertBytes(e){return new qt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Fe(this.firestore,null,n)}}function An(){return new wp("serverTimestamp")}const Yy="@firebase/firestore",Jy="4.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xy(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Fe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new gP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const n=this._document.data.field(cu("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class gP extends M0{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F0(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new G(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ip{}class yP extends Ip{}function xc(t,e,...n){let r=[];e instanceof Ip&&r.push(e),r=r.concat(n),function(i){const o=i.filter(u=>u instanceof Sp).length,c=i.filter(u=>u instanceof uu).length;if(o>1||o>0&&c>0)throw new G(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class uu extends yP{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new uu(e,n,r)}_apply(e){const n=this._parse(e);return U0(e._query,n),new xs(e.firestore,e.converter,Ih(e._query,n))}_parse(e){const n=D0(e.firestore);return function(i,o,c,u,d,p,m){let g;if(d.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new G(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){ev(m,p);const R=[];for(const P of m)R.push(Zy(u,i,P));g={arrayValue:{values:R}}}else g=Zy(u,i,m)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||ev(m,p),g=dP(c,o,m,p==="in"||p==="not-in");return Be.create(d,p,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function vP(t,e,n){const r=e,s=cu("where",t);return uu._create(s,r,n)}class Sp extends Ip{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Sp(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:an.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const c=i.getFlattenedFilters();for(const u of c)U0(o,u),o=Ih(o,u)}(e._query,n),new xs(e.firestore,e.converter,Ih(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Zy(t,e,n){if(typeof(n=vt(n))=="string"){if(n==="")throw new G(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ME(e)&&n.indexOf("/")!==-1)throw new G(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Se.fromString(n));if(!X.isDocumentKey(r))throw new G(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return fy(t,new X(r))}if(n instanceof Fe)return fy(t,n._key);throw new G(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Kc(n)}.`)}function ev(t,e){if(!Array.isArray(t)||t.length===0)throw new G(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function U0(t,e){const n=function(s,i){for(const o of s)for(const c of o.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new G(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new G(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function _P(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class wo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class is extends M0{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Dl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(cu("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new G(M.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=is._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}is._jsonSchemaVersion="firestore/documentSnapshot/1.0",is._jsonSchema={type:$e("string",is._jsonSchemaVersion),bundleSource:$e("string","DocumentSnapshot"),bundleName:$e("string"),bundle:$e("string")};class Dl extends is{data(e={}){return super.data(e)}}class os{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new wo(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Dl(this._firestore,this._userDataWriter,r.key,r,new wo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new G(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(c=>{const u=new Dl(s._firestore,s._userDataWriter,c.doc.key,c.doc,new wo(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>i||c.type!==3).map(c=>{const u=new Dl(s._firestore,s._userDataWriter,c.doc.key,c.doc,new wo(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,p=-1;return c.type!==0&&(d=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),p=o.indexOf(c.doc.key)),{type:wP(c.type),doc:u,oldIndex:d,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new G(M.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=os._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Hf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function wP(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return te(61501,{type:t})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */os._jsonSchemaVersion="firestore/querySnapshot/1.0",os._jsonSchema={type:$e("string",os._jsonSchemaVersion),bundleSource:$e("string","QuerySnapshot"),bundleName:$e("string"),bundle:$e("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vi(t){t=In(t,Fe);const e=In(t.firestore,Ii),n=lu(e);return ZR(n,t._key).then(r=>z0(e,t,r))}function EP(t){t=In(t,xs);const e=In(t.firestore,Ii),n=lu(e),r=new Tp(e);return F0(t._query),eP(n,t._query).then(s=>new os(e,r,t,s))}function Br(t,e,n){t=In(t,Fe);const r=In(t.firestore,Ii),s=_P(t.converter,e,n),i=D0(r);return TP(r,[uP(i,"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Un.none())])}function xp(t,...e){var d,p,m;t=vt(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||Xy(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Xy(e[r])){const g=e[r];e[r]=(d=g.next)==null?void 0:d.bind(g),e[r+1]=(p=g.error)==null?void 0:p.bind(g),e[r+2]=(m=g.complete)==null?void 0:m.bind(g)}let i,o,c;if(t instanceof Fe)o=In(t.firestore,Ii),c=Xc(t._key.path),i={next:g=>{e[r]&&e[r](z0(o,t,g))},error:e[r+1],complete:e[r+2]};else{const g=In(t,xs);o=In(g.firestore,Ii),c=g._query;const _=new Tp(o);i={next:R=>{e[r]&&e[r](new os(o,_,g,R))},error:e[r+1],complete:e[r+2]},F0(t._query)}const u=lu(o);return XR(u,c,s,i)}function TP(t,e){const n=lu(t);return tP(n,e)}function z0(t,e,n){const r=n.docs.get(e._key),s=new Tp(t);return new is(t,s,e._key,r,new wo(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){eA(ki),mi(new fs("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),c=new Ii(new rA(r.getProvider("auth-internal")),new oA(o,r.getProvider("app-check-internal")),IA(o,s),o);return i={useFetchStreams:n,...i},c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),Nr(Yy,Jy,e),Nr(Yy,Jy,"esm2020")})();var IP="firebase",SP="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Nr(IP,SP,"app");const xP={apiKey:"AIzaSyCG7QOtB7a7uZzzFo5kOMOKPoLIELTkOk4",authDomain:"hpservices-29a44.firebaseapp.com",databaseURL:"https://hpservices-29a44-default-rtdb.firebaseio.com",projectId:"hpservices-29a44",storageBucket:"hpservices-29a44.firebasestorage.app",messagingSenderId:"542845890290",appId:"1:542845890290:web:18d83a41e196b1cc2a6a6b",measurementId:"G-B8PVV22FM1"},B0=Aw(xP),du=XC(B0),Ke=iP(B0),NP={cloud_name:"dpjnaefed",upload_url:"https://api.cloudinary.com/v1_1/dpjnaefed/upload"},CP="unsigned",AP=async(t,e,n)=>{try{const s=(await ON(du,t,e)).user,i={...n,id:s.uid,email:t,password:e,createdAt:An(),updatedAt:An()};return await Br(Rt(Ke,"students",s.uid),i),s}catch(r){throw new Error(r.message||"   ")}},kP=async(t,e)=>{try{return(await LN(du,t,e)).user}catch(n){let r="      ";throw n.code==="auth/user-not-found"?r="  .   ":n.code==="auth/wrong-password"?r="   ":n.code==="auth/invalid-email"?r="   ":n.code==="auth/user-disabled"?r="   ":n.code==="auth/too-many-requests"?r=" .   ":n.code==="auth/operation-not-allowed"?r="    .   Email/Password  Firebase Console":n.message&&(r=n.message),new Error(r)}},RP=async()=>{try{await zN(du)}catch(t){throw new Error(t.message||"    ")}},PP=t=>UN(du,t),Np=async t=>{var e,n,r;try{const s=Rt(Ke,"students",t),i=await Vi(s);if(i.exists()){const o=i.data();return{...o,id:i.id,createdAt:((r=(n=(e=o.createdAt)==null?void 0:e.toDate)==null?void 0:n.call(e))==null?void 0:r.toISOString())||o.createdAt}}return null}catch(s){let i="    ";throw s.code==="permission-denied"?i=" .    Firestore Security Rules":s.message&&(i=s.message),console.error("Error getting student data:",s),new Error(i)}},$0=async(t,e)=>{try{await Br(Rt(Ke,"students",t),{...e,updatedAt:An()},{merge:!0})}catch(n){throw new Error(n.message||"    ")}},q0=(t,e)=>{const n=xc(Ti(Ke,"students"));return xp(n,r=>{const s=r.docs.map(i=>{var c,u,d;const o=i.data();return{...o,id:i.id,createdAt:((d=(u=(c=o.createdAt)==null?void 0:c.toDate)==null?void 0:u.call(c))==null?void 0:d.toISOString())||o.createdAt}});console.log("subscribeToAllStudents: Found",s.length,"students"),t(s)},r=>{console.error("Error in students subscription:",r),e&&e(r)})},bP=async t=>{try{const e=Ti(Ke,"students"),n=[];if(!t.trim())return[];const r=await EP(e),i=/^\d+$/.test(t)&&t.length<=14,o=t.toLowerCase(),c=t.trim();return r.docs.forEach(u=>{var g,_,R;const d=u.data(),p={...d,id:u.id,createdAt:((R=(_=(g=d.createdAt)==null?void 0:g.toDate)==null?void 0:_.call(g))==null?void 0:R.toISOString())||d.createdAt};let m=!1;p.fullNameArabic&&p.fullNameArabic.toLowerCase().includes(o)&&(m=!0),p.vehicleNameEnglish&&p.vehicleNameEnglish.toLowerCase().includes(o)&&(m=!0),p.email&&p.email.toLowerCase().includes(o)&&(m=!0),p.whatsappNumber&&p.whatsappNumber.includes(c)&&(m=!0),p.nationalID&&(i?c.length<14?p.nationalID.startsWith(c)&&(m=!0):c.length===14&&p.nationalID===c&&(m=!0):p.nationalID.includes(c)&&(m=!0)),p.diplomaType&&p.diplomaType.toLowerCase().includes(o)&&(m=!0),p.track&&p.track.toLowerCase().includes(o)&&(m=!0),p.diplomaYear&&p.diplomaYear.includes(c)&&(m=!0),p.course&&p.course.toLowerCase().includes(o)&&(m=!0),p.address&&(p.address.governorate&&p.address.governorate.toLowerCase().includes(o)&&(m=!0),p.address.city&&p.address.city.toLowerCase().includes(o)&&(m=!0),p.address.street&&p.address.street.toLowerCase().includes(o)&&(m=!0),p.address.building&&p.address.building.toLowerCase().includes(o)&&(m=!0),p.address.siteNumber&&p.address.siteNumber.toLowerCase().includes(o)&&(m=!0),p.address.landmark&&p.address.landmark.toLowerCase().includes(o)&&(m=!0)),m&&n.push(p)}),n}catch(e){throw new Error(e.message||"   ")}},jP=t=>["JPEG","JPG","PNG","PDF"].includes(t.toUpperCase()),DP=t=>new Blob([JSON.stringify(t)]).size,VP=async(t,e,n)=>{var r;try{if(!jP(t.type))throw new Error("   .  : JPEG, PNG, PDF");let s;t.file?s=t.file:s=await(await fetch(t.url)).blob();const i=Date.now(),o=t.name.replace(/[^a-zA-Z0-9.-]/g,"_"),c=`serviceRequests/${e}/${n}/${i}_${o}`,u=new FormData;u.append("file",s),u.append("upload_preset",CP),u.append("public_id",c),u.append("folder","serviceRequests");const d=await fetch(NP.upload_url,{method:"POST",body:u});if(!d.ok){const _=((r=(await d.json()).error)==null?void 0:r.message)||"    Cloudinary";throw new Error(_)}let m=(await d.json()).secure_url;if(t.type.toUpperCase()!=="PDF"){const g=m.indexOf("/upload/");g>0&&(m=m.substring(0,g+8)+"w_1200,c_limit,q_auto,f_auto/"+m.substring(g+8))}return m}catch(s){throw console.error("Error uploading file to Cloudinary:",s),new Error(s.message||"    ")}},OP=async t=>{try{const e=`serviceRequests_${t.serviceId}`,n=Rt(Ti(Ke,e));let r=[];if(t.documents&&t.documents.length>0){const c=t.documents.map(async u=>{try{const d=await VP(u,t.studentId,t.serviceId);return{name:u.name,url:d,size:u.size,type:u.type}}catch(d){throw console.error(`Error uploading file ${u.name}:`,d),d}});r=await Promise.all(c)}const s={...t,id:n.id,documents:r,createdAt:An(),updatedAt:An()},i=DP(s),o=1024*1024;return i>o&&console.warn(`Document size (${(i/1024).toFixed(2)} KB) is large. Consider splitting data.`),console.log(`Saving document with size: ${(i/1024).toFixed(2)} KB`),await Br(n,s),n.id}catch(e){throw new Error(e.message||"    ")}},LP=(t,e)=>{const n=["1","2","3","4","5","6","7","8","9","10"],r=[],s=[];return n.forEach(i=>{const o=`serviceRequests_${i}`;let c;t?c=xc(Ti(Ke,o),vP("studentId","==",t)):c=xc(Ti(Ke,o));const u=xp(c,d=>{const p=d.docs.map(g=>{var R,P,L;const _=g.data();return{..._,id:g.id,createdAt:((L=(P=(R=_.createdAt)==null?void 0:R.toDate)==null?void 0:P.call(R))==null?void 0:L.toISOString())||_.createdAt}}),m=s.filter(g=>g.serviceId!==i);s.length=0,s.push(...m,...p),e([...s])},d=>{console.error(`Error in service requests subscription for ${i}:`,d)});r.push(u)}),()=>{r.forEach(i=>i())}},hu=async t=>{try{const e=await Vi(Rt(Ke,"admins",t));return e.exists()?e.data().isAdmin===!0:!1}catch(e){return console.error("Error checking admin status:",e),!1}},MP=t=>{const e=["1","2","3","4","5","6","7","8","9","10"],n=[],r=[];return e.forEach(s=>{const i=`serviceRequests_${s}`,o=xc(Ti(Ke,i)),c=xp(o,u=>{const d=u.docs.map(m=>{var _,R,P;const g=m.data();return{...g,id:m.id,createdAt:((P=(R=(_=g.createdAt)==null?void 0:_.toDate)==null?void 0:R.call(_))==null?void 0:P.toISOString())||g.createdAt}}),p=r.findIndex(m=>m.serviceId===s);p>=0&&r.splice(p,r.filter(m=>m.serviceId===s).length),r.push(...d),t([...r])},u=>{console.error(`Error in service requests subscription for ${s}:`,u)});n.push(c)}),()=>{n.forEach(s=>s())}},FP=async(t,e,n)=>{try{const r=`serviceRequests_${n}`;await Br(Rt(Ke,r,t),{status:e,updatedAt:An()},{merge:!0})}catch(r){throw new Error(r.message||"     ")}},H0=async()=>{try{const t=Rt(Ke,"config","bookService"),e=await Vi(t);return e.exists()?e.data():null}catch(t){throw new Error(t.message||"     ")}},UP=async t=>{try{await Br(Rt(Ke,"config","bookService"),{...t,updatedAt:An()},{merge:!0})}catch(e){throw new Error(e.message||"     ")}},W0=async()=>{try{const t=Rt(Ke,"config","feesService"),e=await Vi(t);return e.exists()?e.data():null}catch(t){throw new Error(t.message||"     ")}},zP=async t=>{try{await Br(Rt(Ke,"config","feesService"),{...t,updatedAt:An()},{merge:!0})}catch(e){throw new Error(e.message||"     ")}},G0=async()=>{try{const t=Rt(Ke,"config","assignmentsService"),e=await Vi(t);return e.exists()?e.data():null}catch(t){throw new Error(t.message||"     ")}},BP=async t=>{try{await Br(Rt(Ke,"config","assignmentsService"),{...t,updatedAt:An()},{merge:!0})}catch(e){throw new Error(e.message||"     ")}},K0=async()=>{var t,e;try{console.log("Fetching certificates config from Firebase...");const n=Rt(Ke,"config","certificatesService"),r=await Vi(n);if(r.exists()){const s=r.data();return console.log("Raw Firebase data:",s),console.log("Certificates config loaded:",{hasCertificates:!!s.certificates,certificatesCount:((t=s.certificates)==null?void 0:t.length)||0,certificates:(e=s.certificates)==null?void 0:e.map(i=>({id:i.id,name:i.name,imageUrl:i.imageUrl,hasImage:!!i.imageUrl}))}),s}else return console.log("Certificates config document does not exist"),null}catch(n){throw console.error("Error fetching certificates config:",n),new Error(n.message||"     ")}},tv=async t=>{var e,n;try{const r={certificates:t.certificates.map(s=>({id:s.id,name:s.name,price:s.price,imageUrl:s.imageUrl||"",description:s.description||"",fields:s.fields||[]})),paymentMethods:t.paymentMethods};console.log("Saving certificates config to Firebase:",{hasCertificates:!!r.certificates,certificatesCount:((e=r.certificates)==null?void 0:e.length)||0,certificates:(n=r.certificates)==null?void 0:n.map(s=>{var i;return{id:s.id,name:s.name,hasImage:!!s.imageUrl,imageLength:((i=s.imageUrl)==null?void 0:i.length)||0}})}),await Br(Rt(Ke,"config","certificatesService"),{...r,updatedAt:An()},{merge:!1}),console.log("Certificates config saved to Firebase successfully")}catch(r){throw console.error("Error saving certificates config:",r),new Error(r.message||"     ")}},Q0=$.createContext(void 0),$P=({children:t})=>{const[e,n]=$.useState(null),[r,s]=$.useState([]),[i,o]=$.useState(!0);$.useEffect(()=>{const _=PP(async R=>{if(R)try{if(await hu(R.uid)){const L={id:R.uid,fullNameArabic:" ",vehicleNameEnglish:"Admin",whatsappNumber:"",diplomaYear:"",diplomaType:"",track:"",nationalID:"",address:{governorate:"",city:"",street:"",building:"",siteNumber:""},course:"",email:R.email||""};n(L)}else{const L=await Np(R.uid);n(L)}}catch(P){console.error("Error fetching student data:",P),n(null)}else n(null),s([]);o(!1)});return()=>_()},[]),$.useEffect(()=>{if(!(e!=null&&e.id)){s([]);return}const _=LP(e.id,R=>{s(R)});return()=>_()},[e==null?void 0:e.id]);const g={student:e,setStudent:_=>{n(_)},isLoggedIn:e!==null,serviceRequests:r,addServiceRequest:async _=>{try{await OP(_)}catch(R){throw console.error("Error adding service request:",R),R}},updateServiceRequest:(_,R)=>{const P=r.map(L=>L.id===_?{...L,...R}:L);s(P)},getServiceRequest:_=>r.find(R=>R.id===_),logout:async()=>{try{await RP(),n(null),s([])}catch(_){console.error("Error logging out:",_)}}};return i?l.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:" ..."}):l.jsx(Q0.Provider,{value:g,children:t})},Ns=()=>{const t=$.useContext(Q0);if(t===void 0)throw new Error("useStudent must be used within StudentProvider");return t},qP=(t,e=4)=>!t||t.trim().length===0?{valid:!1,error:"  "}:/^[\u0600-\u06FF\s]+$/.test(t)?t.trim().split(/\s+/).length<e?{valid:!1,error:`    ${e}   `}:{valid:!0}:{valid:!1,error:"     "},HP=(t,e=4)=>!t||t.trim().length===0?{valid:!1,error:"This field is required"}:/^[a-zA-Z\s]+$/.test(t)?t.trim().split(/\s+/).length<e?{valid:!1,error:`    ${e}   `}:{valid:!0}:{valid:!1,error:"    "},WP=t=>{if(!t||t.trim().length===0)return{valid:!1,error:"  "};const e=t.replace(/\D/g,"");return e.length!==11?{valid:!1,error:"     11 "}:e[0]!=="0"?{valid:!1,error:"    "}:{valid:!0}},GP=t=>!t||t.trim().length===0?{valid:!1,error:"  "}:t.replace(/\D/g,"").length!==14?{valid:!1,error:"     14 "}:{valid:!0},KP=t=>!t||t.trim().length===0?{valid:!1,error:"  "}:/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)?{valid:!0}:{valid:!1,error:"    "},QP=t=>!t||t.trim().length===0?{valid:!1,error:"  "}:t.length<6?{valid:!1,error:"      6   "}:{valid:!0},Y0=t=>{const e=[];if(!t.fullNameArabic)e.push({field:"fullNameArabic",message:"  "});else{const n=qP(t.fullNameArabic,4);n.valid||e.push({field:"fullNameArabic",message:n.error||"  "})}if(!t.vehicleNameEnglish)e.push({field:"vehicleNameEnglish",message:"This field is required"});else{const n=HP(t.vehicleNameEnglish,4);n.valid||e.push({field:"vehicleNameEnglish",message:n.error||"Validation error"})}if(!t.whatsappNumber)e.push({field:"whatsappNumber",message:"  "});else{const n=WP(t.whatsappNumber);n.valid||e.push({field:"whatsappNumber",message:n.error||"  "})}if(t.diplomaYear||e.push({field:"diplomaYear",message:"  "}),t.diplomaType||e.push({field:"diplomaType",message:"  "}),t.track||e.push({field:"track",message:"  "}),!t.nationalID)e.push({field:"nationalID",message:"  "});else{const n=GP(t.nationalID);n.valid||e.push({field:"nationalID",message:n.error||"  "})}if(t.address?(t.address.governorate||e.push({field:"address.governorate",message:"  "}),t.address.city||e.push({field:"address.city",message:"  "}),t.address.street||e.push({field:"address.street",message:"  "}),t.address.building||e.push({field:"address.building",message:"  "}),t.address.siteNumber||e.push({field:"address.siteNumber",message:"  "})):e.push({field:"address",message:"  "}),t.course||e.push({field:"course",message:"  "}),!t.email)e.push({field:"email",message:"  "});else{const n=KP(t.email);n.valid||e.push({field:"email",message:n.error||"  "})}if(!t.password)e.push({field:"password",message:"  "});else{const n=QP(t.password);n.valid||e.push({field:"password",message:n.error||"  "})}return e},YP=[""," ","",""," "," ",""," "," ","","","  ","","","  ",""," (    4  )","Other"],JP=["","","","","","","","","",""," "," ","","",""," ","  ",""," ","","Other"],XP=["   ",""," "," ","",""],ZP=[" "," ","  "," ","  ","  "," ","  "," "],Cp=[" "," ","  "," ","  ","  "," ","  "," "],Ap=[{id:"1",nameEn:"Register Your Data",nameAr:" ",descriptionEn:"Register and update your personal information",descriptionAr:"   ",icon:"clipboard-list",color:"#3B82F6",fields:[{name:"full_name",label:"  ",type:"editable",required:!0},{name:"national_id",label:" ",type:"editable",required:!0},{name:"address",label:"  ",type:"editable",required:!0},{name:"email",label:"",type:"editable",required:!0},{name:"whatsapp_number",label:"  ",type:"editable",required:!0},{name:"college",label:"     ",type:"select",required:!0,options:YP,hasOther:!0},{name:"college_other",label:"   ",type:"text",required:!1},{name:"department",label:"       (        )",type:"select",required:!0,options:JP,hasOther:!0},{name:"department_other",label:"   ",type:"text",required:!1},{name:"grade",label:"    (        )",type:"select",required:!0,options:XP,hasOther:!1}],paymentMethods:[]},{id:"2",nameEn:"Premium Client",nameAr:" ",descriptionEn:"Get premium support and exclusive services",descriptionAr:"     ",icon:"user",color:"#F59E0B",fields:[{name:"full_name_arabic",label:"   ",type:"editable",required:!0},{name:"full_name_english",label:"   ",type:"editable",required:!0},{name:"national_id",label:" ",type:"editable",required:!0},{name:"whatsapp_number",label:"  ",type:"editable",required:!0},{name:"email",label:"",type:"editable",required:!0},{name:"diploma_type",label:" ",type:"select",required:!0,options:ZP},{name:"address",label:" ",type:"editable",required:!0}],paymentMethods:["Vodafone","Etisalat","Orange","instaPay"]},{id:"3",nameEn:"School Books Shipping",nameAr:"    ",descriptionEn:"Order and ship your school books",descriptionAr:"   ",icon:"package",color:"#10B981",fields:[{name:"number_of_copies",label:"   ( 1  10)",type:"text",required:!0},{name:"names",label:"  (       )",type:"textarea",required:!0},{name:"tracks",label:"  (        )",type:"textarea",required:!0},{name:"phone_whatsapp",label:"    ( )",type:"text",required:!0},{name:"diploma_type",label:" ",type:"select",required:!0,options:Cp},{name:"address_details",label:"  ( /  /   /   /  )",type:"textarea",required:!0},{name:"payment_account",label:"       ",type:"text",required:!0}],paymentMethods:["Vodafone","Etisalat","Orange","instaPay"]},{id:"4",nameEn:"Pay School Fees",nameAr:"  ",descriptionEn:"Pay your school fees securely",descriptionAr:"   ",icon:"creditcard",color:"#8B5CF6",fields:[{name:"full_name_arabic",label:"   ",type:"editable",required:!0},{name:"national_id",label:" ",type:"editable",required:!0},{name:"diploma_type",label:" ",type:"select",required:!0,options:["  "," ","",""]},{name:"track_category",label:"",type:"select",required:!0,options:[" ","","","",""]},{name:"track_other",label:" ",type:"text",required:!1},{name:"diploma_year",label:" ",type:"select",required:!0,options:["  "]}],paymentMethods:["Vodafone","Etisalat","Orange","instaPay"]},{id:"5",nameEn:"Solve and Deliver Assignments",nameAr:"  ",descriptionEn:"Get help with your assignments and submit them",descriptionAr:"      ",icon:"checklist",color:"#EC4899",fields:[{name:"full_name_arabic",label:"   ",type:"editable",required:!0},{name:"educational_specialization",label:" ",type:"select",required:!0,options:[" ","","","","","",""],hasOther:!0},{name:"educational_specialization_other",label:" ",type:"text",required:!1},{name:"track",label:"",type:"select",required:!0,options:[" ","","",""]},{name:"whatsapp_number",label:"   ",type:"editable",required:!0}],paymentMethods:["Vodafone","Etisalat","Orange","instaPay"]},{id:"6",nameEn:"Online Certificates",nameAr:" ",descriptionEn:"Apply for and receive online certificates",descriptionAr:"     ",icon:"award",color:"#06B6D4",fields:[{name:"full_name_arabic",label:"   ",type:"editable",required:!0},{name:"full_name_english",label:"   ",type:"editable",required:!0},{name:"email",label:"",type:"editable",required:!0},{name:"whatsapp_number",label:" ",type:"editable",required:!0},{name:"national_id",label:" ",type:"editable",required:!0},{name:"address",label:"    ",type:"editable",required:!0}],paymentMethods:["Vodafone","Etisalat","Orange","instaPay"]},{id:"7",nameEn:"Apply for Digital Transformation",nameAr:"   ",descriptionEn:"Apply for digital transformation services",descriptionAr:"   ",icon:"zap",color:"#14B8A6",fields:[{name:"service_type",label:" ",type:"select",required:!0,options:[" "," "," "]},{name:"description",label:"",type:"textarea",required:!0}],paymentMethods:["Credit Card","Bank Transfer"]},{id:"8",nameEn:"Final Review",nameAr:" ",descriptionEn:"Get comprehensive review for your exams",descriptionAr:"    ",icon:"search",color:"#F97316",fields:[{name:"exam_name",label:" ",type:"text",required:!0},{name:"review_type",label:" ",type:"select",required:!0,options:["",""," "]},{name:"subjects",label:"",type:"text",required:!0},{name:"additional_notes",label:" ",type:"textarea",required:!1}],paymentMethods:["Credit Card"]},{id:"9",nameEn:"Graduation Project",nameAr:" ",descriptionEn:"Get help with your graduation project",descriptionAr:"     ",icon:"target",color:"#6366F1",fields:[{name:"project_title",label:" ",type:"text",required:!0},{name:"project_description",label:" ",type:"textarea",required:!0},{name:"team_size",label:" ",type:"number",required:!0},{name:"submission_date",label:" ",type:"text",required:!0}],paymentMethods:["Credit Card","Bank Transfer"]},{id:"10",nameEn:"Extract Documents",nameAr:" ",descriptionEn:"Request and extract official documents",descriptionAr:"   ",icon:"file-check",color:"#EF4444",fields:[{name:"document_type",label:" ",type:"select",required:!0,options:[""," "," "," "]},{name:"number_of_copies",label:" ",type:"number",required:!0},{name:"purpose",label:"  ",type:"textarea",required:!0}],paymentMethods:["Credit Card","Bank Transfer"]}],J0=["","","",""," ","","","","",""," ","","",""," ","","","","",""],X0=Array.from({length:75},(t,e)=>(2090-e).toString()),Z0=["","",""],e1=["","","",""," "];var e2={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const t2=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n2=(t,e)=>{const n=$.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,children:c,...u},d)=>$.createElement("svg",{ref:d,...e2,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:`lucide lucide-${t2(t)}`,...u},[...e.map(([p,m])=>$.createElement(p,m)),...(Array.isArray(c)?c:[c])||[]]));return n.displayName=`${t}`,n};var ge=n2;const Ca=ge("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Nc=ge("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),Cc=ge("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]),t1=ge("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),nv=ge("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]),Si=ge("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),n1=ge("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]),r2=ge("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Dh=ge("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),s2=ge("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),Vh=ge("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Oh=ge("FileCheck",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]),kp=ge("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),i2=ge("GraduationCap",[["path",{d:"M22 10v6M2 10l10-5 10 5-10 5z",key:"1ef52a"}],["path",{d:"M6 12v5c3 3 9 3 12 0v-5",key:"1f75yj"}]]),o2=ge("Headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]),rv=ge("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),r1=ge("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),s1=ge("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),Lh=ge("Package",[["path",{d:"M16.5 9.4 7.55 4.24",key:"10qotr"}],["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]),Eo=ge("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),i1=ge("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),a2=ge("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),js=ge("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),o1=ge("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),l2=ge("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),c2=ge("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),u2=ge("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),Rp=ge("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),a1=ge("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),sv=ge("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),mn=ge("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),d2=ge("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),h2=({onRegistrationSuccess:t,onGoToLogin:e})=>{var P,L,S,T,x,O;const{setStudent:n}=Ns(),[r,s]=$.useState({address:{governorate:"",city:"",street:"",building:"",siteNumber:"",landmark:""}}),[i,o]=$.useState([]),[c,u]=$.useState(!1),[d,p]=$.useState(""),m=j=>{var U;return(U=i.find(w=>w.field===j))==null?void 0:U.message},g=(j,U)=>{s(w=>({...w,[j]:U})),o(w=>w.filter(y=>y.field!==j))},_=(j,U)=>{s(w=>({...w,address:{...w.address,[j]:U}})),o(w=>w.filter(y=>!y.field.startsWith("address.")))},R=async j=>{j.preventDefault(),u(!0),p("");const U=Y0(r);if(U.length>0){o(U),u(!1);return}try{const w=r.email||"",y=r.password||"";if(!w||!y){p("    "),u(!1);return}const E={fullNameArabic:r.fullNameArabic||"",vehicleNameEnglish:r.vehicleNameEnglish||"",whatsappNumber:r.whatsappNumber||"",diplomaYear:r.diplomaYear||"",diplomaType:r.diplomaType||"",track:r.track||"",nationalID:r.nationalID||"",address:r.address||{governorate:"",city:"",street:"",building:"",siteNumber:"",landmark:""},course:r.course||"",email:w,password:y},I=await AP(w,y,E),k={...E,id:I.uid,createdAt:new Date().toISOString()};n(k),t()}catch(w){p(w.message||"   .    .")}finally{u(!1)}};return l.jsx("div",{className:"register-page",children:l.jsxs("div",{className:"register-container",children:[l.jsxs("div",{className:"register-header",children:[l.jsx("div",{className:"logo",children:l.jsx("div",{className:"logo-icon",children:""})}),l.jsx("h1",{children:"    "}),l.jsx("p",{children:"     "})]}),d&&l.jsxs("div",{className:"error-alert",children:[l.jsx(Ca,{size:20}),l.jsx("span",{children:d})]}),l.jsxs("form",{onSubmit:R,className:"register-form",children:[l.jsxs("div",{className:"form-section",children:[l.jsx("h2",{children:" "}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"fullNameArabic",children:"  () *"}),l.jsx("input",{id:"fullNameArabic",type:"text",dir:"rtl",placeholder:"   ",value:r.fullNameArabic||"",onChange:j=>g("fullNameArabic",j.target.value),className:m("fullNameArabic")?"error":""}),m("fullNameArabic")&&l.jsx("span",{className:"error-message",children:m("fullNameArabic")})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"vehicleNameEnglish",children:"Vehicle Name (English) *"}),l.jsx("input",{id:"vehicleNameEnglish",type:"text",dir:"ltr",placeholder:"Enter vehicle name in English",value:r.vehicleNameEnglish||"",onChange:j=>g("vehicleNameEnglish",j.target.value),className:m("vehicleNameEnglish")?"error":""}),m("vehicleNameEnglish")&&l.jsx("span",{className:"error-message",children:m("vehicleNameEnglish")})]}),l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"whatsappNumber",children:"  *"}),l.jsx("input",{id:"whatsappNumber",type:"tel",placeholder:"01xxxxxxxxx",value:r.whatsappNumber||"",onChange:j=>g("whatsappNumber",j.target.value),className:m("whatsappNumber")?"error":""}),m("whatsappNumber")&&l.jsx("span",{className:"error-message",children:m("whatsappNumber")})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"nationalID",children:"  *"}),l.jsx("input",{id:"nationalID",type:"text",placeholder:"14 ",value:r.nationalID||"",onChange:j=>g("nationalID",j.target.value),className:m("nationalID")?"error":""}),m("nationalID")&&l.jsx("span",{className:"error-message",children:m("nationalID")})]})]})]}),l.jsxs("div",{className:"form-section",children:[l.jsx("h2",{children:" "}),l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"diplomaYear",children:"  *"}),l.jsxs("select",{id:"diplomaYear",value:r.diplomaYear||"",onChange:j=>g("diplomaYear",j.target.value),className:m("diplomaYear")?"error":"",children:[l.jsx("option",{value:"",children:" "}),X0.map(j=>l.jsx("option",{value:j,children:j},j))]}),m("diplomaYear")&&l.jsx("span",{className:"error-message",children:m("diplomaYear")})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"diplomaType",children:"  *"}),l.jsxs("select",{id:"diplomaType",value:r.diplomaType||"",onChange:j=>g("diplomaType",j.target.value),className:m("diplomaType")?"error":"",children:[l.jsx("option",{value:"",children:"  "}),Cp.map(j=>l.jsx("option",{value:j,children:j},j))]}),m("diplomaType")&&l.jsx("span",{className:"error-message",children:m("diplomaType")})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"track",children:" *"}),l.jsxs("select",{id:"track",value:r.track||"",onChange:j=>g("track",j.target.value),className:m("track")?"error":"",children:[l.jsx("option",{value:"",children:" "}),Z0.map(j=>l.jsx("option",{value:j,children:j},j))]}),m("track")&&l.jsx("span",{className:"error-message",children:m("track")})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"course",children:" *"}),l.jsxs("select",{id:"course",value:r.course||"",onChange:j=>g("course",j.target.value),className:m("course")?"error":"",children:[l.jsx("option",{value:"",children:" "}),e1.map(j=>l.jsx("option",{value:j,children:j},j))]}),m("course")&&l.jsx("span",{className:"error-message",children:m("course")})]})]})]}),l.jsxs("div",{className:"form-section",children:[l.jsx("h2",{children:""}),l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"governorate",children:" *"}),l.jsxs("select",{id:"governorate",value:((P=r.address)==null?void 0:P.governorate)||"",onChange:j=>_("governorate",j.target.value),className:m("address.governorate")?"error":"",children:[l.jsx("option",{value:"",children:" "}),J0.map(j=>l.jsx("option",{value:j,children:j},j))]}),m("address.governorate")&&l.jsx("span",{className:"error-message",children:m("address.governorate")})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"city",children:" *"}),l.jsx("input",{id:"city",type:"text",placeholder:"   ",value:((L=r.address)==null?void 0:L.city)||"",onChange:j=>_("city",j.target.value),className:m("address.city")?"error":""}),m("address.city")&&l.jsx("span",{className:"error-message",children:m("address.city")})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"street",children:" *"}),l.jsx("input",{id:"street",type:"text",placeholder:" ",value:((S=r.address)==null?void 0:S.street)||"",onChange:j=>_("street",j.target.value),className:m("address.street")?"error":""}),m("address.street")&&l.jsx("span",{className:"error-message",children:m("address.street")})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"building",children:" / *"}),l.jsx("input",{id:"building",type:"text",placeholder:" ",value:((T=r.address)==null?void 0:T.building)||"",onChange:j=>_("building",j.target.value),className:m("address.building")?"error":""}),m("address.building")&&l.jsx("span",{className:"error-message",children:m("address.building")})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"siteNumber",children:"  *"}),l.jsx("input",{id:"siteNumber",type:"text",placeholder:" ",value:((x=r.address)==null?void 0:x.siteNumber)||"",onChange:j=>_("siteNumber",j.target.value),className:m("address.siteNumber")?"error":""}),m("address.siteNumber")&&l.jsx("span",{className:"error-message",children:m("address.siteNumber")})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"landmark",children:"  ()"}),l.jsx("input",{id:"landmark",type:"text",placeholder:"  ...",value:((O=r.address)==null?void 0:O.landmark)||"",onChange:j=>_("landmark",j.target.value)})]})]})]}),l.jsxs("div",{className:"form-section",children:[l.jsx("h2",{children:" "}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"email",children:"  *"}),l.jsx("input",{id:"email",type:"email",placeholder:"example@example.com",value:r.email||"",onChange:j=>g("email",j.target.value),className:m("email")?"error":""}),m("email")&&l.jsx("span",{className:"error-message",children:m("email")})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"password",children:"  *"}),l.jsx("input",{id:"password",type:"password",placeholder:"  ",value:r.password||"",onChange:j=>g("password",j.target.value),className:m("password")?"error":""}),m("password")&&l.jsx("span",{className:"error-message",children:m("password")})]})]}),l.jsx("button",{type:"submit",disabled:c||i.length>0,className:"submit-button",children:c?" ...":""}),l.jsx("div",{className:"login-link",children:l.jsxs("p",{children:["   ",l.jsx("button",{type:"button",onClick:e,className:"link-button",children:" "})]})})]})]})})},f2=({onLoginSuccess:t,onGoToRegister:e,onAdminLogin:n})=>{const{setStudent:r}=Ns(),[s,i]=$.useState({email:"",password:""}),[o,c]=$.useState(!1),[u,d]=$.useState(""),p=(g,_)=>{i(R=>({...R,[g]:_})),u&&d("")},m=async g=>{if(g.preventDefault(),c(!0),d(""),!s.email||!s.password){d("   "),c(!1);return}try{const _=await kP(s.email,s.password);if(await hu(_.uid)){const L={id:_.uid,fullNameArabic:" ",vehicleNameEnglish:"Admin",whatsappNumber:"",diplomaYear:"",diplomaType:"",track:"",nationalID:"",address:{governorate:"",city:"",street:"",building:"",siteNumber:""},course:"",email:_.email||s.email};r(L),n?n():t();return}const P=await Np(_.uid);P?(r(P),t()):d("     ")}catch(_){d(_.message||"      ")}finally{c(!1)}};return l.jsx("div",{className:"login-page",children:l.jsxs("div",{className:"login-container",children:[l.jsxs("div",{className:"login-header",children:[l.jsx("div",{className:"logo",children:l.jsx("div",{className:"logo-icon",children:""})}),l.jsx("h1",{children:"  "}),l.jsx("p",{children:"     "})]}),u&&l.jsxs("div",{className:"error-alert",children:[l.jsx(Ca,{size:20}),l.jsx("span",{children:u})]}),l.jsxs("form",{onSubmit:m,className:"login-form",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"email",children:" "}),l.jsx("input",{id:"email",type:"email",placeholder:"example@example.com",value:s.email,onChange:g=>p("email",g.target.value),className:u?"error":""})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"password",children:" "}),l.jsx("input",{id:"password",type:"password",placeholder:"  ",value:s.password,onChange:g=>p("password",g.target.value),className:u?"error":""})]}),l.jsx("button",{type:"submit",disabled:o,className:"login-button",children:o?"  ...":" "}),l.jsx("div",{className:"register-link",children:l.jsxs("p",{children:["   ",l.jsx("button",{type:"button",onClick:e,className:"link-button",children:" "})]})})]})]})})},iv=t=>{const e={size:32,strokeWidth:1.5};return{headphones:l.jsx(o2,{...e}),package:l.jsx(Lh,{...e}),book:l.jsx(nv,{...e}),creditcard:l.jsx(Dh,{...e}),checklist:l.jsx(Si,{...e}),award:l.jsx(Cc,{...e}),zap:l.jsx(d2,{...e}),"book-open":l.jsx(t1,{...e}),search:l.jsx(o1,{...e}),target:l.jsx(c2,{...e}),"file-text":l.jsx(kp,{...e}),user:l.jsx(Rp,{...e}),"clipboard-list":l.jsx(n1,{...e}),"file-check":l.jsx(Oh,{...e})}[t]||l.jsx(nv,{...e})},p2=({service:t,onClick:e})=>{const n=()=>{const o=new Date().getFullYear();return o>=2026?o:2026},r=()=>t.nameAr.includes(" ")?`  ${n()}`:t.nameAr,s=()=>{const o={1:"/saveinformation.png",2:"/vip.png",3:"/pay.jpeg",4:"/pay.jpeg",5:"/solveproblem.png",6:"/Certificatesofappreciation.png",7:"/visual.png"}[t.id];return o?l.jsx("img",{src:o,alt:t.nameAr,className:"service-custom-icon",onError:c=>{const u=c.target;u.style.display="none";const d=u.parentElement;d&&(d.innerHTML="",d.appendChild(iv(t.icon)))}}):iv(t.icon)};return l.jsxs("div",{className:"service-card",onClick:e,style:{borderTopColor:t.color,"--accent-color":t.color},children:[l.jsx("div",{className:"service-icon",style:{color:t.color},children:s()}),l.jsx("h3",{className:"service-name",children:r()}),l.jsx("p",{className:"service-description",children:t.descriptionAr}),l.jsx("button",{className:"service-action",children:" "})]})},m2=({onServiceClick:t,onProfileClick:e,onLogout:n,onAllUsersClick:r,onAdminClick:s})=>{const{student:i}=Ns(),[o,c]=$.useState(!1);$.useEffect(()=>{(async()=>{if(i!=null&&i.id){const p=await hu(i.id);c(p)}})()},[i]);const u=d=>d.split(" ")[0];return l.jsxs("div",{className:"dashboard-page",children:[l.jsxs("header",{className:"dashboard-header",children:[l.jsx("div",{className:"header-right",children:l.jsx("div",{className:"logo",children:l.jsx("div",{className:"logo-circle",children:"SS"})})}),l.jsx("div",{className:"header-center",children:l.jsxs("h1",{className:"welcome-message",children:["  ",i!=null&&i.fullNameArabic?u(i.fullNameArabic):""]})}),l.jsxs("div",{className:"header-left",children:[o&&s&&l.jsx("button",{className:"admin-button",onClick:s,title:"  ",children:l.jsx(l2,{size:20})}),l.jsx("button",{className:"all-users-button",onClick:r,title:" ",children:l.jsx(a1,{size:20})}),l.jsx("button",{className:"profile-button",onClick:e,title:" ",children:l.jsx(Rp,{size:20})}),l.jsx("button",{className:"logout-button",onClick:n,title:" ",children:l.jsx(s1,{size:20})})]})]}),l.jsx("main",{className:"dashboard-main",children:l.jsxs("div",{className:"services-container",children:[l.jsx("h2",{className:"services-title",children:" "}),l.jsx("div",{className:"services-grid",children:Ap.map(d=>l.jsx(p2,{service:d,onClick:()=>t(d.id)},d.id))})]})})]})},g2=({onFilesSelected:t,maxFileSize:e=5*1024*1024,acceptedFormats:n=["JPEG","PNG","PDF"]})=>{const[r,s]=$.useState([]),[i,o]=$.useState(""),[c,u]=$.useState(""),[d,p]=$.useState(!1),m=$.useRef(null),g=x=>{var j;return((j=x.split(".").pop())==null?void 0:j.toUpperCase())||""},_=x=>{const O=g(x.name);return n.map(w=>w.toLowerCase()).includes(O.toLowerCase())?x.size>e?{valid:!1,error:`    ${(e/(1024*1024)).toFixed(0)} `}:["image/jpeg","image/jpg","image/png","application/pdf"].includes(x.type)?{valid:!0}:{valid:!1,error:"   .    (JPEG, PNG)   PDF "}:{valid:!1,error:`   .  : ${n.join(", ")}`}},R=x=>{if(o(""),u(""),!x)return;const O=Array.from(x),j=[];if(O.forEach(y=>{const E=_(y);E.valid?j.push(y):o(E.error||"    ")}),j.length===0)return;p(!0);let U=0;const w=[];j.forEach(y=>{const E=new FileReader;E.onload=I=>{var b,N;const k={id:`${Date.now()}_${Math.random()}_${U}`,name:y.name,size:y.size,type:g(y.name),url:(b=I.target)==null?void 0:b.result,preview:(N=I.target)==null?void 0:N.result,file:y};w.push(k),U++,s(ie=>{const tt=[...ie,k];return t(tt),tt}),U===j.length&&(p(!1),u(`  ${w.length} () `))},E.onerror=()=>{U++,p(!1),o("    ")},E.readAsDataURL(y)}),m.current&&(m.current.value="")},P=x=>{x.preventDefault(),x.stopPropagation(),R(x.dataTransfer.files)},L=x=>{x.preventDefault(),x.stopPropagation()},S=x=>{s(O=>{const j=O.filter(U=>U.id!==x);return t(j),j})},T=x=>{if(x===0)return"0 Bytes";const O=1024,j=["Bytes","KB","MB"],U=Math.floor(Math.log(x)/Math.log(O));return Math.round(x/Math.pow(O,U)*100)/100+" "+j[U]};return l.jsxs("div",{className:"file-upload-container",children:[d&&l.jsx("div",{className:"file-upload-overlay",children:l.jsxs("div",{className:"file-upload-loading",children:[l.jsx(r1,{className:"spinning-loader-large",size:48}),l.jsx("p",{children:"  ..."})]})}),l.jsx("div",{className:"upload-section",children:l.jsxs("div",{className:`drop-zone ${d?"processing":""}`,onDrop:P,onDragOver:L,children:[l.jsx(u2,{size:48}),l.jsx("h3",{children:"   "}),l.jsx("p",{children:"     "}),l.jsxs("span",{className:"file-types",children:[" : ",n.join(", ")," |  : 5 "]}),l.jsx("input",{ref:m,type:"file",multiple:!0,accept:n.map(x=>`.${x.toLowerCase()}`).join(","),onChange:x=>R(x.target.files),className:"file-input",disabled:d}),l.jsx("button",{type:"button",onClick:()=>{var x;return(x=m.current)==null?void 0:x.click()},className:"select-button",disabled:d,children:d?" ...":" "})]})}),i&&l.jsxs("div",{className:"alert alert-error",children:[l.jsx(Ca,{size:18}),l.jsx("span",{children:i})]}),c&&l.jsxs("div",{className:"alert alert-success",children:[l.jsx(Si,{size:18}),l.jsx("span",{children:c})]}),r.length>0&&l.jsxs("div",{className:"uploaded-files",children:[l.jsxs("h4",{children:["  (",r.length,")"]}),l.jsx("div",{className:"files-list",children:r.map(x=>l.jsxs("div",{className:"file-item",children:[l.jsxs("div",{className:"file-info",children:[x.preview&&x.type!=="PDF"?l.jsx("img",{src:x.preview,alt:x.name,className:"file-preview"}):l.jsx("div",{className:"file-icon",children:"PDF"}),l.jsxs("div",{className:"file-details",children:[l.jsx("span",{className:"file-name",children:x.name}),l.jsx("span",{className:"file-size",children:T(x.size)})]})]}),l.jsx("button",{type:"button",onClick:()=>S(x.id),className:"remove-button",title:"",children:l.jsx(mn,{size:18})})]},x.id))})]})]})},y2=({serviceId:t,onBack:e,onSubmitSuccess:n})=>{const{student:r,addServiceRequest:s}=Ns(),i=Ap.find(A=>A.id===t),[o,c]=$.useState({}),[u,d]=$.useState(""),[p,m]=$.useState(!1),[g,_]=$.useState(null),[R,P]=$.useState({}),[L,S]=$.useState([]),[T,x]=$.useState({uploading:!1,progress:0}),[O,j]=$.useState(null),[U,w]=$.useState(null),[y,E]=$.useState(null),[I,k]=$.useState([]),[b,N]=$.useState(null),[ie,tt]=$.useState(null);if($.useEffect(()=>{b&&console.log("Certificates config updated:",b)},[b]),$.useEffect(()=>{i!=null&&i.id&&(i.id==="3"&&(async()=>{try{const z=await H0();j(z||{serviceName:"    ",prices:{1:1750,2:3440,3:5160,4:6820,5:8450,6:10200,7:11885,8:13580,9:15210,10:16900},paymentMethods:{instaPay:"01017180923",cashWallet:"01050889591"}})}catch(z){console.error("Error loading book config:",z)}})(),i.id==="4"&&(async()=>{try{const z=await W0();w(z||{prices:{}})}catch(z){console.error("Error loading fees config:",z)}})(),i.id==="5"&&(async()=>{try{const z=await G0();z&&E(z)}catch(z){console.error("Error loading assignments config:",z)}})(),i.id==="6"&&(async()=>{var z,Y;try{console.log("Loading certificates config in ServiceDetailsPage...");const Z=await K0();Z?(console.log("Setting certificates config in ServiceDetailsPage:",((z=Z.certificates)==null?void 0:z.length)||0,"certificates"),console.log("Certificates details:",(Y=Z.certificates)==null?void 0:Y.map(Te=>{var J;return{id:Te.id,name:Te.name,hasImage:!!Te.imageUrl,imageUrlLength:((J=Te.imageUrl)==null?void 0:J.length)||0}})),N(Z)):(console.log("No certificates config found in ServiceDetailsPage"),N(null))}catch(Z){console.error("Error loading certificates config in ServiceDetailsPage:",Z),N(null)}})())},[i==null?void 0:i.id]),$.useEffect(()=>{if(!(!i||!r)&&(i.id==="1"||i.id==="2"||i.id==="4"||i.id==="5"||i.id==="6")){const A={},z=r.address?`${r.address.governorate||""}, ${r.address.city||""}, ${r.address.street||""}, ${r.address.building||""}, ${r.address.siteNumber||""}${r.address.landmark?`, ${r.address.landmark}`:""}`.replace(/^,\s*|,\s*$/g,"").replace(/,\s*,/g,","):"";i.fields.forEach(Z=>{if(Z.type==="editable")switch(Z.name){case"full_name":case"full_name_arabic":A[Z.name]=r.fullNameArabic||"";break;case"full_name_english":A[Z.name]=r.vehicleNameEnglish||"";break;case"national_id":A[Z.name]=r.nationalID||"";break;case"address":A[Z.name]=z;break;case"email":A[Z.name]=r.email||"";break;case"whatsapp_number":A[Z.name]=r.whatsappNumber||"";break}else if(Z.type==="select"&&(i.id==="4"||i.id==="5"))switch(Z.name){case"diploma_type":A[Z.name]="  ";break;case"track_category":case"track":A[Z.name]=" ";break;case"diploma_year":A[Z.name]=" ";break;case"educational_specialization":A[Z.name]=" ";break}}),c(A);const Y={};i.fields.forEach(Z=>{Z.type==="editable"&&(Y[Z.name]=!1)}),P(Y)}},[i,r]),!i||!r)return null;const ln=A=>{P(z=>({...z,[A]:!z[A]}))},re=(A,z)=>{c(Y=>({...Y,[A]:z}))},H=async A=>{A.preventDefault(),m(!0),_(null);const z=i.fields.filter(Y=>Y.required&&!o[Y.name]).map(Y=>Y.label);if(z.length>0){_({type:"error",text:`   : ${z.join(", ")}`}),m(!1);return}if(i.paymentMethods.length>0&&!u){_({type:"error",text:"   "}),m(!1);return}if((i.id==="2"||i.id==="3"||i.id==="4"||i.id==="5"||i.id==="6")&&L.length===0){_({type:"error",text:"    "}),m(!1);return}if(i.id==="5"&&I.length===0){_({type:"error",text:"     "}),m(!1);return}if(i.id==="6"&&!ie){_({type:"error",text:"  "}),m(!1);return}try{x({uploading:!0,progress:0});const Y={...o};if(i.id==="5"){Y.selectedAssignments=I;const Te=(y==null?void 0:y.assignments.filter(J=>I.includes(J.id)))||[];Y.selectedAssignmentsData=Te,Y.totalPrice=Te.reduce((J,Ie)=>J+Ie.price,0)}i.id==="6"&&ie&&(Y.selectedCertificate=ie,Y.totalPrice=ie.price);const Z={studentId:r.id||"",serviceId:i.id,data:Y,documents:i.id==="2"||i.id==="3"||i.id==="4"||i.id==="5"||i.id==="6"?L:[],paymentMethod:u,status:"pending",createdAt:new Date().toISOString()};x({uploading:!0,progress:30}),await new Promise(Te=>setTimeout(Te,150)),x({uploading:!0,progress:60}),await s(Z),x({uploading:!0,progress:100}),await new Promise(Te=>setTimeout(Te,150)),_({type:"success",text:"   !"}),setTimeout(()=>{n()},2e3)}catch(Y){_({type:"error",text:Y.message||"    "}),x({uploading:!1,progress:0})}finally{m(!1),x({uploading:!1,progress:0})}};return i?l.jsxs("div",{className:"service-details-page",children:[l.jsxs("div",{className:"details-header",children:[l.jsxs("button",{onClick:e,className:"back-button",children:[l.jsx(Nc,{size:20}),""]}),l.jsx("h1",{children:i.id==="3"&&O?O.serviceName:i.id==="5"&&y?y.serviceName:i.nameAr})]}),l.jsx("form",{onSubmit:H,className:"details-form",children:l.jsxs("div",{className:"details-container",children:[i.id!=="1"&&l.jsxs("section",{className:"form-section section-personal-data",children:[l.jsx("h2",{children:" "}),l.jsxs("div",{className:"personal-data-display",children:[l.jsxs("div",{className:"data-field",children:[l.jsx("span",{className:"label",children:":"}),l.jsx("span",{className:"value",children:r.fullNameArabic})]}),l.jsxs("div",{className:"data-field",children:[l.jsx("span",{className:"label",children:" :"}),l.jsx("span",{className:"value",children:r.email})]}),l.jsxs("div",{className:"data-field",children:[l.jsx("span",{className:"label",children:" :"}),l.jsx("span",{className:"value",children:r.whatsappNumber})]}),l.jsxs("div",{className:"data-field",children:[l.jsx("span",{className:"label",children:":"}),l.jsx("span",{className:"value",children:r.course})]})]}),l.jsxs("p",{className:"edit-note",children:[l.jsx(Eo,{size:16}),"    .     "]})]}),l.jsxs("section",{className:"form-section section-service-data",children:[l.jsx("h2",{children:i.id==="1"?" ":" "}),l.jsx("div",{className:"service-fields",children:i.fields.map(A=>{var z,Y,Z,Te;if(A.name.endsWith("_other")){const J=A.name.replace("_other",""),Ie=o[J];if(Ie!=="Other"&&Ie!=="")return null}return l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{htmlFor:A.name,children:[A.label,A.required&&l.jsx("span",{className:"required",children:"*"})]}),A.type==="editable"&&l.jsx("div",{className:"editable-field-container",children:R[A.name]?l.jsx("input",{id:A.name,type:A.name==="email"?"email":"text",value:o[A.name]||"",onChange:J=>re(A.name,J.target.value),placeholder:A.name==="email"?"EX******@gmail.com":A.label,required:A.required,className:"editable-input"}):l.jsxs("div",{className:"editable-field-display",children:[l.jsx("input",{id:A.name,type:"text",value:o[A.name]||"",readOnly:!0,className:"readonly-input"}),l.jsx("button",{type:"button",onClick:()=>ln(A.name),className:"edit-field-button",title:"",children:l.jsx(i1,{size:16})})]})}),A.type==="text"&&l.jsx("input",{id:A.name,type:"text",value:o[A.name]||"",onChange:J=>re(A.name,J.target.value),placeholder:A.label,required:A.required}),A.type==="number"&&l.jsx("input",{id:A.name,type:"number",value:o[A.name]||"",onChange:J=>re(A.name,J.target.value),placeholder:A.label,required:A.required}),A.type==="select"&&l.jsx(l.Fragment,{children:A.name==="diploma_year"&&i.id==="4"&&U?l.jsxs("select",{id:A.name,value:o[A.name]||"",onChange:J=>re(A.name,J.target.value),required:A.required,children:[l.jsx("option",{value:"",children:" "}),Object.keys(U.prices).sort((J,Ie)=>parseInt(Ie)-parseInt(J)).map(J=>l.jsxs("option",{value:J,children:[J," - ",U.prices[J]," "]},J))]}):A.name==="track_other"&&i.id==="4"?l.jsx(l.Fragment,{children:o.track_category===""&&l.jsx("input",{type:"text",value:o.track_other||"",onChange:J=>re("track_other",J.target.value),placeholder:" ",required:!1,className:"other-input"})}):l.jsxs(l.Fragment,{children:[l.jsxs("select",{id:A.name,value:o[A.name]||"",onChange:J=>{re(A.name,J.target.value),J.target.value!=="Other"&&J.target.value!==""&&A.hasOther&&re(A.name+"_other",""),A.name==="track_category"&&i.id==="4"&&J.target.value!==""&&re("track_other","")},required:A.required,children:[(Y=(z=A.options)==null?void 0:z[0])!=null&&Y.includes("")?l.jsx("option",{value:A.options[0],children:A.options[0]}):l.jsx("option",{value:"",children:"..."}),(Te=A.options)==null?void 0:Te.slice((Z=A.options[0])!=null&&Z.includes("")?1:0).map(J=>l.jsx("option",{value:J,children:J},J))]}),A.hasOther&&(o[A.name]==="Other"||o[A.name]==="")&&l.jsx("input",{type:"text",value:o[A.name+"_other"]||"",onChange:J=>re(A.name+"_other",J.target.value),placeholder:A.name==="educational_specialization"?" ":A.label.replace("  ","   ").replace("  ","   "),required:A.required,className:"other-input"})]})}),A.type==="textarea"&&l.jsx("textarea",{id:A.name,value:o[A.name]||"",onChange:J=>re(A.name,J.target.value),placeholder:A.label,required:A.required,rows:4})]},A.name)})})]}),i.id==="5"&&y&&l.jsxs("section",{className:"form-section section-assignments",children:[l.jsx("h2",{children:"  "}),l.jsx("div",{className:"assignments-cards-grid",children:y.assignments.map(A=>l.jsxs("div",{className:`assignment-card ${I.includes(A.id)?"selected":""}`,onClick:()=>{I.includes(A.id)?k(I.filter(z=>z!==A.id)):k([...I,A.id])},children:[l.jsxs("div",{className:"assignment-card-content",children:[l.jsx("h3",{children:A.name}),l.jsxs("div",{className:"assignment-price",children:[A.price," "]})]}),I.includes(A.id)&&l.jsx("div",{className:"assignment-selected-indicator",children:""})]},A.id))}),I.length>0&&l.jsxs("div",{className:"selected-assignments-summary",children:[l.jsx("strong",{children:" :"}),l.jsx("div",{className:"selected-assignments-list",children:y.assignments.filter(A=>I.includes(A.id)).map(A=>l.jsxs("span",{className:"selected-assignment-item",children:[A.name," (",A.price," )"]},A.id))}),l.jsx("div",{className:"total-price",children:l.jsxs("strong",{children:[": ",y.assignments.filter(A=>I.includes(A.id)).reduce((A,z)=>A+z.price,0)," "]})})]})]}),i.id==="6"&&b&&b.certificates&&l.jsxs("section",{className:"form-section section-certificates",children:[l.jsx("h2",{children:"  "}),l.jsx("div",{className:"certificates-cards-grid",children:b.certificates.length>0?b.certificates.map(A=>(console.log("Rendering certificate:",A.name,A.imageUrl),l.jsxs("div",{className:`certificate-card ${(ie==null?void 0:ie.id)===A.id?"selected":""}`,onClick:()=>tt(A),children:[l.jsx("div",{className:"certificate-image-section",children:l.jsx("img",{src:A.imageUrl||"/certificat.jpeg",alt:A.name,className:"certificate-image",onError:z=>{console.error("Failed to load image for:",A.name,A.imageUrl),z.currentTarget.src!=="/certificat.jpeg"&&(z.currentTarget.src="/certificat.jpeg")},onLoad:()=>{console.log("Image loaded for:",A.name,A.imageUrl)}})}),l.jsxs("div",{className:"certificate-card-content",children:[l.jsx("h3",{className:"certificate-name",children:A.name}),l.jsxs("div",{className:"certificate-price",children:[A.price," "]}),A.description&&l.jsx("div",{className:"certificate-description",children:l.jsx("p",{children:A.description.split(`
`)[0]})}),A.fields&&A.fields.length>0&&l.jsxs("div",{className:"certificate-fields-count",children:[l.jsx(kp,{size:14}),l.jsxs("span",{children:[A.fields.length,"  "]})]})]}),l.jsx("div",{className:"certificate-select-area",children:(ie==null?void 0:ie.id)===A.id?l.jsxs("div",{className:"selected-badge",children:[l.jsx(Si,{size:16}),l.jsx("span",{children:""})]}):l.jsx("div",{className:"select-button",children:l.jsx("span",{children:""})})})]},A.id))):l.jsxs("div",{className:"no-certificates-message",children:[l.jsx(Cc,{size:48}),l.jsx("h3",{children:"   "}),l.jsx("p",{children:"  "})]})}),ie&&l.jsxs("div",{className:"selected-certificate-form",children:[l.jsxs("div",{className:"form-header",children:[l.jsxs("h3",{children:[" : ",ie.name]}),l.jsxs("p",{className:"selected-price",children:[": ",ie.price," "]})]}),ie.description&&l.jsxs("div",{className:"full-description",children:[l.jsx("h4",{children:" "}),l.jsx("div",{className:"description-text",children:ie.description.split(`
`).map((A,z)=>l.jsx("p",{children:A},z))})]}),ie.fields&&ie.fields.length>0&&l.jsxs("div",{className:"required-fields",children:[l.jsx("h4",{children:" "}),l.jsx("div",{className:"fields-list",children:ie.fields.map(A=>l.jsxs("div",{className:"field-item",children:[l.jsxs("label",{htmlFor:A.name,children:[A.label,A.required&&l.jsx("span",{className:"required",children:"*"})]}),A.type==="text"&&l.jsx("input",{id:A.name,type:"text",value:o[A.name]||"",onChange:z=>re(A.name,z.target.value),placeholder:A.placeholder||A.label,required:A.required}),A.type==="date"&&l.jsx("input",{id:A.name,type:"text",value:o[A.name]||"",onChange:z=>re(A.name,z.target.value),placeholder:A.placeholder||"mm/dd/yyyy",required:A.required}),A.type==="select"&&A.options&&l.jsxs("select",{id:A.name,value:o[A.name]||"",onChange:z=>re(A.name,z.target.value),required:A.required,children:[l.jsx("option",{value:"",children:"..."}),A.options.map(z=>l.jsx("option",{value:z,children:z},z))]})]},A.name))})]})]})]}),i.paymentMethods.length>0&&l.jsxs("section",{className:"form-section section-payment",children:[l.jsx("h2",{children:" "}),i.id==="3"&&O&&l.jsxs("div",{className:"payment-amount",children:[l.jsx("strong",{children:" :"}),l.jsx("div",{className:"book-prices-list",children:Object.entries(O.prices).map(([A,z])=>l.jsxs("div",{className:"price-item-row",children:[l.jsxs("span",{children:["  ",A==="1"?"":`${A} `,":"]}),l.jsxs("strong",{children:[z," "]})]},A))}),o.number_of_copies&&l.jsx("div",{className:"selected-price",children:l.jsxs("strong",{children:["  : ",O.prices[o.number_of_copies]||"   "," "]})})]}),i.id==="4"&&U&&o.diploma_year&&U.prices[o.diploma_year]&&l.jsx("div",{className:"payment-amount",children:l.jsx("div",{className:"selected-price",children:l.jsxs("strong",{children:["   ",o.diploma_year,": ",U.prices[o.diploma_year]," "]})})}),i.id==="5"&&y&&I.length>0&&l.jsx("div",{className:"payment-amount",children:l.jsx("div",{className:"selected-price",children:l.jsxs("strong",{children:["  : ",y.assignments.filter(A=>I.includes(A.id)).reduce((A,z)=>A+z.price,0)," "]})})}),i.id==="6"&&ie&&l.jsx("div",{className:"payment-amount",children:l.jsx("div",{className:"selected-price",children:l.jsxs("strong",{children:["  : ",ie.price," "]})})}),l.jsx("div",{className:"payment-methods",children:i.paymentMethods&&i.paymentMethods.length>0&&i.paymentMethods.map(A=>{let z="";if(i.id==="2"||i.id==="3"||i.id==="4"||i.id==="5"||i.id==="6")if(i.id==="6"&&b)switch(A){case"Vodafone":case"Etisalat":case"Orange":z=b.paymentMethods.cashWallet;break;case"instaPay":z=b.paymentMethods.instaPay;break;default:z=""}else if(i.id==="5"&&y)switch(A){case"Vodafone":case"Etisalat":case"Orange":z=y.paymentMethods.cashWallet;break;case"instaPay":z=y.paymentMethods.instaPay;break;default:z=""}else switch(A){case"Vodafone":case"Etisalat":case"Orange":z="01050889591";break;case"instaPay":z="01017180923";break;default:z=""}return l.jsxs("label",{className:"payment-option",children:[l.jsx("input",{type:"radio",name:"paymentMethod",value:A,checked:u===A,onChange:Y=>d(Y.target.value)}),l.jsxs("div",{className:"payment-info",children:[l.jsx("span",{className:"payment-label",children:A}),z&&l.jsx("span",{className:"payment-number",children:z})]})]},A)})})]}),(i.id==="2"||i.id==="3"||i.id==="4"||i.id==="5"||i.id==="6")&&l.jsxs("section",{className:"form-section section-receipt",children:[l.jsx("h2",{children:"  "}),l.jsx("p",{className:"receipt-note",children:"       "}),l.jsx(g2,{onFilesSelected:S,maxFileSize:5*1024*1024,acceptedFormats:["JPEG","PNG","PDF"]})]}),T.uploading&&l.jsx("div",{className:"loading-overlay",children:l.jsxs("div",{className:"loading-modal",children:[l.jsx("div",{className:"loading-spinner-container",children:l.jsx(r1,{className:"spinning-loader-large",size:64})}),l.jsx("h3",{className:"loading-title",children:i.id==="2"&&L.length>0?"  ":"  "}),l.jsx("p",{className:"loading-subtitle",children:" ..."}),l.jsxs("div",{className:"progress-bar-wrapper",children:[l.jsx("div",{className:"progress-bar-track",children:l.jsx("div",{className:"progress-bar-fill",style:{width:`${T.progress}%`}})}),l.jsxs("span",{className:"progress-percentage-text",children:[T.progress,"%"]})]})]})}),g&&l.jsxs("div",{className:`message ${g.type}`,children:[g.type==="error"&&l.jsx(Ca,{size:18}),l.jsx("span",{children:g.text})]}),l.jsxs("div",{className:"form-actions",children:[l.jsx("button",{type:"button",onClick:e,className:"cancel-button",disabled:p,children:""}),l.jsx("button",{type:"submit",className:"submit-button",disabled:p||(i.id==="2"||i.id==="3"||i.id==="4")&&L.length===0,children:p?" ...":" "})]})]})})]}):l.jsx("div",{className:"service-details-page",children:l.jsxs("div",{className:"details-header",children:[l.jsxs("button",{onClick:e,className:"back-button",children:[l.jsx(Nc,{size:20}),""]}),l.jsx("h1",{children:"  "})]})})},v2=({onBack:t})=>{var T,x,O,j,U,w;const{student:e,setStudent:n}=Ns(),[r,s]=$.useState(!1),[i,o]=$.useState(e||{}),[c,u]=$.useState([]),[d,p]=$.useState(null),[m,g]=$.useState(!1);if(!e)return null;const _=y=>{var E;return(E=c.find(I=>I.field===y))==null?void 0:E.message},R=(y,E)=>{o(I=>({...I,[y]:E})),u(I=>I.filter(k=>k.field!==y))},P=(y,E)=>{o(I=>({...I,address:{...I.address,[y]:E}})),u(I=>I.filter(k=>!k.field.startsWith("address.")))},L=async y=>{y.preventDefault(),g(!0),p(null);const E=Y0(i);if(E.length>0){u(E),g(!1);return}try{if(!e.id){p({type:"error",text:"   "}),g(!1);return}const I={...e,...i,fullNameArabic:i.fullNameArabic||e.fullNameArabic,vehicleNameEnglish:i.vehicleNameEnglish||e.vehicleNameEnglish,whatsappNumber:i.whatsappNumber||e.whatsappNumber,email:i.email||e.email,address:i.address||e.address};await $0(e.id,I),n(I),p({type:"success",text:"   "}),setTimeout(()=>{s(!1)},1500)}catch(I){p({type:"error",text:I.message||"   "})}finally{g(!1)}},S=r?i:e;return l.jsxs("div",{className:"profile-page",children:[l.jsxs("div",{className:"profile-header",children:[l.jsxs("button",{onClick:t,className:"back-button",children:[l.jsx(Nc,{size:20}),""]}),l.jsx("h1",{children:" "}),!r&&l.jsx("button",{onClick:()=>s(!0),className:"edit-profile-button",children:""})]}),l.jsx("form",{onSubmit:L,className:"profile-form",children:l.jsxs("div",{className:"profile-container",children:[d&&l.jsxs("div",{className:`message ${d.type}`,children:[d.type==="success"?l.jsx(Si,{size:18}):l.jsx(Ca,{size:18}),l.jsx("span",{children:d.text})]}),l.jsxs("section",{className:"profile-section",children:[l.jsx("h2",{children:" "}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"fullNameArabic",children:"  ()"}),l.jsx("input",{id:"fullNameArabic",type:"text",dir:"rtl",disabled:!r,value:S.fullNameArabic||"",onChange:y=>R("fullNameArabic",y.target.value),className:_("fullNameArabic")?"error":""}),_("fullNameArabic")&&l.jsx("span",{className:"error-message",children:_("fullNameArabic")})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"vehicleNameEnglish",children:"Vehicle Name (English)"}),l.jsx("input",{id:"vehicleNameEnglish",type:"text",dir:"ltr",disabled:!r,value:S.vehicleNameEnglish||"",onChange:y=>R("vehicleNameEnglish",y.target.value),className:_("vehicleNameEnglish")?"error":""}),_("vehicleNameEnglish")&&l.jsx("span",{className:"error-message",children:_("vehicleNameEnglish")})]}),l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"whatsappNumber",children:" "}),l.jsx("input",{id:"whatsappNumber",type:"tel",disabled:!r,value:S.whatsappNumber||"",onChange:y=>R("whatsappNumber",y.target.value),className:_("whatsappNumber")?"error":""}),_("whatsappNumber")&&l.jsx("span",{className:"error-message",children:_("whatsappNumber")})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"nationalID",children:" "}),l.jsx("input",{id:"nationalID",type:"text",disabled:!r,value:S.nationalID||"",onChange:y=>R("nationalID",y.target.value),className:_("nationalID")?"error":""}),_("nationalID")&&l.jsx("span",{className:"error-message",children:_("nationalID")})]})]})]}),l.jsxs("section",{className:"profile-section",children:[l.jsx("h2",{children:" "}),l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"diplomaYear",children:" "}),l.jsx("select",{id:"diplomaYear",disabled:!r,value:S.diplomaYear||"",onChange:y=>R("diplomaYear",y.target.value),children:X0.map(y=>l.jsx("option",{value:y,children:y},y))})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"diplomaType",children:" "}),l.jsxs("select",{id:"diplomaType",disabled:!r,value:S.diplomaType||"",onChange:y=>R("diplomaType",y.target.value),children:[l.jsx("option",{value:"",children:"  "}),Cp.map(y=>l.jsx("option",{value:y,children:y},y))]})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"track",children:""}),l.jsxs("select",{id:"track",disabled:!r,value:S.track||"",onChange:y=>R("track",y.target.value),children:[l.jsx("option",{value:"",children:" "}),Z0.map(y=>l.jsx("option",{value:y,children:y},y))]})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"course",children:""}),l.jsxs("select",{id:"course",disabled:!r,value:S.course||"",onChange:y=>R("course",y.target.value),children:[l.jsx("option",{value:"",children:" "}),e1.map(y=>l.jsx("option",{value:y,children:y},y))]})]})]})]}),l.jsxs("section",{className:"profile-section",children:[l.jsx("h2",{children:""}),l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"governorate",children:""}),l.jsxs("select",{id:"governorate",disabled:!r,value:((T=S.address)==null?void 0:T.governorate)||"",onChange:y=>P("governorate",y.target.value),children:[l.jsx("option",{value:"",children:" "}),J0.map(y=>l.jsx("option",{value:y,children:y},y))]})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"city",children:""}),l.jsx("input",{id:"city",type:"text",disabled:!r,value:((x=S.address)==null?void 0:x.city)||"",onChange:y=>P("city",y.target.value)})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"street",children:""}),l.jsx("input",{id:"street",type:"text",disabled:!r,value:((O=S.address)==null?void 0:O.street)||"",onChange:y=>P("street",y.target.value)})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"building",children:" /"}),l.jsx("input",{id:"building",type:"text",disabled:!r,value:((j=S.address)==null?void 0:j.building)||"",onChange:y=>P("building",y.target.value)})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"siteNumber",children:" "}),l.jsx("input",{id:"siteNumber",type:"text",disabled:!r,value:((U=S.address)==null?void 0:U.siteNumber)||"",onChange:y=>P("siteNumber",y.target.value)})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"landmark",children:"  ()"}),l.jsx("input",{id:"landmark",type:"text",disabled:!r,value:((w=S.address)==null?void 0:w.landmark)||"",onChange:y=>P("landmark",y.target.value)})]})]})]}),l.jsxs("section",{className:"profile-section",children:[l.jsx("h2",{children:" "}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"email",children:" "}),l.jsx("input",{id:"email",type:"email",disabled:!r,value:S.email||"",onChange:y=>R("email",y.target.value),className:_("email")?"error":""}),_("email")&&l.jsx("span",{className:"error-message",children:_("email")})]})]}),r&&l.jsxs("div",{className:"form-actions",children:[l.jsx("button",{type:"button",onClick:()=>{s(!1),o(e),u([])},className:"cancel-button",disabled:m,children:""}),l.jsx("button",{type:"submit",className:"save-button",disabled:m,children:m?" ...":" "})]})]})})]})},_2=({onBack:t})=>{const[e,n]=$.useState([]),[r,s]=$.useState(!0),[i,o]=$.useState({}),[c,u]=$.useState("");$.useEffect(()=>{s(!0);const g=q0(_=>{n(_),s(!1)});return()=>g()},[]);const d=g=>{o(_=>({..._,[g]:!_[g]}))},p=e.filter(g=>{var R,P,L,S;const _=c.toLowerCase();return((R=g.fullNameArabic)==null?void 0:R.toLowerCase().includes(_))||((P=g.email)==null?void 0:P.toLowerCase().includes(_))||((L=g.whatsappNumber)==null?void 0:L.includes(c))||((S=g.nationalID)==null?void 0:S.includes(c))}),m=g=>{if(!g)return" ";try{return new Date(g).toLocaleString("ar-EG",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return g}};return r?l.jsx("div",{className:"all-users-page",children:l.jsxs("div",{className:"loading-container",children:[l.jsx(a2,{className:"spinning",size:32}),l.jsx("p",{children:"  ..."})]})}):l.jsxs("div",{className:"all-users-page",children:[l.jsxs("div",{className:"users-header",children:[l.jsxs("button",{onClick:t,className:"back-button",children:[l.jsx(Nc,{size:20}),""]}),l.jsx("h1",{children:"  "}),l.jsx("div",{className:"header-info",children:l.jsxs("span",{className:"count-badge",children:[" : ",e.length]})})]}),l.jsx("div",{className:"users-controls",children:l.jsx("div",{className:"search-box",children:l.jsx("input",{type:"text",placeholder:"        ...",value:c,onChange:g=>u(g.target.value),className:"search-input"})})}),l.jsx("div",{className:"users-container",children:p.length===0?l.jsx("div",{className:"empty-state",children:l.jsx("p",{children:c?"    ":"    "})}):l.jsx("div",{className:"users-grid",children:p.map(g=>{var _;return l.jsxs("div",{className:"user-card",children:[l.jsxs("div",{className:"user-card-header",children:[l.jsx("div",{className:"user-avatar",children:((_=g.fullNameArabic)==null?void 0:_.charAt(0))||"U"}),l.jsxs("div",{className:"user-name",children:[l.jsx("h3",{children:g.fullNameArabic||" "}),l.jsx("p",{className:"user-email",children:g.email})]})]}),l.jsxs("div",{className:"user-details",children:[l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{className:"detail-label",children:"Vehicle Name:"}),l.jsx("span",{className:"detail-value",children:g.vehicleNameEnglish||" "})]}),l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{className:"detail-label",children:" :"}),l.jsx("span",{className:"detail-value",children:g.whatsappNumber||" "})]}),l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{className:"detail-label",children:" :"}),l.jsx("span",{className:"detail-value",children:g.nationalID||" "})]}),l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{className:"detail-label",children:" :"}),l.jsx("span",{className:"detail-value",children:g.diplomaYear||" "})]}),l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{className:"detail-label",children:" :"}),l.jsx("span",{className:"detail-value",children:g.diplomaType||" "})]}),l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{className:"detail-label",children:":"}),l.jsx("span",{className:"detail-value",children:g.track||" "})]}),l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{className:"detail-label",children:":"}),l.jsx("span",{className:"detail-value",children:g.course||" "})]}),g.address&&l.jsxs("div",{className:"detail-section",children:[l.jsx("strong",{className:"section-title",children:":"}),l.jsxs("div",{className:"address-details",children:[l.jsx("span",{children:g.address.governorate}),g.address.city&&l.jsxs("span",{children:[" - ",g.address.city]}),g.address.street&&l.jsxs("span",{children:[" - ",g.address.street]}),g.address.building&&l.jsxs("span",{children:[" -  ",g.address.building]}),g.address.siteNumber&&l.jsxs("span",{children:[" -  ",g.address.siteNumber]}),g.address.landmark&&l.jsxs("span",{children:[" -  ",g.address.landmark]})]})]}),l.jsxs("div",{className:"detail-row password-row",children:[l.jsx("span",{className:"detail-label",children:" :"}),l.jsxs("div",{className:"password-display",children:[l.jsx("span",{className:"detail-value password-value",children:i[g.id||""]?g.password||" ":""}),l.jsx("button",{type:"button",onClick:()=>d(g.id||""),className:"toggle-password-btn",title:i[g.id||""]?"":"",children:i[g.id||""]?l.jsx(s2,{size:16}):l.jsx(Vh,{size:16})})]})]}),l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{className:"detail-label",children:" :"}),l.jsx("span",{className:"detail-value",children:m(g.createdAt)})]})]})]},g.id)})})})]})},w2=({onLogout:t,onBack:e})=>{var ks,un,$i,Hr;const{student:n}=Ns(),[r,s]=$.useState([]),[i,o]=$.useState({}),[c,u]=$.useState(null),[d,p]=$.useState("requests"),[m,g]=$.useState(null),[_,R]=$.useState(null),[P,L]=$.useState(null),[S,T]=$.useState(null),[x,O]=$.useState(!1),[j,U]=$.useState(!1),[w,y]=$.useState(""),[E,I]=$.useState(""),[k,b]=$.useState(""),[N,ie]=$.useState(""),[tt,ln]=$.useState(""),[re,H]=$.useState(null),[A,z]=$.useState(!0),[Y,Z]=$.useState(null),[Te,J]=$.useState([]),[Ie,Pt]=$.useState(""),[cn,kn]=$.useState(!1),[ce,_t]=$.useState(null),[Oi,Li]=$.useState(""),[$r,Mi]=$.useState("");$.useEffect(()=>{if(!(n!=null&&n.id))return;(async()=>{if(!await hu(n.id||"")){e();return}z(!1)})()},[n,e]),$.useEffect(()=>{if(A)return;const C=MP(pe=>{s(pe),(async()=>{const ve={};for(const dn of pe)if(!ve[dn.studentId])try{const Ye=await Np(dn.studentId);Ye&&(ve[dn.studentId]=Ye)}catch(Ye){console.error(`Error fetching student ${dn.studentId}:`,Ye)}o(ve)})()});return(async()=>{try{const pe=await H0();g(pe||{serviceName:"    ",prices:{1:1750,2:3440,3:5160,4:6820,5:8450,6:10200,7:11885,8:13580,9:15210,10:16900},paymentMethods:{instaPay:"01017180923",cashWallet:"01050889591"}})}catch(pe){console.error("Error loading book config:",pe)}})(),(async()=>{try{const pe=await W0();R(pe||{prices:{}})}catch(pe){console.error("Error loading fees config:",pe)}})(),(async()=>{try{const pe=await G0();L(pe||{serviceName:"    ",assignments:[],paymentMethods:{instaPay:"01017180923",cashWallet:"01050889591"}})}catch(pe){console.error("Error loading assignments config:",pe)}})(),(async()=>{var pe;try{console.log("Loading certificates config in AdminDashboard...");const rt=await K0();if(rt)console.log("Setting certificates config in AdminDashboard:",((pe=rt.certificates)==null?void 0:pe.length)||0,"certificates"),T(rt);else{console.log("No config found, using default certificates config");const ve={certificates:[{id:"1",name:"  ",price:4e3,imageUrl:"/certificat.jpeg",description:""},{id:"2",name:"  ",price:5e3,imageUrl:"/service.jpg",description:`  

                             `,fields:[{name:"qualification_name",label:" ",type:"text",required:!0,placeholder:":   /  "},{name:"qualification_date",label:"     ",type:"date",required:!0,placeholder:":  2022 /  2024"}]},{id:"3",name:"  ",price:5e3,imageUrl:"/omaya.jpeg",description:`  

                          `},{id:"4",name:"  ()",price:5e3,imageUrl:"/exprince.jpg",description:`  ( )

                 `,fields:[{name:"work_start_date",label:"   ",type:"date",required:!0,placeholder:"mm/dd/yyyy"},{name:"work_end_date",label:"   ",type:"date",required:!0,placeholder:"mm/dd/yyyy"},{name:"subject_specialization",label:" ",type:"text",required:!0,placeholder:":  -  -  . ..."}]}],paymentMethods:{instaPay:"01017180923",cashWallet:"01050889591"}};try{const dn={certificates:ve.certificates.map(Ye=>({id:Ye.id,name:Ye.name,price:Ye.price,imageUrl:Ye.imageUrl||"",description:Ye.description||"",fields:Ye.fields||[]})),paymentMethods:ve.paymentMethods};await tv(dn),console.log("Default certificates config saved to Firebase")}catch(dn){console.error("Error saving default config:",dn)}T(ve)}}catch(rt){console.error("Error loading certificates config:",rt)}})(),()=>C()},[A]),$.useEffect(()=>{if(A||d!=="users"){J([]);return}if(Ie.trim())return;const C=q0(W=>{console.log("Students loaded:",W.length),J(W)},W=>{console.error("Error subscribing to students:",W),alert("     ")});return()=>C()},[A,d,Ie]);const Aa=async(C,W,ye)=>{try{await FP(C,W,ye)}catch(oe){alert(oe.message||"     ")}},Fi=async()=>{if(m)try{await UP(m),O(!1),alert("   ")}catch(C){alert(C.message||"    ")}},Ui=async()=>{if(_)try{await zP(_),U(!1),alert("    ")}catch(C){alert(C.message||"    ")}},ka=async()=>{if(P)try{await BP(P),alert("    ")}catch(C){alert(C.message||"    ")}},Qe=()=>{if(!w||!E||!P)return;const C=parseFloat(E);if(isNaN(C)||C<=0){alert("   ");return}const W={id:Date.now().toString(),name:w,price:C};L({...P,assignments:[...P.assignments,W]}),y(""),I("")},nt=C=>{P&&L({...P,assignments:P.assignments.filter(W=>W.id!==C)})},Cs=async()=>{if(S)try{await tv(S),alert("    ")}catch(C){alert(C.message||"    ")}},fu=()=>{if(!k||!N||!S)return;const C=parseFloat(N);if(isNaN(C)||C<=0){alert("   ");return}const W={id:Date.now().toString(),name:k,price:C,imageUrl:"",description:tt||void 0};T({...S,certificates:[...S.certificates,W]}),b(""),ie(""),ln("")},Ra=C=>{S&&confirm("      ")&&T({...S,certificates:S.certificates.filter(W=>W.id!==C)})},pu=C=>{H({...C,fields:C.fields?[...C.fields]:void 0})},qr=()=>{!re||!S||(T({...S,certificates:S.certificates.map(C=>C.id===re.id?re:C)}),H(null))},zi=(C,W)=>{if(!re||re.id!==C){console.error("Certificate ID mismatch or editingCertificate is null");return}if(!W.type.startsWith("image/")){alert("    ");return}if(W.size>5*1024*1024){alert("   .   5 ");return}const ye=new FileReader;ye.onloadend=()=>{const oe=ye.result;oe&&(H({...re,imageUrl:oe}),console.log("Image uploaded successfully"))},ye.onerror=()=>{alert("    ")},ye.readAsDataURL(W)},Pa=()=>{if(!Oi||!$r||!_)return;const C=parseFloat($r);if(isNaN(C)||C<=0){alert("   ");return}R({..._,prices:{..._.prices,[Oi]:C}}),Li(""),Mi("")},Bi=C=>{if(!_)return;const W={..._.prices};delete W[C],R({..._,prices:W})},mu=async()=>{if(!Ie.trim()){J([]);return}try{const C=await bP(Ie);console.log("Search results:",C.length),J(C)}catch(C){console.error("Search error:",C),alert(C.message||"   ")}};$.useEffect(()=>{if(d!=="users"||A||!Ie.trim())return;const C=setTimeout(()=>{mu()},300);return()=>clearTimeout(C)},[Ie,d,A]);const gu=C=>{_t({...C}),kn(!0)},ba=async()=>{if(!(!ce||!ce.id))try{await $0(ce.id,ce),kn(!1),alert("    ")}catch(C){alert(C.message||"    ")}},ja=C=>r.filter(W=>W.studentId===C),Rn=C=>C==="3"&&m?m.serviceName:C==="5"&&P?P.serviceName:{1:" ",2:" ",3:"  ",4:"  ",5:"  ",6:" ",7:"   ",8:" ",9:" ",10:" "}[C]||` ${C}`,As=C=>{switch(C){case"completed":return l.jsxs("span",{className:"status-badge status-completed",children:[l.jsx(Si,{size:14})," "]});case"rejected":return l.jsxs("span",{className:"status-badge status-rejected",children:[l.jsx(sv,{size:14})," "]});default:return l.jsxs("span",{className:"status-badge status-pending",children:[l.jsx(r2,{size:14}),"  "]})}};return A?l.jsx("div",{className:"admin-dashboard-page",children:l.jsx("div",{className:"loading-container",children:l.jsx("p",{children:" ..."})})}):l.jsxs("div",{className:"admin-dashboard-page",children:[l.jsx("div",{className:"admin-header",children:l.jsxs("div",{className:"admin-header-content",children:[l.jsx("h1",{children:"  "}),l.jsxs("div",{className:"admin-actions",children:[l.jsx("button",{onClick:e,className:"back-button",children:""}),l.jsxs("button",{onClick:t,className:"logout-button",children:[l.jsx(s1,{size:18})," "]})]})]})}),l.jsxs("div",{className:"admin-tabs",children:[l.jsx("button",{className:`tab-button ${d==="requests"?"active":""}`,onClick:()=>p("requests"),children:" "}),l.jsxs("button",{className:`tab-button ${d==="books"?"active":""}`,onClick:()=>p("books"),children:[l.jsx(Lh,{size:18})," "]}),l.jsxs("button",{className:`tab-button ${d==="fees"?"active":""}`,onClick:()=>p("fees"),children:[l.jsx(Dh,{size:18}),"   "]}),l.jsxs("button",{className:`tab-button ${d==="assignments"?"active":""}`,onClick:()=>p("assignments"),children:[l.jsx(Oh,{size:18})," "]}),l.jsxs("button",{className:`tab-button ${d==="certificates"?"active":""}`,onClick:()=>p("certificates"),children:[l.jsx(Cc,{size:18})," "]}),l.jsxs("button",{className:`tab-button ${d==="users"?"active":""}`,onClick:()=>p("users"),children:[l.jsx(a1,{size:18}),""]})]}),d==="requests"&&l.jsx("div",{className:"admin-content",children:l.jsxs("div",{className:"requests-section",children:[l.jsxs("h2",{children:["  (",r.length,")"]}),l.jsx("div",{className:"services-files-grid",children:Ap.map(C=>{const W=r.filter(ve=>ve.serviceId===C.id),ye=W.filter(ve=>ve.status==="pending").length,oe=W.length,Ft=Y===C.id;let pe=C.nameAr;C.id==="3"&&m?pe=m.serviceName:C.id==="5"&&P&&(pe=P.serviceName);const rt=()=>{const ve={size:32};switch(C.icon){case"clipboard-list":return l.jsx(n1,{...ve});case"user":return l.jsx(Rp,{...ve});case"package":return l.jsx(Lh,{...ve});case"credit-card":return l.jsx(Dh,{...ve});case"book-open":return l.jsx(t1,{...ve});case"graduation-cap":return l.jsx(i2,{...ve});case"file-check":return l.jsx(Oh,{...ve});case"award":return l.jsx(Cc,{...ve});default:return l.jsx(kp,{...ve})}};return l.jsxs("div",{className:`service-file ${Ft?"selected":""}`,onClick:()=>Z(Ft?null:C.id),children:[l.jsx("div",{className:"service-file-icon",style:{color:C.color},children:rt()}),l.jsx("div",{className:"service-file-name",children:pe}),l.jsxs("div",{className:"service-file-stats",children:[l.jsxs("div",{className:"service-file-stat-item service-file-stat-new",children:[l.jsx("span",{className:"stat-label",children:""}),l.jsx("span",{className:"stat-value",children:ye})]}),l.jsxs("div",{className:"service-file-stat-item service-file-stat-total",children:[l.jsx("span",{className:"stat-label",children:""}),l.jsx("span",{className:"stat-value",children:oe})]})]})]},C.id)})}),Y&&l.jsxs("div",{className:"selected-service-requests",children:[l.jsxs("div",{className:"selected-service-header",children:[l.jsx("h3",{children:Rn(Y)}),l.jsx("button",{onClick:()=>Z(null),className:"close-service-button",children:l.jsx(mn,{size:20})})]}),l.jsx("div",{className:"requests-grid",children:r.filter(C=>C.serviceId===Y).length===0?l.jsx("div",{className:"no-requests-message",children:l.jsx("p",{children:"    "})}):r.filter(C=>C.serviceId===Y).map(C=>{var ye,oe,Ft;const W=i[C.studentId];return l.jsxs("div",{className:"request-card",children:[l.jsxs("div",{className:"request-header",children:[l.jsxs("div",{className:"request-info",children:[l.jsx("h3",{children:Rn(C.serviceId)}),As(C.status)]}),l.jsx("div",{className:"request-actions",children:l.jsx("button",{onClick:()=>u(C),className:"view-button",title:" ",children:l.jsx(Vh,{size:18})})})]}),l.jsxs("div",{className:"request-card-body",children:[C.serviceId==="6"&&((oe=(ye=C.data)==null?void 0:ye.selectedCertificate)==null?void 0:oe.imageUrl)&&l.jsx("div",{className:"certificate-image-preview",children:l.jsx("img",{src:C.data.selectedCertificate.imageUrl,alt:C.data.selectedCertificate.name,className:"certificate-thumbnail-small"})}),l.jsxs("div",{className:"request-details",children:[l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{className:"detail-label",children:":"}),l.jsx("span",{className:"detail-value",children:(W==null?void 0:W.fullNameArabic)||" "})]}),l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{className:"detail-label",children:":"}),l.jsx("span",{className:"detail-value",children:(W==null?void 0:W.email)||" "})]}),l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{className:"detail-label",children:":"}),l.jsx("span",{className:"detail-value",children:C.createdAt?new Date(C.createdAt).toLocaleString("ar-EG"):" "})]}),C.paymentMethod&&l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{className:"detail-label",children:" :"}),l.jsx("span",{className:"detail-value",children:C.paymentMethod})]}),C.serviceId==="6"&&((Ft=C.data)==null?void 0:Ft.selectedCertificate)&&l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{className:"detail-label",children:" :"}),l.jsx("span",{className:"detail-value",children:C.data.selectedCertificate.name})]})]})]}),l.jsxs("div",{className:"request-status-actions",children:[l.jsxs("button",{onClick:()=>Aa(C.id||"","completed",C.serviceId),className:`status-button ${C.status==="completed"?"active":""}`,disabled:C.status==="completed",children:[l.jsx(Si,{size:16}),""]}),l.jsxs("button",{onClick:()=>Aa(C.id||"","rejected",C.serviceId),className:`status-button reject ${C.status==="rejected"?"active":""}`,disabled:C.status==="rejected",children:[l.jsx(sv,{size:16}),""]})]})]},C.id)})})]})]})}),d==="books"&&l.jsx("div",{className:"admin-content",children:l.jsxs("div",{className:"books-section",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("h2",{children:"  "}),x?l.jsxs("div",{className:"edit-actions",children:[l.jsxs("button",{onClick:Fi,className:"save-button",children:[l.jsx(js,{size:18}),""]}),l.jsxs("button",{onClick:()=>O(!1),className:"cancel-edit-button",children:[l.jsx(mn,{size:18}),""]})]}):l.jsxs("button",{onClick:()=>O(!0),className:"edit-button",children:[l.jsx(Eo,{size:18}),""]})]}),m&&l.jsxs("div",{className:"book-config-form",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:" "}),x?l.jsx("input",{type:"text",value:m.serviceName,onChange:C=>g({...m,serviceName:C.target.value}),className:"config-input"}):l.jsx("div",{className:"config-display",children:m.serviceName})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:" "}),l.jsx("div",{className:"prices-grid",children:Object.entries(m.prices).map(([C,W])=>l.jsxs("div",{className:"price-item",children:[l.jsxs("label",{children:["  ",C==="1"?"":`${C} `]}),x?l.jsx("input",{type:"number",value:W,onChange:ye=>g({...m,prices:{...m.prices,[C]:parseInt(ye.target.value)||0}}),className:"price-input"}):l.jsxs("div",{className:"price-display",children:[W," "]})]},C))})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:" "}),l.jsxs("div",{className:"payment-numbers",children:[l.jsxs("div",{className:"payment-item",children:[l.jsx("label",{children:"instaPay"}),x?l.jsx("input",{type:"text",value:m.paymentMethods.instaPay,onChange:C=>g({...m,paymentMethods:{...m.paymentMethods,instaPay:C.target.value}}),className:"config-input"}):l.jsx("div",{className:"config-display",children:m.paymentMethods.instaPay})]}),l.jsxs("div",{className:"payment-item",children:[l.jsx("label",{children:" "}),x?l.jsx("input",{type:"text",value:m.paymentMethods.cashWallet,onChange:C=>g({...m,paymentMethods:{...m.paymentMethods,cashWallet:C.target.value}}),className:"config-input"}):l.jsx("div",{className:"config-display",children:m.paymentMethods.cashWallet})]})]})]})]})]})}),d==="fees"&&l.jsx("div",{className:"admin-content",children:l.jsxs("div",{className:"books-section",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("h2",{children:"   "}),l.jsx("div",{className:"edit-actions",children:j?l.jsxs(l.Fragment,{children:[l.jsxs("button",{onClick:Ui,className:"save-button",children:[l.jsx(js,{size:18}),""]}),l.jsxs("button",{onClick:()=>U(!1),className:"cancel-edit-button",children:[l.jsx(mn,{size:18}),""]})]}):l.jsxs("button",{onClick:()=>U(!0),className:"edit-button",children:[l.jsx(Eo,{size:18}),""]})})]}),_&&l.jsx("div",{className:"book-config-form",children:l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"    "}),l.jsx("div",{className:"prices-grid",children:Object.entries(_.prices).sort(([C],[W])=>parseInt(W)-parseInt(C)).map(([C,W])=>l.jsxs("div",{className:"price-item",children:[l.jsx("label",{children:C}),j?l.jsxs("div",{className:"price-item-edit",children:[l.jsx("input",{type:"number",value:W,onChange:ye=>{const oe=parseFloat(ye.target.value);!isNaN(oe)&&oe>=0&&R({..._,prices:{..._.prices,[C]:oe}})},className:"price-input",min:"0",step:"0.01"}),l.jsx("button",{onClick:()=>Bi(C),className:"remove-price-button",title:"",children:l.jsx(mn,{size:16})})]}):l.jsxs("div",{className:"price-display",children:[W," "]})]},C))}),j&&l.jsx("div",{className:"add-price-section",children:l.jsxs("div",{className:"add-price-form",children:[l.jsx("input",{type:"text",placeholder:"  (: 2026)",value:Oi,onChange:C=>Li(C.target.value),className:"config-input",style:{width:"200px"}}),l.jsx("input",{type:"number",placeholder:" ",value:$r,onChange:C=>Mi(C.target.value),className:"config-input",style:{width:"200px"},min:"0",step:"0.01"}),l.jsx("button",{onClick:Pa,className:"add-price-button",children:""})]})})]})})]})}),d==="assignments"&&l.jsx("div",{className:"admin-content",children:l.jsxs("div",{className:"books-section",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("h2",{children:"  "}),l.jsxs("button",{onClick:ka,className:"save-button",children:[l.jsx(js,{size:18}),""]})]}),P&&l.jsxs("div",{className:"book-config-form",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:" "}),l.jsx("input",{type:"text",value:P.serviceName,onChange:C=>L({...P,serviceName:C.target.value}),className:"config-input",placeholder:"    "})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:" "}),l.jsx("div",{className:"assignments-list",children:P.assignments.length===0?l.jsx("div",{className:"no-assignments-message",children:l.jsx("p",{children:"   "})}):P.assignments.map(C=>l.jsxs("div",{className:"assignment-item",children:[l.jsxs("div",{className:"assignment-info",children:[l.jsx("span",{className:"assignment-name",children:C.name}),l.jsxs("span",{className:"assignment-price",children:[C.price," "]})]}),l.jsx("button",{onClick:()=>nt(C.id),className:"remove-assignment-button",title:"",children:l.jsx(mn,{size:16})})]},C.id))}),l.jsx("div",{className:"add-assignment-section",children:l.jsxs("div",{className:"add-assignment-form",children:[l.jsx("input",{type:"text",placeholder:" ",value:w,onChange:C=>y(C.target.value),className:"config-input",style:{width:"300px"}}),l.jsx("input",{type:"number",placeholder:" ",value:E,onChange:C=>I(C.target.value),className:"config-input",style:{width:"200px"},min:"0",step:"0.01"}),l.jsx("button",{onClick:Qe,className:"add-price-button",children:" "})]})})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:" "}),l.jsxs("div",{className:"payment-numbers",children:[l.jsxs("div",{className:"payment-item",children:[l.jsx("label",{children:"instaPay"}),l.jsx("input",{type:"text",value:P.paymentMethods.instaPay,onChange:C=>L({...P,paymentMethods:{...P.paymentMethods,instaPay:C.target.value}}),className:"config-input"})]}),l.jsxs("div",{className:"payment-item",children:[l.jsx("label",{children:" "}),l.jsx("input",{type:"text",value:P.paymentMethods.cashWallet,onChange:C=>L({...P,paymentMethods:{...P.paymentMethods,cashWallet:C.target.value}}),className:"config-input"})]})]})]})]})]})}),d==="certificates"&&l.jsx("div",{className:"admin-content",children:l.jsxs("div",{className:"books-section",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("h2",{children:"  "}),l.jsxs("button",{onClick:Cs,className:"save-button",children:[l.jsx(js,{size:18}),""]})]}),S&&l.jsxs("div",{className:"book-config-form",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:" "}),l.jsx("div",{className:"certificates-list",children:S.certificates.map(C=>l.jsx("div",{className:"certificate-item-admin",children:(re==null?void 0:re.id)===C.id?l.jsxs("div",{className:"certificate-edit-form",children:[l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:" "}),l.jsx("input",{type:"text",value:re.name,onChange:W=>H({...re,name:W.target.value}),className:"config-input"})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:" ()"}),l.jsx("input",{type:"number",value:re.price,onChange:W=>H({...re,price:parseFloat(W.target.value)||0}),className:"config-input",min:"0",step:"0.01"})]})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:""}),l.jsxs("div",{className:"image-upload-section",children:[l.jsx("div",{style:{position:"relative",display:"flex",flexDirection:"column",gap:"12px",alignItems:"flex-start"},children:re.imageUrl?l.jsxs(l.Fragment,{children:[l.jsx("div",{style:{position:"relative",display:"inline-block"},children:l.jsx("img",{src:re.imageUrl,alt:re.name,className:"certificate-preview-image"})}),l.jsx("input",{type:"file",accept:"image/*",onChange:W=>{var oe;const ye=(oe=W.target.files)==null?void 0:oe[0];ye&&zi(re.id,ye),W.target&&(W.target.value="")},className:"file-input",id:`certificate-image-input-${re.id}`,style:{display:"none"}}),l.jsxs("label",{htmlFor:`certificate-image-input-${re.id}`,className:"change-image-button",title:" ",children:[l.jsx(i1,{size:16})," "]})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"no-image-placeholder",children:[l.jsx(rv,{size:48}),l.jsx("span",{children:"  "})]}),l.jsx("input",{type:"file",accept:"image/*",onChange:W=>{var oe;const ye=(oe=W.target.files)==null?void 0:oe[0];ye&&zi(re.id,ye),W.target&&(W.target.value="")},className:"file-input",id:`certificate-image-input-new-${re.id}`,style:{display:"none"}}),l.jsxs("label",{htmlFor:`certificate-image-input-new-${re.id}`,className:"change-image-button",title:" ",children:[l.jsx(rv,{size:16})," "]})]})}),l.jsx("small",{style:{color:"#64748b",fontSize:"12px",marginTop:"8px",display:"block"},children:"JPEG, PNG, JPG -   5 "})]})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"  ()"}),l.jsx("textarea",{value:re.description||"",onChange:W=>H({...re,description:W.target.value}),className:"config-input",rows:4,placeholder:"      "})]}),l.jsxs("div",{className:"edit-actions",children:[l.jsxs("button",{onClick:qr,className:"save-button",children:[l.jsx(js,{size:16})," "]}),l.jsxs("button",{onClick:()=>H(null),className:"cancel-edit-button",children:[l.jsx(mn,{size:16}),""]})]})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"certificate-info",children:[C.imageUrl&&l.jsx("img",{src:C.imageUrl,alt:C.name,className:"certificate-thumbnail"}),l.jsxs("div",{className:"certificate-details",children:[l.jsx("h3",{children:C.name}),l.jsxs("div",{className:"certificate-price",children:[C.price," "]}),C.description&&l.jsxs("div",{className:"certificate-description-preview",children:[C.description.substring(0,100),"..."]})]})]}),l.jsxs("div",{className:"certificate-actions",children:[l.jsx("button",{onClick:()=>pu(C),className:"edit-button",title:"",children:l.jsx(Eo,{size:16})}),l.jsx("button",{onClick:()=>Ra(C.id),className:"remove-assignment-button",title:"",children:l.jsx(mn,{size:16})})]})]})},C.id))}),l.jsxs("div",{className:"add-certificate-section",children:[l.jsx("h3",{children:"  "}),l.jsxs("div",{className:"add-certificate-form",children:[l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:" "}),l.jsx("input",{type:"text",placeholder:" ",value:k,onChange:C=>b(C.target.value),className:"config-input"})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:" ()"}),l.jsx("input",{type:"number",placeholder:"",value:N,onChange:C=>ie(C.target.value),className:"config-input",min:"0",step:"0.01"})]})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"  ()"}),l.jsx("textarea",{placeholder:"   ",value:tt,onChange:C=>ln(C.target.value),className:"config-input",rows:3})]}),l.jsx("button",{onClick:fu,className:"add-price-button",children:" "})]})]})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:" "}),l.jsxs("div",{className:"payment-numbers",children:[l.jsxs("div",{className:"payment-item",children:[l.jsx("label",{children:"instaPay"}),l.jsx("input",{type:"text",value:S.paymentMethods.instaPay,onChange:C=>T({...S,paymentMethods:{...S.paymentMethods,instaPay:C.target.value}}),className:"config-input"})]}),l.jsxs("div",{className:"payment-item",children:[l.jsx("label",{children:" "}),l.jsx("input",{type:"text",value:S.paymentMethods.cashWallet,onChange:C=>T({...S,paymentMethods:{...S.paymentMethods,cashWallet:C.target.value}}),className:"config-input"})]})]})]})]})]})}),d==="users"&&l.jsx("div",{className:"admin-content",children:l.jsxs("div",{className:"users-section",children:[l.jsxs("h2",{children:[" (",Te.length,")"]}),l.jsx("div",{className:"search-bar",children:l.jsxs("div",{className:"search-input-wrapper",children:[l.jsx(o1,{size:20,className:"search-icon"}),l.jsx("input",{type:"text",placeholder:"  :          ...",value:Ie,onChange:C=>Pt(C.target.value),className:"search-input"})]})}),l.jsx("div",{className:"users-grid",children:Te.length===0?l.jsx("div",{className:"no-users-message",children:l.jsx("p",{children:"  "})}):Te.map(C=>{var oe,Ft,pe,rt;const W=ja(C.id||""),ye=Ie.trim()&&(C.nationalID&&C.nationalID===Ie.trim()||C.whatsappNumber&&C.whatsappNumber.includes(Ie.trim())||C.email&&C.email.toLowerCase()===Ie.trim().toLowerCase());return l.jsxs("div",{className:`user-card ${ye?"highlighted-match":""}`,children:[l.jsxs("div",{className:"user-card-header",children:[l.jsxs("div",{className:"user-info",children:[l.jsx("h3",{children:C.fullNameArabic}),l.jsx("span",{className:"user-email",children:C.email})]}),l.jsx("button",{onClick:()=>gu(C),className:"edit-user-button",title:" ",children:l.jsx(Eo,{size:18})})]}),l.jsxs("div",{className:"user-card-body",children:[l.jsxs("div",{className:"user-details-grid",children:[l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{className:"detail-label",children:" :"}),l.jsx("span",{className:"detail-value",children:C.vehicleNameEnglish||" "})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{className:"detail-label",children:" :"}),l.jsx("span",{className:"detail-value",children:C.whatsappNumber||" "})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{className:"detail-label",children:" :"}),l.jsx("span",{className:"detail-value",children:C.nationalID||" "})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{className:"detail-label",children:" :"}),l.jsx("span",{className:"detail-value",children:C.diplomaType||" "})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{className:"detail-label",children:":"}),l.jsx("span",{className:"detail-value",children:C.track||" "})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{className:"detail-label",children:" :"}),l.jsx("span",{className:"detail-value",children:C.diplomaYear||" "})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{className:"detail-label",children:":"}),l.jsx("span",{className:"detail-value",children:((oe=C.address)==null?void 0:oe.governorate)||" "})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{className:"detail-label",children:":"}),l.jsx("span",{className:"detail-value",children:((Ft=C.address)==null?void 0:Ft.city)||" "})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{className:"detail-label",children:":"}),l.jsx("span",{className:"detail-value",children:((pe=C.address)==null?void 0:pe.street)||" "})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{className:"detail-label",children:" :"}),l.jsx("span",{className:"detail-value",children:((rt=C.address)==null?void 0:rt.building)||" "})]})]}),l.jsxs("div",{className:"user-requests-section",children:[l.jsxs("h4",{children:[" (",W.length,")"]}),W.length===0?l.jsx("p",{className:"no-requests",children:"  "}):l.jsx("div",{className:"user-requests-list",children:W.map(ve=>l.jsxs("div",{className:"user-request-item",children:[l.jsxs("div",{className:"request-item-header",children:[l.jsx("span",{className:"request-service-name",children:Rn(ve.serviceId)}),As(ve.status)]}),l.jsx("div",{className:"request-item-date",children:ve.createdAt?new Date(ve.createdAt).toLocaleDateString("ar-EG"):" "}),l.jsxs("button",{onClick:()=>u(ve),className:"view-request-button",children:[l.jsx(Vh,{size:16})," "]})]},ve.id))})]})]})]},C.id)})})]})}),cn&&ce&&l.jsx("div",{className:"request-modal-overlay",onClick:()=>{kn(!1)},children:l.jsxs("div",{className:"request-modal",onClick:C=>C.stopPropagation(),children:[l.jsxs("div",{className:"modal-header",children:[l.jsx("h2",{children:"  "}),l.jsx("button",{onClick:()=>{kn(!1)},className:"close-button",children:l.jsx(mn,{size:24})})]}),l.jsx("div",{className:"modal-content",children:l.jsxs("div",{className:"edit-student-form",children:[l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"  *"}),l.jsx("input",{type:"text",value:ce.fullNameArabic||"",onChange:C=>_t({...ce,fullNameArabic:C.target.value}),className:"form-input"})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:" "}),l.jsx("input",{type:"text",value:ce.vehicleNameEnglish||"",onChange:C=>_t({...ce,vehicleNameEnglish:C.target.value}),className:"form-input"})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"  *"}),l.jsx("input",{type:"text",value:ce.whatsappNumber||"",onChange:C=>_t({...ce,whatsappNumber:C.target.value}),className:"form-input"})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"  *"}),l.jsx("input",{type:"text",value:ce.nationalID||"",onChange:C=>_t({...ce,nationalID:C.target.value}),className:"form-input"})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:" *"}),l.jsx("input",{type:"email",value:ce.email||"",onChange:C=>_t({...ce,email:C.target.value}),className:"form-input"})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:" "}),l.jsx("input",{type:"text",value:ce.diplomaType||"",onChange:C=>_t({...ce,diplomaType:C.target.value}),className:"form-input"})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:""}),l.jsx("input",{type:"text",value:ce.track||"",onChange:C=>_t({...ce,track:C.target.value}),className:"form-input"})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:" "}),l.jsx("input",{type:"text",value:ce.diplomaYear||"",onChange:C=>_t({...ce,diplomaYear:C.target.value}),className:"form-input"})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:""}),l.jsx("input",{type:"text",value:((ks=ce.address)==null?void 0:ks.governorate)||"",onChange:C=>_t({...ce,address:{...ce.address,governorate:C.target.value}}),className:"form-input"})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:""}),l.jsx("input",{type:"text",value:((un=ce.address)==null?void 0:un.city)||"",onChange:C=>_t({...ce,address:{...ce.address,city:C.target.value}}),className:"form-input"})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:""}),l.jsx("input",{type:"text",value:(($i=ce.address)==null?void 0:$i.street)||"",onChange:C=>_t({...ce,address:{...ce.address,street:C.target.value}}),className:"form-input"})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:" "}),l.jsx("input",{type:"text",value:((Hr=ce.address)==null?void 0:Hr.building)||"",onChange:C=>_t({...ce,address:{...ce.address,building:C.target.value}}),className:"form-input"})]})]}),l.jsxs("div",{className:"modal-actions",children:[l.jsxs("button",{onClick:ba,className:"save-button",children:[l.jsx(js,{size:18})," "]}),l.jsx("button",{onClick:()=>{kn(!1)},className:"cancel-button",children:""})]})]})})]})}),c&&l.jsx("div",{className:"request-modal-overlay",onClick:()=>u(null),children:l.jsxs("div",{className:"request-modal",onClick:C=>C.stopPropagation(),children:[l.jsxs("div",{className:"modal-header",children:[l.jsx("h2",{children:" "}),l.jsx("button",{onClick:()=>u(null),className:"close-button",children:l.jsx(mn,{size:24})})]}),l.jsxs("div",{className:"modal-content",children:[l.jsxs("div",{className:"modal-section",children:[l.jsx("h3",{children:" "}),i[c.studentId]&&l.jsxs("div",{className:"user-info-grid",children:[l.jsxs("div",{className:"info-item",children:[l.jsx("span",{className:"info-label",children:":"}),l.jsx("span",{className:"info-value",children:i[c.studentId].fullNameArabic})]}),l.jsxs("div",{className:"info-item",children:[l.jsx("span",{className:"info-label",children:":"}),l.jsx("span",{className:"info-value",children:i[c.studentId].email})]}),l.jsxs("div",{className:"info-item",children:[l.jsx("span",{className:"info-label",children:":"}),l.jsx("span",{className:"info-value",children:i[c.studentId].whatsappNumber})]})]})]}),l.jsxs("div",{className:"modal-section",children:[l.jsx("h3",{children:" "}),l.jsx("div",{className:"request-data-grid",children:Object.entries(c.data).map(([C,W])=>l.jsxs("div",{className:"data-item",children:[l.jsxs("span",{className:"data-label",children:[C,":"]}),l.jsx("span",{className:"data-value",children:String(W)})]},C))})]}),c.documents&&c.documents.length>0&&l.jsxs("div",{className:"modal-section",children:[l.jsxs("h3",{children:[" (",c.documents.length,")"]}),l.jsx("div",{className:"documents-grid",children:c.documents.map((C,W)=>l.jsxs("div",{className:"document-item",children:[C.type!=="PDF"&&C.url?l.jsx("img",{src:C.url,alt:C.name,className:"document-image",onClick:()=>{const ye=document.createElement("img");ye.src=C.url,ye.onload=()=>{const oe=window.open("","_blank");oe&&oe.document.write(`
                                    <html>
                                      <head>
                                        <title>${C.name}</title>
                                        <style>
                                          body { margin: 0; padding: 20px; display: flex; justify-content: center; align-items: center; min-height: 100vh; background: #f5f5f5; }
                                          img { max-width: 100%; max-height: 100vh; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.2); }
                                        </style>
                                      </head>
                                      <body>
                                        <img src="${C.url}" alt="${C.name}" />
                                      </body>
                                    </html>
                                  `)}},style:{cursor:"pointer"}}):l.jsx("div",{className:"document-placeholder",children:"PDF"}),l.jsx("span",{className:"document-name",children:C.name})]},W))})]})]})]})})]})},E2=()=>{const{isLoggedIn:t,logout:e}=Ns(),[n,r]=$.useState(t?"dashboard":"login"),[s,i]=$.useState(""),o=()=>{r("dashboard")},c=()=>{r("dashboard")},u=S=>{i(S),r("service")},d=()=>{r("profile")},p=()=>{r("allUsers")},m=()=>{r("admin")},g=()=>{e(),r("login")},_=()=>{r("dashboard")},R=()=>{r("dashboard")},P=()=>{r("register")},L=()=>{r("login")};return l.jsxs("div",{className:"app",children:[n==="login"&&!t&&l.jsx(f2,{onLoginSuccess:o,onGoToRegister:P,onAdminLogin:m}),n==="register"&&!t&&l.jsx(h2,{onRegistrationSuccess:c,onGoToLogin:L}),n==="dashboard"&&t&&l.jsx(m2,{onServiceClick:u,onProfileClick:d,onLogout:g,onAllUsersClick:p,onAdminClick:m}),n==="allUsers"&&t&&l.jsx(_2,{onBack:_}),n==="service"&&t&&l.jsx(y2,{serviceId:s,onBack:_,onSubmitSuccess:R}),n==="profile"&&t&&l.jsx(v2,{onBack:_}),n==="admin"&&t&&l.jsx(w2,{onLogout:g,onBack:_})]})},T2=()=>l.jsx($P,{children:l.jsx(E2,{})});md.createRoot(document.getElementById("root")).render(l.jsx(q1.StrictMode,{children:l.jsx(T2,{})}));
